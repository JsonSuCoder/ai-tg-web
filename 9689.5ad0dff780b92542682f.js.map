{"version":3,"file":"9689.5ad0dff780b92542682f.js","mappings":"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AK,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,EAAG,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,EAAG,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAE5qCC,EAAY,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI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","sources":["webpack://telegram-t/./src/components/common/FakeIcon.tsx","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/util/trapFocus.ts","webpack://telegram-t/./src/lib/fastBlur.js","webpack://telegram-t/./src/components/common/VerifiedIcon.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.module.scss?6448","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/components/common/AvatarStoryCircle.tsx","webpack://telegram-t/./src/util/hoc/freezeWhenClosed.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts"],"sourcesContent":["import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiFakeType } from '../../api/types';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport './FakeIcon.scss';\n\ntype OwnProps = {\n  fakeType: ApiFakeType;\n};\n\nconst FakeIcon: FC<OwnProps> = ({\n  fakeType,\n}) => {\n  const lang = useOldLang();\n\n  return (\n    <span className=\"FakeIcon\">\n      {lang(fakeType === 'fake' ? 'FakeMessage' : 'ScamMessage')}\n    </span>\n  );\n};\n\nexport default memo(FakeIcon);\n","import { IS_IOS } from './browser/windowEnvironment';\nimport forceReflow from './forceReflow';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport function stopScrollInertia(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","import type { RefObject } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\nimport type { Signal } from '../util/signals';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: RefObject<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n  getIsReady?: Signal<boolean>,\n  shouldDisablePropagation?: boolean,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap || (getIsReady && !getIsReady())) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink, getIsReady,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer, ApiPhoto, ApiWebDocument,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer, StoryViewerOrigin } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getPeerStoryHtmlId,\n  getUserFullName,\n  getVideoProfilePhotoMediaHash,\n  getWebDocumentHash,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isDeletedUser,\n  isUserId,\n} from '../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { getFirstLetters } from '../../util/textFormat';\nimport { REM } from './helpers/mediaDimensions';\nimport { getPeerColorClass } from './helpers/peerColor';\nimport renderText from './helpers/renderText';\n\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransitionDeprecated from '../../hooks/useMediaTransitionDeprecated';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AvatarStoryCircle from './AvatarStoryCircle';\nimport Icon from './icons/Icon';\n\nimport './Avatar.scss';\n\nconst LOOP_COUNT = 3;\n\nexport const AVATAR_SIZES = {\n  micro: REM,\n  mini: 1.5 * REM,\n  tiny: 2 * REM,\n  small: 2.125 * REM,\n  medium: 2.75 * REM,\n  large: 3.375 * REM,\n  giant: 5.625 * REM,\n  jumbo: 7.5 * REM,\n};\n\nexport type AvatarSize =\n  'micro' | 'mini' | 'tiny' | 'small' | 'medium' | 'large' | 'giant' | 'jumbo' | number;\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  peer?: ApiPeer | CustomPeer;\n  photo?: ApiPhoto;\n  webPhoto?: ApiWebDocument;\n  previewUrl?: string;\n  text?: string;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  withVideo?: boolean;\n  withStory?: boolean;\n  forPremiumPromo?: boolean;\n  withStoryGap?: boolean;\n  withStorySolid?: boolean;\n  forceFriendStorySolid?: boolean;\n  forceUnreadStorySolid?: boolean;\n  storyViewerOrigin?: StoryViewerOrigin;\n  storyViewerMode?: 'full' | 'single-peer' | 'disabled';\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  peer,\n  photo,\n  webPhoto,\n  previewUrl,\n  text,\n  isSavedMessages,\n  isSavedDialog,\n  withVideo,\n  withStory,\n  forPremiumPromo,\n  withStoryGap,\n  withStorySolid,\n  forceFriendStorySolid,\n  forceUnreadStorySolid,\n  storyViewerOrigin,\n  storyViewerMode = 'single-peer',\n  loopIndefinitely,\n  noPersonalPhoto,\n  onClick,\n}) => {\n  const { openStoryViewer } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const videoLoopCountRef = useRef(0);\n  const isCustomPeer = peer && 'isCustomPeer' in peer;\n  const realPeer = peer && !isCustomPeer ? peer : undefined;\n  const user = realPeer && isApiPeerUser(realPeer) ? realPeer : undefined;\n  const chat = realPeer && isApiPeerChat(realPeer) ? realPeer : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = realPeer && isChatWithRepliesBot(realPeer.id);\n  const isAnonymousForwards = realPeer && isAnonymousForwardsChat(realPeer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const pxSize = typeof size === 'number' ? size : AVATAR_SIZES[size];\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const isBig = pxSize >= AVATAR_SIZES.jumbo;\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer as ApiPeer, isBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = getVideoProfilePhotoMediaHash(photo);\n      }\n    } else if (webPhoto) {\n      imageHash = getWebDocumentHash(webPhoto);\n    }\n  }\n\n  const specialIcon = useMemo(() => {\n    if (isCustomPeer) {\n      return peer.avatarIcon;\n    }\n\n    if (isSavedMessages) {\n      return isSavedDialog ? 'my-notes' : 'avatar-saved-messages';\n    }\n\n    if (isDeleted) {\n      return 'avatar-deleted-account';\n    }\n\n    if (isReplies) {\n      return 'reply-filled';\n    }\n\n    if (isAnonymousForwards) {\n      return 'author-hidden';\n    }\n\n    return undefined;\n  }, [isCustomPeer, isSavedMessages, isDeleted, isReplies, isAnonymousForwards, peer, isSavedDialog]);\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const imgUrl = imgBlobUrl || previewUrl;\n  const hasBlobUrl = Boolean(imgUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransitionDeprecated(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useOldLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (specialIcon) {\n    content = (\n      <Icon\n        name={specialIcon}\n        className={cn.icon}\n        role=\"img\"\n        ariaLabel={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n          draggable={false}\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            draggable={false}\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (isCustomPeer) {\n    const title = peer.title || lang(peer.titleKey!);\n    content = title && getFirstLetters(title, 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isRoundedRect = (isCustomPeer && peer.isAvatarSquare)\n  || (isForum && !((withStory || withStorySolid) && realPeer?.hasStories));\n  const isPremiumGradient = isCustomPeer && peer.withPremiumGradient;\n  const customColor = isCustomPeer && peer.customPeerAvatarColor;\n\n  const fullClassName = buildClassName(\n    'Avatar',\n    className,\n    getPeerColorClass(peer),\n    !peer && text && 'hidden-user',\n    isSavedMessages && 'saved-messages',\n    isAnonymousForwards && 'anonymous-forwards',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isPremiumGradient && 'premium-gradient-bg',\n    isRoundedRect && 'forum',\n    (photo || webPhoto) && 'force-fit',\n    ((withStory && realPeer?.hasStories) || forPremiumPromo) && 'with-story-circle',\n    withStorySolid && realPeer?.hasStories && 'with-story-solid',\n    withStorySolid && forceFriendStorySolid && 'close-friend',\n    withStorySolid && (realPeer?.hasUnreadStories || forceUnreadStorySolid) && 'has-unread-story',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgUrl) && 'no-photo',\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (withStory && storyViewerMode !== 'disabled' && realPeer?.hasStories) {\n      e.stopPropagation();\n\n      openStoryViewer({\n        peerId: realPeer.id,\n        isSinglePeer: storyViewerMode === 'single-peer',\n        origin: storyViewerOrigin,\n      });\n      return;\n    }\n\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      id={realPeer?.id && withStory ? getPeerStoryHtmlId(realPeer.id) : undefined}\n      data-peer-id={realPeer?.id}\n      data-test-sender-id={IS_TEST ? realPeer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      style={buildStyle(`--_size: ${pxSize}px;`, customColor && `--color-user: ${customColor}`)}\n      onClick={handleClick}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"inner\">\n        {typeof content === 'string' ? renderText(content, [isBig ? 'hq_emoji' : 'emoji']) : content}\n      </div>\n      {withStory && realPeer?.hasStories && (\n        <AvatarStoryCircle peerId={realPeer.id} size={pxSize} withExtraGap={withStoryGap} />\n      )}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-param-reassign */\n/* eslint-disable prefer-const */\n/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\n\n/*\nSuperfast Blur - a fast Box Blur For Canvas\n\nVersion:     0.5\nAuthor:        Mario Klingemann\nContact:     mario@quasimondo.com\nWebsite:    http://www.quasimondo.com/BoxBlurForCanvas\nTwitter:    @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/140066/Superfast-Blur-a-pretty-fast-Box-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2011 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// eslint-disable-next-line max-len\nconst mul_table = [1, 57, 41, 21, 203, 34, 97, 73, 227, 91, 149, 62, 105, 45, 39, 137, 241, 107, 3, 173, 39, 71, 65, 238, 219, 101, 187, 87, 81, 151, 141, 133, 249, 117, 221, 209, 197, 187, 177, 169, 5, 153, 73, 139, 133, 127, 243, 233, 223, 107, 103, 99, 191, 23, 177, 171, 165, 159, 77, 149, 9, 139, 135, 131, 253, 245, 119, 231, 224, 109, 211, 103, 25, 195, 189, 23, 45, 175, 171, 83, 81, 79, 155, 151, 147, 9, 141, 137, 67, 131, 129, 251, 123, 30, 235, 115, 113, 221, 217, 53, 13, 51, 50, 49, 193, 189, 185, 91, 179, 175, 43, 169, 83, 163, 5, 79, 155, 19, 75, 147, 145, 143, 35, 69, 17, 67, 33, 65, 255, 251, 247, 243, 239, 59, 29, 229, 113, 111, 219, 27, 213, 105, 207, 51, 201, 199, 49, 193, 191, 47, 93, 183, 181, 179, 11, 87, 43, 85, 167, 165, 163, 161, 159, 157, 155, 77, 19, 75, 37, 73, 145, 143, 141, 35, 138, 137, 135, 67, 33, 131, 129, 255, 63, 250, 247, 61, 121, 239, 237, 117, 29, 229, 227, 225, 111, 55, 109, 216, 213, 211, 209, 207, 205, 203, 201, 199, 197, 195, 193, 48, 190, 47, 93, 185, 183, 181, 179, 178, 176, 175, 173, 171, 85, 21, 167, 165, 41, 163, 161, 5, 79, 157, 78, 154, 153, 19, 75, 149, 74, 147, 73, 144, 143, 71, 141, 140, 139, 137, 17, 135, 134, 133, 66, 131, 65, 129, 1];\n// eslint-disable-next-line max-len\nconst shg_table = [0, 9, 10, 10, 14, 12, 14, 14, 16, 15, 16, 15, 16, 15, 15, 17, 18, 17, 12, 18, 16, 17, 17, 19, 19, 18, 19, 18, 18, 19, 19, 19, 20, 19, 20, 20, 20, 20, 20, 20, 15, 20, 19, 20, 20, 20, 21, 21, 21, 20, 20, 20, 21, 18, 21, 21, 21, 21, 20, 21, 17, 21, 21, 21, 22, 22, 21, 22, 22, 21, 22, 21, 19, 22, 22, 19, 20, 22, 22, 21, 21, 21, 22, 22, 22, 18, 22, 22, 21, 22, 22, 23, 22, 20, 23, 22, 22, 23, 23, 21, 19, 21, 21, 21, 23, 23, 23, 22, 23, 23, 21, 23, 22, 23, 18, 22, 23, 20, 22, 23, 23, 23, 21, 22, 20, 22, 21, 22, 24, 24, 24, 24, 24, 22, 21, 24, 23, 23, 24, 21, 24, 23, 24, 22, 24, 24, 22, 24, 24, 22, 23, 24, 24, 24, 20, 23, 22, 23, 24, 24, 24, 24, 24, 24, 24, 23, 21, 23, 22, 23, 24, 24, 24, 22, 24, 24, 24, 23, 22, 24, 24, 25, 23, 25, 25, 23, 24, 25, 25, 24, 22, 25, 25, 25, 24, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23, 25, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 24, 22, 25, 25, 23, 25, 25, 20, 24, 25, 24, 25, 25, 22, 24, 25, 24, 25, 24, 25, 25, 24, 25, 25, 25, 25, 22, 25, 25, 25, 24, 25, 24, 25, 18];\n\nexport default function boxBlurCanvasRGB(context, top_x, top_y, width, height, radius, iterations) {\n  if (Number.isNaN(radius) || radius < 1) return;\n\n  radius |= 0;\n\n  if (Number.isNaN(iterations)) iterations = 1;\n  iterations |= 0;\n  if (iterations > 3) iterations = 3;\n  if (iterations < 1) iterations = 1;\n\n  const imageData = context.getImageData(top_x, top_y, width, height);\n\n  const pixels = imageData.data;\n\n  let rsum;\n  let gsum;\n  let bsum;\n  let x;\n  let y;\n  let i;\n  let p;\n  let p1;\n  let p2;\n  let yp;\n  let yi;\n  let yw;\n  let wm = width - 1;\n  let hm = height - 1;\n  let rad1 = radius + 1;\n\n  let r = [];\n  let g = [];\n  let b = [];\n\n  let mul_sum = mul_table[radius];\n  let shg_sum = shg_table[radius];\n\n  let vmin = [];\n  let vmax = [];\n\n  while (iterations-- > 0) {\n    yw = yi = 0;\n\n    for (y = 0; y < height; y++) {\n      rsum = pixels[yw] * rad1;\n      gsum = pixels[yw + 1] * rad1;\n      bsum = pixels[yw + 2] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        p = yw + (((i > wm ? wm : i)) << 2);\n        rsum += pixels[p++];\n        gsum += pixels[p++];\n        bsum += pixels[p++];\n      }\n\n      for (x = 0; x < width; x++) {\n        r[yi] = rsum;\n        g[yi] = gsum;\n        b[yi] = bsum;\n\n        if (y == 0) {\n          vmin[x] = ((p = x + rad1) < wm ? p : wm) << 2;\n          vmax[x] = ((p = x - radius) > 0 ? p << 2 : 0);\n        }\n\n        p1 = yw + vmin[x];\n        p2 = yw + vmax[x];\n\n        rsum += pixels[p1++] - pixels[p2++];\n        gsum += pixels[p1++] - pixels[p2++];\n        bsum += pixels[p1++] - pixels[p2++];\n\n        yi++;\n      }\n      yw += (width << 2);\n    }\n\n    for (x = 0; x < width; x++) {\n      yp = x;\n      rsum = r[yp] * rad1;\n      gsum = g[yp] * rad1;\n      bsum = b[yp] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        yp += (i > hm ? 0 : width);\n        rsum += r[yp];\n        gsum += g[yp];\n        bsum += b[yp];\n      }\n\n      yi = x << 2;\n      for (y = 0; y < height; y++) {\n        pixels[yi] = (rsum * mul_sum) >>> shg_sum;\n        pixels[yi + 1] = (gsum * mul_sum) >>> shg_sum;\n        pixels[yi + 2] = (bsum * mul_sum) >>> shg_sum;\n\n        if (x == 0) {\n          vmin[y] = ((p = y + rad1) < hm ? p : hm) * width;\n          vmax[y] = ((p = y - radius) > 0 ? p * width : 0);\n        }\n\n        p1 = x + vmin[y];\n        p2 = x + vmax[y];\n\n        rsum += r[p1] - r[p2];\n        gsum += g[p1] - g[p2];\n        bsum += b[p1] - b[p2];\n\n        yi += width << 2;\n      }\n    }\n  }\n\n  context.putImageData(imageData, top_x, top_y);\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport './VerifiedIcon.scss';\n\nconst VerifiedIcon: FC = () => {\n  return (\n    <svg className=\"VerifiedIcon\" viewBox=\"0 0 24 24\">\n      <path d=\"M12.3 2.9c.1.1.2.1.3.2.7.6 1.3 1.1 2 1.7.3.2.6.4.9.4.9.1 1.7.2 2.6.2.5 0 .6.1.7.7.1.9.1 1.8.2 2.6 0 .4.2.7.4 1 .6.7 1.1 1.3 1.7 2 .3.4.3.5 0 .8-.5.6-1.1 1.3-1.6 1.9-.3.3-.5.7-.5 1.2-.1.8-.2 1.7-.2 2.5 0 .4-.2.5-.6.6-.8 0-1.6.1-2.5.2-.5 0-1 .2-1.4.5-.6.5-1.3 1.1-1.9 1.6-.3.3-.5.3-.8 0-.7-.6-1.4-1.2-2-1.8-.3-.2-.6-.4-.9-.4-.9-.1-1.8-.2-2.7-.2-.4 0-.5-.2-.6-.5 0-.9-.1-1.7-.2-2.6 0-.4-.2-.8-.4-1.1-.6-.6-1.1-1.3-1.6-2-.4-.4-.3-.5 0-1 .6-.6 1.1-1.3 1.7-1.9.3-.3.4-.6.4-1 0-.8.1-1.6.2-2.5 0-.5.1-.6.6-.6.9-.1 1.7-.1 2.6-.2.4 0 .7-.2 1-.4.7-.6 1.4-1.2 2.1-1.7.1-.2.3-.3.5-.2z\" style=\"fill: var(--color-fill)\" />\n      <path d=\"M16.4 10.1l-.2.2-5.4 5.4c-.1.1-.2.2-.4 0l-2.6-2.6c-.2-.2-.1-.3 0-.4.2-.2.5-.6.7-.6.3 0 .5.4.7.6l1.1 1.1c.2.2.3.2.5 0l4.3-4.3c.2-.2.4-.3.6 0 .1.2.3.3.4.5.2 0 .3.1.3.1z\" style=\"fill: var(--color-checkmark)\" />\n    </svg>\n  );\n};\n\nexport default VerifiedIcon;\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer } from '../../types';\n\nimport { EMOJI_STATUS_LOOP_LIMIT } from '../../config';\nimport {\n  getChatTitle,\n  getUserFullName,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isChatWithVerificationCodesBot,\n} from '../../global/helpers';\nimport { isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport stopEvent from '../../util/stopEvent';\nimport renderText from './helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Transition from '../ui/Transition';\nimport CustomEmoji from './CustomEmoji';\nimport FakeIcon from './FakeIcon';\nimport StarIcon from './icons/StarIcon';\nimport VerifiedIcon from './VerifiedIcon';\n\nimport styles from './FullNameTitle.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer | CustomPeer;\n  className?: string;\n  noVerified?: boolean;\n  noFake?: boolean;\n  withEmojiStatus?: boolean;\n  emojiStatusSize?: number;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  noLoopLimit?: boolean;\n  canCopyTitle?: boolean;\n  iconElement?: React.ReactNode;\n  onEmojiStatusClick?: NoneToVoidFunction;\n  observeIntersection?: ObserveFn;\n  statusSparklesColor?: string;\n};\n\nconst FullNameTitle: FC<OwnProps> = ({\n  className,\n  peer,\n  noVerified,\n  noFake,\n  withEmojiStatus,\n  emojiStatusSize,\n  isSavedMessages,\n  isSavedDialog,\n  noLoopLimit,\n  canCopyTitle,\n  iconElement,\n  statusSparklesColor,\n  onEmojiStatusClick,\n  observeIntersection,\n}) => {\n  const lang = useOldLang();\n  const { showNotification } = getActions();\n  const realPeer = 'id' in peer ? peer : undefined;\n  const customPeer = 'isCustomPeer' in peer ? peer : undefined;\n  const isUser = realPeer && isApiPeerUser(realPeer);\n  const title = realPeer && (isUser ? getUserFullName(realPeer) : getChatTitle(lang, realPeer));\n  const isPremium = (isUser && realPeer.isPremium) || customPeer?.isPremium;\n  const canShowEmojiStatus = withEmojiStatus && !isSavedMessages;\n  const emojiStatus = realPeer?.emojiStatus\n    || (customPeer?.emojiStatusId ? { type: 'regular', documentId: customPeer.emojiStatusId } : undefined);\n\n  const handleTitleClick = useLastCallback((e) => {\n    if (!title || !canCopyTitle) {\n      return;\n    }\n\n    stopEvent(e);\n    copyTextToClipboard(title);\n    showNotification({ message: `${isUser ? 'User' : 'Chat'} name was copied` });\n  });\n\n  const specialTitle = useMemo(() => {\n    if (customPeer) {\n      return renderText(customPeer.title || lang(customPeer.titleKey!));\n    }\n\n    if (isSavedMessages) {\n      return lang(isSavedDialog ? 'MyNotes' : 'SavedMessages');\n    }\n\n    if (isAnonymousForwardsChat(realPeer!.id)) {\n      return lang('AnonymousForward');\n    }\n\n    if (isChatWithRepliesBot(realPeer!.id)) {\n      return lang('RepliesTitle');\n    }\n\n    if (isChatWithVerificationCodesBot(realPeer!.id)) {\n      return lang('VerifyCodesNotifications');\n    }\n\n    return undefined;\n  }, [customPeer, isSavedDialog, isSavedMessages, lang, realPeer]);\n  const botVerificationIconId = realPeer?.botVerificationIconId;\n\n  return (\n    <div className={buildClassName('title', styles.root, className)}>\n      {botVerificationIconId && (\n        <CustomEmoji\n          documentId={botVerificationIconId}\n          size={emojiStatusSize}\n          loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n          observeIntersectionForLoading={observeIntersection}\n        />\n      )}\n      <h3\n        dir=\"auto\"\n        role=\"button\"\n        className={buildClassName(\n          'fullName',\n          styles.fullName,\n          canCopyTitle && styles.canCopy,\n        )}\n        onClick={handleTitleClick}\n      >\n        {specialTitle || renderText(title || '')}\n      </h3>\n      {!iconElement && peer && (\n        <>\n          {!noVerified && peer?.isVerified && <VerifiedIcon />}\n          {!noFake && peer?.fakeType && <FakeIcon fakeType={peer.fakeType} />}\n          {canShowEmojiStatus && emojiStatus && (\n            <Transition\n              className={styles.statusTransition}\n              slideClassName={styles.statusTransitionSlide}\n              activeKey={Number(emojiStatus.documentId)}\n              name=\"slideFade\"\n              direction={-1}\n              shouldCleanup\n            >\n              <CustomEmoji\n                forceAlways\n                className=\"no-selection\"\n                withSparkles={emojiStatus.type === 'collectible'}\n                sparklesClassName=\"statusSparkles\"\n                sparklesStyle={buildStyle(statusSparklesColor && `color: ${statusSparklesColor}`)}\n                documentId={emojiStatus.documentId}\n                size={emojiStatusSize}\n                loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n                observeIntersectionForLoading={observeIntersection}\n                onClick={onEmojiStatusClick}\n              />\n            </Transition>\n          )}\n          {canShowEmojiStatus && !emojiStatus && isPremium && <StarIcon />}\n        </>\n      )}\n      {iconElement}\n    </div>\n  );\n};\n\nexport default memo(FullNameTitle);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QljEeKI5\",\"statusTransition\":\"KBZgFSv7\",\"fullName\":\"AS54Cntu\",\"canCopy\":\"vr53L_9p\",\"statusTransitionSlide\":\"xmVxyvNy\"};","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { ThemeKey } from '../../types';\n\nimport { selectPeerStories, selectTheme } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  peerId: string;\n  className?: string;\n  size: number;\n  withExtraGap?: boolean;\n}\n\ninterface StateProps {\n  peerStories?: Record<number, ApiTypeStory>;\n  storyIds?: number[];\n  lastReadId?: number;\n  appTheme: ThemeKey;\n}\n\nconst BLUE = ['#34C578', '#3CA3F3'];\nconst GREEN = ['#C9EB38', '#09C167'];\nconst PURPLE = ['#A667FF', '#55A5FF'];\nconst GRAY = '#C4C9CC';\nconst DARK_GRAY = '#737373';\nconst STROKE_WIDTH = 0.125 * REM;\nconst STROKE_WIDTH_READ = 0.0625 * REM;\nconst GAP_PERCENT = 2;\nconst SEGMENTS_MAX = 45; // More than this breaks rendering in Safari and Chrome\nconst LARGE_AVATAR_SIZE = 3.5 * REM;\n\nconst GAP_PERCENT_EXTRA = 10;\nconst EXTRA_GAP_ANGLE = Math.PI / 4;\nconst EXTRA_GAP_SIZE = (GAP_PERCENT_EXTRA / 100) * (2 * Math.PI);\nconst EXTRA_GAP_START = EXTRA_GAP_ANGLE - EXTRA_GAP_SIZE / 2;\nconst EXTRA_GAP_END = EXTRA_GAP_ANGLE + EXTRA_GAP_SIZE / 2;\n\nfunction AvatarStoryCircle({\n  size,\n  className,\n  peerStories,\n  storyIds,\n  lastReadId,\n  withExtraGap,\n  appTheme,\n}: OwnProps & StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  const dpr = useDevicePixelRatio();\n\n  const adaptedSize = size + STROKE_WIDTH;\n\n  const values = useMemo(() => {\n    return (storyIds || []).reduce((acc, id) => {\n      acc.total += 1;\n      if (lastReadId && id <= lastReadId) {\n        acc.read += 1;\n      }\n\n      return acc;\n    }, { total: 0, read: 0 });\n  }, [lastReadId, storyIds]);\n\n  const isCloseFriend = useMemo(() => {\n    if (!peerStories || !storyIds?.length) {\n      return false;\n    }\n\n    return storyIds.some((id) => {\n      const story = peerStories[id];\n      if (!story || !('isForCloseFriends' in story)) {\n        return false;\n      }\n      const isRead = lastReadId && story.id <= lastReadId;\n      return story.isForCloseFriends && !isRead;\n    });\n  }, [lastReadId, peerStories, storyIds]);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: ref.current,\n      size: adaptedSize * dpr,\n      segmentsCount: values.total,\n      color: isCloseFriend ? 'green' : 'blue',\n      readSegmentsCount: values.read,\n      withExtraGap,\n      readSegmentColor: appTheme === 'dark' ? DARK_GRAY : GRAY,\n      dpr,\n    });\n  }, [appTheme, isCloseFriend, adaptedSize, values.read, values.total, withExtraGap, dpr]);\n\n  if (!values.total) {\n    return undefined;\n  }\n\n  return (\n    <canvas\n      ref={ref}\n      className={buildClassName('story-circle', className)}\n      style={`max-width: ${adaptedSize}px; max-height: ${adaptedSize}px;`}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peerId }): StateProps => {\n  const peerStories = selectPeerStories(global, peerId);\n  const appTheme = selectTheme(global);\n\n  return {\n    peerStories: peerStories?.byId,\n    storyIds: peerStories?.orderedIds,\n    lastReadId: peerStories?.lastReadId,\n    appTheme,\n  };\n})(AvatarStoryCircle));\n\nexport function drawGradientCircle({\n  canvas,\n  size,\n  color,\n  segmentsCount,\n  readSegmentsCount = 0,\n  withExtraGap = false,\n  readSegmentColor,\n  dpr,\n}: {\n  canvas: HTMLCanvasElement;\n  size: number;\n  color: string;\n  segmentsCount: number;\n  readSegmentsCount?: number;\n  withExtraGap?: boolean;\n  readSegmentColor: string;\n  dpr: number;\n}) {\n  if (segmentsCount > SEGMENTS_MAX) {\n    readSegmentsCount = Math.round(readSegmentsCount * (SEGMENTS_MAX / segmentsCount));\n\n    segmentsCount = SEGMENTS_MAX;\n  }\n\n  const strokeModifier = Math.max(Math.max(size - LARGE_AVATAR_SIZE * dpr, 0) / dpr / REM / 1.5, 1) * dpr;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n\n  canvas.width = size;\n  canvas.height = size;\n  const centerCoordinate = size / 2;\n  const radius = (size - STROKE_WIDTH * strokeModifier) / 2;\n  const segmentAngle = (2 * Math.PI) / segmentsCount;\n  const gapSize = (GAP_PERCENT / 100) * (2 * Math.PI);\n  const gradient = ctx.createLinearGradient(\n    0,\n    0,\n    Math.ceil(size * Math.cos(Math.PI / 2)),\n    Math.ceil(size * Math.sin(Math.PI / 2)),\n  );\n\n  const colorStops = color === 'purple' ? PURPLE : color === 'green' ? GREEN : BLUE;\n  colorStops.forEach((colorStop, index) => {\n    gradient.addColorStop(index / (colorStops.length - 1), colorStop);\n  });\n\n  ctx.lineCap = 'round';\n  ctx.clearRect(0, 0, size, size);\n\n  Array.from({ length: segmentsCount }).forEach((_, i) => {\n    const isRead = i < readSegmentsCount;\n    let startAngle = i * segmentAngle - Math.PI / 2 + gapSize / 2;\n    let endAngle = startAngle + segmentAngle - (segmentsCount > 1 ? gapSize : 0);\n\n    ctx.strokeStyle = isRead ? readSegmentColor : gradient;\n    ctx.lineWidth = (isRead ? STROKE_WIDTH_READ : STROKE_WIDTH) * strokeModifier;\n\n    if (withExtraGap) {\n      if (startAngle >= EXTRA_GAP_START && endAngle <= EXTRA_GAP_END) { // Segment is inside extra gap\n        return;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_END) { // Extra gap is inside segment\n        ctx.beginPath();\n        ctx.arc(centerCoordinate, centerCoordinate, radius, EXTRA_GAP_END, endAngle);\n        ctx.stroke();\n\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_START) { // Segment ends in extra gap\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_END && endAngle > EXTRA_GAP_END) { // Segment starts in extra gap\n        startAngle = EXTRA_GAP_END;\n      }\n    }\n\n    ctx.beginPath();\n    ctx.arc(centerCoordinate, centerCoordinate, radius, startAngle, endAngle);\n    ctx.stroke();\n  });\n}\n","import { type FC, type Props, useRef } from '../../lib/teact/teact';\n\ntype InjectProps<T extends FC, P extends Props> = FC<Parameters<T>[0] & P>;\n\ntype OwnProps = {\n  ignoreFreeze?: boolean;\n};\n\nexport default function freezeWhenClosed<T extends FC>(Component: T): InjectProps<T, OwnProps> {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.ignoreFreeze) return Component(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePreviousDeprecated from './usePreviousDeprecated';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?, number?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean; offset: number } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n      fromOffset,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevListIds = usePreviousDeprecated(listIds);\n  const prevIsDisabled = usePreviousDeprecated(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop, fromOffset } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop, fromOffset,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      if (!noScroll) {\n        requestParamsRef.current = { ...requestParamsRef.current, direction, offsetId };\n      }\n\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, currentStateRef.current?.offset];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n    fromOffset: from,\n  };\n}\n\nexport default useInfiniteScroll;\n"],"names":["memo","FakeIcon","fakeType","lang","useOldLang","React","createElement","className","stopScrollInertia","element","style","display","forceReflow","resetScroll","container","scrollTop","IS_IOS","overflow","undefined","stopEvent","e","stopImmediatePropagation","preventDefault","stopPropagation","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","getIsReady","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","useState","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","useLastCallback","button","requestMutation","addExtraClass","target","handleContextMenu","removeExtraClass","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","useEffect","IS_TOUCH_ENV","current","timer","clearLongPressTimer","clearTimeout","startLongPressTimer","window","setTimeout","originalEvent","touches","document","addEventListener","IS_PWA","removeEventListener","capture","once","emulateContextMenuEvent","passive","useFastClick","callback","handler","type","MouseButton","Main","handleClick","handleMouseDown","counter","disableDirectTextInput","enableDirectTextInput","getIsDirectTextInputDisabled","AVATAR_SIZES","micro","REM","mini","tiny","small","medium","large","giant","jumbo","cn","createClassNameBuilder","media","icon","Avatar","size","peer","photo","webPhoto","previewUrl","text","isSavedMessages","isSavedDialog","withVideo","withStory","forPremiumPromo","withStoryGap","withStorySolid","forceFriendStorySolid","forceUnreadStorySolid","storyViewerOrigin","storyViewerMode","loopIndefinitely","noPersonalPhoto","onClick","openStoryViewer","getActions","ref","useRef","videoLoopCountRef","isCustomPeer","realPeer","user","isApiPeerUser","chat","isApiPeerChat","isDeleted","isDeletedUser","isReplies","isChatWithRepliesBot","id","isAnonymousForwards","isAnonymousForwardsChat","isForum","imageHash","videoHash","pxSize","shouldLoadVideo","isVideo","isBig","getChatAvatarHash","getVideoProfilePhotoMediaHash","getWebDocumentHash","specialIcon","useMemo","avatarIcon","imgBlobUrl","useMedia","ApiMediaFormat","BlobUrl","videoBlobUrl","imgUrl","hasBlobUrl","Boolean","shouldPlayVideo","transitionClassNames","useMediaTransitionDeprecated","handleVideoEnded","video","currentTarget","content","author","getUserFullName","getChatTitle","Icon","name","role","ariaLabel","Fragment","src","buildClassName","alt","decoding","draggable","OptimizedVideo","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","onEnded","userFullName","getFirstLetters","title","isUserId","titleKey","isRoundedRect","isAvatarSquare","hasStories","isPremiumGradient","withPremiumGradient","customColor","customPeerAvatarColor","fullClassName","getPeerColorClass","hasUnreadStories","hasMedia","peerId","isSinglePeer","origin","getPeerStoryHtmlId","IS_TEST","buildStyle","onMouseDown","renderText","AvatarStoryCircle","withExtraGap","trapFocus","handleKeyDown","key","focusableElements","Array","from","querySelectorAll","length","currentFocusedIndex","findIndex","em","isSameNode","activeElement","newFocusedIndex","shiftKey","focus","mul_table","shg_table","boxBlurCanvasRGB","context","top_x","top_y","width","height","radius","iterations","Number","isNaN","imageData","getImageData","pixels","data","rsum","gsum","bsum","i","p","p1","p2","yp","yi","yw","wm","hm","rad1","r","g","b","mul_sum","shg_sum","vmin","vmax","putImageData","VerifiedIcon","viewBox","d","FullNameTitle","noVerified","noFake","withEmojiStatus","emojiStatusSize","noLoopLimit","canCopyTitle","iconElement","statusSparklesColor","onEmojiStatusClick","observeIntersection","showNotification","customPeer","isUser","isPremium","canShowEmojiStatus","emojiStatus","emojiStatusId","documentId","handleTitleClick","copyTextToClipboard","message","specialTitle","isChatWithVerificationCodesBot","botVerificationIconId","CustomEmoji","loopLimit","EMOJI_STATUS_LOOP_LIMIT","observeIntersectionForLoading","dir","isVerified","Transition","slideClassName","activeKey","direction","shouldCleanup","forceAlways","withSparkles","sparklesClassName","sparklesStyle","StarIcon","useLayoutEffectWithPrevDeps","cb","dependencies","debugKey","prevDepsRef","useLayoutEffect","prevDeps","BLUE","GREEN","PURPLE","STROKE_WIDTH","STROKE_WIDTH_READ","GAP_PERCENT","SEGMENTS_MAX","LARGE_AVATAR_SIZE","EXTRA_GAP_ANGLE","Math","PI","EXTRA_GAP_SIZE","GAP_PERCENT_EXTRA","EXTRA_GAP_START","EXTRA_GAP_END","withGlobal","global","peerStories","selectPeerStories","appTheme","selectTheme","byId","storyIds","orderedIds","lastReadId","dpr","useDevicePixelRatio","adaptedSize","values","reduce","acc","total","read","isCloseFriend","some","story","isRead","isForCloseFriends","drawGradientCircle","canvas","segmentsCount","color","readSegmentsCount","readSegmentColor","round","strokeModifier","max","ctx","getContext","centerCoordinate","segmentAngle","gapSize","gradient","createLinearGradient","ceil","cos","sin","colorStops","forEach","colorStop","index","addColorStop","lineCap","clearRect","_","startAngle","endAngle","strokeStyle","lineWidth","beginPath","arc","stroke","freezeWhenClosed","Component","props","newProps","ignoreFreeze","isOpen","getViewportSlice","sourceIds","listSlice","offsetId","indexOf","indexForDirection","LoadMoreDirection","Forwards","to","newViewportIds","slice","areSomeLocal","areAllLocal","Backwards","newIsOnTop","fromOffset","useInfiniteScroll","loadMoreBackwards","listIds","isDisabled","requestParamsRef","currentStateRef","viewportIds","isOnTop","offset","forceUpdate","useForceUpdate","prevListIds","usePreviousDeprecated","prevIsDisabled","currentMiddleId","defaultOffsetId","includes","areSortedArraysEqual","getMore","noScroll"],"sourceRoot":""}