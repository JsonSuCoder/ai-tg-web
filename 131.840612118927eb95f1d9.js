"use strict";(self.webpackChunkTelyAI=self.webpackChunkTelyAI||[]).push([[131],{101:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(84051),o=n(87679),i=n(56863);function s(e){const t=(0,a.li)(),{result:n}=(0,i.A)(()=>{if(!e)return Promise.resolve(void 0);t.current&&URL.revokeObjectURL(t.current);const n=URL.createObjectURL(e);return t.current=n,(0,o.NN)(n)},[e]);return(0,a.vJ)(()=>()=>{t.current&&(URL.revokeObjectURL(t.current),t.current=void 0)},[]),{image:n}}},10187:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(84051),o=n(13439),i=n(70636),s=n(60919),c=n(87357),r=n(35049),l=n(59030),d=n(21849),m=n(34431),u=n(54746);const A=(0,a.ph)((0,o.EK)((e,{peerId:t,forceShowSelf:n})=>{if(!t)return{};const a=(0,s.PVB)(e,t),o=(0,s.mBe)(e,t);return{peer:a,isSavedMessages:!n&&o&&o.isSelf}})(({icon:e,title:t,isMinimized:n,canClose:o,isCloseNonDestructive:s,clickArg:A,peer:h,mockPeer:p,customPeer:g,className:y,isSavedMessages:f,withPeerColors:v,withEmojiStatus:C,onClick:E,itemClassName:S})=>{const I=(0,l.A)(),R=p||h,w=g||R,b=R&&(0,i.vj)(R)?R:void 0;let N,M,k;e&&t?(N=a.Ay.createElement("div",{className:"NtoGLT22"},a.Ay.createElement(u.A,{name:e,style:"f91Ad80i"})),M=t):w&&(N=a.Ay.createElement(d.A,{className:"La8BQ9yr",peer:w,size:"small",isSavedMessages:f}),k=(0,i.F9)(I,w)||t,M=t||a.Ay.createElement(m.A,{peer:w,isSavedMessages:f,withEmojiStatus:C}));const x=(0,c.A)("_Lq6_4e5",(b?.isForum||g?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",o&&"uvvgSFUJ",s&&"fAk5yEeV",!E&&"P8r3OoaX",v&&(0,r.y)(g||h),y);return a.Ay.createElement("div",{className:x,onClick:()=>E?.(A),title:n?k:void 0,dir:I.isRtl?"rtl":void 0},N,!n&&a.Ay.createElement("div",{className:(0,c.A)("XPVuH29G",S),dir:"auto"},M),o&&a.Ay.createElement("div",{className:"xVPG2UTy"},a.Ay.createElement(u.A,{name:"close"})))}))},11241:(e,t,n)=>{n.d(t,{A:()=>R});var a=n(84051),o=n(13439),i=n(90709),s=n(60919),c=n(87357),r=n(43336),l=n(76023),d=n(37661),m=n(5912),u=n(17712),A=n(62587),h=n(50680),p=n(47483),g=n(18104),y=n(87412),f=n(83594),v=n(17794),C=n(93879);const E=1.5*l.$,S=6.5*l.$,I=l.$,R=(0,a.ph)((0,o.EK)((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:a}=e,{activeReactions:o}=(0,s.nTw)(e),i=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:o?.[t],availableReactions:a.availableReactions,genericEffects:n,withEffects:i}})(({containerId:e,reaction:t,className:n,size:s=E,effectSize:l=S,activeReactions:R,availableReactions:w,genericEffects:b,withEffects:N,withEffectOnly:M,shouldPause:k,shouldLoop:x,loopLimit:P,observeIntersection:T})=>{const{stopActiveReaction:L}=(0,o.ko)(),D=(0,a.li)(),O="custom"===t.type,F=(0,a.Kr)(()=>w?.find(e=>(0,i.a0)(e.reaction,t)),[w,t]),B=F?.centerIcon?.id,{customEmoji:U}=(0,p.A)(O?t.documentId:void 0),_=(0,a.Kr)(()=>{if(!O)return F?.aroundAnimation?.id;if(!U)return;const e=w?.find(e=>e.reaction.emoticon===U.emoji)?.aroundAnimation?.id;return e},[F,w,U,O]),K=(0,a.Kr)(()=>{if(_)return _;if(!b?.stickers)return;const{stickers:e}=b;return e[Math.floor(Math.random()*e.length)].id},[_,b]),j=(0,m.Vz)(D,T),$=B&&(0,i.aL)(B),z=K&&(0,i.aL)(K),J=(0,A.A)($),H=(0,A.A)(z),q=(0,a.Kr)(()=>R?.find(e=>(0,i.a0)(e,t)),[R,t]),G=Boolean(N&&q&&(O||J)&&H),V=j&&(G&&!M||x),{shouldRender:W,transitionClassNames:Y}=(0,h.A)(G,void 0,!0,"slow"),{shouldRender:Z,transitionClassNames:X}=(0,h.A)(V,void 0,!0,"slow"),Q=(0,u.A)(()=>{L({containerId:e,reaction:t})}),[ee,te,ne]=(0,d.A)(),ae=!(O||V&&ee),{shouldRender:oe,transitionClassNames:ie}=(0,h.A)(ae,void 0,!0),se=(0,c.A)(C.A.root,W&&C.A.animating,M&&C.A.withEffectOnly,n);return a.Ay.createElement("div",{className:se,ref:D},!M&&oe&&a.Ay.createElement(v.A,{className:ie,reaction:t,availableReactions:w,size:s,observeIntersection:T}),!M&&O&&a.Ay.createElement(y.A,{documentId:t.documentId,className:C.A.customEmoji,size:s,noPlay:k,noVideoOnMobile:!0,loopLimit:P,observeIntersectionForPlaying:T,forceAlways:!0}),Z&&!O&&a.Ay.createElement(g.A,{key:`${B}-${s}`,className:(0,c.A)(C.A.animatedIcon,X),size:(0,r.Ki)(1.9*s),tgsUrl:J,play:j&&!k,noLoop:!x,onLoad:te,onEnded:ne,forceAlways:!0}),W&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(g.A,{key:`${K}-${l}`,className:(0,c.A)(C.A.effect,Y),size:l,tgsUrl:H,play:j,noLoop:!0,onEnded:Q,forceAlways:!0}),O&&!_&&j&&a.Ay.createElement(f.A,{reaction:t,className:Y,particleSize:Math.max(.5*s,I),onEnded:Q})))}))},14622:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(13439),i=n(81954),s=n(17712),c=n(93545),r=n(672);const l=function(e,t=!1){const{focusLastMessage:n}=(0,o.ko)(),l=(0,a.li)(0),d=(0,s.A)(e=>{const t=l.current,o=e.contentRect.height;if(l.current=o,(0,i.o8)()||!t||o<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,a.VK)(400);const c=o-t,{offsetHeight:r,scrollHeight:d,scrollTop:m}=s;Math.round(d-m-r)-c<=5&&n()}),m=(0,r.A)(d,[d],300,!1);(0,c.A)(e,m,!t)}},14737:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),o=n(17712);const i=function(e,t){const n=(0,o.A)(e);(0,a.vJ)(()=>{if("number"!=typeof t)return;const e=setTimeout(()=>n(),t);return()=>clearTimeout(e)},[t])}},15535:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(84051),o=n(31481),i=n(66644),s=n(96454),c=n(87357),r=n(83868),l=n(14737),d=n(43874),m=n(59030),u=n(64493),A=n(54746);const h=(0,a.ph)(({isLoading:e=!1,isPasswordVisible:t,error:n,hint:h,placeholder:p="Password",submitLabel:g="Next",description:y,shouldShowSubmit:f,shouldResetValue:v,shouldDisablePasswordManager:C=!1,noRipple:E=!1,clearError:S,onChangePasswordVisibility:I,onInputChange:R,onSubmit:w})=>{const b=(0,a.li)(),N=(0,m.A)(),{isMobile:M}=(0,d.Ay)(),[k,x]=(0,a.J0)(""),[P,T]=(0,a.J0)(!1),L=M?550:400;return(0,a.vJ)(()=>{v&&x("")},[v]),(0,l.A)(()=>{s.TF||b.current.focus()},L),(0,a.vJ)(()=>{n&&(0,i.RK)(()=>{b.current.focus(),b.current.select()})},[n]),a.Ay.createElement("form",{action:"",onSubmit:w?function(t){t.preventDefault(),e||P&&w(k)}:r.A,autoComplete:"off"},a.Ay.createElement("div",{className:(0,c.A)("input-group password-input",k&&"touched",n&&"error"),dir:N.isRtl?"rtl":void 0},C&&a.Ay.createElement("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),a.Ay.createElement("input",{ref:b,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:k||"",autoComplete:C?"one-time-code":"current-password",onChange:function(e){n&&S();const{target:t}=e;x(t.value),T(t.value.length>=o.AGC),R&&R(t.value)},maxLength:256,dir:"auto"}),a.Ay.createElement("label",null,n||h||p),a.Ay.createElement("div",{className:"div-button toggle-password",onClick:function(){I(!t)},role:"button",tabIndex:0,title:"Toggle password visibility","aria-label":"Toggle password visibility"},a.Ay.createElement(A.A,{name:t?"eye":"eye-crossed"}))),y&&a.Ay.createElement("p",{className:"description"},y),w&&(P||f)&&a.Ay.createElement(u.A,{size:"smaller",type:"submit",ripple:!E,isLoading:e,disabled:!P},g))})},15640:(e,t,n)=>{function a(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}n.d(t,{A:()=>a})},16460:(e,t,n)=>{function a(e,t){let n=0,a=0,o=e;for(;o&&o!==t&&!o.contains(t);)n+=o.offsetTop,a+=o.offsetLeft,o=o.offsetParent;return n-=t.clientTop,a-=t.clientLeft,{top:n,left:a}}n.d(t,{A:()=>a})},17794:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(90709),i=n(87357),s=n(62587),c=n(83057),r=n(87412),l=n(54746),d=n(61911);const m=(0,a.ph)(({reaction:e,availableReactions:t,className:n,size:m,withIconHeart:u,observeIntersection:A})=>{const h=(0,a.Kr)(()=>t?.find(t=>(0,o.a0)(t.reaction,e)),[t,e]),p=h?.staticIcon?.id,g=p?`document${p}`:void 0,y=(0,s.A)(g),f=(0,c.A)(y),v="emoji"===e.type&&"ðŸ¦„"===e.emoticon,C=u&&"emoji"===e.type&&"â¤"===e.emoticon;return"custom"===e.type?a.Ay.createElement(r.A,{documentId:e.documentId,className:(0,i.A)("ReactionStaticEmoji",n),size:m,observeIntersectionForPlaying:A}):C?a.Ay.createElement(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${m}px; width: ${m}px`}):a.Ay.createElement("img",{className:(0,i.A)("ReactionStaticEmoji",v&&"with-unicorn-fix",f,n),style:m?`width: ${m}px; height: ${m}px`:void 0,src:y||d,alt:h?.title,draggable:!1})})},20333:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(87357),i=n(95807),s=n(59030),c=n(93545),r=n(54746);const l="_b5HgBXr",d="P6mch4bB",m=(0,a.ph)(({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:m,progress:u,isPrimary:A,className:h})=>{const p=(0,s.A)(),g=(0,a.li)(),y=(0,a.li)(),[f,v]=(0,a.J0)(0),[C,E]=(0,a.J0)(0),S=()=>{if(g.current&&y.current&&void 0!==u){const e=g.current.offsetWidth,t=y.current.offsetWidth,n=e/2,a=t-e/2,o=u*t,i=Math.max(n,Math.min(o,a));let s;v(i/t),s=o<n?u*t/(2*n):o>a?.5+(u-a/t)/(1-a/t)*.4:.5,E(s)}};(0,a.vJ)(S,[u]),(0,c.A)(y,S);const I=Boolean(m||n),R=Boolean(u)&&u>.99;return a.Ay.createElement("div",{ref:y,className:(0,o.A)("nY2ggBsF",I&&"RYtVQAjM",A&&"Zi0w7QJ3",h),style:(0,i.A)(void 0!==u&&`--progress: ${u}`,void 0!==C&&`--tail-position: ${C}`,`--shift-x: ${f}`)},I&&a.Ay.createElement("div",{className:"dhigNjAq"},a.Ay.createElement("div",{className:"cOpfCGPh"},a.Ay.createElement("div",{className:"uNwBLNOy",ref:g},m&&a.Ay.createElement(r.A,{name:m,className:"MJ7MTmxi"}),n&&a.Ay.createElement("div",{className:"MwzZt3Qo",dir:p.isRtl?"rtl":void 0},n)),a.Ay.createElement("div",{className:"qRwO7SZm"},a.Ay.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},a.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"#7E85FF"}))))),a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,e)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,t)),a.Ay.createElement("div",{className:(0,o.A)("sZZV0yoe",R&&"m8ie8IxL")},a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,e)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,t))))})},24531:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(84051),o=n(31481),i=n(17663),s=n(80140),c=n(17712),r=n(59030),l=n(80089),d=n(80464);const m=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?a.Ay.createElement(n,e):void 0},u=(e,t,n)=>{const l=(0,r.A)(),[d,u]=(0,a.J0)(),A=(0,c.A)((e,t=!1)=>{const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());d?.(n),u(void 0)}),h=(0,c.A)(()=>{A(new Date(1e3*o.NkL),!0)}),p=(0,c.A)(()=>{u(void 0),t?.()}),g=(0,c.A)(e=>{u(()=>e)}),y=n?new Date(1e3*n):new Date;y.setSeconds(0),y.setMilliseconds(0);const f=new Date;return f.setFullYear(f.getFullYear()+1),[g,a.Ay.createElement(m,{isOpen:Boolean(d),withTimePicker:!0,selectedAt:y.getTime(),maxAt:(0,i.CS)(f),isFutureMode:!0,secondButtonLabel:e?l("Schedule.SendWhenOnline"):void 0,onClose:p,onSubmit:A,onSecondButtonClick:e?h:void 0})]}},26875:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(84051),o=n(87357),i=n(59030),s=n(21849);const c=(0,a.ph)(({peers:e,size:t,className:n,limit:c=3,badgeText:r})=>{const l=(0,i.A)(),d="number"==typeof t?t:s.R[t],m=(0,a.Kr)(()=>r||(!e?.length||e.length<=c?void 0:"+"+(e.length-c)),[r,e,c]);return a.Ay.createElement("div",{className:(0,o.A)(n,"kXs18Nmi"),style:`--_size: ${d}px;`,dir:l.isRtl?"rtl":"ltr"},e?.slice(0,c).map(e=>a.Ay.createElement(s.A,{size:t,peer:e,className:"XND8fhC1"})),m&&a.Ay.createElement("div",{className:"SHyAyGFO"},m))})},27860:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(66644),i=n(87357),s=n(45470),c=n(39351),r=n(17712),l=n(50680),d=n(54746);const m=(0,a.ph)(({isVisible:e,withAnimation:t,thumbDataUri:n,isNsfw:m,className:u,width:A,height:h})=>{const p=(0,a.li)(),g=(0,c.A)(),{shouldRender:y,transitionClassNames:f}=(0,l.A)(e,void 0,!0,!t&&void 0,void 0,500),v=(0,s.A)(n,!y,void 0,25,A,h),C=(0,r.A)(e=>{if(!p.current)return;const t=p.current,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,s=a-n.width/2,c=i-n.height/2;(0,o.RK)(()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${c}px`)})});if(y)return a.Ay.createElement("div",{className:(0,i.A)("qF2WgYVg",f,u,t&&"pNM3cgkY"),ref:p,onClick:t?C:void 0},a.Ay.createElement("canvas",{ref:v,className:"eULqS2yR",width:A,height:h}),a.Ay.createElement("div",{className:"XBor45hE"}),m&&a.Ay.createElement("span",{className:"FJGQoa6s"},a.Ay.createElement(d.A,{name:"eye-crossed-outline",className:"Y7JVRkxJ"}),g("MediaSpoilerSensitive")))})},29886:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(84051);function o(e){const t=(0,a.li)(),n=(0,a.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},31460:(e,t,n)=>{n.d(t,{P:()=>i});var a=n(31481),o=n(96454);function i(e,t,n=!1,i=!1){return n||t===a.dnp?"none":t===a.zHL?"slideFade":"slideOptimized"===e?i?"slideOptimizedRtl":"slideOptimized":"slide"===e?i?"slideRtl":"slide":o.Ni?"slideFade":o.pz?"slideLayers":"pushSlide"}},31722:(e,t,n)=>{n.d(t,{A:()=>a});const a={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},36838:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(84051);const o=(e,t,n=!1)=>{(0,a.vJ)(()=>{if(t)return;const a=e.current;function o(e){e.deltaX||(a.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return a.addEventListener("wheel",o,{passive:!n}),()=>{a.removeEventListener("wheel",o)}},[e,t,n])}},40558:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(84051),o=n(66644),i=n(90709),s=n(87357),c=n(95807),r=n(87679),l=n(17712),d=n(62587),m=n(93545),u=n(38691);const A=(0,a.ph)(({backgroundColors:e,patternColor:t,patternIcon:n,clearBottomSector:A,className:h})=>{const p=(0,a.li)(),g=(0,a.li)(),[y,f]=(0,a.Ul)({width:0,height:0}),v=(0,u.A)(),[C,E]=(0,a.J0)(),S=n&&(0,i.Mw)(n,"preview"),I=(0,d.A)(S);(0,a.vJ)(()=>{I&&(0,r.NN)(I).then(E)},[I]);const R=(0,a.Kr)(()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),a=t/3,o=.05+(.4-.05)*a,i=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+i;if(A&&s>.45*Math.PI&&s<.55*Math.PI)continue;const c=.5+1.71*o*Math.cos(s),r=.5+o*Math.sin(s),l=1.4-a*Math.random();e.push({x:c,y:r,sizeFactor:l})}}return e},[A]);(0,m.A)(p,e=>{f({width:e.contentRect.width,height:e.contentRect.height})}),(0,a.vJ)(()=>{const e=p.current;e&&f({width:e.clientWidth,height:e.clientHeight})},[f]);const w=(0,l.A)(()=>{const e=g.current;if(!e||!C)return;const n=e.getContext("2d"),{width:a,height:o}=e;if(!a||!o)return;n.save(),R.forEach(({x:e,y:t,sizeFactor:i})=>{const s=(a-Math.max(a,250*v))/2,c=e*Math.max(a,250*v)+s,r=t*Math.max(o,250*v)+s,l=20*v*i*(s?.8:1);n.drawImage(C,c-l/2,r-l/2,l,l)}),n.restore(),t&&(n.save(),n.fillStyle=t,n.globalCompositeOperation="source-atop",n.fillRect(0,0,a,o),n.restore());const i=n.createRadialGradient(a/2,o/2,0,a/2,o/2,a/2);i.addColorStop(0,"#FFFFFF77"),i.addColorStop(1,"#FFFFFF"),n.save(),n.globalCompositeOperation="destination-out",n.fillStyle=i,n.fillRect(0,0,a,o),n.restore()});return(0,a.vJ)(()=>{w()},[C]),(0,a.vJ)(()=>{const{width:e,height:t}=y(),n=g.current;if(!e||!t)return;const a=Math.max(e,t);(0,o.RK)(()=>{n.width=a*v,n.height=a*v,w()})},[y,v]),a.Ay.createElement("div",{ref:p,className:(0,s.A)("Af3tYFMg",h),style:(0,c.A)(`--_bg-1: ${e[0]}`,`--_bg-2: ${e[1]||e[0]}`)},a.Ay.createElement("canvas",{className:"GbpiDSS_",ref:g}))})},41512:(e,t,n)=>{n.d(t,{Y:()=>o});var a=n(43503);function o(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=a.A.get();return t.top<=n&&t.top+t.height>=0}},43581:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(84051),o=n(13439),i=n(90709),s=n(60919),c=n(87357),r=n(60343),l=n(15283),d=n(17712),m=n(59030),u=n(14242),A=n(76023),h=n(63527),p=n(10722),g=n(82117),y=n(39351),f=n(29886),v=n(34201),C=n(68292),E=n(26875),S=n(96454),I=n(58443),R=n(5912),w=n(4438),b=n(9267),N=n(93879);const M=1.5*A.$,k=6.5*A.$,x=S.pz||S.Ni?2:5,P=S.pz||S.Ni?2:3,T=(0,a.ph)((0,o.EK)((e,{containerId:t})=>{const{activeReactions:n}=(0,s.nTw)(e),a=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:a}})(({containerId:e,reaction:t,className:n,size:s=M,effectSize:r=k,activeReactions:l,localAmount:m,withEffects:u,observeIntersection:A})=>{const{stopActiveReaction:h}=(0,o.ko)(),p=(0,a.li)(),y=(0,a.li)(),[f,C]=(0,a.J0)([]),E=(0,R.Vz)(p,A),S=(0,a.Kr)(()=>l?.find(e=>(0,i.a0)(e,t)),[l,t]),T=Boolean(u&&S),L=f.length<x;(0,g.A)(([e])=>{T?!m||m<=(e||0)||L&&C(e=>[...e,Date.now()]):C([])},[m,L,T]);const{shouldRender:D}=(0,v.A)({ref:y,noMountTransition:!0,isOpen:T,className:"slow",withShouldRender:!0}),O=(0,d.A)(()=>{const n=f.slice(1);C(n),n.length||h({containerId:e,reaction:t})}),F=(0,c.A)(N.A.root,D&&N.A.animating,n);return a.Ay.createElement("div",{className:F,ref:p,teactFastList:!0},a.Ay.createElement(b.A,{key:"icon",type:"gold",size:"adaptive",style:`width: ${s}px; height: ${s}px`}),D&&f.map(e=>a.Ay.createElement(w.A,{key:e,ref:y,className:N.A.effect,size:r,tgsUrl:I.w.StarReactionEffect,play:E,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:P,onEnded:O})))}));var L=n(11241),D=n(85118),O=n(64493),F=n(69988);const B=1.25*A.$;function U(e){return e.stars}const _=(0,a.ph)(({reaction:e,containerId:t,isOwnMessage:n,recentReactors:s,className:r,chosenClassName:l,chatId:m,messageId:A,isOutside:S,observeIntersection:I,onClick:R,onPaidClick:w})=>{const{openStarsBalanceModal:b,resetLocalPaidReactions:N,openPaidReactionModal:M,requestWave:k}=(0,o.ko)(),x=(0,a.li)(),P=(0,a.li)(),_=(0,a.li)(),K=(0,y.A)(),j="paid"===e.reaction.type,$=(0,h.A)(U),z=Boolean($),J=(0,d.A)((e=1)=>{w?.(e)}),H=(0,d.A)(t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void J();R?.(e.reaction)}),{isContextMenuOpen:q,handleBeforeContextMenu:G,handleContextMenu:V,handleContextMenuClose:W,handleContextMenuHide:Y}=(0,p.A)(x,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,a.vJ)(()=>{q&&(M({chatId:m,messageId:A}),W(),Y())},[W,Y,q,m,A]),(0,g.A)(([t])=>{const n=e.localAmount,a=x.current;if(!n||!a||n===t?.localAmount)return;if(z&&n>$.balance.amount)return b({originReaction:{chatId:m,messageId:A,amount:n}}),void N({chatId:m,messageId:A});if(e.localAmount){const{left:e,top:t}=a.getBoundingClientRect(),n=e+a.offsetWidth/2,o=t+a.offsetHeight/2;k({startX:n,startY:o})}const o=Number(getComputedStyle(a).scale)||1;_.current?.cancel(),_.current=a.animate([{scale:o},{scale:Math.min(1.2*o,3),offset:.2},{scale:1}],{duration:500*o,easing:"ease-out"})},[e,$?.balance,z,m,A]);const Z=(0,f.A)(e.localAmount),{shouldRender:X}=(0,v.A)({isOpen:Boolean(e.localAmount),ref:P,className:"slow",withShouldRender:!0});return a.Ay.createElement(O.A,{className:(0,c.A)(F.A.root,n&&F.A.own,j&&F.A.paid,S&&F.A.outside,(0,i.eu)(e)&&F.A.chosen,(0,i.eu)(e)&&l,r),size:"tiny",ref:x,onMouseDown:G,onContextMenu:V,onClick:H},"paid"===e.reaction.type?a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(D.A,{preset:"button"}),a.Ay.createElement(T,{className:F.A.animatedEmoji,containerId:t,reaction:e.reaction,size:B,localAmount:e.localAmount,observeIntersection:I}),X&&a.Ay.createElement(C.A,{ref:P,text:`+${(0,u.Vw)(K,e.localAmount||Z)}`,className:F.A.paidCounter})):a.Ay.createElement(L.A,{className:F.A.animatedEmoji,containerId:t,reaction:e.reaction,size:B,observeIntersection:I}),s?.length?a.Ay.createElement(E.A,{size:"mini",peers:s}):a.Ay.createElement(C.A,{text:(0,u.Vw)(K,e.count+(e.localAmount||0)),className:F.A.counter}))});var K=n(92915);const j=(0,a.ph)(({message:e,threadId:t,isOutside:n,maxWidth:u,metaChildren:A,observeIntersection:h,noRecentReactors:p,isCurrentUserPremium:g,tags:y,isAccountFrozen:f})=>{const{toggleReaction:v,addLocalPaidReaction:C,updateMiddleSearch:E,performMiddleSearch:S,openPremiumModal:I,resetLocalPaidReactions:R,showNotification:w,openFrozenAccountModal:b}=(0,o.ko)(),N=(0,m.A)(),{results:M,areTags:k,recentReactions:x}=e.reactions,P=Boolean(e.areReactionsPossible&&e.reactions),T=(0,a.Kr)(()=>M.reduce((e,t)=>e+t.count,0),[M]),L=(0,a.Kr)(()=>{const e=(0,o.mS)();return x?.reduce((t,n)=>{const{reaction:a,peerId:o}=n,c=(0,i.Jj)(a),r=(0,s.PVB)(e,o);if(!r)return t;const l=t[c]||[];return l.push(r),t[c]=l,t},{})},[x]),D=(0,a.Kr)(()=>{const t=(0,r.bj)(e);return M.map(e=>{const n=(0,i.Jj)(e.reaction),a=L?.[n],o=T>3||p,s=k?y?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:o?void 0:a,isChosen:(0,i.eu)(e),tag:s}})},[e,p,L,M,k,y,T]),O=(0,d.A)(n=>{if(!f)return k?g?(E({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void S({chatId:e.chatId,threadId:t})):void I({initialSection:"saved_tags"}):void v({chatId:e.chatId,messageId:e.id,reaction:n});b()}),F=(0,a.Kr)(()=>M.find(e=>"paid"===e.reaction.type)?.localAmount||0,[M]),B=(0,d.A)(t=>{f?b():C({chatId:e.chatId,messageId:e.id,count:t})});(0,a.vJ)(()=>{F&&w({localId:(0,r.bj)(e),title:N("StarsSentTitle"),message:N("StarsSentText",F),actionText:N("StarsSentUndo"),cacheBreaker:F.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})},[N,e,F]);const U=(0,d.A)(t=>{f?b():v({chatId:e.chatId,messageId:e.id,reaction:t})});return(0,l.A)(()=>()=>{R({chatId:e.chatId,messageId:e.id})}),a.Ay.createElement("div",{className:(0,c.A)("Reactions",n&&"is-outside",P&&"is-service"),style:u?`max-width: ${u}px`:void 0,dir:N.isRtl?"rtl":"ltr"},D.map(({reaction:t,recentReactors:o,messageKey:i,reactionKey:s,isChosen:c,tag:r})=>k?a.Ay.createElement(K.A,{key:s,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,isChosen:c,reaction:t.reaction,tag:r,withContextMenu:g,onClick:O,onRemove:U,observeIntersection:h}):a.Ay.createElement(_,{key:s,chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,recentReactors:o,isOutside:n,reaction:t,onClick:O,onPaidClick:B,observeIntersection:h})),A)})},45470:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(84051),o=n(32610),i=n(66644),s=n(96454),c=n(35297);const r=2,l=2;function d(e,t=!1,n,d=r,m,u){const A=(0,a.li)(),h=(0,a.li)();return(0,c.A)(()=>{t||(h.current=!1)},[e,t]),(0,a.vJ)(()=>{const a=A.current;if(!e||!a||t||h.current)return;h.current=!0;const c=new Image,r=()=>{const e=m||c.width,t=u||c.height,n=a.getContext("2d",{alpha:!1});(0,i.RK)(()=>{a.width=e,a.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(c,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,o.A)(n,0,0,e,t,d,l)})};c.onload=()=>{n?(0,i.YS)(r):r()},c.src=e},[e,t,u,m,d,n]),A}},45780:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(96454),i=n(87357),s=n(17712),c=n(59030),r=n(42452);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:m,inactive:u,ripple:A,className:h,titleClassName:p,subtitleClassName:g,style:y,onClick:f,onDisabledClick:v})=>{const C=(0,c.A)(),E=!u&&!m,S=(0,s.A)(()=>{u||(m?v?.():f?.())});return a.Ay.createElement("div",{className:(0,i.A)("OHkx_W75",t&&"neXqB2_A",m&&"tvZeVJPh",E&&"VUSwo4t5",n&&"dMT9byM6",h),onClick:S,style:y,dir:C.isRtl?"rtl":void 0,role:E?"button":void 0,tabIndex:E?0:void 0},!m&&!u&&A&&a.Ay.createElement(r.A,null),Boolean(l)&&a.Ay.createElement("div",{className:(0,i.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm")},l),Boolean(n)&&a.Ay.createElement("div",{className:"dnAaRPCo"},n),a.Ay.createElement("div",{className:(0,i.A)("JSSC0N8V",p)},e),Boolean(t)&&a.Ay.createElement("div",{className:(0,i.A)("OYmzCSp2",g)},t),!l&&o.pz&&a.Ay.createElement("div",{className:"P53DrbWA"}))}},49086:(e,t,n)=>{n.d(t,{C:()=>u,V:()=>m});var a=n(13439),o=n(23174),i=n(90709),s=n(3544),c=n(60343),r=n(58849),l=n(4961),d=n(18501);function m({message:e,highlight:t,emojiSize:n,asPreview:a,truncateLength:o,isProtected:s,forcePlayback:l,shouldRenderAsHtml:m,isForMediaViewer:u,threadId:A,maxTimestamp:h}){const{text:p,entities:g}=e.content.text||{};if(!p){const t=(0,i.P5)(e)?.text;return t?[(0,r.A)(t,o)]:void 0}const y=(0,c.bj)(e);return(0,d.fd)({text:(0,r.A)(p,o),entities:g,highlight:t,emojiSize:n,shouldRenderAsHtml:m,containerId:`${u?"mv-":""}${y}`,asPreview:a,isProtected:s,forcePlayback:l,messageId:"id"in e?e.id:void 0,chatId:e.chatId,threadId:A,maxTimestamp:h})}function u(e,t,n=!1,c,d=s.vs){const{entities:u}=t.content.text||{},A=(0,a.mS)(),h=(0,i.ni)(A,t),p=u?.some(e=>e.type===o.C7.Spoiler),g=u?.some(e=>e.type===o.C7.CustomEmoji);if(!p&&!g){const a=(0,r.A)((0,s.dS)(e,t,h,n),d);return c?(0,l.A)(a,["emoji","highlight"],{highlight:c}):(0,l.A)(a)}const y=!n&&(0,s.Su)(t),f=y?`${y} `:"",v=m({message:t,highlight:c,asPreview:!0,truncateLength:d}),C=(0,s.oL)(e,t,h,v);return[...(0,l.A)(f),...Array.isArray(C)?C:[C]].filter(Boolean)}},49746:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),o=n(13439);function i(e,t,n,i,s){const{loadMessage:c}=(0,o.ko)();(0,a.vJ)(()=>{s||t&&!n&&c({chatId:e,messageId:t,replyOriginForId:i})},[s,e,n,t,i])}},54960:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(84051),o=n(13439),i=n(31481),s=n(66644),c=n(90709),r=n(70636),l=n(60919),d=n(87357),m=n(87894),u=n(79824),A=n(96374),h=n(17712),p=n(59030),g=n(19806),y=n(46222),f=n(40664),v=n(52745),C=n(24956),E=n(21849),S=n(34431),I=n(54746),R=n(10187),w=n(45780),b=n(31722);const N="PeerPickerItem",M=(0,a.ph)(({className:e,categories:t,itemIds:n,categoryPlaceholderKey:M,filterValue:k,filterPlaceholder:x,notFoundText:P,searchInputId:T,itemClassName:L,isLoading:D,noScrollRestore:O,isSearchable:F,lockedUnselectedSubtitle:B,forceShowSelf:U,isViewOnly:_,itemInputType:K,withStatus:j,withPeerTypes:$,withPeerUsernames:z,withDefaultPadding:J,onFilterChange:H,onDisabledClick:q,onLoadMore:G,...V})=>{const W=(0,p.A)(),Y=V.allowMultiple,Z=Y?V.lockedSelectedIds:void 0,X=Y?V.lockedUnselectedIds:void 0,Q=(0,a.Kr)(()=>Y?V.selectedCategories:V.selectedCategory?[V.selectedCategory]:u.p,[Y,V.selectedCategory,V.selectedCategories]),ee=(0,a.Kr)(()=>Y?V.selectedIds:V.selectedId?[V.selectedId]:u.p,[Y,V.selectedId,V.selectedIds]),te=(0,a.li)(),ne=ee.length>10;(0,a.vJ)(()=>{if(!F)return;const e=window.setTimeout(()=>{(0,s.YS)(()=>{te.current?.focus()})},500);return()=>{window.clearTimeout(e)}},[F]);const ae=(0,a.Kr)(()=>new Set(Z),[Z]),oe=(0,a.Kr)(()=>new Set(X),[X]),ie=(0,a.Kr)(()=>ee.filter(e=>!ae.has(e)),[ae,ee]),se=(0,a.Kr)(()=>t?(0,m.dU)(t,"type"):{},[t]),ce=(0,a.Kr)(()=>{if(k)return n;const e=[],t=[],a=[];return n.forEach(n=>{ae.has(n)?e.push(n):oe.has(n)?a.push(n):t.push(n)}),e.concat(t,a)},[k,n,ae,oe]),re=(0,h.A)(e=>{if(ae.has(e))q?.(e,!0);else if(oe.has(e))q?.(e,!1);else{if(Y&&se[e]){const t=se[e].type,n=Q?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void V.onSelectedCategoriesChange?.(n)}if(Y){const t=ee.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void V.onSelectedIdsChange?.(t)}se[e]?V.onSelectedCategoryChange?.(se[e].type):V.onSelectedIdChange?.(e)}}),le=(0,h.A)(e=>{const{value:t}=e.currentTarget;H?.(t)}),[de,me]=(0,A.A)(G,ce,Boolean(k)),ue=(0,a.hb)((e,t)=>{const n=(0,o.mS)(),s=t?se[e]:void 0,m=t?void 0:(0,l.PVB)(n,e),u=m||s;if(!u)return i.Oig?a.Ay.createElement("div",{key:e},"No peer or category with ID",e):void 0;const A=m&&!(0,r.vj)(m)?m.isSelf&&!U:void 0,h=oe.has(e),p=ae.has(e),y=h||p,f=s?Q?.includes(s.type):ee.includes(e),[v,R]=function(){if(h)return[B];if(m){if(z){const e=(0,c.Kl)(m);if(e)return[`@${e}`]}if(j){if((0,r.vj)(m))return[(0,c.sT)(W,m)];const e=(0,l.K0y)(n,m.id);return[(0,c.CD)(W,m,e),(0,d.A)((0,c.PF)(m,e,!0)&&b.A.onlineStatus)]}if($){const e=(0,r.cy)(m);return e&&[W(e)]}}}()||[];return a.Ay.createElement(w.A,{key:e,className:(0,d.A)(N,L),title:a.Ay.createElement(S.A,{peer:u}),avatarElement:a.Ay.createElement(E.A,{peer:m||s,isSavedMessages:A,size:"medium"}),subtitle:v,subtitleClassName:R,disabled:y,inactive:_,ripple:!0,inputElement:y?a.Ay.createElement(I.A,{name:"lock-badge"}):"radio"===K?a.Ay.createElement(C.A,{checked:f,disabled:y,onlyInput:!0}):"checkbox"===K?a.Ay.createElement(g.A,{checked:f,disabled:y,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>re(e),onDisabledClick:q&&(()=>q(e,p))})},[se,U,_,L,K,W,ae,oe,B,q,Q,ee,$,j,z]),Ae=(0,a.Kr)(()=>{if(t?.length)return a.Ay.createElement("div",{key:"categories"},M&&a.Ay.createElement("div",{className:b.A.pickerCategoryTitle},W(M)),t?.map(e=>ue(e.type,!0)),a.Ay.createElement("div",{className:b.A.pickerCategoryTitle},W("FilterChats")))},[t,M,W,ue]);return a.Ay.createElement("div",{className:(0,d.A)(b.A.container,e)},F&&a.Ay.createElement("div",{className:(0,d.A)(b.A.header,"custom-scroll"),dir:W.isRtl?"rtl":void 0},Q?.map(e=>a.Ay.createElement(R.A,{className:b.A.peerChip,customPeer:se[e],onClick:re,clickArg:e,canClose:!0})),Z?.map((e,t)=>a.Ay.createElement(R.A,{className:b.A.peerChip,peerId:e,isMinimized:ne&&t<ee.length-5,forceShowSelf:U,onClick:re,clickArg:e})),ie.map((e,t)=>a.Ay.createElement(R.A,{className:b.A.peerChip,peerId:e,isMinimized:ne&&t+(Z?.length||0)<ee.length-5,canClose:!0,onClick:re,clickArg:e})),a.Ay.createElement(f.A,{id:T,ref:te,value:k,onChange:le,placeholder:x||W("SelectChat")})),de?.length?a.Ay.createElement(y.A,{className:(0,d.A)(b.A.pickerList,J&&b.A.padded,"custom-scroll"),items:de,itemSelector:`.${N}`,beforeChildren:Ae,onLoadMore:me,noScrollRestore:O},de.map(e=>ue(e))):D||!de||de.length?a.Ay.createElement(v.A,null):a.Ay.createElement("p",{className:b.A.noResults},P||"Sorry, nothing found."))})},56133:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(16581);function o(e,t,n,o=[]){return(0,a.A)(e=>{e()},o,e,t,n)}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(13439),o=n(66644),i=n(60919),s=n(19822);const c=300,r=new Map;function l(e,t,n=c){(0,i.PKK)((0,a.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:m,scrollWidth:u,dataset:{scrollId:A}}=e;let h=t-d;if(h<0){const e=-d*(l?-1:1);h=Math.max(h,e)}else if(h>0){const e=u-(d+m);h=Math.min(h,e)}if(0===h)return Promise.resolve();A&&r.has(A)&&r.get(A)();const p=d+h;return new Promise(t=>{(0,o.RK)(()=>{if(0===n)return e.scrollLeft=p,void t();let a=!1;const i=Math.random().toString();e.dataset.scrollId=i,r.set(i,()=>{a=!0}),e.style.scrollSnapType="none";const c=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,r.delete(i)}(0,s.i0)(()=>{if(a)return l(),!1;const o=Math.min((Date.now()-c)/n,1),i=h*(1-function(e){return 1-(1-e)**3.5}(o));return e.scrollLeft=Math.round(p-i),o>=1&&(l(),t()),o<1},o.RK)})})}},58968:(e,t,n)=>{n.d(t,{I5:()=>s,LS:()=>i,V2:()=>o,lw:()=>a});const a={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},o=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],i=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},64489:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(84051),o=n(87357),i=n(95807),s=n(37661),c=n(17712),r=n(83057),l=n(4438);const d="lM2usrZU";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(null,arguments)}const u=new Set,A=(0,a.ph)(function(e){const{previewUrl:t,thumbDataUri:n,className:A,...h}=e,[p,,g]=(0,s.A)(Boolean(n)),y=(0,r.A)(p),[f,v,C]=(0,s.A)(u.has(t)),E=(0,r.A)(f),[S,I]=(0,s.A)(!1),R=(0,c.A)(()=>{v(),u.add(t)}),w=(0,c.A)(()=>{g(),C(),setTimeout(I,300)}),{size:b}=e;return a.Ay.createElement("div",{className:(0,o.A)(A,"xCi2f0YH"),style:(0,i.A)(void 0!==b&&`width: ${b}px; height: ${b}px;`)},n&&!S&&a.Ay.createElement("img",{src:n,className:(0,o.A)(d,y),draggable:!1}),t&&!S&&a.Ay.createElement("img",{src:t,className:(0,o.A)(d,E),draggable:!1,onLoad:R}),a.Ay.createElement(l.A,m({},h,{onLoad:w})))})},65632:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(84051),o=n(13439),i=n(31481),s=n(74824),c=n(87679);const r=(e,t)=>{const{setThemeSettings:n}=(0,o.ko)(),[r,l]=(0,a.J0)(t);return(0,a.vJ)(()=>{t&&(t.startsWith("#")?l(t):s.fetch(i.nfi,e,s.Type.Blob).then(e=>{const t=URL.createObjectURL(e);(0,c.NN)(t).then(()=>{l(`url(${t})`)})}).catch(()=>{n({theme:e,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?i.MkD:i.be8})}))},[t,e]),t?r:void 0}},66833:(e,t,n)=>{function a(e){return"starGift"===e.type?e.sticker:e.attributes.find(e=>"model"===e.type)?.sticker}function o(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function i(e){if("starGiftUnique"===e.type)return function(e){const t=e.find(e=>"model"===e.type),n=e.find(e=>"backdrop"===e.type),a=e.find(e=>"pattern"===e.type);return{model:t,originalDetails:e.find(e=>"originalDetails"===e.type),pattern:a,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>o,uc:()=>i,yQ:()=>a})},68292:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(84051),o=n(13439),i=n(60919),s=n(87357),c=n(37836),r=n(30857),l=n(39351),d=n(73767);let m=0;const u=(0,c.Fe)(()=>{m=0}),A=(0,a.ph)(({text:e,className:t,isDisabled:n,ref:c})=>{const{isRtl:A}=(0,l.A)(),h=(0,d.A)(e),p=(0,r.A)(),g=!(!(!n&&(0,i.PKK)((0,o.mS)())&&void 0!==h&&h!==e)||m>=10||(0===m&&u(),m++,0)),y=(0,a.Kr)(()=>g?function(e,t){const n=[],o=e.length,i=t?.length??0;for(let s=0;s<=o;s++){const c=o-s,r=i-s;t&&r>=0&&e[c]!==t[r]?n.unshift(a.Ay.createElement("div",{className:"IYTzbS8o"},a.Ay.createElement("div",{className:"Jw1oQFdk"},e[c]??""),a.Ay.createElement("div",{className:"TZfEz3sc"},t[r]),a.Ay.createElement("div",{className:"Y9ied8_t"},e[c]??""))):n.unshift(a.Ay.createElement("span",null,e[c]??""))}return n}(e,h):e,[g,h,e]);return(0,a.vJ)(()=>{if(!g)return;const e=window.setTimeout(()=>{p()},200);return()=>{window.clearTimeout(e)}},[g,e]),a.Ay.createElement("span",{ref:c,className:(0,s.A)(t,!n&&"tgKbsVmz"),dir:A?"rtl":void 0},y)})},69988:(e,t,n)=>{n.d(t,{A:()=>a});const a={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}},73104:(e,t,n)=>{let a,o;n.d(t,{M6:()=>r,v5:()=>l});const i={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!a||!a.contains(e.target)||a.scrollTop<=0&&t<=0||a.scrollTop>=a.scrollHeight-a.offsetHeight&&t>=0){if(o&&e.target.closest(o))return;e.preventDefault()}};function c(e){i[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const a=t.getAttribute("type");return!!a&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(a.toLowerCase())>-1}(e.target)&&e.preventDefault()}function r(e,t){return a=e,o=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=c,l}function l(){a=void 0,o=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},74984:(e,t,n)=>{n.d(t,{Jm:()=>A,Rh:()=>d,g5:()=>u,ic:()=>m});var a=n(84051),o=n(31481),i=n(49763),s=n(51217),c=n(96140),r=n(40708),l=n(30857);function d(e){const t=(0,l.A)();if((0,a.vJ)(()=>(0,i.Yw)(e,t),[e,t]),e===o.j7l)return(0,i.Xq)()[o.DSF];if(e===o.LFk)return(0,s.od)((0,i.YA)(o.DSF)?.filter(e=>!(0,c.uw)(e)));if(e===o.Sab)return(0,s.Ho)((0,i.YA)(o.DSF)?.filter(e=>!(0,c.uw)(e)));if(e===o.DSF){const t=(0,i.YA)(e);return t&&t?.indexOf(r.bL)<0?t?.unshift(r.bL):t?.sort((e,t)=>e===r.bL?-1:t===r.bL?1:0),t}return(0,i.YA)(e)}function m(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.P1)(e),[e]),(0,i.PZ)()}function u(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.BU)(e),[e]),(0,i.jn)()}function A(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.dk)(e),[e]),(0,i.Xq)()}},76283:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(84051),o=n(13439),i=n(90709),s=n(87357),c=n(17712),r=n(59030),l=n(54746),d=n(64493),m=n(96530),u=n(58443),A=n(76023),h=n(10722),p=n(4438),g=n(87412);const y="uGUjDZKl",f="M62HGuIV",v="WMpEr5XQ",C=2*A.$,E=(0,a.ph)(({reaction:e,chosen:t,isReady:n,noAppearAnimation:o,style:i,isLocked:r,onToggleReaction:d,onSendPaidReaction:m,onShowPaidReactionModal:A})=>{const E=(0,a.li)(),S=(0,c.A)(()=>{"paid"!==e.type?d(e):m?.()}),{isContextMenuOpen:I,handleBeforeContextMenu:R,handleContextMenu:w,handleContextMenuClose:b,handleContextMenuHide:N}=(0,h.A)(E,"paid"!==e.type,void 0,void 0,void 0,!0);return(0,a.vJ)(()=>{I&&(A?.(),b(),N())},[b,A,N,I]),a.Ay.createElement("div",{className:(0,s.A)(y,"oc1hpMwv",t&&"paid"!==e.type&&f,!o&&n&&"sx6RTuAU",o&&"kqcWe4tf"),ref:E,style:i,onClick:S,onMouseDown:R,onContextMenu:w},"paid"===e.type?a.Ay.createElement(p.A,{tgsUrl:u.w.StarReaction,size:C,noLoop:!1}):a.Ay.createElement(g.A,{documentId:e.documentId,size:C}),r&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))});var S=n(37661),I=n(62587),R=n(18104);const w=2*A.$,b=(0,a.ph)(({reaction:e,isReady:t,noAppearAnimation:n,chosen:o,isLocked:i,onToggleReaction:c})=>{const r=(0,I.A)(`sticker${e.appearAnimation?.id}`,!t||n),d=(0,I.A)(`document${e.selectAnimation?.id}`,!t||n),m=(0,I.A)(`document${e.staticIcon?.id}`,!n),[u,A]=(0,S.A)(),[h,,p]=(0,S.A)(!0),[g,C,E]=(0,S.A)();return a.Ay.createElement("div",{className:(0,s.A)(y,o&&f),onClick:function(){c(e.reaction)},onMouseEnter:t&&!h?C:void 0},n&&a.Ay.createElement("img",{className:"MZ2tH980",src:m,alt:e.reaction.emoticon,draggable:!1}),!u&&!n&&a.Ay.createElement(R.A,{key:e.appearAnimation?.id,tgsUrl:r,play:h,noLoop:!0,size:w,onEnded:p,forceAlways:!0}),!h&&!n&&a.Ay.createElement(R.A,{key:e.selectAnimation?.id,tgsUrl:d,play:g,noLoop:!0,size:w,onLoad:A,onEnded:E,forceAlways:!0}),i&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))}),N=(0,s.x)("ReactionSelector"),M=(0,a.ph)(({allAvailableReactions:e,topReactions:t,defaultTagReactions:n,enabledReactions:u,currentReactions:A,reactionsLimit:h,isPrivate:p,isReady:g,canPlayAnimatedEmojis:y,className:f,isCurrentUserPremium:v,isInSavedMessages:C,isInStoryViewer:S,isForEffects:I,effectReactions:R,isWithPaidReaction:w,onClose:M,onToggleReaction:k,onSendPaidReaction:x,onShowPaidReactionModal:P,onShowMore:T})=>{const{openPremiumModal:L}=(0,o.ko)(),D=(0,a.li)(),O=(0,r.A)(),F=C&&!v&&!S,B=Boolean(h&&A&&A.length>=h),U=(0,a.Kr)(()=>{const a=B?A?.map(e=>e.reaction):I?R:C?n:"some"===u?.type?u.allowed:e?.map(e=>e.reaction),o=a?.map(t=>{const n="custom"===t.type,a=e?.find(e=>(0,i.a0)(e.reaction,t));return I?a:(n||a)&&!a?.isInactive&&(p||B||u&&(0,i.A3)(t,u))?n?t:a:void 0}).filter(Boolean)||[],s=(0,i.fu)(o,t);return w&&s.unshift({type:"paid"}),s},[e,A,n,u,C,p,t,I,R,B,w]),_=(0,a.Kr)(()=>8===U.length?U:U.slice(0,7),[U]),K=_.length<U.length,j=(0,a.Kr)(()=>{const e=A?.filter(({chosenOrder:e})=>void 0!==e)||[];return new Set(e.map(({reaction:e})=>_.findIndex(t=>t&&(0,i.a0)("reaction"in t?t.reaction:t,e))))},[A,_]),$=(0,c.A)(()=>{const e=D.current?.getBoundingClientRect()||{x:0,y:0};T({x:e.x,y:e.y})}),z=(0,c.A)(()=>{M?.(),L({initialSection:"saved_tags"})}),J=(0,a.Kr)(()=>{if(C){if(!v){const e=O("lng_subscribe_tag_about").split("{link}");return a.Ay.createElement("span",null,e[0],a.Ay.createElement(m.A,{isPrimary:!0,onClick:z},O("lng_subscribe_tag_link")),e[1])}return O("SavedTagReactionsHint2")}return S?O("StoryReactionsHint"):I?O("AddEffectMessageHint"):void 0},[v,C,S,O,I]);if(_.length)return a.Ay.createElement("div",{className:(0,s.A)(N("&"),f),ref:D},a.Ay.createElement("div",{className:N("bubble-small",O.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:N("items-wrapper")},a.Ay.createElement("div",{className:N("bubble-big",O.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:N("items")},J&&a.Ay.createElement("div",{className:N("hint")},J),a.Ay.createElement("div",{className:N("reactions"),dir:O.isRtl?"rtl":void 0},_.map((e,t)=>"reaction"in e?a.Ay.createElement(b,{key:(0,i.Jj)(e.reaction),isReady:g,onToggleReaction:k,reaction:e,noAppearAnimation:!y,chosen:j.has(t),isLocked:F}):a.Ay.createElement(E,{key:(0,i.Jj)(e),isReady:g,onToggleReaction:k,onSendPaidReaction:x,onShowPaidReactionModal:P,reaction:e,noAppearAnimation:!y,chosen:j.has(t),isLocked:F,style:`--_animation-delay: ${20*(7-t)}ms`})),K&&a.Ay.createElement(d.A,{color:"translucent",className:N("show-more"),onClick:$},a.Ay.createElement(l.A,{name:"down"}))))))})},79174:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(84051),o=n(66644),i=n(43874);const s=500,c=300;function r(e,t,n){const{isMobile:r}=(0,i.Ay)();(0,a.vJ)(()=>{t?r||setTimeout(()=>{(0,o.RK)(()=>{e.current?.isConnected&&e.current.focus()})},s):(e.current?.isConnected&&e.current.blur(),n&&setTimeout(n,c))},[e,r,t,n])}},79519:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(61433),i=n(31481),s=n(66644),c=n(81954);const r=500,l=i.nxZ,d=20;function m({elementRef:e,chatId:t,isFocused:n,focusDirection:i,noFocusHighlight:m,isResizingContainer:u,isJustAdded:A,isQuote:h,scrollTargetPosition:p}){const g=(0,a.li)(!A);(0,a.Nf)(()=>{const t=g.current;if(g.current=!1,n&&e.current){const n=e.current.closest(".MessageList"),a=m,A=p||a?"end":"centerOrTop",g=()=>{const t=void 0!==i?a?r:l:void 0,m=(0,c.Ay)({container:n,element:e.current,position:A,margin:d,maxDistance:t,forceDirection:i,forceNormalContainerHeight:u,shouldReturnMutationFn:!0});if(h){const t=e.current.querySelector(".is-quote");t&&(0,s.RK)(()=>{(0,o.YM)(t,"animate")})}return m};t?(0,s.gm)(g):(0,s.YS)(()=>{(0,s.RK)(g())})}},[e,t,n,i,m,u,h,p])}},79577:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(23174),i=n(90709),s=n(62587),c=n(64489);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(null,arguments)}const l=(0,a.ph)(function(e){const{sticker:t,noLoad:n,forcePreview:l,...d}=e,m=t?.thumbnail?.dataUri,u=t&&(0,i.Mw)(t,"full"),A=(0,s.A)(t?(0,i.Mw)(t,"preview"):void 0,n&&!l,o.qZ.BlobUrl),h=(0,s.A)(u,n);return a.Ay.createElement(c.A,r({tgsUrl:h,previewUrl:A,thumbDataUri:m},d))})},79582:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(13439),o=n(60919),i=n(87894);const s=3e9,c=3e8;function r(e,t=!1,n,r){const l=(0,a.mS)();return(0,i.My)(e,e=>{if(e===r)return 1/0;const a=(0,o.hds)(l,e);if(!a)return 0;let i=0;const d=(0,o.yHC)(l,e);return d&&(i+=d.date),t&&a.isVerified&&(i+=s),n&&n.includes(e)&&(i=Date.now()+c+(n.length-n.indexOf(e))),i},"desc")}},80539:(e,t,n)=>{n.d(t,{Ay:()=>r,g4:()=>l,qh:()=>s});var a=n(23174),o=n(31481),i=n(96454);const s={B:a.C7.Bold,STRONG:a.C7.Bold,I:a.C7.Italic,EM:a.C7.Italic,INS:a.C7.Underline,U:a.C7.Underline,S:a.C7.Strike,STRIKE:a.C7.Strike,DEL:a.C7.Strike,CODE:a.C7.Code,PRE:a.C7.Pre,BLOCKQUOTE:a.C7.Blockquote},c=3;function r(e,t=!1,n=!1){const r=document.createElement("div");r.innerHTML=n?e:function(e){let t=e.slice(0);return t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=t.replace(/^`{3}(.*?)[\n\r](.*?[\n\r]?)`{3}/gms,'<pre data-language="$1">$2</pre>'),t=t.replace(/^`{3}[\n\r]?(.*?)[\n\r]?`{3}/gms,"<pre>$1</pre>"),t=t.replace(/[`]{3}([^`]+)[`]{3}/g,"<pre>$1</pre>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[`]{1}([^`\n]+)[`]{1}(?![^<]*<\/(code|pre)>)/g,"<code>$2</code>"),i.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">'),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[*]{2}([^*\n]+)[*]{2}(?![^<]*<\/(code|pre)>)/g,"<b>$2</b>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[_]{2}([^_\n]+)[_]{2}(?![^<]*<\/(code|pre)>)/g,"<i>$2</i>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[~]{2}([^~\n]+)[~]{2}(?![^<]*<\/(code|pre)>)/g,"<s>$2</s>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[|]{2}([^|\n]+)[|]{2}(?![^<]*<\/(code|pre)>)/g,`<span data-entity-type="${a.C7.Spoiler}">$2</span>`),t}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${o.kNZ}+?)\\)`,"g"),(e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`)}(e):e),l(r);const d=r.innerText.trim().replace(/\u200b+/g,"");let m=-r.innerText.indexOf(d[0]),u=0;const A=[];function h(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const o=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(s[e.nodeName])return s[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===a.C7.MentionName?a.C7.MentionName:t.dataset.entityType===a.C7.Url?a.C7.Url:t.href.startsWith("mailto:")?a.C7.Email:t.href.startsWith("tel:")?a.C7.Phone:t.href!==t.textContent?a.C7.TextUrl:a.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?a.C7.CustomEmoji:void 0}(e);if(!o||!e.textContent)return{index:n,entity:void 0};const i=t.indexOf(e.textContent,n),c=i>=0?i:n,r=t.substring(0,c).length,{length:l}=t.substring(c,c+e.textContent.length);if(o===a.C7.TextUrl)return{index:c,entity:{type:o,offset:r,length:l,url:e.href}};if(o===a.C7.MentionName)return{index:c,entity:{type:o,offset:r,length:l,userId:e.dataset.userId}};if(o===a.C7.Pre)return{index:c,entity:{type:o,offset:r,length:l,language:e.dataset.language}};if(o===a.C7.CustomEmoji)return{index:c,entity:{type:o,offset:r,length:l,documentId:e.dataset.documentId}};if(o===a.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:c,entity:void 0}:{index:c,entity:{type:o,offset:r,length:l,timestamp:t}}}return{index:c,entity:{type:o,offset:r,length:l}}}(e,d,m);if(n)m=t,A.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;m+=e.textContent.length}e.hasChildNodes()&&u<=c&&(u+=1,Array.from(e.childNodes).forEach(h))}return Array.from(r.childNodes).forEach(e=>{u=1,h(e)}),{text:d,entities:A.length?A:void 0}}function l(e){e.querySelectorAll("img").forEach(e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")})}},81686:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(31481);const o=1;function i(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,a.zPk);if(!t||0===t.childElementCount)return;const i=Array.from(t.children).reduce((e,t)=>t.nodeType===o&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce((e,t)=>e.concat(Number(t.dataset.messageId)),e):t.nodeType===o&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e,[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||i.pop(),i}function s(e,t){return!(e.nodeType!==o||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},81949:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),o=n(87357);const i=({children:e,className:t,onClick:n,onMouseDown:i})=>a.Ay.createElement("div",{className:(0,o.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n,onMouseDown:i},e)},81954:(e,t,n)=>{n.d(t,{Ay:()=>p,H$:()=>v,_v:()=>g,o8:()=>f});var a=n(84051),o=n(13439),i=n(89925),s=n(31481),c=n(66644),r=n(60919),l=n(96454),d=n(16460),m=n(19822);let u,A,h=!1;function p(e){u=e;const t=y(e);if(e.shouldReturnMutationFn)return t;(0,c.RK)(t)}function g(){h&&((0,m.vk)(),(0,c.YS)(()=>{(0,c.RK)(y(u))}))}function y(e){const{container:t,element:n,position:p,margin:g=0,maxDistance:y=s.nxZ,forceDirection:f,forceNormalContainerHeight:v}=e;let S=e.forceDuration;f!==i.CC.Static&&(0,r.PKK)((0,o.mS)())||(S=0);const{offsetHeight:I}=n,{scrollTop:R,clientHeight:w,scrollHeight:b}=t,N=(0,d.A)(n,t).top,M=v&&t.dataset.normalHeight?Number(t.dataset.normalHeight):w;let k;switch(p){case"start":k=N-g+(l.Ni?1:0);break;case"end":k=N+I+g-M;break;case"nearest":case"center":case"centerOrTop":k=I<M?N+I/2-M/2:N-g}const x=function(e,t,n=s.nxZ,a){const{scrollTop:o}=e;if(void 0===a){const e=t-o;if(e<-n)return o+(e+n);if(e>n)return o+(e-n)}else{if(a===i.CC.Up)return t+n;if(a===i.CC.Down)return Math.max(0,t-n)}return o}(t,k,y,f);let P=k-x;if(P<0){const e=-x;P=Math.max(P,e)}else if(P>0){const e=b-(x+M);P=Math.min(P,e)}const T=Math.abs(P);return()=>{if(T<1)return void(R!==x&&(t.scrollTop=x));const e=x+P;if(0===S)return void(t.scrollTop=e);const n=T<=s.s8T?C:E,o=S||s.SKD+T/s.nxZ*(s.OzO-s.SKD),i=Date.now();h=!0;const r=A;A=(0,a.VK)(void 0,!0),r?.(),(0,m.S0)(()=>{const a=Math.min((Date.now()-i)/o,1),s=P*(1-n(a)),c=Math.round(e-s);return t.scrollTop=c,h=a<1&&c!==e,h||(u=void 0,A?.(),A=void 0),h},c.RK)}}function f(){return h}function v(){A(),A=void 0}function C(e){return 1-(1-e)**3.5}function E(e){return 1-(1-e)**6}},83594:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(90709),i=n(96454),s=n(87357),c=n(95807),r=n(62587),l=n(87412);const d="PZAuNVZH",m=(0,a.ph)(({reaction:e,isLottie:t,className:n,particleSize:m,onEnded:u})=>{const A=(0,o.aL)(e.documentId,!0),h=(0,r.A)(t?void 0:A),p=(0,a.Kr)(()=>i.ol?Array.from({length:7}).map(()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(m)):[],[m]);if(h||t)return a.Ay.createElement("div",{className:(0,s.A)("aInga6VW",n),style:(0,c.A)(Boolean(m)&&`--particle-size: ${m}px`)},p.map((n,o)=>{const i=`--offset-path: path('${n}');`;return t?a.Ay.createElement(l.A,{documentId:e.documentId,className:d,style:i,withSharedAnimation:!0,size:m,onAnimationEnd:0===o?u:void 0}):a.Ay.createElement("img",{src:h,alt:"",className:d,style:i,draggable:!1,onAnimationEnd:0===o?u:void 0})}))})},92915:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(84051),o=n(13439),i=n(87357),s=n(76023),c=n(10722),r=n(37661),l=n(17712),d=n(59030),m=n(11241),u=n(64493),A=n(40664),h=n(22337);const p=(0,a.ph)(({isOpen:e,title:t,subtitle:n,placeholder:o,submitText:i,maxLength:s,initialValue:c="",onClose:r,onSubmit:m})=>{const p=(0,d.A)(),[g,y]=(0,a.J0)(c),f=(0,l.A)(e=>{y(e.target.value)}),v=(0,l.A)(()=>{m(g)});return a.Ay.createElement(h.A,{className:"narrow",title:t,isOpen:e,onClose:r,isSlim:!0},Boolean(n)&&a.Ay.createElement("div",{className:"cGrbcqD_"},n),a.Ay.createElement(A.A,{placeholder:o,value:g,onChange:f,maxLength:s,teactExperimentControlled:!0}),a.Ay.createElement("div",{className:"dialog-buttons mt-2"},a.Ay.createElement(u.A,{className:"confirm-dialog-button",onClick:v},i||p("Save")),a.Ay.createElement(u.A,{className:"confirm-dialog-button",isText:!0,onClick:r},p("Cancel"))))});var g=n(71429),y=n(24433),f=n(69988);const v=1.25*s.$,C=(0,a.ph)(({reaction:e,tag:t,containerId:n,isChosen:s,isOwnMessage:A,className:h,chosenClassName:C,withCount:E,isDisabled:S,withContextMenu:I,observeIntersection:R,onClick:w,onRemove:b})=>{const{editSavedReactionTag:N}=(0,o.ko)(),M=(0,a.li)(),k=(0,a.li)(),x=(0,d.A)(),[P,T,L]=(0,r.A)(),{title:D,count:O}=t||{},F=Boolean(D||E&&O),B=(0,l.A)(()=>{w?.(e)}),U=(0,l.A)(()=>{b?.(e)}),_=(0,l.A)(t=>{N({reaction:e,title:t}),L()}),{isContextMenuOpen:K,contextMenuAnchor:j,handleBeforeContextMenu:$,handleContextMenu:z,handleContextMenuClose:J,handleContextMenuHide:H}=(0,c.A)(M,!I,void 0,void 0,void 0,!0),q=(0,l.A)(()=>M.current),G=(0,l.A)(()=>document.body),V=(0,l.A)(()=>k.current),W=(0,l.A)(()=>({withPortal:!0,shouldAvoidNegativePosition:!0}));if(!E||0!==O)return a.Ay.createElement(u.A,{className:(0,i.A)(f.A.root,f.A.tag,A&&f.A.own,s&&f.A.chosen,s&&C,S&&f.A.disabled,h),size:"tiny",onClick:B,onMouseDown:$,onContextMenu:z,ref:M},a.Ay.createElement(m.A,{className:f.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:v,observeIntersection:R}),F&&a.Ay.createElement("span",{className:f.A.tagText},D&&a.Ay.createElement("span",null,D),E&&a.Ay.createElement("span",null,O)),a.Ay.createElement("svg",{className:f.A.tail,width:"15",height:"30",viewBox:"0 0 15 30"},a.Ay.createElement("path",{className:f.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})),I&&a.Ay.createElement(p,{isOpen:P,maxLength:15,title:x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:x("SavedTagLabelTagText"),placeholder:x("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:L,onSubmit:_}),I&&j&&a.Ay.createElement(g.A,{ref:k,isOpen:K,anchor:j,getTriggerElement:q,getRootElement:G,getMenuElement:V,getLayout:W,autoClose:!0,withPortal:!0,onClose:J,onCloseAnimationEnd:H},a.Ay.createElement(y.A,{icon:"tag-filter",onClick:B},x("SavedTagFilterByTag")),a.Ay.createElement(y.A,{icon:"tag-name",onClick:T},x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")),a.Ay.createElement(y.A,{icon:"tag-crossed",destructive:!0,onClick:U},x("SavedTagRemoveTag"))))})},93879:(e,t,n)=>{n.d(t,{A:()=>a});const a={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},99515:(e,t,n)=>{n.d(t,{A:()=>te});var a=n(84051),o=n(13439),i=n(23174),s=n(31481),c=n(90709),r=n(60919),l=n(56494),d=n(87357),m=n(85982),u=n(9716),A=n(80539);const h=document.createElement("div"),p=new Set([i.C7.Bold,i.C7.Italic,i.C7.Underline,i.C7.Strike,i.C7.Spoiler,i.C7.CustomEmoji]);function g(e){const t=function(e){const t=e.cloneContents();h.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let a=e.commonAncestorContainer.parentElement;for(;a&&!a.classList.contains("text-content");){const e=a.tagName.toLowerCase(),n=a.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,a=a.parentElement}return t}(e,h.innerHTML);return h.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter(e=>p.has(e.type));return{...e,entities:t.length?t:void 0}}((0,A.Ay)(t,!1,!0))}var y=n(37661),f=n(39351),v=n(17712),C=n(59030),E=n(24531),S=n(34201),I=n(80089),R=n(80464);const w=e=>{const{isOpen:t}=e,n=(0,R.A)(I.ar.Extra,"PinMessageModal",!t);return n?a.Ay.createElement(n,e):void 0};var b=n(94189),N=n(73104),M=n(76023),k=n(4961),x=n(17965),P=n.n(x),T=n(3544),L=n(96454),D=n(81686),O=n(58554),F=n(49086);function B(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,a=n?.closest(".Message.message-list-item");return(0,c.GZ)(e.id)===a?.id}function U(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var _=n(43874),K=n(26875),j=n(71429),$=n(24433),z=n(60859),J=n(55158),H=n(17663);const q="C3LVl_JT",G="cd1ZZeSy",V=(0,a.ph)(function({message:e}){const t=(0,C.A)(),{editDate:n}=e,o=!n;return a.Ay.createElement($.A,{icon:"clock-edit",className:q},o?a.Ay.createElement(J.A,{className:G}):Boolean(n)&&t("Chat.PrivateMessageEditTimestamp.Date",(0,H.U)(t,1e3*n)))});var W=n(76283),Y=n(41036);const Z=(0,a.ph)(function({message:e,shouldRenderShowWhen:t,canLoadReadDate:n,closeContextMenu:i}){const{openPrivacySettingsNoticeModal:s}=(0,o.ko)(),c=(0,C.A)(),{readDate:r}=e,l=n&&!r&&!t;return a.Ay.createElement($.A,{icon:"message-read",className:q},a.Ay.createElement(Y.Ay,{name:"fade",activeKey:l?1:2,className:"mg4sBQ9n"},l?a.Ay.createElement(J.A,{className:G}):a.Ay.createElement(a.Ay.Fragment,null,Boolean(r)&&c("PmReadAt",(0,H.U)(c,1e3*r)),!r&&t&&a.Ay.createElement("div",null,c("PmRead"),a.Ay.createElement("span",{className:"bmxij_dk",onClick:()=>{i(),s({chatId:e.chatId,isReadDate:!0})}},c("PmReadShowWhen"))))))}),X=(0,a.ph)(({isReactionPickerOpen:e,availableReactions:t,topReactions:n,defaultTagReactions:s,isOpen:l,message:A,poll:h,webPage:p,story:g,isPrivate:E,isCurrentUserPremium:S,enabledReactions:I,isWithPaidReaction:R,reactionsLimit:w,anchor:b,targetHref:x,canSendNow:H,canReschedule:q,canBuyPremium:G,canReply:Y,canQuote:X,canEdit:Q,canAppendTodoList:ee,noReplies:te,canPin:ne,canUnpin:ae,canDelete:oe,canForward:ie,canReport:se,canFaveSticker:ce,canUnfaveSticker:re,canCopy:le,canCopyLink:de,canSelect:me,canDownload:ue,canSaveGif:Ae,canRevote:he,canClosePoll:pe,canTranslate:ge,canShowOriginal:ye,canSelectLanguage:fe,isDownloading:ve,repliesThreadInfo:Ce,canShowSeenBy:Ee,canShowReactionsCount:Se,canShowReactionList:Ie,seenByRecentPeers:Re,hasCustomEmoji:we,customEmojiSets:be,canPlayAnimatedEmojis:Ne,isInSavedMessages:Me,shouldRenderShowWhen:ke,canLoadReadDate:xe,onReply:Pe,onOpenThread:Te,onEdit:Le,onAppendTodoList:De,onPin:Oe,onUnpin:Fe,onForward:Be,onDelete:Ue,onFaveSticker:_e,onReport:Ke,onUnfaveSticker:je,onSelect:$e,onSend:ze,onReschedule:Je,onClose:He,onCloseAnimationEnd:qe,onCopyLink:Ge,onCopyNumber:Ve,onDownload:We,onSaveGif:Ye,onCancelVote:Ze,onClosePoll:Xe,onShowSeenBy:Qe,onShowReactors:et,onToggleReaction:tt,onSendPaidReaction:nt,onShowPaidReactionModal:at,onCopyMessages:ot,onReactionPickerOpen:it,onTranslate:st,onShowOriginal:ct,onSelectLanguage:rt,userFullName:lt,canGift:dt})=>{const{showNotification:mt,openStickerSet:ut,openCustomEmojiSets:At,loadStickers:ht,openGiftModal:pt}=(0,o.ko)(),gt=(0,a.li)(),yt=(0,a.li)(),ft=(0,C.A)(),vt=(0,f.A)(),Ct=!E&&!I,Et=A.areReactionsPossible,St=Ie&&!Ct||Et,It="isEdited"in A&&A.isEdited,Rt=A.seenByDates,wt="giftPremium"===A.content.action?.type,bt="giftCode"===A.content.action?.type,Nt="starGift"===A.content.action?.type,Mt="starGiftUnique"===A.content.action?.type,kt=(0,u.L8)(A.chatId)&&dt&&(wt||bt||Nt||Mt),[xt,Pt]=(0,y.A)(),[Tt,Lt,Dt]=(0,y.A)(),{isMobile:Ot,isDesktop:Ft}=(0,_.Ay)(),Bt=(0,a.Kr)(()=>Rt?Object.keys(Rt).length:0,[Rt]),Ut=(0,v.A)(()=>{mt({message:ft("Share.Link.Copied")}),He()}),_t=(0,v.A)(()=>{pt({forUserId:A.chatId}),He()});(0,a.vJ)(()=>{l&&xt&&!e&&He()},[He,l,e,xt]),(0,a.vJ)(()=>{be?.length&&be.map(e=>ht({stickerSetInfo:{id:e.id,accessHash:e.accessHash}}))},[be,At]);const Kt=(0,v.A)(()=>{be&&(1===be.length?ut({stickerSetInfo:{shortName:be[0].shortName}}):At({setIds:be.map(e=>e.id)}),He())}),jt=function(e,t,n,a,s,l,d,u){const{webPage:A}=t||{},h=[],p=(0,c.P5)(e),g=(0,c.yl)(e)||((0,c.rU)(A)?void 0:(0,c.eY)(A)),y=(0,c.Qm)(e),f=g?(0,c.rI)(g,"full"):void 0,v=a&&g&&(f||(0,c.KG)(g))&&m.WO&&!L.Yw,C=window.getSelection();if(v&&h.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(f?O.hd(f,i.qZ.BlobUrl):g.blobUrl).then(m.qp),s?.()}}),a&&n)h.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,m.eM)(n),s?.()}});else if(a&&p){const n=Boolean(C?.anchorNode?.parentNode&&C.anchorNode.parentNode.closest(".Message .content-inner")&&""!==C.toString().replace(/(?:\r\n|\r|\n)/g,"")&&B(e));h.push({label:U(n),icon:"copy",handler:()=>{const a=(0,D.A)();if(a?.length&&d)d(a);else if(n)document.execCommand("copy");else{const n=(0,F.V)({message:e,shouldRenderAsHtml:!0});n&&(0,m.A)(n.join(""),(0,T.Gn)(e,t))}s?.()}})}else if(a&&p){const n=Boolean(C?.anchorNode?.parentNode&&C.anchorNode.parentNode.closest(".Message .content-inner")&&""!==C.toString().replace(/(?:\r\n|\r|\n)/g,"")&&B(e)),a=(0,o.mS)(),{id:i,chatId:c}=e,l=(0,r.RnX)(a,c),{autoTranslateLanguage:u}=a.settings.byKey,A=u&&i?l?.byLangCode[u]?.[i]:void 0,{isPending:p,text:g}=A||{};g&&!p?h.push({label:U(n),icon:"copy",handler:()=>{n?document.execCommand("copy"):P()(g.text),s?.()}}):h.push({label:U(n),icon:"copy",handler:()=>{const a=(0,D.A)();if(a?.length&&d)d(a);else if(n)document.execCommand("copy");else{const n=(0,F.V)({message:e,shouldRenderAsHtml:!0});n&&(0,m.A)(n.join(""),(0,T.Gn)(e,t))}s?.()}})}return l&&h.push({label:"lng_context_copy_message_link",icon:"link",handler:l}),y&&u&&h.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{u(),s?.()}}),h}(A,(0,c.FE)({poll:h,webPage:p,story:g}),x,le,Ut,de?Ge:void 0,ot,Ve),$t=(0,v.A)(()=>document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id="${A.id}"]`)),zt=(0,v.A)(()=>document.querySelector(".Transition_slide-active > .MessageList")),Jt=(0,v.A)(()=>document.querySelector(".MessageContextMenu .bubble")),Ht=(0,v.A)(()=>{const e=Ot&&document.querySelector(".AudioPlayer-content")?.offsetHeight||0,t=document.getElementById("MiddleColumn"),n=getComputedStyle(t),a=parseFloat(n.getPropertyValue("--middle-header-panes-height"))||0;return{extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,extraMarginTop:a+e,shouldAvoidNegativePosition:!Ft,menuElMinWidth:St&&Ot?19.25*M.$:void 0}});(0,a.vJ)(()=>{l?setTimeout(()=>{Lt()},200):Dt()},[l,Lt,Dt]),(0,a.vJ)(()=>(0,N.M6)(yt.current,".ReactionPicker"),[l]);const qt=(0,v.A)(e=>{it(e),Pt()});return a.Ay.createElement(j.A,{ref:gt,isOpen:l,anchor:b,getTriggerElement:$t,getRootElement:zt,getMenuElement:Jt,getLayout:Ht,withMaxHeight:!0,className:(0,d.A)("MessageContextMenu","fluid",St&&"with-reactions"),onClose:He,onCloseAnimationEnd:qe},St&&a.Ay.createElement(W.A,{enabledReactions:I,topReactions:n,allAvailableReactions:t,defaultTagReactions:s,currentReactions:A.reactions?.results,reactionsLimit:w,onToggleReaction:tt,onSendPaidReaction:nt,onShowPaidReactionModal:at,isWithPaidReaction:R,isPrivate:E,isReady:Tt,canBuyPremium:G,isCurrentUserPremium:S,isInSavedMessages:Me,canPlayAnimatedEmojis:Ne,onShowMore:qt,onClose:He,className:(0,d.A)(xt&&"ReactionSelector-hidden")}),a.Ay.createElement("div",{ref:yt,className:(0,d.A)("MessageContextMenu_items scrollable-content custom-scroll",xt&&"MessageContextMenu_items-hidden"),dir:ft.isRtl?"rtl":void 0},kt&&a.Ay.createElement($.A,{icon:"gift",onClick:_t},A?.isOutgoing?ft("SendAnotherGift"):ft("Conversation.ContextMenuSendGiftTo",lt)),H&&a.Ay.createElement($.A,{icon:"send-outline",onClick:ze},ft("MessageScheduleSend")),q&&a.Ay.createElement($.A,{icon:"schedule",onClick:Je},ft("MessageScheduleEditTime")),Y&&a.Ay.createElement($.A,{icon:"reply",onClick:Pe},ft(X?"lng_context_quote_and_reply":"Reply")),!te&&Boolean(Ce?.messagesCount)&&a.Ay.createElement($.A,{icon:"replies",onClick:Te},ft("Conversation.ContextViewReplies",Ce.messagesCount,"i")),Q&&a.Ay.createElement($.A,{icon:"edit",onClick:Le},ft("Edit")),ee&&a.Ay.createElement($.A,{icon:"add",onClick:De},vt("MenuButtonAppendTodoList")),ce&&a.Ay.createElement($.A,{icon:"favorite",onClick:_e},ft("AddToFavorites")),re&&a.Ay.createElement($.A,{icon:"favorite",onClick:je},ft("Stickers.RemoveFromFavorites")),ge&&a.Ay.createElement($.A,{icon:"language",onClick:st},ft("TranslateMessage")),ye&&a.Ay.createElement($.A,{icon:"language",onClick:ct},ft("ShowOriginalButton")),fe&&a.Ay.createElement($.A,{icon:"web",onClick:rt},ft("lng_settings_change_lang")),jt.map(e=>a.Ay.createElement($.A,{key:e.label,icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0},ft(e.label))),ne&&a.Ay.createElement($.A,{icon:"pin",onClick:Oe},ft("DialogPin")),ae&&a.Ay.createElement($.A,{icon:"unpin",onClick:Fe},ft("DialogUnpin")),Ae&&a.Ay.createElement($.A,{icon:"gifs",onClick:Ye},ft("lng_context_save_gif")),he&&a.Ay.createElement($.A,{icon:"revote",onClick:Ze},ft("lng_polls_retract")),pe&&a.Ay.createElement($.A,{icon:"stop",onClick:Xe},ft("lng_polls_stop")),ue&&a.Ay.createElement($.A,{icon:"download",onClick:We},ft(ve?"lng_context_cancel_download":"lng_media_download")),ie&&a.Ay.createElement($.A,{icon:"forward",onClick:Be},ft("Forward")),me&&a.Ay.createElement($.A,{icon:"select",onClick:$e},ft("Common.Select")),se&&a.Ay.createElement($.A,{icon:"flag",onClick:Ke},ft("lng_context_report_msg")),oe&&a.Ay.createElement($.A,{destructive:!0,icon:"delete",onClick:Ue},ft("Delete")),we&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(z.A,{size:"thick"}),!be&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(J.A,{inline:!0,className:"menu-loading-row"}),a.Ay.createElement(J.A,{inline:!0,className:"menu-loading-row"})),be&&1===be.length&&a.Ay.createElement($.A,{withWrap:!0,onClick:Kt,className:"menu-custom-emoji-sets"},(0,k.A)(ft("MessageContainsEmojiPack",be[0].title),["simple_markdown","emoji"])),be&&be.length>1&&a.Ay.createElement($.A,{withWrap:!0,onClick:Kt,className:"menu-custom-emoji-sets"},(0,k.A)(ft("MessageContainsEmojiPacks",be.length),["simple_markdown"]))),(Ee||Se)&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(z.A,{size:we?"thin":"thick"}),a.Ay.createElement($.A,{icon:Se?"heart-outline":"group",onClick:Se?et:Qe,disabled:!Se&&!Bt},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label-wrapper"},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label",dir:ft.isRtl?"rtl":void 0},Se&&A.reactors?.count?Ee&&Bt?ft("Chat.OutgoingContextMixedReactionCount",[A.reactors.count,Bt]):ft("Chat.ContextReactionCount",A.reactors.count,"i"):1===Bt&&Re?(0,k.A)((0,u.L8)(Re[0].id)?(0,c.Yg)(Re[0]):Re[0].title):Bt?ft("Conversation.ContextMenuSeen",Bt,"i"):ft("Conversation.ContextMenuNoViews"))),a.Ay.createElement(K.A,{className:"avatars",size:"micro",peers:Re}))),(xe||ke||It)&&a.Ay.createElement(z.A,{size:we?"thin":"thick"}),(xe||ke)&&a.Ay.createElement(Z,{canLoadReadDate:xe,shouldRenderShowWhen:ke,message:A,closeContextMenu:He}),It&&a.Ay.createElement(V,{message:A})))}),Q=window.getSelection(),ee=-1,te=(0,a.ph)((0,o.EK)((e,{message:t,messageListType:n,detectedLanguage:a})=>{const{threadId:o}=(0,r.Xf0)(e)||{},{defaultTags:i,topReactions:l,availableReactions:d}=e.reactions,m=(0,r.yuw)(e),A=(0,r.hds)(e,t.chatId),h=A&&(0,u.L8)(A.id),p=h?void 0:(0,r.AWZ)(e,t.chatId),g=(0,r.mBe)(e,t.chatId),y=g&&(0,c.Yg)(g),{seenByExpiresAt:f,seenByMaxChatMembers:v,maxUniqueReactions:C,readDateExpiresAt:E}=e.appConfig||{},S=p?.reactionsLimit||C,{noOptions:I,canReplyGlobally:R,canPin:w,canUnpin:b,canDelete:N,canReport:M,canEdit:k,canFaveSticker:x,canUnfaveSticker:P,canCopy:T,canCopyLink:L,canSelect:D,canDownload:O,canSaveGif:F,canRevote:B,canClosePoll:U}=o&&(0,r.WAX)(e,t,o)||{},_=(0,r.R4s)(e,t),K=h?(0,r.K0y)(e,A.id):void 0,j=(0,c.Ie)(t),$=A&&(0,r.yps)(e,A.id),z=Boolean($),J=(0,r.Jbz)(e,t),H=Boolean(h&&j&&!z&&!J&&E&&t.date>Date.now()/1e3-E&&!K?.isReadDateRestricted&&"scheduled"!==n),q=Boolean(H&&h&&(0,r.K0y)(e,A.id)?.isReadDateRestrictedByMe),G="pinned"===n,V="scheduled"===n,W=A&&(0,c.WX)(A),Y=o&&(0,r.Vw0)(e,t.chatId,o),Z=Boolean(Y&&!Y?.isCommentsInfo&&Y?.fromChannelId),X=o?(0,r.S0q)(e,t.chatId,o):void 0,Q=A&&!(0,c.Sq)(A,"sendPlain",p),ee=!(!A||!o)&&(0,c.__)(A,X,Z,p)&&Q,te=(0,c.Nb)(t),ne=(0,c.G5)(t),ae=Boolean(!te&&A&&!A.isMonoforum&&!J&&v&&f&&(0,c.YE)(A)&&j&&!V&&A.membersCount&&A.membersCount<=v&&t.date>Date.now()/1e3-f),oe=(0,c._P)(t),ie=!te&&!W&&!V&&!oe&&!h&&t.reactions&&!(0,c.G)(t.reactions)&&t.reactions.canSeeList,se=(0,r.ynf)(e,t),ce=Boolean(t.content.contact),re=(0,r.g29)(e),le=(0,r.S1W)(e,t),de=le?.map(t=>(0,r.ycM)(e,t)),me=de?.every(Boolean)?de:void 0,ue=(0,r.Rny)(e,t.chatId,t.id),Ae=ue?Boolean((0,r.a_$)(e,t.chatId,ue)[t.id]?.text):void 0,he=!Ae&&(0,r.S86)(e,t,a),pe=(0,r.qZq)(e,t.chatId),ge=(0,r.nZ4)(e,t.chatId),ye=(0,r.zcZ)(e,t),fe=t.content.storyData,ve=fe?(0,r.Msb)(e,fe.peerId,fe.id):void 0,Ce=(0,r.X2D)(e,t.chatId),Ee=(0,r.QP5)(e,t),Se=e.appConfig?.todoItemsMax||s.gyE;return{threadId:o,chat:A,availableReactions:d,topReactions:l,defaultTagReactions:i,noOptions:I,canReport:M,canSendNow:V,canReschedule:V,canReply:!G&&!V&&R,canPin:!V&&w,canUnpin:!V&&b,canDelete:N,canEdit:!G&&k,canAppendTodoList:t.content.todo?.todo.othersCanAppend&&t.content.todo?.todo.items?.length<Se,canForward:!V&&_,canFaveSticker:!V&&x,canUnfaveSticker:!V&&P,canCopy:ce||!se&&T,canCopyLink:!V&&L,canSelect:D,canDownload:!se&&O,canSaveGif:!se&&F,canRevote:B,canClosePoll:!V&&U,activeDownloads:m,canShowSeenBy:ae,canLoadReadDate:H,shouldRenderShowWhen:q,enabledReactions:A?.isForbidden?void 0:p?.enabledReactions,reactionsLimit:S,isPrivate:h,isCurrentUserPremium:re,hasFullInfo:Boolean(p),canShowReactionsCount:ie,canShowReactionList:!(te||oe||V||A?.id===s.zv8||ne),canBuyPremium:!re&&!(0,r.n_C)(e),customEmojiSetsInfo:le,customEmojiSets:me,canScheduleUntilOnline:(0,r.RBq)(e,t.chatId),canTranslate:he,canShowOriginal:Ae&&!pe,canSelectLanguage:Ae&&!pe,isMessageTranslated:Ae,canPlayAnimatedEmojis:(0,r.BWX)(e),isReactionPickerOpen:(0,r.Ani)(e),isInSavedMessages:ge,isChannel:W,canReplyInChat:ee,isWithPaidReaction:p?.isPaidReactionAvailable,poll:ye,story:ve,userFullName:y,canGift:Ce,savedDialogId:Ee}})(({threadId:e,availableReactions:t,topReactions:n,defaultTagReactions:r,isOpen:u,messageListType:A,message:h,customEmojiSetsInfo:p,customEmojiSets:I,album:R,poll:N,webPage:M,story:k,anchor:x,targetHref:P,noOptions:T,canSendNow:L,hasFullInfo:D,canReschedule:O,canReply:F,canPin:B,repliesThreadInfo:U,canUnpin:_,canDelete:K,canShowReactionsCount:j,chat:$,canReport:z,canShowReactionList:J,canEdit:H,canAppendTodoList:q,enabledReactions:G,reactionsLimit:V,isPrivate:W,isCurrentUserPremium:Y,canForward:Z,canBuyPremium:te,canFaveSticker:ne,canUnfaveSticker:ae,canCopy:oe,canCopyLink:ie,canSelect:se,canDownload:ce,canSaveGif:re,canRevote:le,canClosePoll:de,canPlayAnimatedEmojis:me,canLoadReadDate:ue,shouldRenderShowWhen:Ae,activeDownloads:he,noReplies:pe,canShowSeenBy:ge,canScheduleUntilOnline:ye,canTranslate:fe,isMessageTranslated:ve,canShowOriginal:Ce,canSelectLanguage:Ee,isReactionPickerOpen:Se,isInSavedMessages:Ie,canReplyInChat:Re,isWithPaidReaction:we,userFullName:be,canGift:Ne,className:Me,savedDialogId:ke,onClose:xe,onCloseAnimationEnd:Pe})=>{const{openThread:Te,updateDraftReplyInfo:Le,setEditingId:De,pinMessage:Oe,openForwardMenu:Fe,openReplyMenu:Be,faveSticker:Ue,unfaveSticker:_e,toggleMessageSelection:Ke,sendScheduledMessages:je,rescheduleMessage:$e,downloadMedia:ze,cancelMediaDownload:Je,loadSeenBy:He,openSeenByModal:qe,openReactorListModal:Ge,loadFullChat:Ve,loadReactors:We,copyMessagesByIds:Ye,saveGif:Ze,loadStickers:Xe,cancelPollVote:Qe,closePoll:et,toggleReaction:tt,requestMessageTranslation:nt,showOriginalMessage:at,openChatLanguageModal:ot,openMessageReactionPicker:it,openPremiumModal:st,loadOutboxReadDate:ct,copyMessageLink:rt,openDeleteMessageModal:lt,addLocalPaidReaction:dt,openPaidReactionModal:mt,reportMessages:ut,openTodoListModal:At,showNotification:ht}=(0,o.ko)(),pt=(0,C.A)(),gt=(0,f.A)(),{ref:yt}=(0,S.A)({isOpen:u,onCloseAnimationEnd:Pe,className:!1}),[ft,vt]=(0,a.J0)(!0),[Ct,Et]=(0,a.J0)(!1),[St,It,Rt]=(0,y.A)(),[wt,bt]=(0,a.J0)(ee),[Nt,Mt]=(0,E.A)(ye,xe,h.date),kt=void 0===p||Boolean(p.length);(0,a.vJ)(()=>{ge&&u&&He({chatId:h.chatId,messageId:h.id})},[He,u,h.chatId,h.id,ge]),(0,a.vJ)(()=>{ue&&u&&ct({chatId:h.chatId,messageId:h.id})},[ue,u,h.chatId,h.id,h.readDate]),(0,a.vJ)(()=>{j&&u&&We({chatId:h.chatId,messageId:h.id})},[j,u,We,h.chatId,h.id]),(0,a.vJ)(()=>{p?.length&&I?.length!==p.length&&p.forEach(e=>{Xe({stickerSetInfo:e})})},[p,I,Xe]),(0,a.vJ)(()=>{D||W||!u||Ve({chatId:h.chatId})},[D,u,W,Ve,h.chatId]);const xt=(0,a.Kr)(()=>{const e=(0,o.mS)().chats.byId,t=(0,o.mS)().users.byId;if(h.reactions?.recentReactions?.length){const n=new Set(h.reactions?.recentReactions?.map(({peerId:n})=>t[n]||e[n]));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(h.seenByDates)return Object.keys(h.seenByDates).slice(0,s.dqH).map(n=>t[n]||e[n]).filter(Boolean)},[h.reactions?.recentReactions,h.seenByDates]),Pt=(0,a.Kr)(()=>{const e=(0,o.mS)();if(R)return R.messages.some(t=>{const n=(0,l.iS)(e,t);return!!n&&(0,c.$r)(he,n)});const t=(0,l.iS)(e,h);return!!t&&(0,c.$r)(he,t)},[he,R,h]),Tt=F&&Q?.rangeCount?Q.getRangeAt(0):void 0;(0,a.vJ)(()=>{if(ve)return void bt(ee);if(!Tt||Tt.collapsed||!Boolean(h.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(Tt))return void bt(ee);const e=g(Tt),t=h.content.text.text.replace(/\u00A0/g," ");e.text.trim().length>0&&t.includes(e.text)?bt(Tt.startOffset):bt(ee)},[Tt,Tt?.collapsed,Tt?.startOffset,Tt?.endOffset,ve,h.content.text]);const Lt=(0,v.A)(()=>{vt(!1),xe()}),Dt=(0,v.A)(()=>{vt(!1),Lt();const e=R?.messages?R.messages.map(({id:e})=>e):[h.id];lt({chatId:h.chatId,messageIds:e,isSchedule:"scheduled"===A})}),Ot=(0,v.A)(()=>{Et(!1),xe()}),Ft=(0,v.A)(()=>{const e=wt!==ee&&Tt?g(Tt):void 0;Re?Le({replyToMsgId:h.id,quoteText:e,quoteOffset:wt,monoforumPeerId:ke,replyToPeerId:void 0}):Be({fromChatId:h.chatId,messageId:h.id,quoteText:e,quoteOffset:wt}),Lt()}),Bt=(0,v.A)(()=>{Te({chatId:h.chatId,threadId:h.id}),Lt()}),Ut=(0,v.A)(()=>{h.content.todo?At({chatId:h.chatId,messageId:h.id}):De({messageId:h.id}),Lt()}),_t=(0,v.A)(()=>{Y?At({chatId:h.chatId,messageId:h.id,forNewTask:!0}):ht({message:gt("SubscribeToTelegramPremiumForAppendToDo"),action:{action:"openPremiumModal",payload:{initialSection:"todo"}},actionText:pt("PremiumMore")}),Lt()}),Kt=(0,v.A)(()=>{vt(!1),Et(!0)}),jt=(0,v.A)(()=>{Oe({chatId:h.chatId,messageId:h.id,isUnpin:!0}),Lt()}),$t=(0,v.A)(()=>{if(Lt(),R?.messages){const e=R.messages.map(({id:e})=>e);Fe({fromChatId:h.chatId,messageIds:e})}else Fe({fromChatId:h.chatId,messageIds:[h.id]})}),zt=(0,v.A)(()=>{Lt(),Ue({sticker:h.content.sticker})}),Jt=(0,v.A)(()=>{Lt(),_e({sticker:h.content.sticker})}),Ht=(0,v.A)(()=>{Lt(),Qe({chatId:h.chatId,messageId:h.id})}),qt=(0,v.A)(()=>{Lt(),et({chatId:h.chatId,messageId:h.id})}),Gt=(0,v.A)(()=>{const e=R?.messages?{messageId:h.id,childMessageIds:R.messages.map(({id:e})=>e),withShift:!1}:{messageId:h.id,withShift:!1};Ke(e),Lt()}),Vt=(0,v.A)(()=>{je({chatId:h.chatId,id:h.id}),Lt()}),Wt=(0,v.A)(e=>{$e({chatId:h.chatId,messageId:h.id,scheduledAt:e}),xe()}),Yt=(0,v.A)(()=>{vt(!1),Nt(Wt)}),Zt=(0,v.A)(()=>{Lt(),qe({chatId:h.chatId,messageId:h.id})}),Xt=(0,v.A)(()=>{Lt(),Ge({chatId:h.chatId,messageId:h.id})}),Qt=(0,v.A)(e=>{Ye({messageIds:e}),Lt()}),en=(0,v.A)(()=>{rt({chatId:h.chatId,messageId:h.id,shouldIncludeThread:e!==i.l3,shouldIncludeGrouped:!0}),Lt()}),tn=(0,v.A)(()=>{(0,m.eM)(h.content.contact.phoneNumber),Lt()}),nn=(0,v.A)(()=>{const e=(0,o.mS)();(R?.messages||[h]).forEach(t=>{const n=(0,l.iS)(e,t);n&&(Pt?Je({media:n}):ze({media:n,originMessage:t}))}),Lt()}),an=(0,v.A)(()=>{const e=(0,c.zX)(h);Ze({gif:e}),Lt()}),on=(0,v.A)(e=>{Ie&&!Y?st({initialSection:"saved_tags"}):tt({chatId:h.chatId,messageId:h.id,reaction:e,shouldAddToRecent:!0}),Lt()}),sn=(0,v.A)(()=>{dt({chatId:h.chatId,messageId:h.id,count:1}),Lt()}),cn=(0,v.A)(()=>{mt({chatId:h.chatId,messageId:h.id}),Lt()}),rn=(0,v.A)(e=>{it({chatId:h.chatId,messageId:h.id,position:e})}),ln=(0,v.A)(()=>{nt({chatId:h.chatId,id:h.id}),Lt()}),dn=(0,v.A)(()=>{at({chatId:h.chatId,id:h.id}),Lt()}),mn=(0,v.A)(()=>{ot({chatId:h.chatId,messageId:h.id}),Lt()}),un=(0,a.Kr)(()=>(R?R.messages:[h]).map(({id:e})=>e),[R,h]),An=(0,v.A)(()=>{$&&(vt(!1),xe(),ut({chatId:$.id,messageIds:un}))});if(T)return void Lt();const hn=new Date;return hn.setFullYear(hn.getFullYear()+1),a.Ay.createElement("div",{ref:yt,className:(0,d.A)("ContextMenuContainer",Me)},a.Ay.createElement(X,{isReactionPickerOpen:Se,availableReactions:t,topReactions:n,defaultTagReactions:r,isWithPaidReaction:we,message:h,isPrivate:W,isCurrentUserPremium:Y,canBuyPremium:te,isOpen:ft,enabledReactions:G,reactionsLimit:V,anchor:x,targetHref:P,canShowReactionsCount:j,canShowReactionList:J,canSendNow:L,canReschedule:O,canReply:F,canQuote:wt!==ee,canDelete:K,canPin:B,canReport:z,repliesThreadInfo:U,canUnpin:_,canEdit:H,canAppendTodoList:q,canForward:Z,canFaveSticker:ne,canUnfaveSticker:ae,canCopy:oe,canCopyLink:ie,canSelect:se,canDownload:ce,canSaveGif:re,canRevote:le,canClosePoll:de,canShowSeenBy:ge,canTranslate:fe,canShowOriginal:Ce,canSelectLanguage:Ee,canPlayAnimatedEmojis:me,shouldRenderShowWhen:Ae,canLoadReadDate:ue,hasCustomEmoji:kt,customEmojiSets:I,isDownloading:Pt,seenByRecentPeers:xt,isInSavedMessages:Ie,noReplies:pe,poll:N,webPage:M,story:k,onOpenThread:Bt,onReply:Ft,onEdit:Ut,onAppendTodoList:_t,onPin:Kt,onUnpin:jt,onForward:$t,onDelete:Dt,onReport:An,onFaveSticker:zt,onUnfaveSticker:Jt,onSelect:Gt,onSend:Vt,onReschedule:Yt,onClose:Lt,onCopyLink:en,onCopyMessages:Qt,onCopyNumber:tn,onDownload:nn,onSaveGif:an,onCancelVote:Ht,onClosePoll:It,onShowSeenBy:Zt,onToggleReaction:on,onSendPaidReaction:sn,onShowPaidReactionModal:cn,onShowReactors:Xt,onReactionPickerOpen:rn,onTranslate:ln,onShowOriginal:dn,onSelectLanguage:mn,userFullName:be,canGift:Ne}),a.Ay.createElement(w,{isOpen:Ct,messageId:h.id,chatId:h.chatId,onClose:Ot}),a.Ay.createElement(b.A,{isOpen:St,onClose:Rt,text:pt("lng_polls_stop_warning"),confirmLabel:pt("lng_polls_stop_sure"),confirmHandler:qt}),O&&Mt)}))}}]);
//# sourceMappingURL=131.840612118927eb95f1d9.js.map