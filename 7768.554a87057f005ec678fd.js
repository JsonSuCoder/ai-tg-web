"use strict";(self.webpackChunkTeleGPT=self.webpackChunkTeleGPT||[]).push([[7768],{188:(e,t,a)=>{a.d(t,{k:()=>r});var s=a(14487),n=a(32989),o=a(13439);function r(e,t){(0,o.aJ)(e,(e,a,o)=>{const{tabId:r=(0,s.g0)()}=o||{};return(0,n.w)(e,{[t]:void 0},r)})}},383:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(96454);const n=s.pz||s.Ni;class o{constructor(e,t){var a,s,n;this.features=e,this.onFail=t,a=this,n=void 0,(s=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(s="preOpened"))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}preOpenIfNeeded(){n&&(this.preOpened=window.open("about:blank",void 0,this.features),this.preOpened?this.preOpened.blur():this.onFail?.())}open(e){if(this.preOpened)return this.preOpened.location.href=e,this.preOpened.focus(),void(this.preOpened=void 0);if(!n){const t=window.open(e,void 0,this.features);t?t.focus():this.onFail?.()}}cancelPreOpen(){this.preOpened?.close(),this.preOpened=void 0}}},889:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>M});var n=a(84051),o=a(61433),r=a(13439),i=a(23174),c=a(60919),d=a(87357),l=a(43874),u=a(15283),m=a(34201),h=a(5718),p=a(48885),g=a(63744),f=a(58269),y=a(17742),I=a(59876),A=a(60732),v=a(47934),b=a(44869),S=a(46407),w=e([g,f,y,I,A,v,b]);[g,f,y,I,A,v,b]=w.then?(await w)():w;const C={height:0},E=({className:e,chatId:t,threadId:a,messageListType:s,chat:r,userFullInfo:c,getCurrentPinnedIndex:w,getLoadingPinnedId:E,isAudioPlayerRendered:M,isMiddleSearchOpen:x,withRightColumnAnimation:k,onFocusPinnedMessage:P})=>{const{settings:T}=c||{},{isDesktop:F}=(0,l.Ay)(),[N,B]=(0,n.Ul)(C),[U,R]=(0,n.Ul)(C),[V,J]=(0,n.Ul)(C),[L,O]=(0,n.Ul)(C),[D,G]=(0,n.Ul)(C),[j,q]=(0,n.Ul)(C),[z,_]=(0,n.Ul)(C),K=M||!F,H=(0,n.li)(!0),{shouldRender:W,ref:$}=(0,m.A)({isOpen:!x,withShouldRender:!0,noMountTransition:!0});if((0,u.A)(()=>{H.current=!1}),(0,h.R)(()=>{const e=N(),t=j(),a=U(),s=[e,V(),L(),t,a,D(),z()],n=H.current,r=s.reduce((e,t)=>e+t.height,0),i=document.getElementById("MiddleColumn");i&&((0,p.S)(s,n),(0,o.Tv)(i,{"--middle-header-panes-height":`${r}px`}))},[N,V,U,L,D,j,z]),W)return n.Ay.createElement("div",{ref:$,className:(0,d.A)(S.A.root,k&&S.A.root_withRightColumnAnimation,e)},n.Ay.createElement(f.A,{isFullWidth:!0,onPaneStateChange:B,isHidden:F}),a===i.l3&&!r?.isForum&&n.Ay.createElement(g.A,{chatId:t,onPaneStateChange:J}),n.Ay.createElement(A.A,{chatId:t,canAddContact:T?.canAddContact,canBlockContact:T?.canBlockContact,canReportSpam:T?.canReportSpam,isAutoArchived:T?.isAutoArchived,onPaneStateChange:O}),n.Ay.createElement(I.A,{peerId:t,onPaneStateChange:q}),n.Ay.createElement(b.A,{peerId:t,onPaneStateChange:_}),n.Ay.createElement(v.A,{chatId:t,threadId:a,messageListType:s,onFocusPinnedMessage:P,getLoadingPinnedId:E,getCurrentPinnedIndex:w,onPaneStateChange:R,isFullWidth:!0,shouldHide:!K}),n.Ay.createElement(y.A,{chatId:t,messageListType:s,onPaneStateChange:G}))},M=(0,n.ph)((0,r.EK)((e,{chatId:t})=>{const{audioPlayer:a}=(0,c.nTw)(e),s=(0,c.hds)(e,t),n=(0,c.vGo)(e,t),{chatId:o,messageId:r}=a,i=o&&r?(0,c.O5q)(e,o,r):void 0,d=Boolean((0,c.TCk)(e));return{chat:s,userFullInfo:n,isAudioPlayerRendered:Boolean(i),isMiddleSearchOpen:d,withRightColumnAnimation:(0,c.MBp)(e)}})(E));s()}catch(e){s(e)}})},1229:(e,t,a)=>{a.d(t,{w:()=>h});var s=a(96540),n=a(46942),o=a.n(n),r=a(64721),i=a(88486),c=a(57674),d=a(10587),l=a(4955),u=a(70809);function m({status:e,stop:t,setMessages:a,handleInputSubmit:n,className:c}){const l=(0,s.useRef)(null),{width:u}=(0,i.lW)();(0,s.useEffect)(()=>{l.current&&m()},[]);const m=()=>{l.current&&(l.current.style.height="auto",l.current.style.height=`${Math.min(200,Math.max(90,l.current.scrollHeight+2))}px`)},[h,p]=(0,i.Mj)("input",""),[f,I]=(0,s.useState)("");(0,s.useEffect)(()=>{if(l.current){const e=l.current.value;I(e||h||""),m()}},[]),(0,s.useEffect)(()=>{p(f)},[f,p]);const A=(0,s.useCallback)(()=>{f&&(n(f),I(""),p(""),l.current&&(l.current.style.height="auto",l.current.style.height="90px"),u&&u>768&&l.current?.focus())},[n,f,p,u]);return s.createElement("div",{className:"relative w-full flex flex-col gap-4"},s.createElement(d.X,{ref:l,placeholder:"Ask me about your chats...",value:f,onChange:e=>{I(e.target.value),m()},className:o()("h-[90px] overflow-y-auto border-[#7D40FF] resize-none rounded-2xl !text-base pb-10 focus-visible:!ring-0 !ring-offset-0 dark:border-[#2F2F2F]",c),rows:2,autoFocus:!0,onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),"ready"!==e?r.oR.error("Please wait for the model to finish its response!"):A())}}),s.createElement("div",{className:"absolute bottom-0 right-0 p-2 w-fit flex flex-row items-center justify-end"},"submitted"===e?s.createElement(g,{stop:t,setMessages:a}):s.createElement(y,{input:f,submitForm:A})))}const h=(0,s.memo)(m,(e,t)=>e.status===t.status);function p({stop:e,setMessages:t}){return s.createElement(l.$,{onClick:a=>{a.preventDefault(),e(),t(e=>(0,c.y8)(e))}},s.createElement(u.wF,{size:14}))}const g=(0,s.memo)(p);function f({submitForm:e,input:t}){return s.createElement(l.$,{onClick:t=>{t.preventDefault(),e()},disabled:0===t.length},s.createElement("i",{className:"icon icon-send text-[#B27AFF] text-[24px]"}))}const y=(0,s.memo)(f,(e,t)=>e.input===t.input)},1630:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"PrivacySettingsNoticeModal",!t);return a?s.Ay.createElement(a,e):void 0}},1835:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"StoryStatistics");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},1894:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"ForwardRecipientPicker",!t);return a?s.Ay.createElement(a,e):void 0}},2059:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(31481),n=a(14487),o=a(6e4),r=a(188),i=a(86046),c=a(13439),d=a(17872),l=a(32989),u=a(60919),m=e([o]),h=m.then?(await m)():m;o=h[0],(0,c.aJ)("processOriginStarsPayment",(e,t,a)=>{const{originData:s,status:o,tabId:r=(0,n.g0)()}=a,{originStarsPayment:i,originReaction:c,originGift:d,topup:u}=s||{};if((i||c||d||u)&&(t.closeStarsBalanceModal({tabId:r}),"paid"===o))return i&&(e=(0,l.w)(e,{starsPayment:i},r)),c&&t.sendPaidReaction({chatId:c.chatId,messageId:c.messageId,forcedAmount:c.amount,tabId:r}),d&&t.sendStarGift({...d,tabId:r}),e}),(0,c.aJ)("openGiftRecipientPicker",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,u.trm)(e)?(t.openFrozenAccountModal({tabId:s}),e):(0,l.w)(e,{isGiftRecipientPickerOpen:!0},s)}),(0,r.k)("closeGiftRecipientPicker","isGiftRecipientPickerOpen"),(0,c.aJ)("openStarsGiftingPickerModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,l.w)(e,{starsGiftingPickerModal:{isOpen:!0}},s)}),(0,r.k)("closeStarsGiftingPickerModal","starsGiftingPickerModal"),(0,c.aJ)("openPrizeStarsTransactionFromGiveaway",(e,t,a)=>{const{chatId:s,messageId:o,tabId:r=(0,n.g0)()}=a||{},c=(0,u.O5q)(e,s,o);if(!c)return;const l=(0,i.D5)(c);return l?(0,d.V5q)(e,l,r):void 0}),(0,c.aJ)("openStarsBalanceModal",(e,t,a)=>{const{originStarsPayment:r,originReaction:i,originGift:c,topup:u,shouldIgnoreBalance:m,currency:h=s.OUy,tabId:p=(0,n.g0)()}=a||{},g=e.stars?.balance;if(!(!m&&g&&u&&u.balanceNeeded<=g.amount))return e=(0,d.Y1r)(e,p),t.loadStarStatus(),(0,l.w)(e,{starsBalanceModal:{originStarsPayment:r,originReaction:i,originGift:c,topup:u,currency:h}},p);t.showNotification({message:o.yE("StarsTopupLinkEnough"),actionText:o.yE("StarsTopupLinkTopupAnyway"),action:{action:"openStarsBalanceModal",payload:{topup:u,shouldIgnoreBalance:!0,tabId:p}},icon:"star",tabId:p})}),(0,r.k)("closeStarsBalanceModal","starsBalanceModal"),(0,c.aJ)("closeStarsPaymentModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.Osl)(e,s);let r=o?.status;return r&&"pending"!==r||(r="cancelled"),(0,l.w)(e,{starsPayment:{status:r}},s)}),(0,c.aJ)("openStarsTransactionModal",(e,t,a)=>{const{transaction:s,tabId:o=(0,n.g0)()}=a;return(0,d.V5q)(e,s,o)}),(0,c.aJ)("openStarsTransactionFromGift",(e,t,a)=>{const{chatId:s,messageId:o,tabId:r=(0,n.g0)()}=a||{},c=(0,u.O5q)(e,s,o);if(!c)return;const l=(0,i.M6)(c);return l?(0,d.V5q)(e,l,r):void 0}),(0,r.k)("closeStarsTransactionModal","starsTransactionModal"),(0,c.aJ)("openStarsSubscriptionModal",(e,t,a)=>{const{subscription:s,tabId:o=(0,n.g0)()}=a;return(0,l.w)(e,{starsSubscriptionModal:{subscription:s}},o)}),(0,r.k)("closeStarsSubscriptionModal","starsSubscriptionModal"),(0,r.k)("closeGiftModal","giftModal"),(0,c.aJ)("closeStarsGiftModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,l.w)(e,{starsGiftModal:{isOpen:!1}},s)}),(0,c.aJ)("openGiftInfoModalFromMessage",(e,t,a)=>{const{chatId:s,messageId:o,tabId:r=(0,n.g0)()}=a,i=(0,u.O5q)(e,s,o);if(!i||!i.content.action)return;const c=i.content.action;if("starGift"!==c.type&&"starGiftUnique"!==c.type)return;const d="starGift"===c.type?c:void 0,l="starGiftUnique"===c.type?c:void 0,m=c.peerId||(i.isOutgoing?i.chatId:e.currentUserId),h=c.savedId?{type:"chat",chatId:s,savedId:c.savedId}:{type:"user",messageId:o},p=c.fromId||(i.isOutgoing?e.currentUserId:i.chatId),g={date:i.date,gift:c.gift,message:d?.message,starsToConvert:d?.starsToConvert,isNameHidden:d?.isNameHidden,isUnsaved:!c.isSaved,fromId:p,messageId:i.id,isConverted:d?.isConverted,upgradeMsgId:d?.upgradeMsgId,canUpgrade:d?.canUpgrade,alreadyPaidUpgradeStars:d?.alreadyPaidUpgradeStars,inputGift:h,canExportAt:l?.canExportAt,savedId:c.savedId,transferStars:l?.transferStars};t.openGiftInfoModal({peerId:m,gift:g,tabId:r})}),(0,c.aJ)("openGiftInfoModal",(e,t,a)=>{const{gift:s,tabId:o=(0,n.g0)()}=a,r="peerId"in a?a.peerId:void 0,i="recipientId"in a?a.recipientId:void 0;return(0,l.w)(e,{giftInfoModal:{peerId:r,gift:s,recipientId:i}},o)}),(0,c.aJ)("openGiftResalePriceComposerModal",(e,t,a)=>{const{gift:s,peerId:o,tabId:r=(0,n.g0)()}=a;return(0,l.w)(e,{giftResalePriceComposerModal:{peerId:o,gift:s}},r)}),(0,r.k)("closeGiftInfoModal","giftInfoModal"),(0,r.k)("closeGiftResalePriceComposerModal","giftResalePriceComposerModal"),(0,r.k)("closeGiftUpgradeModal","giftUpgradeModal"),(0,c.aJ)("openGiftWithdrawModal",(e,t,a)=>{const{gift:s,tabId:o=(0,n.g0)()}=a||{};return(0,l.w)(e,{giftWithdrawModal:{gift:s}},o)}),(0,r.k)("closeGiftWithdrawModal","giftWithdrawModal"),(0,c.aJ)("openGiftStatusInfoModal",(e,t,a)=>{const{emojiStatus:s,tabId:o=(0,n.g0)()}=a||{};return(0,l.w)(e,{giftStatusInfoModal:{emojiStatus:s}},o)}),(0,c.aJ)("closeGiftStatusInfoModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,l.w)(e,{giftStatusInfoModal:void 0},s)}),(0,c.aJ)("clearGiftWithdrawError",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.nTw)(e,s),r=o?.giftWithdrawModal;if(r)return(0,l.w)(e,{giftWithdrawModal:{...r,errorKey:void 0}},s)}),(0,c.aJ)("openGiftTransferModal",(e,t,a)=>{const{gift:s,tabId:o=(0,n.g0)()}=a;return(0,l.w)(e,{giftTransferModal:{gift:s}},o)}),(0,r.k)("closeGiftTransferModal","giftTransferModal"),t()}catch(e){t(e)}})},2672:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"PaymentModal",!t);return a?s.Ay.createElement(a,e):void 0}},2673:(e,t,a)=>{a.d(t,{Ay:()=>l,D_:()=>i,z6:()=>c});var s=a(31481),n=a(76023);const o=32*n.$,r=45.5*n.$,i=26.5*n.$,c=16*n.$,d=16.125*n.$;function l(e,t){const a=e<=s.c2m?n.$:2*n.$,l=function(e){if(e>s.gQx){const t=Math.min(Math.max(.25*e,c),i),a=Math.min(.25*e,i);return Math.min(e-t-a,r)}if(e>s.j7z){const t=Math.min(Math.max(.4*e,c),i);return Math.min(e-t,r)}return e>r?r:e}(e),u=3*n.$,m=t?l-a-u:l-a,h=e>s.c2m?Math.min(l-a,o):l-a,p=h/m,g=m/h;return{composerHiddenScale:p,toolbarHiddenScale:g,composerTranslateX:t?u/2*g:0,toolbarTranslateX:t?u/2*-1*p:0,unpinHiddenScale:h/d,toolbarForUnpinHiddenScale:d/h}}},3334:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(14487),n=a(24021),o=a(13439),r=a(17872),i=a(32989),c=e([n]),d=c.then?(await c)():c;n=d[0],(0,o.aJ)("loadPasswordInfo",async e=>{const t=await(0,n.px)("getPasswordInfo");t&&(e=(0,o.mS)(),e=(0,r.qpc)(e,{hasPassword:t.hasPassword}),e=(0,r.keG)(e,{hint:t.hint}),(0,o.UF)(e))}),(0,o.aJ)("checkPassword",async(e,t,a)=>{const{currentPassword:s,onSuccess:i}=a;e=(0,r.keG)(e,{isLoading:!0,errorKey:void 0}),(0,o.UF)(e);const c=await(0,n.px)("checkPassword",s);e=(0,o.mS)(),e=(0,r.keG)(e,{isLoading:!1}),(0,o.UF)(e),c&&i()}),(0,o.aJ)("clearPassword",async(e,t,a)=>{const{currentPassword:s,onSuccess:i}=a;e=(0,r.keG)(e,{isLoading:!0,errorKey:void 0}),(0,o.UF)(e);const c=await(0,n.px)("clearPassword",s);e=(0,o.mS)(),e=(0,r.keG)(e,{isLoading:!1}),(0,o.UF)(e),c&&i()}),(0,o.aJ)("updatePassword",async(e,t,a)=>{const{currentPassword:s,password:i,hint:c,email:d,onSuccess:l}=a;e=(0,r.keG)(e,{isLoading:!0,errorKey:void 0}),(0,o.UF)(e);const u=await(0,n.px)("updatePassword",s,i,c,d);e=(0,o.mS)(),e=(0,r.keG)(e,{isLoading:!1}),(0,o.UF)(e),u&&l()}),(0,o.aJ)("updateRecoveryEmail",async(e,t,a)=>{const{currentPassword:c,email:d,onSuccess:l,tabId:u=(0,s.g0)()}=a;e=(0,r.keG)(e,{isLoading:!0,errorKey:void 0}),e=(0,i.w)(e,{recoveryEmail:d},u),(0,o.UF)(e);const m=await(0,n.px)("updateRecoveryEmail",c,d);e=(0,o.mS)(),e=(0,r.keG)(e,{isLoading:!1,waitingEmailCodeLength:void 0}),e=(0,i.w)(e,{recoveryEmail:void 0},u),(0,o.UF)(e),m&&l()}),(0,o.aJ)("provideTwoFaEmailCode",(e,t,a)=>{const{code:s}=a;(0,n.px)("provideRecoveryEmailCode",s)}),(0,o.aJ)("clearTwoFaError",e=>(0,r.keG)(e,{errorKey:void 0})),t()}catch(e){t(e)}})},4056:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(23174),n=a(89925),o=a(31481),r=a(85982),i=a(46275),c=a(14487),d=a(91368),l=a(48775),u=a(6e4),m=a(383),h=a(33204),p=a(37836),g=a(80140),f=a(59852),y=a(24021),I=a(90709),A=a(20179),v=a(13439),b=a(17872),S=a(25179),w=a(32989),C=a(60919),E=a(30708),M=a(42347),x=a(25834),k=a(43874),P=e([d,u,y,M,x]);[d,u,y,M,x]=P.then?(await P)():P;const T="https://prizes.gamee.com/",F=60,N=(0,p.sg)(e=>e(),500,!1);let B,U;function R(e,t,a){const s=(0,C.nTw)(e,a).webApps.openedWebApps,n=(0,A.rp)(t);return!!n&&s[n]}function V(e,t,a,s,n){const o={botId:t,requestUrl:s,webAppName:n};if(R(e,o,a)){const t=(0,A.rp)(o);return t&&(e=(0,S.OZ)(e,t,a),(0,v.UF)(e)),!0}return!1}async function J(e,t){const a=await(0,y.px)("loadAttachBots",{hash:t});if(a)return e=(0,v.mS)(),e={...e,attachMenu:{hash:a.hash,bots:a.bots}},(0,v.UF)(e),a}function L(e,t,a,s,...[n=(0,c.g0)()]){if("request"===s.type){e=(0,v.mS)();const t=(0,C.nTw)(e,n);if(!t.urlAuth)return;const{domain:a,bot:o,shouldRequestWriteAccess:r}=s;return e=(0,w.w)(e,{urlAuth:{...t.urlAuth,request:{domain:a,botId:o.id,shouldRequestWriteAccess:r}}},n),void(0,v.UF)(e)}const o="accepted"===s.type?s.url:a;window.open(o,"_blank","noopener"),t.closeUrlAuthModal({tabId:n})}async function O(e,{username:t,inlineBotData:a,chatId:s,query:n,offset:o},...[r=(0,c.g0)()]){e=(0,v.mS)();const i=(0,C.mBe)(e,a.id),d=(0,C.hds)(e,s);if(!i||!d)return;const l=a.query!==n;e=(0,S.wr)(e,!0,r),e=(0,S.uH)(e,t,{...a,query:n,...l&&{offset:void 0,results:[]}},r),(0,v.UF)(e);const u=await(0,y.px)("fetchInlineBotResults",{bot:i,chat:d,query:n,offset:l?void 0:o});e=(0,v.mS)();const m=(0,C.nTw)(e,r).inlineBots.byUsername[t];if(e=(0,S.wr)(e,!1,r),!u||!m||n!==m.query)return void(0,v.UF)(e);const h=new Set((m.results||[]).map(e=>e.id)),p=u.results.filter(e=>!h.has(e.id));e=(0,S.uH)(e,t,{...m,help:u.help,cacheTime:Date.now()+1e3*u.cacheTime,...p.length&&{isGallery:u.isGallery},...u.switchPm&&{switchPm:u.switchPm},...u.switchWebview&&{switchWebview:u.switchWebview},canLoadMore:u.results.length>0&&Boolean(u.nextOffset),results:""===m.offset||m.offset===u.nextOffset?u.results:(m.results||[]).concat(p),offset:p.length?u.nextOffset:""},r),(0,v.UF)(e)}async function D(e,t,a,s,n){await(0,y.px)("sendMessage",{chat:e,replyInfo:a,text:t,sendAs:s,lastMessageId:n})}async function G(e,t,a,s,n,o=!1,...[r=(0,c.g0)()]){const{showDialog:i,showNotification:d,openUrl:l,openGame:u}=t;o&&(U||(U=new m.A("popup,width=800,height=600",()=>{d({message:"Allow browser to open popup window",tabId:r})})),U.preOpenIfNeeded());const h=await(0,y.px)("answerCallbackButton",{chatId:a.id,accessHash:a.accessHash,messageId:s,data:n,isGame:o});if(!h)return;const{message:p,alert:g,url:f}=h;g?i({data:{message:p||"Error"},tabId:r}):p?d({message:p,tabId:r}):f&&(o?f.includes(T)?U.open(f):(U.cancelPreOpen(),u({url:f,chatId:a.id,messageId:s,tabId:r})):l({url:f,tabId:r}))}(0,v.aJ)("clickSuggestedMessageButton",(e,t,a)=>{const{chatId:s,messageId:n,button:o,tabId:r=(0,c.g0)()}=a,{buttonType:i}=o,d=(0,C.O5q)(e,s,n);switch(i){case"suggestChanges":if(!d)break;t.initDraftFromSuggestedMessage({chatId:s,messageId:n,tabId:r})}}),(0,v.aJ)("clickBotInlineButton",(e,t,a)=>{const{chatId:s,messageId:n,button:o,tabId:i=(0,c.g0)()}=a,d=(0,C.hds)(e,s),l=(0,C.O5q)(e,s,n);if(d&&l)switch(o.type){case"command":t.sendBotCommand({command:o.text,tabId:i});break;case"url":{const{url:e}=o;t.openUrl({url:e,tabId:i});break}case"copy":(0,r.eM)(o.copyText),t.showNotification({message:(0,u.yE)("ExactTextCopied",o.copyText),tabId:i});break;case"callback":G(0,t,d,n,o.data,void 0,i);break;case"requestPoll":t.openPollModal({isQuiz:o.isQuiz,tabId:i});break;case"requestPhone":{const a=e.currentUserId?(0,C.mBe)(e,e.currentUserId):void 0;if(!a)return;t.showDialog({data:{phoneNumber:a.phoneNumber,firstName:a.firstName||"",lastName:a.lastName||"",userId:a.id},tabId:i});break}case"receipt":{const{receiptMessageId:e}=o;t.getReceipt({chatId:d.id,messageId:e,tabId:i});break}case"buy":t.openInvoice({type:"message",chatId:d.id,messageId:n,tabId:i});break;case"game":G(0,t,d,n,void 0,!0,i);break;case"switchBotInline":{const{query:e,isSamePeer:a}=o;t.switchBotInline({query:e,isSamePeer:a,messageId:n,tabId:i});break}case"userProfile":{const{userId:e}=o;t.openChatWithInfo({id:e,tabId:i});break}case"simpleWebView":{const{url:a}=o,s=(0,C.Y7C)(e,l);if(!s)return;const n=(0,f.A)();t.requestSimpleWebView({url:a,botId:s.id,theme:n,buttonText:o.text,tabId:i});break}case"webView":{const{url:a}=o,s=(0,C.Y7C)(e,l),n=l.viaBotId||s?.id;if(!n)return;const r=(0,f.A)();t.requestWebView({url:a,botId:n,peerId:d.id,theme:r,buttonText:o.text,tabId:i});break}case"urlAuth":{const{url:e}=o;t.requestBotUrlAuth({chatId:d.id,messageId:n,buttonId:o.buttonId,url:e,tabId:i});break}}}),(0,v.aJ)("sendBotCommand",(e,t,a)=>{const{command:s,chatId:n,tabId:o=(0,c.g0)()}=a,r=n?(0,C.hds)(e,n):(0,C.meB)(e,o),i=(0,C.Xf0)(e,o);if(!r||!i)return;const{threadId:d}=i;t.resetDraftReplyInfo({tabId:o}),t.clearWebPagePreview({tabId:o});const l=(0,C.ZZX)(e,r.id);D(r,s,(0,C.GA4)(e,r.id,d)?.replyInfo,(0,C.VF$)(e,r.id),l)}),(0,v.aJ)("restartBot",async(e,t,a)=>{const{chatId:s,tabId:n=(0,c.g0)()}=a,{currentUserId:o}=e,r=(0,C.meB)(e,n),i=o&&(0,C.yps)(e,s);if(!o||!r||!i)return;const d=(0,C.ZZX)(e,r.id);await(0,y.px)("unblockUser",{user:i})&&(e=(0,v.mS)(),e=(0,b.OW3)(e,i.id),(0,v.UF)(e),D(r,"/start",void 0,(0,C.VF$)(e,s),d))}),(0,v.aJ)("loadTopInlineBots",async e=>{const{lastRequestedAt:t}=e.topInlineBots;if(t&&(0,g.Fm)()-t<F)return;const a=await(0,y.px)("fetchTopInlineBots");if(!a)return;const{ids:s}=a;e=(0,v.mS)(),e={...e,topInlineBots:{...e.topInlineBots,userIds:s,lastRequestedAt:(0,g.Fm)()}},(0,v.UF)(e)}),(0,v.aJ)("loadTopBotApps",async e=>{const{lastRequestedAt:t}=e.topBotApps;if(t&&(0,g.Fm)()-t<F)return;const a=await(0,y.px)("fetchTopBotApps");if(!a)return;const{ids:s}=a;e=(0,v.mS)(),e={...e,topBotApps:{...e.topBotApps,userIds:s,lastRequestedAt:(0,g.Fm)()}},(0,v.UF)(e)}),(0,v.aJ)("queryInlineBot",async(e,t,a)=>{const{chatId:s,username:n,query:o,offset:r,tabId:i=(0,c.g0)()}=a;let d=(0,C.nTw)(e,i).inlineBots.byUsername[n];if(!1!==d){if(void 0===d){const{user:t,chat:a}=await(0,y.px)("fetchInlineBot",{username:n})||{};if(e=(0,v.mS)(),!t||!a)return e=(0,S.uH)(e,n,!1,i),void(0,v.UF)(e);d={id:t.id,query:"",offset:"",switchPm:void 0,canLoadMore:!0,results:[],cacheTime:0},e=(0,S.uH)(e,n,d,i),(0,v.UF)(e)}(o!==d.query||d.canLoadMore)&&N(()=>{O(e,{username:n,inlineBotData:d,chatId:s,query:o,offset:r},i)})}}),(0,v.aJ)("switchBotInline",(e,t,a)=>{const{query:s,isSamePeer:n,messageId:o,filter:r,tabId:i=(0,c.g0)()}=a;let{botId:d}=a;const l=(0,C.meB)(e,i);if(!l)return;if(!d&&o){const t=(0,C.O5q)(e,l.id,o);if(!t)return;const a=(0,C.Y7C)(e,t);d=t.viaBotId||a?.id}if(!d)return;const u=(0,C.mBe)(e,d);u&&t.openChatWithDraft({text:{text:`@${(0,I.Kl)(u)} ${s}`},chatId:n?l.id:void 0,filter:r,tabId:i})}),(0,v.aJ)("sendInlineBotApiResult",async(e,t,a)=>{const{chat:s,id:n,queryId:o,replyInfo:r,sendAs:i,isSilent:c,scheduledAt:d,allowPaidStars:l}=a;await(0,y.px)("sendInlineBotResult",{chat:s,resultId:n,queryId:o,replyInfo:r,sendAs:i,isSilent:c,scheduleDate:d,allowPaidStars:l}),l&&t.loadStarStatus()}),(0,v.aJ)("sendInlineBotResult",async(e,t,a)=>{const{id:s,queryId:n,isSilent:o,scheduledAt:r,threadId:i,chatId:u,tabId:m=(0,c.g0)()}=a;if(!s)return;const h=(0,C.hds)(e,u),p=(0,C.GA4)(e,u,i)?.replyInfo,g=(0,C.OEv)(e,u,i,p);t.resetDraftReplyInfo({tabId:m}),t.clearWebPagePreview({tabId:m});const f=await(0,x.g)(e,u),y={chat:h,id:s,queryId:n,replyInfo:g,sendAs:(0,C.VF$)(e,u),isSilent:o,scheduledAt:r,allowPaidStars:f};f?(t.sendInlineBotApiResult({...y}),t.showNotification({localId:n,title:{key:"MessageSentPaidToastTitle",variables:{count:1},options:{pluralValue:1}},message:{key:"MessageSentPaidToastText",variables:{amount:(0,l.Kk)((0,d.Yw)(),f)}},icon:"star",shouldUseCustomIcon:!0,type:"paidMessage",tabId:m})):t.sendInlineBotApiResult(y)}),(0,v.aJ)("resetInlineBot",(e,t,a)=>{const{username:s,force:n,tabId:o=(0,c.g0)()}=a;let r=(0,C.nTw)(e,o).inlineBots.byUsername[s];r&&(!n&&Date.now()<r.cacheTime||(r={id:r.id,query:"",offset:"",switchPm:void 0,canLoadMore:!0,results:[],cacheTime:0},e=(0,S.uH)(e,s,r,o),(0,v.UF)(e)))}),(0,v.aJ)("resetAllInlineBots",(e,t,a)=>{const{tabId:s=(0,c.g0)()}=a||{},n=(0,C.nTw)(e,s).inlineBots.byUsername;Object.keys(n).forEach(e=>{t.resetInlineBot({username:e,tabId:s})})}),(0,v.aJ)("startBot",async(e,t,a)=>{const{botId:s,param:n}=a,o=(0,C.mBe)(e,s);if(!o)return;let r=(0,C.vGo)(e,s);if(!r){const e=await(0,y.px)("fetchFullUser",{id:o.id,accessHash:o.accessHash});r=e?.fullInfo}r?.isBlocked&&await(0,y.px)("unblockUser",{user:o}),await(0,y.px)("startBot",{bot:o,startParam:n})}),(0,v.aJ)("sharePhoneWithBot",async(e,t,a)=>{const{botId:s}=a,n=(0,C.mBe)(e,s);if(!n)return;let o=(0,C.vGo)(e,s);if(!o){const e=await(0,y.px)("fetchFullUser",{id:n.id,accessHash:n.accessHash});o=e?.fullInfo}o?.isBlocked&&await(0,y.px)("unblockUser",{user:n}),e=(0,v.mS)();const r=(0,C.hds)(e,s),i=(0,C.mBe)(e,e.currentUserId);if(!r)return;const c=(0,C.ZZX)(e,r.id);await(0,y.px)("sendMessage",{chat:r,contact:{mediaType:"contact",firstName:i.firstName||"",lastName:i.lastName||"",phoneNumber:i.phoneNumber||"",userId:i.id},lastMessageId:c})}),(0,v.aJ)("requestSimpleWebView",async(e,t,a)=>{const{url:s,botId:n,theme:o,buttonText:r,isFromSideMenu:i,isFromSwitchWebView:d,startParam:l,tabId:u=(0,c.g0)()}=a;if(V(e,n,u,s))return;const m=(0,C.mBe)(e,n);if(!m)return;if(!(0,C.nTL)(e,n))return e=(0,w.w)(e,{botTrustRequest:{botId:n,type:"webApp",onConfirm:{action:"requestSimpleWebView",payload:a}}},u),void(0,v.UF)(e);const h=await(0,y.px)("requestSimpleWebView",{url:s,bot:m,theme:o,startParam:l,isFromSideMenu:i,isFromSwitchWebView:d});if(!h)return;e=(0,v.mS)();const p={requestUrl:s,appName:m.firstName,url:h,botId:n,buttonText:r};e=(0,S.eA)(e,p,!0,!0,u),(0,v.UF)(e)}),(0,v.aJ)("requestWebView",async(e,t,a)=>{const{url:n,botId:o,peerId:r,theme:i,isSilent:d,buttonText:l,isFromBotMenu:u,startParam:m,isFullscreen:h,tabId:p=(0,c.g0)()}=a;if(V(e,o,p,n))return;const g=(0,C.mBe)(e,o);if(!g)return;const f=(0,C.PVB)(e,r);if(!f)return;if(!(0,C.nTL)(e,o))return e=(0,w.w)(e,{botTrustRequest:{botId:o,type:"webApp",onConfirm:{action:"requestWebView",payload:a}}},p),void(0,v.UF)(e);const I=(0,C.Xf0)(e,p),{chatId:A,threadId:b=s.l3}=I||{},E=A?(0,C.GA4)(e,A,b)?.replyInfo:void 0,M=A?(0,C.OEv)(e,A,b,E):void 0,x=A?(0,C.VF$)(e,A):void 0,P=await(0,y.px)("requestWebView",{url:n,bot:g,peer:f,theme:i,isSilent:d,replyInfo:M,isFromBotMenu:u,startParam:m,sendAs:x,isFullscreen:h});if(!P)return;const{url:T,queryId:F,isFullScreen:N}=P;e=(0,v.mS)();const B={requestUrl:n,url:T,appName:g.firstName,botId:o,peerId:r,queryId:F,replyInfo:M,buttonText:l};e=(0,S.eA)(e,B,!0,!0,p),(0,v.UF)(e),N&&(0,k.cB)()&&t.changeWebAppModalState({state:"fullScreen",tabId:p})}),(0,v.aJ)("requestMainWebView",async(e,t,a)=>{const{botId:s,peerId:n,theme:o,startParam:r,mode:i,shouldMarkBotTrusted:d,tabId:l=(0,c.g0)()}=a;if((0,C.trm)(e))return void t.openFrozenAccountModal({tabId:l});if(V(e,s,l))return;const u=(0,C.mBe)(e,s);if(!u)return;const m=(0,C.PVB)(e,n);if(!m)return;if(!(0,C.nTL)(e,s)){if(!d)return e=(0,w.w)(e,{botTrustRequest:{botId:s,type:"webApp",onConfirm:{action:"requestMainWebView",payload:a}}},l),void(0,v.UF)(e);t.markBotTrusted({botId:s,isWriteAllowed:!0,tabId:l})}const h=await(0,y.px)("requestMainWebView",{bot:u,peer:m,theme:o,startParam:r,mode:i});if(!h)return;const{url:p,queryId:g,isFullscreen:f}=h;e=(0,v.mS)();const I={url:p,appName:u.firstName,botId:s,peerId:n,queryId:g,buttonText:""};e=(0,S.eA)(e,I,!0,!0,l),(0,v.UF)(e),f&&(0,k.cB)()&&t.changeWebAppModalState({state:"fullScreen",tabId:l})}),(0,v.aJ)("loadPreviewMedias",async(e,t,a)=>{const{botId:s}=a,n=(0,C.mBe)(e,s);if(!n)return;const o=await(0,y.px)("fetchPreviewMedias",{bot:n});e=(0,v.mS)(),o&&(e={...e,users:{...e.users,previewMediaByBotId:{...e.users.previewMediaByBotId,[s]:o}}},(0,v.UF)(e))}),(0,v.aJ)("openWebAppsCloseConfirmationModal",(e,t,a)=>{const{tabId:s=(0,c.g0)()}=a||{};return(0,w.w)(e,{isWebAppsCloseConfirmationModalOpen:!0},s)}),(0,v.aJ)("closeWebAppsCloseConfirmationModal",(e,t,a)=>{const{shouldSkipInFuture:s,tabId:n=(0,c.g0)()}=a||{};return e=(0,b.qoo)(e,{shouldSkipWebAppCloseConfirmation:Boolean(s)}),(0,w.w)(e,{isWebAppsCloseConfirmationModalOpen:void 0},n)}),(0,v.aJ)("requestAppWebView",async(e,t,a)=>{const{botId:s,appName:n,startApp:o,mode:r,theme:i,isWriteAllowed:d,isFromConfirm:l,shouldSkipBotTrustRequest:m,tabId:h=(0,c.g0)()}=a;if(V(e,s,h,n))return;const p=(0,C.mBe)(e,s);if(!p)return;const g=Boolean(e.attachMenu.bots[p.id]);if(p.isAttachBot&&!l&&!g){const t=await(0,y.px)("loadAttachBot",{bot:p});if(t){e=(0,v.mS)();const s=t.bot;if(s.isDisclaimerNeeded||s.isForAttachMenu||s.isForSideMenu)return e=(0,w.w)(e,{requestedAttachBotInstall:{bot:s,onConfirm:{action:"requestAppWebView",payload:{...a,isFromConfirm:!0}}}},h),void(0,v.UF)(e)}}const f=await(0,y.px)("fetchBotApp",{bot:p,appName:n});if(e=(0,v.mS)(),!f)return void t.showNotification({message:(0,u.yE)("lng_username_app_not_found"),tabId:h});if(!m&&(f.isInactive||!(0,C.nTL)(e,s)))return a.shouldSkipBotTrustRequest=!0,e=(0,w.w)(e,{botTrustRequest:{botId:s,shouldRequestWriteAccess:f.shouldRequestWriteAccess,type:"botApp",onConfirm:{action:"requestAppWebView",payload:a}}},h),void(0,v.UF)(e);const I=(0,C.meB)(e,h),{url:A,isFullscreen:b}=await(0,y.px)("requestAppWebView",{peer:I||p,app:f,startParam:o,mode:r,isWriteAllowed:d,theme:i});if(e=(0,v.mS)(),!A)return;e=(0,v.mS)();const E=I?I.id:p.id,M={url:A,appName:n&&p.firstName,peerId:E,botId:s,buttonText:""};e=(0,S.eA)(e,M,!0,!0,h),(0,v.UF)(e),b&&(0,k.cB)()&&t.changeWebAppModalState({state:"fullScreen",tabId:h})}),(0,v.aJ)("prolongWebView",async(e,t,a)=>{const{botId:s,peerId:n,isSilent:o,replyInfo:r,queryId:i,tabId:d=(0,c.g0)()}=a,l=(0,C.mBe)(e,s);if(!l)return;const u=(0,C.hds)(e,n);if(!u)return;const m=(0,C.VF$)(e,n);await(0,y.px)("prolongWebView",{bot:l,peer:u,isSilent:o,replyInfo:r,queryId:i,sendAs:m})||t.closeActiveWebApp({tabId:d})}),(0,v.aJ)("sendWebViewData",(e,t,a)=>{const{bot:s,data:n,buttonText:o}=a;(0,y.px)("sendWebViewData",{bot:s,data:n,buttonText:o})}),(0,v.aJ)("loadAttachBots",async e=>{await J(e),(0,h.A)({action:"loadAttachBots",payload:void 0},o.npx)}),(0,v.aJ)("toggleAttachBot",async(e,t,a)=>{const{botId:s,isWriteAllowed:n,isEnabled:o}=a,r=(0,C.mBe)(e,s);r&&await(0,y.px)("toggleAttachBot",{bot:r,isWriteAllowed:n,isEnabled:o})}),(0,v.aJ)("callAttachBot",(e,t,a)=>{const{bot:n,startParam:o,isFromConfirm:r,tabId:i=(0,c.g0)()}=a,d="isFromSideMenu"in a&&a.isFromSideMenu,l=!n,u=!l&&!e.attachMenu.bots[n.id]||n?.isInactive||n?.isDisclaimerNeeded;if(!r&&u)return(0,w.w)(e,{requestedAttachBotInstall:{bot:n,onConfirm:{action:"callAttachBot",payload:{...a,isFromConfirm:!0}}}},i);const m=(0,f.A)();if(d&&t.requestSimpleWebView({botId:n.id,buttonText:"",isFromSideMenu:!0,startParam:o,theme:m,tabId:i}),"chatId"in a){const{chatId:e,threadId:r=s.l3,url:c}=a;t.openThread({chatId:e,threadId:r,tabId:i}),t.requestWebView({url:c,peerId:e,botId:l?e:n.id,theme:m,buttonText:"",isFromBotMenu:l,startParam:o,tabId:i})}}),(0,v.aJ)("confirmAttachBotInstall",async(e,t,a)=>{const{isWriteAllowed:s,tabId:n=(0,c.g0)()}=a,{requestedAttachBotInstall:o}=(0,C.nTw)(e,n),{bot:r,onConfirm:i}=o;e=(0,w.w)(e,{requestedAttachBotInstall:void 0},n),(0,v.UF)(e);const d=(0,C.mBe)(e,r.id);if(d&&(t.markBotTrusted({botId:r.id,isWriteAllowed:s,tabId:n}),await(0,y.px)("toggleAttachBot",{bot:d,isWriteAllowed:s,isEnabled:!0}),i)){const{action:e,payload:a}=i;t[e](a)}}),(0,v.aJ)("requestBotUrlAuth",async(e,t,a)=>{const{chatId:s,buttonId:n,messageId:o,url:r,tabId:i=(0,c.g0)()}=a,d=(0,C.hds)(e,s);if(!d)return;const l=await(0,y.px)("requestBotUrlAuth",{chat:d,buttonId:n,messageId:o});l&&(e=(0,v.mS)(),e=(0,w.w)(e,{urlAuth:{url:r,button:{buttonId:n,messageId:o,chatId:d.id}}},i),(0,v.UF)(e),L(e,t,r,l,i))}),(0,v.aJ)("acceptBotUrlAuth",async(e,t,a)=>{const{isWriteAllowed:s,tabId:n=(0,c.g0)()}=a,o=(0,C.nTw)(e,n);if(!o.urlAuth?.button)return;const{button:r,url:i}=o.urlAuth,{chatId:d,messageId:l,buttonId:u}=r,m=(0,C.hds)(e,d);if(!m)return;const h=await(0,y.px)("acceptBotUrlAuth",{chat:m,messageId:l,buttonId:u,isWriteAllowed:s});h&&L(e=(0,v.mS)(),t,i,h,n)}),(0,v.aJ)("requestLinkUrlAuth",async(e,t,a)=>{const{url:s,tabId:n=(0,c.g0)()}=a,o=await(0,y.px)("requestLinkUrlAuth",{url:s});o&&(e=(0,v.mS)(),e=(0,w.w)(e,{urlAuth:{url:s}},n),(0,v.UF)(e),L(e,t,s,o,n))}),(0,v.aJ)("acceptLinkUrlAuth",async(e,t,a)=>{const{isWriteAllowed:s,tabId:n=(0,c.g0)()}=a,o=(0,C.nTw)(e,n);if(!o.urlAuth?.url)return;const{url:r}=o.urlAuth,i=await(0,y.px)("acceptLinkUrlAuth",{url:r,isWriteAllowed:s});i&&L(e=(0,v.mS)(),t,r,i,n)}),(0,v.aJ)("closeUrlAuthModal",(e,t,a)=>{const{tabId:s=(0,c.g0)()}=a||{};return(0,w.w)(e,{urlAuth:void 0},s)}),(0,v.aJ)("setBotInfo",async(e,t,a)=>{const{bot:s,name:o,description:r,tabId:i=(0,c.g0)()}=a;let{langCode:d}=a;d||(d=(0,E.l)(e).language);const{currentUserId:l}=e;l&&s&&(e=(0,v.mS)(),e=(0,b.G42)(e,n.TD.InProgress,i),(0,v.UF)(e),(o||r)&&await(0,y.px)("setBotInfo",{bot:s,langCode:d,name:o,about:r})&&(e=(0,v.mS)(),e=(0,b.TKu)(e,s.id,{firstName:o}),e=(0,b.weB)(e,s.id,{bio:r}),(0,v.UF)(e)),e=(0,v.mS)(),e=(0,b.G42)(e,n.TD.Complete,i),(0,v.UF)(e))}),(0,v.aJ)("toggleUserEmojiStatusPermission",async(e,t,a)=>{const{botId:s,isEnabled:n,isBotAccessEmojiGranted:o}=a,r=(0,C.yps)(e,s);s&&r&&await(0,y.px)("toggleUserEmojiStatusPermission",{bot:r,isEnabled:n})&&(e=(0,v.mS)(),e=(0,b.weB)(e,s,{isBotCanManageEmojiStatus:n,isBotAccessEmojiGranted:o}),(0,v.UF)(e))}),(0,v.aJ)("toggleUserLocationPermission",(e,t,a)=>{const{botId:s,isAccessGranted:n}=a,o=(0,C.mBe)(e,s);o&&(e=(0,v.mS)(),e=(0,b.cxc)(e,o.id,{geolocation:n}),(0,v.UF)(e))}),(0,v.aJ)("startBotFatherConversation",async(e,t,a)=>{const{param:s,tabId:n=(0,c.g0)()}=a;if(!B){const t=await(0,M.A$)(e,o.aFH);if(!t)return;B=t.id}s&&t.startBot({botId:B,param:s}),t.openChat({id:B,tabId:n})}),(0,v.aJ)("loadBotFreezeAppeal",async e=>{const t=e.appConfig?.freezeAppealUrl;if(!t)return;const a=t?(0,i.l8)(t):void 0;if(!a)return;const s=await(0,M.A$)(e,a);e=(0,v.mS)(),e={...e,botFreezeAppealId:s?.id},(0,v.UF)(e)}),t()}catch(j){t(j)}})},5181:(e,t,a)=>{a.d(t,{i:()=>n});const s={missing_payment_information:{field:"cardNumber",message:"Incorrect card number"},invalid_number:{field:"cardNumber",message:"Incorrect card number"},number:{field:"cardNumber",message:"Incorrect card number"},exp_year:{field:"expiry",message:"Incorrect year"},exp_month:{field:"expiry",message:"Incorrect month"},invalid_expiry_year:{field:"expiry",message:"Incorrect year"},invalid_expiry_month:{field:"expiry",message:"Incorrect month"},cvc:{field:"cvv",message:"Incorrect CVV"},invalid_cvc:{field:"cvv",message:"Incorrect CVV"}};function n(e){const{message:t,code:a,param:n}=e,{field:o,message:r}=n?s[n]:s[a];return{field:o,message:r,description:t}}},5801:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(84051),n=a(13439),o=a(60919),r=a(87894),i=a(80089),c=a(80464);const d=(0,s.ph)(e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"AgeVerificationModal",!t);return a?s.Ay.createElement(a,e):void 0});var l=a(52745);const u={giftCodeModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"GiftCodeModal",!t);return a?s.Ay.createElement(a,e):void 0},boostModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"BoostModal",!t);return a?s.Ay.createElement(a,e):void 0},chatlistModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"ChatlistModal",!t);return a?s.Ay.createElement(a,e):void 0},urlAuth:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"UrlAuthModal",!t);return a?s.Ay.createElement(a,e):void 0},oneTimeMediaModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"OneTimeMediaModal",!t);return a?s.Ay.createElement(a,e):void 0},inviteViaLinkModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"InviteViaLinkModal",!t);return a?s.Ay.createElement(a,e):void 0},requestedAttachBotInstall:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"AttachBotInstallModal",!t);return a?s.Ay.createElement(a,e):void 0},reportAdModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"ReportAdModal",!t);return a?s.Ay.createElement(a,e):void 0},reportModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"ReportModal",!t);return a?s.Ay.createElement(a,e):void 0},webApps:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"WebAppModal",!t);return a?s.Ay.createElement(a,e):void 0},collectibleInfoModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"CollectibleInfoModal",!t);return a?s.Ay.createElement(a,e):void 0},mapModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"MapModal",!t);return a?s.Ay.createElement(a,e):void 0},starsPayment:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"StarPaymentModal",!t);return a?s.Ay.createElement(a,e):void 0},starsBalanceModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"StarsBalanceModal",!t);return a?s.Ay.createElement(a,e):void 0},starsTransactionModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"StarsTransactionInfoModal",!t);return a?s.Ay.createElement(a,e):void 0},chatInviteModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"ChatInviteModal",!t);return a?s.Ay.createElement(a,e):void 0},paidReactionModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"PaidReactionModal",!t);return a?s.Ay.createElement(a,e):void 0},suggestMessageModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"SuggestMessageModal",!t);return a?s.Ay.createElement(a,e):s.Ay.createElement(l.A,null)},suggestedPostApprovalModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"SuggestedPostApprovalModal",!t);return a?s.Ay.createElement(a,e):s.Ay.createElement(l.A,null)},starsSubscriptionModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"StarsSubscriptionModal",!t);return a?s.Ay.createElement(a,e):void 0},starsGiftModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"StarsGiftModal",!t);return a?s.Ay.createElement(a,e):void 0},giftModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftModal",!t);return a?s.Ay.createElement(a,e):void 0},isGiftRecipientPickerOpen:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftRecipientPicker",!t);return a?s.Ay.createElement(a,e):void 0},isWebAppsCloseConfirmationModalOpen:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"WebAppsCloseConfirmationModal",!t);return a?s.Ay.createElement(a,{isOpen:t}):void 0},giftInfoModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftInfoModal",!t);return a?s.Ay.createElement(a,e):void 0},giftResalePriceComposerModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftResalePriceComposerModal",!t);return a?s.Ay.createElement(a,e):void 0},suggestedStatusModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"SuggestedStatusModal",!t);return a?s.Ay.createElement(a,e):void 0},emojiStatusAccessModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"EmojiStatusAccessModal",!t);return a?s.Ay.createElement(a,e):void 0},locationAccessModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"LocationAccessModal",!t);return a?s.Ay.createElement(a,e):void 0},aboutAdsModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"AboutAdsModal",!t);return a?s.Ay.createElement(a,e):void 0},giftUpgradeModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftUpgradeModal",!t);return a?s.Ay.createElement(a,e):void 0},monetizationVerificationModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"VerificationMonetizationModal",!t);return a?s.Ay.createElement(a,e):void 0},giftWithdrawModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftWithdrawModal",!t);return a?s.Ay.createElement(a,e):void 0},giftStatusInfoModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftStatusInfoModal",!t);return a?s.Ay.createElement(a,e):void 0},preparedMessageModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"PreparedMessageModal",!t);return a?s.Ay.createElement(a,e):void 0},sharePreparedMessageModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"SharePreparedMessageModal",!t);return a?s.Ay.createElement(a,e):void 0},giftTransferModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"GiftTransferModal",!t);return a?s.Ay.createElement(a,e):void 0},chatRefundModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Stars,"ChatRefundModal",!t);return a?s.Ay.createElement(a,e):void 0},priceConfirmModal:({modal:e})=>{const t=(0,c.A)(i.ar.Stars,"PriceConfirmModal",!e);return t?s.Ay.createElement(t,{modal:e}):void 0},isFrozenAccountModalOpen:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"FrozenAccountModal",t);return a?s.Ay.createElement(a,e):void 0},deleteAccountModal:e=>{const{modal:t}=e,a=(0,c.A)(i.ar.Extra,"DeleteAccountModal",!t);return a?s.Ay.createElement(a,e):void 0},isAgeVerificationModalOpen:d},m=Object.keys(u),h=Object.entries(u),p=(0,s.ph)((0,n.EK)(e=>(0,r.Up)((0,o.nTw)(e),m))(e=>h.map(([t,a])=>s.Ay.createElement(a,{key:t,modal:e[t]}))))},6936:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>m});var n=a(96540),o=a(34703),r=a(13439),i=a(72531),c=a(95547),d=a(65223),l=e([c]),u=l.then?(await l)():l;c=u[0];const m=e=>{const{chatId:t}=e,{openChatAIWithInfo:a}=(0,r.ko)(),[s,l]=(0,n.useState)(0),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),g=(0,n.useRef)(void 0),f=(0,n.useCallback)(e=>{const s=e.currentTarget.closest(".room-ai-entry-wrapper");if(s&&"true"===s.getAttribute("data-dragging"))return e.preventDefault(),void e.stopPropagation();a({chatId:t}),c.A.updateRoomAIData(t,"unreadCount",0),l(0)},[t,a]),y=(0,n.useCallback)(e=>{e.chatId===t&&l(e.count)},[t]),I=(0,n.useCallback)(e=>{e.chatId===t&&p(e.state)},[t]),A=(0,n.useCallback)(()=>{u&&!h&&u.play()},[u,h]);(0,n.useEffect)(()=>{const e=setInterval(A,1e4);return()=>clearInterval(e)},[t,A]),(0,n.useEffect)(()=>{i.A.on(i.E.UpdateRoomAIUnreadCount,y),i.A.on(i.E.UpdateRoomAISummaryState,I);const e=c.A.getRoomAIUnreadCount(t),a=c.A.getRoomAISummaryState(t);return l(e),p(a),c.A.summary(t),()=>{i.A.off(i.E.UpdateRoomAIUnreadCount,y),i.A.off(i.E.UpdateRoomAISummaryState,I)}},[t,I,y]);const v=(0,n.useCallback)(e=>{m(e)},[]),b=(0,n.useCallback)(()=>{u&&u?.play()},[u]);return(0,n.useEffect)(()=>{h&&u&&u.play()},[h,u]),n.createElement("div",{ref:g,className:"room-ai-entry-button"},h?n.createElement(o.GL,{key:"serenaWork",className:"w-[62px] h-[62px]",src:d.t,loop:!0,autoplay:!0,dotLottieRefCallback:v,onClick:f}):n.createElement(o.GL,{key:"serenaWait",className:"w-[60px] h-[60px]",src:d.X,loop:!1,autoplay:!1,dotLottieRefCallback:v,onClick:f,onMouseEnter:b}),s>0&&n.createElement("div",{className:"room-ai-unread-count"},s))};s()}catch(e){s(e)}})},6995:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>h});var n=a(96540),o=a(89027),r=a(13439),i=a(72531),c=a(75304),d=a(62718),l=e([d]),u=l.then?(await l)():l;d=u[0];const m="py-[6px] px-[12px] border-[1px] border-[#E4E4E4] rounded-[8px] whitespace-nowrap cursor-pointer dark:border-[#292929]",h=({chatId:e,insertMessage:t,setIsLoading:a})=>{const{scrollToBottom:s}=(0,c.R)(),l=()=>{a(!0),(0,d.Ej)(t,()=>a(!1)),s()},u=()=>{e&&(a(!0),(0,d.DY)(e,t,()=>a(!1)),s())},h=()=>{e&&(a(!0),(0,d.R2)(e,t,()=>a(!1)),s())},p=a=>{const{action:s}=a;if(a.chatId===e)switch(s){case"summary":u();break;case"schedule-meet":l();break;case"todo":h();break;case"new-feature":(()=>{const e=(0,d.WL)();t(e)})()}};(0,n.useEffect)(()=>(i.A.on(i.E.RoomAIActions,p),()=>{i.A.off(i.E.RoomAIActions,p)}),[e]);const g=n.createElement("div",null,n.createElement("div",{className:"px-3 py-2 rounded-[8px] hover:bg-gray-100 dark:hover:bg-[#2a2a2a] cursor-pointer flex items-center gap-2 text-[14px]",onClick:u},"🧠 Chat Summary"),n.createElement("div",{className:"px-3 py-2 rounded-[8px] hover:bg-gray-100 dark:hover:bg-[#2a2a2a] cursor-pointer flex items-center gap-2 text-[14px]",onClick:()=>{const{openRoomAttachmentsModal:e}=(0,r.ko)();e()}},"📁 Media/File Summary"),n.createElement("div",{className:"px-3 py-2 rounded-[8px] hover:bg-gray-100 dark:hover:bg-[#2a2a2a] cursor-pointer flex items-center gap-2 text-[14px]",onClick:l},"📅 Schedule meeting"),n.createElement("div",{className:"px-3 py-2 rounded-[8px] hover:bg-gray-100 dark:hover:bg-[#2a2a2a] cursor-pointer flex items-center gap-2 text-[14px]",onClick:h},"✅ Action Items"));return n.createElement("div",{className:"flex flex-row gap-[6px] mb-[8px] px-[12px] w-full overflow-x-auto scrollbar-none text-[14px] text-[var(--color-text)]"},n.createElement("div",{className:m,onClick:u},"🧠 Chat Summary"),n.createElement("div",{className:m,onClick:l},"📅 Meeting"),n.createElement(o.A,{content:g,trigger:"click",placement:"bottomLeft",overlayClassName:"room-actions-popover"},n.createElement("div",{className:m},"🚀 All")))};s()}catch(e){s(e)}})},7876:(e,t,a)=>{a.d(t,{A:()=>s});const s={globaSummaryBg:"mykZ1IJ0"}},8125:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(31481),n=a(14487),o=a(87894),r=a(24021),i=a(86046),c=a(13439),d=a(17872),l=a(32989),u=a(60919),m=e([r]),h=m.then?(await m)():m;r=h[0],(0,c.aJ)("loadStarStatus",async e=>{const t=e.stars,a=!t?.topupOptions,[n,o,i]=await Promise.all([(0,r.px)("fetchStarsStatus"),(0,r.px)("fetchStarsStatus",{isTon:!0}),a?(0,r.px)("fetchStarsTopupOptions"):void 0]);!n&&!o||a&&!i||(e=(0,c.mS)(),n&&n.balance.currency===s.OUy&&(e={...e,stars:{...t,balance:n.balance,topupOptions:i||t.topupOptions,history:{all:void 0,inbound:void 0,outbound:void 0},subscriptions:void 0}},n.history&&(e=(0,d.Psh)(e,"all",n.history,n.nextHistoryOffset)),n.subscriptions&&(e=(0,d.qEh)(e,n.subscriptions,n.nextSubscriptionOffset))),o?.balance.currency===s.ykW&&(e={...e,ton:{...o,balance:o.balance,history:{all:void 0,inbound:void 0,outbound:void 0}}},e=(0,d.L_F)(e,o.balance),o.history&&(e=(0,d.Psh)(e,"all",o.history,o.nextHistoryOffset,!0))),(0,c.UF)(e))}),(0,c.aJ)("loadStarsTransactions",async(e,t,a)=>{const{type:s,isTon:n}=a,o=n?e.ton?.history[s]:e.stars?.history[s],i=o?.nextOffset;if(o&&!i)return;const l=await(0,r.px)("fetchStarsTransactions",{isInbound:"inbound"===s,isOutbound:"outbound"===s,offset:i||"",isTon:n});l&&(e=(0,c.mS)(),e=(0,d.L_F)(e,l.balance),l.history&&(e=(0,d.Psh)(e,s,l.history,l.nextOffset,n)),(0,c.UF)(e))}),(0,c.aJ)("loadStarGifts",async e=>{const t=await(0,r.px)("fetchStarGifts");if(!t)return;e=(0,c.mS)();const a=(0,o.dU)(t.gifts,"id"),s={all:[],stock:[],limited:[],resale:[]},n=Object.keys(a),i=Object.values(a),d=i.map(e=>e.isLimited?e.id:void 0).filter(Boolean),l=i.map(e=>e.availabilityRemains||!e.availabilityTotal?e.id:void 0).filter(Boolean),u=i.map(e=>e.availabilityResale?e.id:void 0).filter(Boolean);s.all=n,s.limited=d,s.stock=l,s.resale=u,i.forEach(e=>{const t=e.stars;s[t]||(s[t]=[]),s[t].push(e.id)}),e={...e,starGifts:{byId:a,idsByCategory:s}},(0,c.UF)(e)}),(0,c.aJ)("updateResaleGiftsFilter",(e,t,a)=>{const{filter:s,tabId:o=(0,n.g0)()}=a,r=(0,u.nTw)(e,o);e=(0,l.w)(e,{resaleGifts:{...r.resaleGifts,filter:s}},o),r.resaleGifts.giftId&&t.loadResaleGifts({giftId:r.resaleGifts.giftId,shouldRefresh:!0,tabId:o}),(0,c.UF)(e)}),(0,c.aJ)("loadResaleGifts",async(e,t,a)=>{const{giftId:i,shouldRefresh:m,tabId:h=(0,n.g0)()}=a;let p=(0,u.nTw)(e,h);if(p.resaleGifts.isLoading||p.resaleGifts.isAllLoaded&&!m)return;e=(0,l.w)(e,{resaleGifts:{...p.resaleGifts,isLoading:!0,...m&&{count:0,nextOffset:void 0,isAllLoaded:!1}}},h),(0,c.UF)(e),e=(0,c.mS)(),p=(0,u.nTw)(e,h);const g=p.resaleGifts.nextOffset,f=p.resaleGifts.attributesHash,y=p.resaleGifts.filter,I=await(0,r.px)("fetchResaleGifts",{giftId:i,offset:g,limit:s.bcN,attributesHash:f,filter:y});if(!I)return;const{chats:A,users:v}=I;e=(0,c.mS)(),p=(0,u.nTw)(e,h);const b=p.resaleGifts.gifts,S=m?I.gifts:b.concat(I.gifts),w=p.resaleGifts.updateIteration,C=p.resaleGifts.giftId!==i||m?w+1:w;e=(0,l.w)(e,{resaleGifts:{...p.resaleGifts,giftId:i,count:I.count||p.resaleGifts.count,gifts:S,attributes:I.attributes||p.resaleGifts.attributes,counters:I.counters||p.resaleGifts.counters,attributesHash:I.attributesHash,nextOffset:I.nextOffset,isLoading:!1,isAllLoaded:!I.nextOffset,updateIteration:C}},h),e=(0,d.CKT)(e,(0,o.dU)(v,"id")),e=(0,d.h7P)(e,(0,o.dU)(A,"id")),(0,c.UF)(e)}),(0,c.aJ)("resetResaleGifts",(e,t,a)=>{const{tabId:o=(0,n.g0)()}=a||{},r=(0,u.nTw)(e,o);return(0,l.w)(e,{resaleGifts:{updateIteration:r.resaleGifts.updateIteration+1,filter:s.hYe,count:0,gifts:[]}},o)}),(0,c.aJ)("loadPeerSavedGifts",async(e,t,a)=>{const{peerId:s,shouldRefresh:o,tabId:i=(0,n.g0)()}=a,l=(0,u.PVB)(e,s);if(!l)return;e=(0,c.mS)();const m=(0,u.FDg)(e,s,i),h=m?.nextOffset;if(!o&&m&&!h)return;const p=(0,u.w0X)(e,s,i),g=await(0,r.px)("fetchSavedStarGifts",{peer:l,offset:o?"":h,filter:p});e=(0,c.mS)();const f=(0,u.w0X)(e,s,i);if(!g||f!==p)return;const y=m&&!o?m.gifts.concat(g.gifts):g.gifts;e=(0,d.xOA)(e,s,y,g.nextOffset,i),(0,c.UF)(e)}),(0,c.aJ)("reloadPeerSavedGifts",(e,t,a)=>{const{peerId:s}=a;Object.values(e.byTabId).forEach(a=>{(0,u.FDg)(e,s,a.id)&&t.loadPeerSavedGifts({peerId:s,shouldRefresh:!0,tabId:a.id})})}),(0,c.aJ)("loadStarsSubscriptions",async e=>{const t=e.stars?.subscriptions,a=t?.nextOffset;if(t&&!a)return;e=(0,d.Yzx)(e,!0),(0,c.UF)(e);const n=await(0,r.px)("fetchStarsSubscriptions",{offset:a||""});n&&n.balance.currency===s.OUy&&(e=(0,c.mS)(),e=(0,d.L_F)(e,n.balance),e=(0,d.qEh)(e,n.subscriptions,n.nextOffset),(0,c.UF)(e))}),(0,c.aJ)("changeStarsSubscription",async(e,t,a)=>{const{peerId:s,id:n,isCancelled:o}=a,i=s?(0,u.PVB)(e,s):void 0;s&&!i||(await(0,r.px)("changeStarsSubscription",{peer:i,subscriptionId:n,isCancelled:o}),t.loadStarStatus())}),(0,c.aJ)("fulfillStarsSubscription",async(e,t,a)=>{const{peerId:s,id:n}=a,o=s?(0,u.PVB)(e,s):void 0;s&&!o||(await(0,r.px)("fulfillStarsSubscription",{peer:o,subscriptionId:n}),t.loadStarStatus())}),(0,c.aJ)("changeGiftVisibility",async(e,t,a)=>{const{gift:s,shouldUnsave:o,tabId:l=(0,n.g0)()}=a,m="user"===s.type?e.currentUserId:s.chatId,h=(0,i.HT)(e,s);if(!h)return;const p=(0,u.nTw)(e,l).savedGifts.giftsByPeerId[m];if(p?.gifts?.length){const t=p.gifts.map(e=>e.inputGift&&(0,i.j6)(e.inputGift,s)?{...e,isUnsaved:o}:e);e=(0,d.xOA)(e,m,t,p.nextOffset,l),(0,c.UF)(e)}const g=await(0,r.px)("saveStarGift",{inputGift:h,shouldUnsave:o});if(e=(0,c.mS)(),!g)return e=(0,d.xOA)(e,m,p.gifts,p.nextOffset,l),void(0,c.UF)(e);Object.values(e.byTabId).forEach(a=>{(0,u.FDg)(e,m,l)&&t.loadPeerSavedGifts({peerId:m,shouldRefresh:!0,tabId:a.id})})}),(0,c.aJ)("convertGiftToStars",async(e,t,a)=>{const{gift:s,tabId:o=(0,n.g0)()}=a,c=(0,i.HT)(e,s);if(!c)return;if(!await(0,r.px)("convertStarGift",{inputSavedGift:c}))return;const d="user"===s.type?e.currentUserId:s.chatId;Object.values(e.byTabId).forEach(a=>{(0,u.FDg)(e,d,a.id)&&t.loadPeerSavedGifts({peerId:d,shouldRefresh:!0,tabId:a.id})}),t.openStarsBalanceModal({tabId:o})}),(0,c.aJ)("openGiftUpgradeModal",async(e,t,a)=>{const{giftId:s,gift:o,peerId:i,tabId:d=(0,n.g0)()}=a,u=await(0,r.px)("fetchStarGiftUpgradePreview",{giftId:s});u&&(e=(0,c.mS)(),e=(0,l.w)(e,{giftUpgradeModal:{recipientId:i,gift:o,sampleAttributes:u}},d),(0,c.UF)(e))}),(0,c.aJ)("toggleSavedGiftPinned",async(e,t,a)=>{const{gift:s,peerId:o,tabId:c=(0,n.g0)()}=a,d=(0,u.PVB)(e,o);if(!d)return;const l=(0,u.FDg)(e,o,c);if(!l)return;const m=e.appConfig?.savedGiftPinLimit,h=l.gifts.filter(e=>e.isPinned),p=s.isPinned?h.filter(e=>e.gift.slug!==s.gift.slug):[...h,s],g=(m?p.slice(-m):p).map(t=>(0,i.HT)(e,t.inputGift)).filter(Boolean);await(0,r.px)("toggleSavedGiftPinned",{inputSavedGifts:g,peer:d})&&Object.values(e.byTabId).forEach(a=>{(0,u.FDg)(e,o,a.id)&&t.loadPeerSavedGifts({peerId:o,shouldRefresh:!0,tabId:a.id})})}),(0,c.aJ)("updateStarGiftPrice",async(e,t,a)=>{const{gift:s,price:n}=a,o=(0,i.HT)(e,s);o&&await(0,r.px)("updateStarGiftPrice",{inputSavedGift:o,price:n})&&t.reloadPeerSavedGifts({peerId:e.currentUserId})}),t()}catch(e){t(e)}})},8328:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(23174),n=a(89925),o=a(31481),r=a(81954),i=a(96454),c=a(85982),d=a(14487),l=a(87894),u=a(6e4),m=a(80539),h=a(80140),p=a(44524),g=a(90709),f=a(3544),y=a(188),I=a(70636),A=a(54917),v=a(13439),b=a(17872),S=a(32989),w=a(60919),C=a(56494),E=a(25834),M=a(43874),x=e([u,f,I,A,E]);[u,f,I,A,E]=x.then?(await x)():x;const k=1500,P=o.OzO+o.xB5,T=450,F=2592e5,N=1e3;let B;function U(e,t,a){const{type:s,threadId:n}=(0,w.Xf0)(e)||{},o=u.yE,r=(0,w.hds)(e,t),i="scheduled"===s?(0,w.yFI)(e,t):(0,w.zeq)(e,t);if(!r||!i||!n)return;const d=a.map(e=>i[e]).filter(t=>(0,w.WAX)(e,t,n).canCopy).sort((e,t)=>e.id-t.id),l=[],m=[];d.forEach(t=>{const a=(0,g.WX)(r)?r:(0,w.Y7C)(e,t),s=`> ${a?(0,I.F9)(o,a):t.forwardInfo?.hiddenUserName||""}:`,n=(0,g.ni)(e,t);l.push(s),l.push(`${(0,A.h)(o,t)}\n`),m.push(s),m.push(`${(0,f.dS)(o,t,n,!1,0,!0)}\n`)}),(0,c.A)(l.join("\n"),m.join("\n"))}(0,v.aJ)("setScrollOffset",(e,t,a)=>{const{chatId:s,threadId:n,scrollOffset:o,tabId:r=(0,d.g0)()}=a;return e=(0,b.eww)(e,s,n,"lastScrollOffset",o),(0,b.n4t)(e,s,n,"scrollOffset",o,r)}),(0,v.aJ)("setEditingId",(e,t,a)=>{const{messageId:s,tabId:n=(0,d.g0)()}=a,o=(0,w.Xf0)(e,n);if(!o)return;const{chatId:r,threadId:i,type:c}=o,l="scheduled"===c?"editingScheduledId":"editingId";return(0,b.eww)(e,r,i,l,s)}),(0,v.aJ)("setEditingDraft",(e,t,a)=>{const{text:s,chatId:n,threadId:o,type:r}=a,i="scheduled"===r?"editingScheduledDraft":"editingDraft";return(0,b.eww)(e,n,o,i,s)}),(0,v.aJ)("editLastMessage",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},{chatId:n,threadId:o}=(0,w.Xf0)(e,s)||{};if(!n||!o)return;const r=(0,w.zeq)(e,n),i=(0,w.rA3)(e,n,o,s);if(!r||!i)return;const c=(0,l.Uk)(i,t=>Boolean(r[t]&&(0,w.WAX)(e,r[t],o).canEdit));return c?(0,b.eww)(e,n,o,"editingId",c):void 0}),(0,v.aJ)("replyToNextMessage",(e,t,a)=>{const{targetIndexDelta:n,tabId:o=(0,d.g0)()}=a,{chatId:r,threadId:i}=(0,w.Xf0)(e,o)||{};if(!r||!i)return;const c=(0,w.zeq)(e,r),l=(0,w.rA3)(e,r,i,o);if(!c||!l)return;const u=(0,w.GA4)(e,r,i)?.replyInfo;let m;if((0,w.haw)(e,r,i,o)&&u?.replyToMsgId){const e=Object.keys(c),t=e.indexOf(u.replyToMsgId.toString())+n;m=t<=e.length+1&&t>=0?Number(e[t]):void 0}else if(i===s.l3)m=(0,w.ZZX)(e,r);else{const t=(0,w.Vw0)(e,r,i);m=t?.lastMessageId}t.updateDraftReplyInfo({replyToMsgId:m,replyToPeerId:void 0,quoteText:void 0,tabId:o}),t.focusMessage({chatId:r,threadId:i,messageId:m,tabId:o})}),(0,v.aJ)("openAudioPlayer",(e,t,a)=>{const{chatId:s,threadId:n,messageId:o,origin:r,volume:i,playbackRate:c,isMuted:l,timestamp:u,tabId:m=(0,d.g0)()}=a,h=(0,w.nTw)(e,m);return(0,S.w)(e,{audioPlayer:{chatId:s,threadId:n,messageId:o,timestamp:u,origin:r??h.audioPlayer.origin,volume:i??h.audioPlayer.volume,playbackRate:c||h.audioPlayer.playbackRate||e.audioPlayer.lastPlaybackRate,isPlaybackRateActive:void 0===h.audioPlayer.isPlaybackRateActive?e.audioPlayer.isLastPlaybackRateActive:h.audioPlayer.isPlaybackRateActive,isMuted:l||h.audioPlayer.isMuted}},m)}),(0,v.aJ)("setAudioPlayerVolume",(e,t,a)=>{const{volume:s,tabId:n=(0,d.g0)()}=a;return(0,S.w)(e,{audioPlayer:{...(0,w.nTw)(e,n).audioPlayer,volume:s,isMuted:!1}},n)}),(0,v.aJ)("setAudioPlayerPlaybackRate",(e,t,a)=>{const{playbackRate:s,isPlaybackRateActive:n,tabId:o=(0,d.g0)()}=a;return e={...e,audioPlayer:{...e.audioPlayer,lastPlaybackRate:s,isLastPlaybackRateActive:n}},(0,S.w)(e,{audioPlayer:{...(0,w.nTw)(e,o).audioPlayer,playbackRate:s,isPlaybackRateActive:n}},o)}),(0,v.aJ)("setAudioPlayerMuted",(e,t,a)=>{const{isMuted:s,tabId:n=(0,d.g0)()}=a;return(0,S.w)(e,{audioPlayer:{...(0,w.nTw)(e,n).audioPlayer,isMuted:s}},n)}),(0,v.aJ)("setAudioPlayerOrigin",(e,t,a)=>{const{origin:s,tabId:n=(0,d.g0)()}=a;return(0,S.w)(e,{audioPlayer:{...(0,w.nTw)(e,n).audioPlayer,origin:s}},n)}),(0,v.aJ)("closeAudioPlayer",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s);return(0,S.w)(e,{audioPlayer:{volume:n.audioPlayer.volume,playbackRate:n.audioPlayer.playbackRate,isPlaybackRateActive:n.audioPlayer.isPlaybackRateActive,isMuted:n.audioPlayer.isMuted}},s)}),(0,v.aJ)("openPollResults",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a,r=(0,w.gjV)(e,(0,M.Ny)(),o),i=(0,w.nTw)(e,o);if(r){if(s!==i.pollResults.chatId||n!==i.pollResults.messageId)return(0,S.w)(e,{pollResults:{chatId:s,messageId:n,voters:{}}},o)}else window.setTimeout(()=>{e=(0,v.mS)(),e=(0,S.w)(e,{pollResults:{chatId:s,messageId:n,voters:{}}},o),(0,v.UF)(e)},T)}),(0,v.aJ)("closePollResults",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{pollResults:{}},s)}),(0,v.aJ)("focusLastMessage",(e,t,a)=>{const{tabId:n=(0,d.g0)()}=a||{},o=(0,w.Xf0)(e,n);if(!o)return;const{chatId:r,threadId:i,type:c}=o,l=(0,g.cG)(r,i,e.currentUserId);let u;if(i===s.l3)if("pinned"===c){const t=(0,w.fcC)(e,r,s.l3);if(!t?.length)return;u=t[t.length-1]}else u=(0,w.ZZX)(e,r);else if(l)u=(0,w.ZZX)(e,String(i),"saved");else{const t=(0,w.Vw0)(e,r,i);u=t?.lastMessageId}u&&t.focusMessage({chatId:r,threadId:i,messageListType:c,messageId:u,noHighlight:!0,noForumTopicPanel:!0,tabId:n})}),(0,v.aJ)("focusNextReply",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.Xf0)(e,s);if(!n)return;const{chatId:o,threadId:r}=n,i=(0,w.jp_)(e,o,r,s);if(i&&0!==i.length){const a=i.pop();e=(0,b.n4t)(e,o,r,"replyStack",[...i],s),(0,v.UF)(e),t.focusMessage({chatId:o,threadId:r,messageId:a,tabId:s,noForumTopicPanel:!0})}else t.focusLastMessage({tabId:s})}),(0,v.aJ)("focusMessage",(e,t,a)=>{const{chatId:o,threadId:i=s.l3,messageListType:c="thread",noHighlight:m,groupedId:h,groupedChatId:p,replyMessageId:g,isResizingContainer:f,shouldReplaceHistory:y,noForumTopicPanel:I,quote:A,quoteOffset:S,scrollTargetPosition:C,timestamp:E,tabId:M=(0,d.g0)()}=a;let{messageId:x}=a;if(!(0,w.hds)(e,o))return void t.showNotification({message:(0,u.yE)("Conversation.ErrorInaccessibleMessage"),tabId:M});const T=E?()=>t.openMediaFromTimestamp({chatId:o,threadId:i,messageId:x,timestamp:E,tabId:M}):void 0;if(void 0!==h){const t=(0,w.VC8)(e,p,h);t?.length&&([x]=(0,l.oE)(t))}const F=(0,w.Xf0)(e,M),N=!F||o!==F.chatId||i!==F.threadId||c!==F.type;if(B&&(clearTimeout(B),B=void 0),B=window.setTimeout(()=>{e=(0,v.mS)(),e=(0,b.kV7)({global:e},M),e=(0,b.Xbp)(e,void 0,M),(0,v.UF)(e)},m?P:k),e=(0,b.kV7)({global:e,chatId:o,messageId:x,threadId:i,noHighlight:m,isResizingContainer:f,quote:A,quoteOffset:S,scrollTargetPosition:C},M),e=(0,b.Xbp)(e,void 0,M),g){const t=(0,w.jp_)(e,o,i,M)||[];e=(0,b.n4t)(e,o,i,"replyStack",[...t,g],M)}N&&(e=(0,b.Xbp)(e,n.CC.Static,M));const U=(0,w.rA3)(e,o,i,M);if(U&&U.includes(x))return(0,v.UF)(e,{forceOnHeavyAnimation:!0}),t.openThread({chatId:o,threadId:i,type:c,shouldReplaceHistory:y,noForumTopicPanel:I,tabId:M}),void T?.();if(N&&(e=(0,b.n4t)(e,o,i,"viewportIds",void 0,M)),U&&!N){const t=x>U[0]?n.CC.Down:n.CC.Up;e=(0,b.Xbp)(e,t,M)}(0,r.o8)()&&(0,r.H$)(),(0,v.UF)(e,{forceOnHeavyAnimation:!0}),t.openThread({chatId:o,threadId:i,type:c,shouldReplaceHistory:y,noForumTopicPanel:I,tabId:M}),t.loadViewportMessages({chatId:o,threadId:i,tabId:M,shouldForceRender:!0,onLoaded:T})}),(0,v.aJ)("setShouldPreventComposerAnimation",(e,t,a)=>{const{shouldPreventComposerAnimation:s,tabId:n=(0,d.g0)()}=a;return(0,S.w)(e,{shouldPreventComposerAnimation:s},n)}),(0,v.aJ)("openReplyMenu",(e,t,a)=>{const{fromChatId:s,messageId:n,quoteText:o,quoteOffset:r,tabId:i=(0,d.g0)()}=a;return(0,S.w)(e,{replyingMessage:{fromChatId:s,messageId:n,quoteText:o,quoteOffset:r},isShareMessageModalShown:!0},i)}),(0,v.aJ)("openForwardMenu",(e,t,a)=>{const{fromChatId:s,messageIds:n,storyId:o,groupedId:r,withMyScore:i,tabId:c=(0,d.g0)()}=a;let l;return r&&(l=(0,w.D_S)(e,s,r)),(0,S.w)(e,{forwardMessages:{fromChatId:s,messageIds:l||n,storyId:o,withMyScore:i},isShareMessageModalShown:!0},c)}),(0,v.aJ)("changeRecipient",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{forwardMessages:{...(0,w.nTw)(e,s).forwardMessages,toChatId:void 0,noAuthors:!1,noCaptions:!1},isShareMessageModalShown:!0},s)}),(0,v.aJ)("setForwardNoAuthors",(e,t,a)=>{const{noAuthors:s,tabId:n=(0,d.g0)()}=a,o=(0,w.nTw)(e,n);return(0,S.w)(e,{forwardMessages:{...o.forwardMessages,noAuthors:s,noCaptions:s&&o.forwardMessages.noCaptions}},n)}),(0,v.aJ)("setForwardNoCaptions",(e,t,a)=>{const{noCaptions:s,tabId:n=(0,d.g0)()}=a;return(0,S.w)(e,{forwardMessages:{...(0,w.nTw)(e,n).forwardMessages,noCaptions:s,noAuthors:s}},n)}),(0,v.aJ)("exitForwardMode",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};e=(0,S.w)(e,{isShareMessageModalShown:!1,forwardMessages:{},replyingMessage:{}},s),(0,v.UF)(e)}),(0,v.aJ)("openForwardMenuForSelectedMessages",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s);if(!n.selectedMessages)return;const{chatId:o,messageIds:r}=n.selectedMessages,i=r.filter(t=>{const a=(0,w.O5q)(e,o,t);return a&&(0,w.R4s)(e,a)});i.length&&t.openForwardMenu({fromChatId:o,messageIds:i,tabId:s})}),(0,v.aJ)("cancelMediaDownload",(e,t,a)=>{const{media:s,tabId:n=(0,d.g0)()}=a,o=(0,g.VO)(s,"download");if(o)return(0,b.IwB)(e,[o],n)}),(0,v.aJ)("cancelMediaHashDownloads",(e,t,a)=>{const{mediaHashes:s,tabId:n=(0,d.g0)()}=a;return(0,b.IwB)(e,s,n)}),(0,v.aJ)("downloadMedia",(e,t,a)=>{const{media:s,originMessage:n,tabId:o=(0,d.g0)()}=a,r=(0,g.VO)(s,"download");if(!r)return;const i={size:"size"in s?s.size:0,format:(0,g.Cz)(s,"download"),filename:(0,g.sd)(s),originChatId:n?.chatId,originMessageId:n?.id};return(0,b.iRS)(e,r,i,o)}),(0,v.aJ)("downloadSelectedMessages",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s);if(!n.selectedMessages)return;const{chatId:o,messageIds:r}=n.selectedMessages,{threadId:i}=(0,w.Xf0)(e,s)||{},c=(0,w.zeq)(e,o);c&&i&&r.map(e=>c[e]).filter(t=>(0,w.WAX)(e,t,i).canDownload).forEach(a=>{const n=(0,C.iS)(e,a);n&&t.downloadMedia({media:n,originMessage:a,tabId:s})})}),(0,v.aJ)("enterMessageSelectMode",(e,t,a)=>{const{messageId:s,tabId:n=(0,d.g0)()}=a||{},o=(0,w.meB)(e,n);return o?(0,b.l3i)(e,o.id,s,n):e}),(0,v.aJ)("toggleMessageSelection",(e,t,a)=>{const{messageId:s,groupedId:n,childMessageIds:o,withShift:r,tabId:c=(0,d.g0)()}=a,l=(0,w.Xf0)(e,c);if(!l)return;const{chatId:u,threadId:m,type:h}=l;e=(0,b.yrN)(e,u,m,h,s,n,o,r,c),(0,v.UF)(e),e.shouldShowContextMenuHint&&(t.disableContextMenuHint(),t.showNotification({message:`To **edit** or **reply**, close this menu. Then ${i.TF?"long tap":"right click"} on a message.`,tabId:c}))}),(0,v.aJ)("disableContextMenuHint",e=>{if(e.shouldShowContextMenuHint)return{...e,shouldShowContextMenuHint:!1}}),(0,v.aJ)("exitMessageSelectMode",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,b.T4Z)(e,s)}),(0,v.aJ)("openPollModal",(e,t,a)=>{const{isQuiz:s,tabId:n=(0,d.g0)()}=a||{};return(0,S.w)(e,{pollModal:{isOpen:!0,isQuiz:s}},n)}),(0,v.aJ)("closePollModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{pollModal:{isOpen:!1}},s)}),(0,v.aJ)("openTodoListModal",(e,t,a)=>{const{chatId:s,messageId:n,forNewTask:o,tabId:r=(0,d.g0)()}=a;return(0,S.w)(e,{todoListModal:{chatId:s,messageId:n,forNewTask:o}},r)}),(0,y.k)("closeTodoListModal","todoListModal"),(0,v.aJ)("checkVersionNotification",(e,t)=>{if(o.cOD&&Date.now()>Number(o.cOD)+F)return;const a="0.0.15".split(".").slice(0,2).join("."),{serviceNotifications:s}=e;if(s.find(({version:e})=>e===a))return;const n={chatId:o.zv8,date:(0,h.Fm)(),content:{text:(0,m.Ay)(p,!0)},isOutgoing:!1};t.createServiceNotification({message:n,version:a})}),(0,v.aJ)("createServiceNotification",(e,t,a)=>{const{message:s,version:n}=a,{serviceNotifications:r}=e,i=Math.max((0,w.ZZX)(e,o.zv8)||0,...r.map(({id:e})=>e)),c=(r.length+1)/N,d=Math.floor(i)+c;s.previousLocalId=s.id,s.id=d;const l={id:d,message:s,version:n,isUnread:!0};e={...e,serviceNotifications:[...r.slice(-N),l]},(0,v.UF)(e),t.apiUpdate({"@type":"newMessage",id:s.id,chatId:s.chatId,message:s})}),(0,v.aJ)("openReactorListModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{reactorModal:{chatId:s,messageId:n}},o)}),(0,v.aJ)("closeReactorListModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{reactorModal:void 0},s)}),(0,v.aJ)("openSeenByModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{seenByModal:{chatId:s,messageId:n}},o)}),(0,v.aJ)("closeSeenByModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{seenByModal:void 0},s)}),(0,v.aJ)("openPrivacySettingsNoticeModal",(e,t,a)=>{const{chatId:s,isReadDate:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{privacySettingsNoticeModal:{chatId:s,isReadDate:n}},o)}),(0,v.aJ)("closePrivacySettingsNoticeModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{privacySettingsNoticeModal:void 0},s)}),(0,v.aJ)("openChatLanguageModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a,r=n?(0,w.Rny)(e,s,n,o):(0,w.qZq)(e,s,o);return(0,S.w)(e,{chatLanguageModal:{chatId:s,messageId:n,activeLanguage:r}},o)}),(0,v.aJ)("closeChatLanguageModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{chatLanguageModal:void 0},s)}),(0,v.aJ)("copySelectedMessages",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s);if(!n.selectedMessages)return;const{chatId:o,messageIds:r}=n.selectedMessages;U(e,o,r)}),(0,v.aJ)("copyMessagesByIds",(e,t,a)=>{const{messageIds:s,tabId:n=(0,d.g0)()}=a,o=(0,w.meB)(e,n);s&&0!==s.length&&o&&U(e,o.id,s)}),(0,v.aJ)("openOneTimeMediaModal",(e,t,a)=>{const{message:s,tabId:n=(0,d.g0)()}=a;e=(0,S.w)(e,{oneTimeMediaModal:{message:s}},n),(0,v.UF)(e)}),(0,v.aJ)("closeOneTimeMediaModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};e=(0,S.w)(e,{oneTimeMediaModal:void 0},s),(0,v.UF)(e)}),(0,v.aJ)("closeReportAdModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{reportAdModal:void 0},s)}),(0,v.aJ)("closeReportModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{reportModal:void 0},s)}),(0,v.aJ)("openPreviousReportAdModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s).reportAdModal;if(n){if(1!==n.sections.length)return(0,S.w)(e,{reportAdModal:{...n,sections:n.sections.slice(0,-1)}},s);t.closeReportAdModal({tabId:s})}}),(0,v.aJ)("openPreviousReportModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{},n=(0,w.nTw)(e,s).reportModal;if(n){if(1!==n.sections.length)return(0,S.w)(e,{reportModal:{...n,sections:n.sections.slice(0,-1)}},s);t.closeReportModal({tabId:s})}}),(0,v.aJ)("openPaidReactionModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{paidReactionModal:{chatId:s,messageId:n}},o)}),(0,v.aJ)("closePaidReactionModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{paidReactionModal:void 0},s)}),(0,v.aJ)("openSuggestMessageModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{suggestMessageModal:{chatId:s,messageId:n}},o)}),(0,v.aJ)("closeSuggestMessageModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{suggestMessageModal:void 0},s)}),(0,v.aJ)("openSuggestedPostApprovalModal",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,d.g0)()}=a;return(0,S.w)(e,{suggestedPostApprovalModal:{chatId:s,messageId:n}},o)}),(0,v.aJ)("closeSuggestedPostApprovalModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{suggestedPostApprovalModal:void 0},s)}),(0,v.aJ)("openDeleteMessageModal",(e,t,a)=>{const{chatId:s,messageIds:n,isSchedule:o,tabId:r=(0,d.g0)()}=a;e=(0,v.mS)(),e=(0,S.w)(e,{deleteMessageModal:{chatId:s,messageIds:n,isSchedule:o}},r),(0,v.UF)(e)}),(0,v.aJ)("closeDeleteMessageModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{deleteMessageModal:void 0},s)}),(0,v.aJ)("openRoomAttachmentsModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{isRoomAttachmentsModalOpen:!0},s)}),(0,v.aJ)("closeRoomAttachmentsModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{isRoomAttachmentsModalOpen:void 0},s)}),(0,v.aJ)("openAboutAdsModal",(e,t,a)=>{const{randomId:s,additionalInfo:n,canReport:o,sponsorInfo:r,tabId:i=(0,d.g0)()}=a||{};return(0,S.w)(e,{aboutAdsModal:{randomId:s,canReport:o,additionalInfo:n,sponsorInfo:r}},i)}),(0,v.aJ)("closeAboutAdsModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{aboutAdsModal:void 0},s)}),(0,v.aJ)("closePreparedInlineMessageModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{preparedMessageModal:void 0},s)}),(0,v.aJ)("closeSharePreparedMessageModal",(e,t,a)=>{const{tabId:s=(0,d.g0)()}=a||{};return(0,S.w)(e,{sharePreparedMessageModal:void 0},s)}),(0,v.aJ)("updateSharePreparedMessageModalSendArgs",async(e,t,a)=>{const{args:s,tabId:n=(0,d.g0)()}=a||{},o=(0,w.nTw)(e,n);if(!o.sharePreparedMessageModal)return;if(!s)return e=(0,S.w)(e,{sharePreparedMessageModal:{...o.sharePreparedMessageModal,pendingSendArgs:void 0}},n),void(0,v.UF)(e);const r=await(0,E.g)(e,s.peerId);e=(0,v.mS)(),e=(0,S.w)(e,{sharePreparedMessageModal:{...o.sharePreparedMessageModal,pendingSendArgs:{peerId:s.peerId,threadId:s.threadId,starsForSendMessage:r}}},n),(0,v.UF)(e)}),t()}catch(R){t(R)}})},8795:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(84051),n=a(96454);const o=document.querySelector('meta[name="viewport"]'),r=o?.getAttribute("content")||"",i="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover";function c(e=!1){(0,s.vJ)(()=>{if(n.TF){if(!e)return o?.setAttribute("content",r),n.pz&&!n._7&&document.addEventListener("gesturestart",d),()=>{o?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no"),n.pz&&!n._7&&document.removeEventListener("gesturestart",d)};o?.setAttribute("content",i)}},[e])}function d(e){e.preventDefault()}},9079:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"HistoryCalendar",!t);return a?s.Ay.createElement(a,e):void 0}},10197:(e,t,a)=>{var s=a(23174),n=a(96454),o=a(14487),r=a(66414),i=a(13439),c=a(17872),d=a(32989),l=a(60919);(0,i.aJ)("processOpenChatOrThread",(e,t,a)=>{const{chatId:n,threadId:r=s.l3,type:i="thread",shouldReplaceHistory:u=!1,shouldReplaceLast:m=!1,noForumTopicPanel:h,tabId:p=(0,o.g0)()}=a,g=(0,l.Xf0)(e,p),f=(0,l.nTw)(e,p);if(f.premiumModal?.promo&&f.premiumModal?.isOpen&&(e=(0,d.w)(e,{premiumModal:{...f.premiumModal,isOpen:!1}},p)),t.hideEffectInComposer({tabId:p}),t.closeStoryViewer({tabId:p}),t.closeStarsBalanceModal({tabId:p}),t.closeStarsTransactionModal({tabId:p}),t.closeGiftInfoModal({tabId:p}),g&&g.chatId===n&&g.threadId===r&&g.type===i||(n&&(e=(0,c.n4t)(e,n,r,"replyStack",[],p),e=(0,d.w)(e,{activeReactions:{},shouldPreventComposerAnimation:!0},p),e=(0,c._54)(e,n,r,p)),e=(0,c.T4Z)(e,p),e=(0,d.w)(e,{isStatisticsShown:!1,monetizationStatistics:void 0,boostStatistics:void 0,contentToBeScheduled:void 0,...n!==(0,l.nTw)(e,p).forwardMessages.toChatId&&{forwardMessages:{},isShareMessageModalShown:!1}},p)),n){const a=(0,l.hds)(e,n);a?.isForum&&!h?t.openForumPanel({chatId:n,tabId:p}):n!==(0,l.nTw)(e,p).forumPanelChatId&&t.closeForumPanel({tabId:p})}return t.updatePageTitle({tabId:p}),(0,c.MNF)(e,n,r,i,u,m,p)}),(0,i.aJ)("openChatInNewTab",(e,t,a)=>{const{chatId:o,threadId:i=s.l3}=a,c=(0,r.dk)(o,"thread",i);n.cp?window.electron.openNewWindow(c):window.open(c,"_blank")}),(0,i.aJ)("openPreviousChat",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return t.updatePageTitle({tabId:s}),(0,c.MNF)(e,void 0,void 0,void 0,void 0,void 0,s)}),(0,i.aJ)("openChatWithInfo",(e,t,a)=>{const{profileTab:s,forceScrollProfileTab:n=!1,tabId:r=(0,o.g0)()}=a;e=(0,d.w)(e,{...(0,l.nTw)(e,r),isChatInfoShown:!0,isChatAIShown:!1,nextProfileTab:s,forceScrollProfileTab:n},r),e={...e,lastIsChatInfoShown:!0},(0,i.UF)(e),t.openChat({...a,tabId:r})}),(0,i.aJ)("openThreadWithInfo",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a;e=(0,d.w)(e,{...(0,l.nTw)(e,s),isChatInfoShown:!0,isChatAIShown:!1},s),e={...e,lastIsChatInfoShown:!0},(0,i.UF)(e),t.openThread({...a,tabId:s})}),(0,i.aJ)("openChatAIWithInfo",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a;e=(0,d.w)(e,{...(0,l.nTw)(e,s),isChatAIShown:!0,isUserPortraitShown:!1,isChatInfoShown:!1},s),e={...e,lastIsChatInfoShown:!0},(0,i.UF)(e)}),(0,i.aJ)("openUserPortrait",(e,t,a)=>{const{tabId:s=(0,o.g0)(),userId:n,chatId:r}=a||{},{chatId:c}=(0,l.Xf0)(e,s)||{};r&&r!==c&&t.openChat({id:r,tabId:s}),e=(0,d.w)(e,{...(0,l.nTw)(e,s),isUserPortraitShown:!0,userPortraitUserId:n},s),e={...e},(0,i.UF)(e)}),(0,i.aJ)("openChatWithDraft",(e,t,a)=>{const{chatId:n,text:r,threadId:i=s.l3,files:c,filter:l,tabId:u=(0,o.g0)()}=a;return n&&t.openThread({chatId:n,threadId:i,tabId:u}),(0,d.w)(e,{requestedDraft:{chatId:n,text:r,files:c,filter:l}},u)}),(0,i.aJ)("resetChatCreation",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return(0,d.w)(e,{chatCreation:void 0},s)}),(0,i.aJ)("setNewChatMembersDialogState",(e,t,a)=>{const{newChatMembersProgress:s,tabId:n=(0,o.g0)()}=a;return(0,d.w)(e,{newChatMembersProgress:s},n)}),(0,i.aJ)("openNextChat",(e,t,a)=>{const{targetIndexDelta:s,orderedIds:n,tabId:r=(0,o.g0)()}=a,{chatId:i}=(0,l.Xf0)(e,r)||{};if(!i)return void t.openChat({id:n[0],tabId:r});const c=n.indexOf(i);if(-1===c)return;const d=n[c+s];t.openChat({id:d,shouldReplaceHistory:!0,tabId:r})}),(0,i.aJ)("closeDeleteChatFolderModal",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return(0,d.w)(e,{deleteFolderDialogModal:void 0},s)}),(0,i.aJ)("closeChatlistModal",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return(0,d.w)(e,{chatlistModal:void 0},s)}),(0,i.aJ)("requestChatTranslation",(e,t,a)=>{const{chatId:s,toLanguageCode:n,tabId:r=(0,o.g0)()}=a;return(0,c.lcj)(e,s,n,r)}),(0,i.aJ)("closeChatInviteModal",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return(0,d.w)(e,{chatInviteModal:void 0},s)})},10289:(e,t,a)=>{a.d(t,{e:()=>i,o:()=>r});var s=a(90709),n=a(17663);const o=600;function r(e){return"albumId"in e}function i(e,t,a,r,i){let c;const d=[{originalDate:e[0].date,datetime:(0,n.CS)(1e3*e[0].date),senderGroups:[[]]}];return e.forEach((l,u)=>{const m=d[d.length-1],h=m.senderGroups[m.senderGroups.length-1];l.isInAlbum?c?(c.messages.push(l),l.hasComments&&(c.commentsMessage=l),l.content.text&&!c.hasMultipleCaptions&&(c.captionMessage?(c.hasMultipleCaptions=!0,c.captionMessage=void 0):c.captionMessage=l)):c={albumId:l.groupedId,messages:[l],mainMessage:l,hasMultipleCaptions:!1}:(l.content.paidMedia?.extendedMedia.length||0)>1?h.push({albumId:`paid-${l.id}`,messages:[l],mainMessage:l,hasMultipleCaptions:!1,isPaidMedia:!0}):h.push(l);const p=e[u+1];!c||p&&p.groupedId&&p.groupedId===c.albumId||(h.push(c),c=void 0);const g=h[h.length-1];if(p&&!c){const e=(0,n.CS)(1e3*p.date);if(m.datetime!==e){const t={originalDate:p.date,datetime:e,senderGroups:[[]]};d.push(t)}else(p.id===t||l.senderId!==p.senderId||!i&&l.paidMessageStars||p.suggestedPostInfo||l.isOutgoing!==p.isOutgoing||l.postAuthorTitle!==p.postAuthorTitle||(0,s._P)(l)&&"phoneCall"!==l.content.action?.type||(0,s._P)(p)&&"phoneCall"!==p.content.action?.type||l.inlineButtons||p.inlineButtons||p.date-l.date>o||a&&(l.id===a||g&&"mainMessage"in g&&g.mainMessage?.id===a)&&p.id!==a||r&&l.forwardInfo?.fromId!==p.forwardInfo?.fromId)&&m.senderGroups.push([])}}),d}},10454:(e,t,a)=>{e.exports=a.p+"ai-knowledge.54a4756d31c2f099cb50.png"},11161:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(31481),n=a(14487),o=a(87894),r=a(6e4),i=a(37836),c=a(529),d=a(24021),l=a(13439),u=a(17872),m=a(32989),h=a(60919),p=a(64520),g=e([r,d]);[r,d]=g.then?(await g)():g;const f=200,y=10,I=(0,i.nF)(e=>e(),500,!1);async function A(e,t){const a=await(0,d.px)("fetchRecentStickers",{hash:t});a&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,recent:a}},(0,l.UF)(e))}async function v(e,t,a){let s;try{s=await(0,d.px)("fetchStickers",{stickerSetInfo:a})}catch(s){if("STICKERSET_INVALID"===s.message)return void Object.values(e.byTabId).forEach(({id:s})=>{t.showNotification({message:(0,r.yE)("StickerPack.ErrorNotFound"),tabId:s}),"shortName"in a&&(0,h.nTw)(e,s).openedStickerSetShortName===a.shortName&&(e=(0,m.w)(e,{openedStickerSetShortName:void 0},s),(0,l.UF)(e))})}if(e=(0,l.mS)(),!s)return;const{set:n,stickers:o,packs:i}=s,c=(e=(0,u.v9P)(e,n.id,{...n,stickers:o,packs:i})).stickers.forEmoji.emoji;c&&i[c]&&(e=(0,u.PcY)(e)),(0,l.UF)(e)}async function b(e,t,a,s,...[o=(0,n.g0)()]){const r=await(0,d.px)("searchGifs",{query:t,offset:s,username:a});r&&(e=(0,l.mS)(),e=(0,u.Mel)(e,!s,r.gifs,r.nextOffset,o),(0,l.UF)(e))}(0,l.aJ)("loadStickerSets",async(e,t)=>{const[a,s]=await Promise.all([(0,d.px)("fetchStickerSets",{hash:e.stickers.added.hash}),(0,d.px)("fetchCustomEmojiSets",{hash:e.customEmojis.added.hash})]);s&&a&&(e=(0,l.mS)(),e=(0,u.MkE)(e,"added",a.hash,a.sets),e=(0,u.E24)(e,s.hash,s.sets),(0,l.UF)(e),t.loadCustomEmojis({ids:e.recentCustomEmojis}))}),(0,l.aJ)("loadAddedStickers",async(e,t)=>{const{added:{setIds:a=[]},setsById:s}=e.stickers,{added:{setIds:n=[]}}=e.customEmojis,o=[...a,...n];if(o.length)for(let e=0;e<o.length;e++){const a=o[e];s[a]?.stickers||(t.loadStickers({stickerSetInfo:{id:a,accessHash:s[a].accessHash}}),e%y===0&&e>0&&await(0,i.v7)(f))}}),(0,l.aJ)("loadRecentStickers",e=>{const{hash:t}=e.stickers.recent||{};A(e,t)}),(0,l.aJ)("loadFavoriteStickers",async e=>{const{hash:t}=e.stickers.favorite||{},a=await(0,d.px)("fetchFavoriteStickers",{hash:t});a&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,favorite:a}},(0,l.UF)(e))}),(0,l.aJ)("loadPremiumStickers",async e=>{const{hash:t}=e.stickers.premium||{};if((0,h.trm)(e))return;const a=await(0,d.px)("fetchStickersForEmoji",{emoji:"⭐️⭐️",hash:t});a&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,premium:{hash:a.hash,stickers:a.stickers}}},(0,l.UF)(e))}),(0,l.aJ)("loadGreetingStickers",async e=>{const{hash:t}=e.stickers.greeting||{};if((0,h.trm)(e))return;const a=await(0,d.px)("fetchStickersForEmoji",{emoji:"👋⭐️",hash:t});a&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,greeting:{hash:a.hash,stickers:a.stickers.filter(e=>"👋"===e.emoji)}}},(0,l.UF)(e))}),(0,l.aJ)("loadFeaturedStickers",async e=>{const{hash:t}=e.stickers.featured||{},a=await(0,d.px)("fetchFeaturedStickers",{hash:t});a&&(e=(0,l.mS)(),e=(0,u.MkE)(e,"featured",a.hash,a.sets),(0,l.UF)(e))}),(0,l.aJ)("loadPremiumGifts",async e=>{const t=await(0,d.px)("fetchPremiumGifts");if(!t)return;const{set:a,stickers:s}=t;e=(0,l.mS)(),e={...e,premiumGifts:{...a,stickers:s}},(0,l.UF)(e)}),(0,l.aJ)("loadTonGifts",async e=>{const t=await(0,d.px)("fetchTonGifts");if(!t)return;const{set:a,stickers:s}=t;e=(0,l.mS)(),e={...e,tonGifts:{...a,stickers:s}},(0,l.UF)(e)}),(0,l.aJ)("loadDefaultTopicIcons",async e=>{const t=await(0,d.px)("fetchDefaultTopicIcons");if(!t)return;e=(0,l.mS)();const{set:a,stickers:s}=t,n={...a,stickers:s};e=(0,u.v9P)(e,n.id,n),e={...e,defaultTopicIconsId:n.id},(0,l.UF)(e)}),(0,l.aJ)("loadDefaultStatusIcons",async e=>{const t=await(0,d.px)("fetchDefaultStatusEmojis");if(!t)return;e=(0,l.mS)();const{set:a,stickers:s}=t,n={...a,stickers:s};e=(0,u.v9P)(e,n.id,n),e={...e,defaultStatusIconsId:n.id},(0,l.UF)(e)}),(0,l.aJ)("loadUserCollectibleStatuses",async(e,t)=>{(0,l.UF)(e);const{hash:a}=e.collectibleEmojiStatuses||{},s=await(0,d.px)("fetchCollectibleEmojiStatuses",{hash:a});if(!s)return;e=(0,l.mS)(),e={...e,collectibleEmojiStatuses:{hash:s.hash,statuses:s.statuses}},(0,l.UF)(e);const n=s.statuses.map(({documentId:e})=>e);t.loadCustomEmojis({ids:n})}),(0,l.aJ)("loadStickers",(e,t,a)=>{const{stickerSetInfo:s}=a,n=(0,h.ycM)(e,s);n&&n.count===n?.stickers?.length||v(e,t,s)}),(0,l.aJ)("loadAnimatedEmojis",async e=>{const[t,a]=await Promise.all([(0,d.px)("fetchAnimatedEmojis"),(0,d.px)("fetchAnimatedEmojiEffects")]);t&&a&&(e=(0,l.mS)(),e=(0,u.$nQ)(e,{...t.set,stickers:t.stickers}),e={...e,animatedEmojiEffects:{...a.set,stickers:a.stickers}},(0,l.UF)(e))}),(0,l.aJ)("loadBirthdayNumbersStickers",async e=>{const t=await(0,d.px)("fetchStickers",{stickerSetInfo:{shortName:s.OVC}});t&&(e=(0,l.mS)(),e={...e,birthdayNumbers:{...t.set,stickers:t.stickers}},(0,l.UF)(e))}),(0,l.aJ)("loadRestrictedEmojiStickers",async e=>{const t=await(0,d.px)("fetchStickers",{stickerSetInfo:{shortName:s.Kh8}});t&&(e=(0,l.mS)(),e={...e,restrictedEmoji:{...t.set,stickers:t.stickers}},(0,l.UF)(e))}),(0,l.aJ)("loadGenericEmojiEffects",async e=>{const t=await(0,d.px)("fetchGenericEmojiEffects");if(!t)return;e=(0,l.mS)();const{set:a,stickers:s}=t;e={...e,genericEmojiEffects:{...a,stickers:s}},(0,l.UF)(e)}),(0,l.aJ)("loadSavedGifs",async e=>{const{hash:t}=e.gifs.saved,a=await(0,d.px)("fetchSavedGifs",{hash:t});a&&(e=(0,l.mS)(),e={...e,gifs:{...e.gifs,saved:a}},(0,l.UF)(e))}),(0,l.aJ)("saveGif",async(e,t,a)=>{const{gif:s,shouldUnsave:o,tabId:i=(0,n.g0)()}=a,c=e.gifs.saved.gifs?.length,u=(0,p.d)(e,"savedGifs"),m=(0,p.B)(e,"savedGifs"),g=(0,h.g29)(e);if(!o&&c&&c>=u&&t.showNotification({title:r.yE("LimitReachedFavoriteGifs",u.toString()),message:g?r.yE("LimitReachedFavoriteGifsSubtitlePremium"):r.yE("LimitReachedFavoriteGifsSubtitle",m.toString()),...!g&&{action:{action:"openPremiumModal",payload:{tabId:i}}},className:"bold-link",tabId:i}),!await(0,d.px)("saveGif",{gif:s,shouldUnsave:o}))return;e=(0,l.mS)();const f=e.gifs.saved.gifs?.filter(({id:e})=>e!==s.id)||[],y=o?f:[s,...f];e={...e,gifs:{...e.gifs,saved:{...e.gifs.saved,gifs:y}}},(0,l.UF)(e)}),(0,l.aJ)("faveSticker",(e,t,a)=>{const{sticker:s,tabId:o=(0,n.g0)()}=a,i=e.stickers.favorite.stickers.length,c=(0,p.d)(e,"stickersFaved"),l=(0,p.B)(e,"stickersFaved"),u=(0,h.g29)(e);i>=c&&t.showNotification({title:r.yE("LimitReachedFavoriteStickers",c.toString()),message:u?r.yE("LimitReachedFavoriteStickersSubtitlePremium"):r.yE("LimitReachedFavoriteStickersSubtitle",l.toString()),...!u&&{action:{action:"openPremiumModal",payload:{tabId:o}}},className:"bold-link",tabId:o}),s&&(0,d.px)("faveSticker",{sticker:s})}),(0,l.aJ)("unfaveSticker",(e,t,a)=>{const{sticker:s}=a;s&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,favorite:{...e.stickers.favorite,stickers:e.stickers.favorite.stickers.filter(({id:e})=>e!==s.id)}}},(0,l.UF)(e),(0,d.px)("faveSticker",{sticker:s,unfave:!0}))}),(0,l.aJ)("removeRecentSticker",async(e,t,a)=>{const{sticker:s}=a;await(0,d.px)("removeRecentSticker",{sticker:s})&&A((0,l.mS)())}),(0,l.aJ)("clearRecentStickers",async e=>{await(0,d.px)("clearRecentStickers")&&(e=(0,l.mS)(),e={...e,stickers:{...e.stickers,recent:{stickers:[]}}},(0,l.UF)(e))}),(0,l.aJ)("toggleStickerSet",(e,t,a)=>{const{stickerSetId:s}=a,n=(0,h.ycM)(e,s);if(!n)return;const{accessHash:o,installedDate:r,isArchived:i}=n,c=!i&&Boolean(r);(0,d.px)(c?"uninstallStickerSet":"installStickerSet",{stickerSetId:s,accessHash:o})}),(0,l.aJ)("loadEmojiKeywords",async(e,t,a)=>{const{language:s}=a;let n=e.emojiKeywords[s];if(n?.isLoading)return;e={...e,emojiKeywords:{...e.emojiKeywords,[s]:{...n,isLoading:!0}}},(0,l.UF)(e);const o=await(0,d.px)("fetchEmojiKeywords",{language:s,fromVersion:n?n.version:0});if(n=(e=(0,l.mS)()).emojiKeywords[s],!o)return e={...e,emojiKeywords:{...e.emojiKeywords,[s]:{...n,isLoading:!1}}},void(0,l.UF)(e);e={...e,emojiKeywords:{...e.emojiKeywords,[s]:{isLoading:!1,version:o.version,keywords:{...n?.keywords,...o.keywords}}}},(0,l.UF)(e)}),(0,l.aJ)("setStickerSearchQuery",(e,t,a)=>{const{query:s,tabId:o=(0,n.g0)()}=a;s&&I(async()=>{const t=await(0,d.px)("searchStickers",{query:s});if(!t)return;e=(0,l.mS)();const{setsById:a,added:n}=e.stickers,r=t.sets.map(({id:e})=>e);n.setIds&&n.setIds.forEach(e=>{if(!r.includes(e)){const{title:t}=a[e]||{};t&&(0,c.A)(t,s)&&r.unshift(e)}}),e=(0,u.MkE)(e,"search",t.hash,t.sets),e=(0,u.bG)(e,t.hash,r,o),(0,l.UF)(e)})}),(0,l.aJ)("setGifSearchQuery",(e,t,a)=>{const{query:s,tabId:o=(0,n.g0)()}=a;"string"==typeof s&&I(()=>{b(e=(0,l.mS)(),s,e.config?.gifSearchUsername,void 0,o)})}),(0,l.aJ)("searchMoreGifs",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{query:o,offset:r}=(0,h.nTw)(e,s).gifSearch;"string"==typeof o&&I(()=>{b(e=(0,l.mS)(),o,e.config?.gifSearchUsername,r,s)})}),(0,l.aJ)("loadStickersForEmoji",(e,t,a)=>{const{emoji:s}=a,{hash:n}=e.stickers.forEmoji;I(async()=>{e=(0,l.mS)(),e={...e,stickers:{...e.stickers,forEmoji:{...e.stickers.forEmoji,emoji:s}}},(0,l.UF)(e);const t=await(0,d.px)("fetchStickersForEmoji",{emoji:s,hash:n});e=(0,l.mS)(),t&&e.stickers.forEmoji.emoji===s&&(e=(0,u.f_N)(e,s,t.stickers,t.hash),(0,l.UF)(e))})}),(0,l.aJ)("clearStickersForEmoji",e=>({...e,stickers:{...e.stickers,forEmoji:{}}})),(0,l.aJ)("loadCustomEmojiForEmoji",(e,t,a)=>{const{emoji:s}=a;return(0,u.G4z)(e,s)}),(0,l.aJ)("clearCustomEmojiForEmoji",e=>({...e,customEmojis:{...e.customEmojis,forEmoji:{}}})),(0,l.aJ)("loadFeaturedEmojiStickers",async e=>{const t=await(0,d.px)("fetchFeaturedEmojiStickers");t&&(e=(0,l.mS)(),e={...e,customEmojis:{...e.customEmojis,featuredIds:t.sets.map(({id:e})=>e),byId:{...e.customEmojis.byId,...(0,o.dU)(t.sets.flatMap(e=>e.stickers||[]),"id")}},stickers:{...e.stickers,setsById:{...e.stickers.setsById,...(0,o.dU)(t.sets,"id")}}},(0,l.UF)(e))}),(0,l.aJ)("openStickerSet",async(e,t,a)=>{const{stickerSetInfo:s,shouldIgnoreCache:o,tabId:r=(0,n.g0)()}=a;!o&&(0,h.ycM)(e,s)||await v(e,t,s),e=(0,l.mS)();const i=(0,h.ycM)(e,s);i?.shortName&&(e=(0,m.w)(e,{openedStickerSetShortName:i.shortName},r),(0,l.UF)(e))}),(0,l.aJ)("loadRecentEmojiStatuses",async e=>{const t=await(0,d.px)("fetchRecentEmojiStatuses");t&&(e=(0,l.mS)(),e=(0,u.T3R)(e,t.hash,t.emojiStatuses),(0,l.UF)(e))}),t()}catch(S){t(S)}})},11641:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"vBPv6lUS",graph:"EbPbvB1I",hidden:"nsPIlLYL",ready:"s6qyDhkE",section:"cB2IkwY6",topText:"FLOpxZd1",availableReward:"emE6bAD8",rewardValue:"eyDAxGDU",decimalPart:"jkRV_L7b",integer:"xE9kfGi7",decimalUsdPart:"hWMnYdxX",toncoinIcon:"ubDl9CvS",textBottom:"P3qZJJzF"}},12233:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>we});var n=a(84051),o=a(72096),r=a(61433),i=a(13439),c=a(31791),d=a(31481),l=a(66644),u=a(60919),m=a(30708),h=a(96454),p=a(87357),g=a(25903),f=a(55148),y=a(80089),I=a(66414),A=a(14050),v=a(93456),b=a(46520),S=a(32625),w=a(14737),C=a(43874),E=a(30857),M=a(39351),x=a(17712),k=a(8795),P=a(34201),T=a(35297),F=a(61157),N=a(60138),B=a(90423),U=a(23171),R=a(82017),V=a(30053),J=a(55088),L=a(23005),O=a(56437),D=a(35868),G=a(48343),j=a(92955),q=a(77371),z=a(32004),_=a(96785),K=a(20051),H=a(58269),W=a(5801),$=a(2672),X=a(15146),Y=a(51647),Q=a(64025),Z=a(95165),ee=a(40040),te=a(51209),ae=a(92297),se=a(59405),ne=a(72420),oe=a(1894),re=a(21017),ie=a(9079),ce=a(14407),de=a(94518),le=a(80371),ue=a(13544),me=a(78961),he=a(41040),pe=a(12772),ge=a(50503),fe=a(15006),ye=a(16427),Ie=e([o,v,b,M,G,j,K,H,Y,se,re]);[o,v,b,M,G,j,K,H,Y,se,re]=Ie.then?(await Ie)():Ie;const Ae=3e5,ve=5e3;let be=!1;const Se=({isMobile:e,isLeftColumnOpen:t,isMiddleColumnOpen:a,isRightColumnOpen:s,isMediaViewerOpen:o,isStoryViewerOpen:u,isForwardModalOpen:m,hasNotifications:Ie,hasDialogs:Se,activeGroupCallId:we,safeLinkModalUrl:Ce,isHistoryCalendarOpen:Ee,shouldSkipHistoryAnimations:Me,limitReached:xe,openedStickerSetShortName:ke,openedCustomEmojiSetIds:Pe,isServiceChatReady:Te,withInterfaceAnimations:Fe,wasTimeFormatSetManually:Ne,addedSetIds:Be,addedCustomEmojiIds:Ue,isPhoneCallActive:Re,newContactUserId:Ve,newContactByPhoneNumber:Je,openedGame:Le,gameTitle:Oe,isRatePhoneCallModalOpen:De,botTrustRequest:Ge,botTrustRequestBot:je,requestedAttachBotInChat:qe,requestedDraft:ze,isPremiumModalOpen:_e,isGiveawayModalOpen:Ke,isDeleteMessageModalOpen:He,isStarsGiftingPickerModal:We,isPaymentModalOpen:$e,isReceiptModalOpen:Xe,isReactionPickerOpen:Ye,isCurrentUserPremium:Qe,deleteFolderDialog:Ze,isMasterTab:et,noRightColumnAnimation:tt,isSynced:at,currentUserId:st,isAccountFrozen:nt,isAppConfigLoaded:ot,isRoomAttachmentsModalOpen:rt})=>{const{initMain:it,loadAnimatedEmojis:ct,loadBirthdayNumbersStickers:dt,loadRestrictedEmojiStickers:lt,loadNotificationSettings:ut,loadNotificationExceptions:mt,updateIsOnline:ht,onTabFocusChange:pt,loadTopInlineBots:gt,loadEmojiKeywords:ft,loadCountryList:yt,loadAvailableReactions:It,loadStickerSets:At,loadPremiumGifts:vt,loadTonGifts:bt,loadStarGifts:St,loadDefaultTopicIcons:wt,loadAddedStickers:Ct,loadFavoriteStickers:Et,loadDefaultStatusIcons:Mt,ensureTimeFormat:xt,closeStickerSetModal:kt,closeCustomEmojiSets:Pt,checkVersionNotification:Tt,loadConfig:Ft,loadAppConfig:Nt,loadAttachBots:Bt,loadContactList:Ut,loadCustomEmojis:Rt,loadGenericEmojiEffects:Vt,closePaymentModal:Jt,clearReceipt:Lt,checkAppVersion:Ot,openThread:Dt,toggleLeftColumn:Gt,loadRecentEmojiStatuses:jt,loadUserCollectibleStatuses:qt,updatePageTitle:zt,loadTopReactions:_t,loadRecentReactions:Kt,loadDefaultTagReactions:Ht,loadFeaturedEmojiStickers:Wt,setIsElectronUpdateAvailable:$t,loadAuthorizations:Xt,loadPeerColors:Yt,loadSavedReactionTags:Qt,loadTimezones:Zt,loadQuickReplies:ea,loadStarStatus:ta,loadAvailableEffects:aa,loadTopBotApps:sa,loadPaidReactionPrivacy:na,loadPasswordInfo:oa,loadBotFreezeAppeal:ra,loadAllChats:ia,loadAllStories:ca,loadAllHiddenStories:da,closeRoomAttachmentsModal:la,loadContentSettings:ua}=(0,i.ko)();d.Oig&&!be&&(be=!0,console.log(">>> RENDER MAIN"));const ma=(0,M.A)();(0,w.A)(()=>{(0,y.po)(y.ar.Calls)},ve);const ha=(0,n.li)(),pa=(0,n.li)(),{isDesktop:ga}=(0,C.Ay)();(0,n.vJ)(()=>{t||a||ga?t&&a&&e&&Gt():Gt()},[ga,t,a,e,Gt]),(0,S.A)(Ot,et?Ae:void 0,!0),(0,n.vJ)(()=>{if(!h.cp)return;const e=window.electron.on(c.v.UPDATE_AVAILABLE,()=>{$t({isAvailable:!0})}),t=window.electron.on(c.v.UPDATE_ERROR,()=>{$t({isAvailable:!1}),e?.()});return()=>{t?.(),e?.()}},[]),(0,n.vJ)(()=>{et&&at&&(ht({isOnline:!0}),Ft(),Nt(),Yt(),it(),Ut(),Ot(),Xt(),oa())},[et,at]),(0,n.vJ)(()=>{et&&at&&ot&&!nt&&(ia({listType:"saved"}),ca(),da(),ua(),Kt(),Ht(),Bt(),ut(),mt(),gt(),_t(),ta(),ft({language:d.cUY}),Wt(),Qt(),sa(),na(),wt(),ct(),It(),qt(),Vt(),vt(),bt(),St(),aa(),dt(),lt(),ea(),Zt())},[et,at,ot,nt]),(0,n.vJ)(()=>{et&&Qe&&ot&&!nt&&(Mt(),jt())},[Qe,et,ot,nt]),(0,n.vJ)(()=>{et&&(ma.code!==d.cUY&&ft({language:ma.code}),yt({langCode:ma.code}))},[ma,et]),(0,n.vJ)(()=>{et&&Rt({ids:Object.keys((0,i.mS)().customEmojis.byId),ignoreCache:!0})},[et]),(0,n.vJ)(()=>{et&&at&&ot&&!nt&&(Be&&Ue||(At(),Et()),Be&&Ue&&Ct())},[Be,Ue,et,at,ot,nt]),(0,n.vJ)(()=>{ra()},[ot]),(0,n.vJ)(()=>{Te&&et&&Tt()},[Te,et]),(0,n.vJ)(()=>{Ne||xt()},[Ne]),(0,n.vJ)(()=>{if(!at)return;zt();const e=(0,I.f4)();e?.tgaddr&&(0,f._)(decodeURIComponent(e.tgaddr))},[at]),(0,n.vJ)(()=>window.electron?.on(c.v.DEEPLINK,e=>{(0,f._)(decodeURIComponent(e))}),[]),(0,n.vJ)(()=>{const e=(0,I.xV)(st);e&&Dt({chatId:e.chatId,threadId:e.threadId,type:e.type})},[st]),(0,n.Nf)(()=>{const e=ha.current;1===e.parentNode.childElementCount&&(0,r.YM)(e,"Transition_slide-active")},[]),(0,P.A)({ref:ha,isOpen:t,noCloseTransition:Me,prefix:"left-column-"});const fa=(0,n.li)(!1),ya=(0,E.A)();(0,T.A)(([e])=>{if(void 0===e||t===e||!Fe)return;fa.current=!0,h.Ni&&(0,l.Uz)(()=>{document.body.classList.toggle("android-left-blackout-open",!t)});const a=(0,n.VK)();(0,g.j)(document.getElementById("MiddleColumn"),()=>{a(),fa.current=!1,ya()})},[t,Fe,ya]),(0,P.A)({ref:ha,isOpen:s,noCloseTransition:Me,prefix:"right-column-"});const Ia=(0,n.li)(!1),[Aa,va]=(0,n.J0)(s),ba=(0,B.zk)();(0,T.A)(([e,t])=>{if(void 0===t||s===t)return;if(!e||tt)return void va(s);Ia.current=!0;const a=(0,n.VK)();(0,g.j)(document.getElementById("RightColumn"),()=>{a(),Ia.current=!1,ya(),va(s)})},[a,s,tt,ya]);const Sa=(0,p.A)(fa.current&&"left-column-animating",Ia.current&&"right-column-animating",Aa&&"narrow-message-list",Me&&"history-animation-disabled",ba&&"is-fullscreen"),wa=(0,x.A)(()=>{pt({isBlurred:!0})}),Ca=(0,x.A)(()=>{pt({isBlurred:!1}),document.title.includes(d.LaL)||zt(),(0,A.A)(!1)}),Ea=(0,x.A)(()=>{kt()}),Ma=(0,x.A)(()=>{Pt()}),xa=(0,x.A)(()=>{la()});return(0,F.Ay)(wa,Ca,Boolean(h.cp)),(0,N.A)(wa),(0,k.A)(o||u),n.Ay.createElement("div",{ref:ha,id:"Main",className:Sa},n.Ay.createElement(j.A,{ref:pa}),n.Ay.createElement(K.A,{leftColumnRef:pa,isMobile:e}),n.Ay.createElement(Y.A,{isMobile:e}),n.Ay.createElement(q.A,{isOpen:o}),n.Ay.createElement(Q.A,{isOpen:u}),n.Ay.createElement(oe.A,{isOpen:m}),n.Ay.createElement(ne.A,{requestedDraft:ze}),n.Ay.createElement(de.A,{isOpen:Ie}),n.Ay.createElement(ae.A,{isOpen:Se}),n.Ay.createElement(H.A,{noUi:!0}),n.Ay.createElement(W.A,null),n.Ay.createElement(pe.A,{url:Ce}),n.Ay.createElement(ie.A,{isOpen:Ee}),n.Ay.createElement(D.A,{isOpen:Boolean(ke),onClose:Ea,stickerSetShortName:ke}),n.Ay.createElement(L.A,{customEmojiSetIds:Pe,onClose:Ma}),we&&n.Ay.createElement(R.A,{groupCallId:we}),n.Ay.createElement(U.A,{isActive:Boolean(we||Re)}),n.Ay.createElement(ce.A,{isOpen:Boolean(Ve||Je),userId:Ve,isByPhoneNumber:Je}),n.Ay.createElement(re.A,{openedGame:Le,gameTitle:Oe}),n.Ay.createElement(se.A,null),n.Ay.createElement(ge.A,null),h.J6&&n.Ay.createElement(ye.A,null),n.Ay.createElement(fe.A,null),n.Ay.createElement(V.A,{isActive:Re}),n.Ay.createElement(G.A,{isForAppBadge:!0}),n.Ay.createElement(J.A,{isOpen:De}),n.Ay.createElement(ee.A,{bot:je,type:Ge?.type,shouldRequestWriteAccess:Ge?.shouldRequestWriteAccess}),n.Ay.createElement(Z.A,{requestedAttachBotInChat:qe}),n.Ay.createElement(_.A,null),n.Ay.createElement(me.A,{isOpen:_e}),n.Ay.createElement(ue.A,{isOpen:Ke}),n.Ay.createElement(he.A,{isOpen:We}),n.Ay.createElement(le.A,{limit:xe}),n.Ay.createElement($.A,{isOpen:$e,onClose:Jt}),n.Ay.createElement(X.A,{isOpen:Xe,onClose:Lt}),n.Ay.createElement(te.A,{folder:Ze}),n.Ay.createElement(z.A,{isOpen:Ye}),n.Ay.createElement(O.A,{isOpen:He}),rt&&n.Ay.createElement(b.A,{isOpen:Boolean(rt),onClose:xa}),n.Ay.createElement(v.A,null))},we=(0,n.ph)((0,i.EK)((e,{isMobile:t})=>{const{currentUserId:a}=e,{botTrustRequest:s,requestedAttachBotInChat:n,requestedDraft:o,safeLinkModalUrl:r,openedStickerSetShortName:i,openedCustomEmojiSetIds:c,shouldSkipHistoryAnimations:d,openedGame:l,isLeftColumnShown:h,historyCalendarSelectedAt:p,notifications:g,dialogs:f,newContact:y,ratingPhoneCall:I,premiumModal:A,giveawayModal:v,deleteMessageModal:b,starsGiftingPickerModal:S,isMasterTab:w,payment:C,limitReachedModal:E,deleteFolderDialogModal:M}=(0,u.nTw)(e),{wasTimeFormatSetManually:x}=(0,m.l)(e),k=l&&(0,u.O5q)(e,l.chatId,l.messageId),P=k?.content.game?.title,{chatId:T}=(0,u.Xf0)(e)||{},F=!(0,u.xYJ)(e,"rightColumnAnimations")||!(0,u.PKK)(e),N=M?(0,u.$aQ)(e,M):void 0,B=(0,u.trm)(e);return{currentUserId:a,isLeftColumnOpen:h,isMiddleColumnOpen:Boolean(T),isRightColumnOpen:(0,u.gjV)(e,t),isMediaViewerOpen:(0,u.F4N)(e),isStoryViewerOpen:(0,u.gd2)(e),isForwardModalOpen:(0,u.p5z)(e),isReactionPickerOpen:(0,u.Ani)(e),hasNotifications:Boolean(g.length),hasDialogs:Boolean(f.length),safeLinkModalUrl:r,isHistoryCalendarOpen:Boolean(p),shouldSkipHistoryAnimations:d,openedStickerSetShortName:i,openedCustomEmojiSetIds:c,isServiceChatReady:(0,u.dqr)(e),activeGroupCallId:w?e.groupCalls.activeGroupCallId:void 0,withInterfaceAnimations:(0,u.PKK)(e),wasTimeFormatSetManually:x,isPhoneCallActive:w?Boolean(e.phoneCall):void 0,addedSetIds:e.stickers.added.setIds,addedCustomEmojiIds:e.customEmojis.added.setIds,newContactUserId:y?.userId,newContactByPhoneNumber:y?.isByPhoneNumber,openedGame:l,gameTitle:P,isRatePhoneCallModalOpen:Boolean(I),botTrustRequest:s,botTrustRequestBot:s&&(0,u.mBe)(e,s.botId),requestedAttachBotInChat:n,isCurrentUserPremium:(0,u.g29)(e),isPremiumModalOpen:A?.isOpen,isGiveawayModalOpen:v?.isOpen,isDeleteMessageModalOpen:Boolean(b),isStarsGiftingPickerModal:S?.isOpen,limitReached:E?.limit,isPaymentModalOpen:C.isPaymentModalOpen,isReceiptModalOpen:Boolean(C.receipt),deleteFolderDialog:N,isMasterTab:w,requestedDraft:o,noRightColumnAnimation:F,isSynced:e.isSynced,isAccountFrozen:B,isAppConfigLoaded:e.isAppConfigLoaded,isRoomAttachmentsModalOpen:(0,u.nTw)(e).isRoomAttachmentsModalOpen}})(Se));s()}catch(e){s(e)}})},12394:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(17712),o=a(93545);function r(e,t){const[a,r]=(0,s.Ul)(),i=(0,n.A)(e=>{r(e.contentRect.height)});(0,o.A)(e,i),(0,s.vJ)(()=>{const s=Number(e.current.dataset.normalHeight)||0,n=a();n&&n>s&&t&&(e.current.dataset.normalHeight=String(n))},[t,e,a]);const c=(0,s.li)();return[a,c]}},12654:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(87357);const o={"pinned-message-border":"L5TQCriM",pinnedMessageBorder:"L5TQCriM","pinned-message-border-wrapper-1":"v5sJGzfS",pinnedMessageBorderWrapper1:"v5sJGzfS","pinned-message-border-wrapper":"p6PQhvds",pinnedMessageBorderWrapper:"p6PQhvds","pinned-message-border-mark":"M2PQZgBd",pinnedMessageBorderMark:"M2PQZgBd"};function r(e,t,a,s,n){return`M${e},${t+n}a${n},${n},0,0,1,\n  ${a},0v${s-2*n}a${n},${n},0,0,1,${-a},0Z`}const i=(0,s.ph)(({count:e,index:t})=>{const a=(0,s.li)(),i=(0,s.Kr)(()=>function(e,t){const a=e-t-1,s=function(e){let t=8;return 1===e?t=36:2===e?t=17:3===e?t=11:(4===e||e>3)&&(t=7.5),t}(e),n=function(e,t){let a=36;return 1===e?a=36:2===e?a=17:3===e?a=1===t?12:11:(4===e||e>3)&&(a=7.5),a}(e,a),o=function(e,t){return e<=3?36:t*e+2*(e-1)}(e,s),i=`clipPath${e}`,c=function(e,t,a){let s="";if(3===a)s=r(0,0,2,t,1)+r(0,12,2,t+1,1)+r(0,25,2,t,1);else for(let e=0;e<a;e++)s+=r(0,(t+2)*e,2,t,1);return`<clipPath id="${e}">\n      <path d="${s}" />\n    </clipPath>`}(i,s,e),d=function(e,t,a){return 1===a?0:2===a?0===e?0:t+2:3===a?0===e?0:1===e?12:25:(t+2)*e}(a,s,e),l=function(e,t,a,s){return t<=4||e<=1?0:e>=t-2?s-36:(a+4)/2+(e-2)*(a+2)}(a,e,s,o);return{markHeight:n,clipPath:c,markTranslateY:d,trackTranslateY:l,trackHeight:o,clipPathId:i}}(e,t),[e,t]);if((0,s.Nf)(()=>{if(!a.current)return;const{trackHeight:e,trackTranslateY:t,markHeight:s,markTranslateY:n,clipPathId:o,clipPath:r}=i,c=a.current.firstElementChild;if(a?.current){const i=a.current,{style:d}=i;d.height=`${e}px`,d.transform=`translateY(-${t}px)`,d.clipPath=`url("#${o}")`;const l=i.querySelector("svg"),u=i.querySelector("div"),m=i.querySelector("defs");l||c&&(c.innerHTML=`<svg height="0" width="0"><defs> ${r} </defs></svg>`),m&&(m.innerHTML=r),u&&(u.style.height=`${s}px`,u.style.transform=`translateY(${n}px)`)}},[i]),1===e)return s.Ay.createElement("div",{className:o.pinnedMessageBorder},s.Ay.createElement("div",{className:o.pinnedMessageBorderWrapper1,ref:a}));const{trackHeight:c,trackTranslateY:d,markHeight:l,markTranslateY:u,clipPathId:m}=i;return s.Ay.createElement("div",{className:(0,n.A)(o.pinnedMessageBorder,e>4&&o.pinnedMessageBorderMask)},s.Ay.createElement("div",{className:o.pinnedMessageBorderWrapper,ref:a,style:`clip-path: url("#${m}"); width: 2px;\n          height: ${c}px; transform: translateY(-${d}px);`},s.Ay.createElement("span",null),s.Ay.createElement("div",{className:o.pinnedMessageBorderMark,style:`--height: ${l}px; --translate-y: ${u}px; --translate-track: ${d}px;`})))})},12772:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{url:t}=e,a=(0,o.A)(n.ar.Extra,"SafeLinkModal",!t);return a?s.Ay.createElement(a,e):void 0}},12859:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Hc:()=>F,JD:()=>E,cw:()=>C,ow:()=>N,re:()=>B,sN:()=>T});var n=a(66644),o=a(96454),r=a(85982),i=a(14487),c=a(87894),d=a(6e4),l=a(41733),u=a(24021),m=a(90709),h=a(13439),p=a(80840),g=a(32989),f=a(60919),y=a(71331),I=a(42347),A=e([d,u,I]);[d,u,I]=A.then?(await A)():A;const v="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";let b,S,w;function C(){return E(),Promise.all(Object.values(w).map(e=>{const t=e.src;return e.src=v,e.muted=!0,e.volume=1e-4,e.play().then(()=>{e.pause(),e.volume=1,e.currentTime=0,e.muted=!1,(0,n.Uz)(()=>{e.src=t})})}))}function E(){if(w)return;const e=new Audio("./voicechat_join.mp3"),t=new Audio("./voicechat_connecting.mp3");t.loop=!0;const a=new Audio("./voicechat_leave.mp3"),s=new Audio("./voicechat_onallowtalk.mp3"),n=new Audio("./call_busy.mp3"),o=new Audio("./call_connect.mp3"),r=new Audio("./call_end.mp3"),i=new Audio("./call_incoming.mp3");i.loop=!0;const c=new Audio("./call_ringing.mp3");c.loop=!0,w={join:e,allowTalk:s,leave:a,connecting:t,incoming:i,end:r,connect:o,busy:n,ringing:c}}async function M(e,t){if((0,f.trm)(e))return;const a=await(0,u.px)("getGroupCall",{call:t});if(!a)return;e=(0,h.mS)();const s=(0,y.Ip)(e,t.id);return e=(0,p.h9)(e,t.id,(0,c.cJ)(a.groupCall,["connectionState"]),void 0,s?.isLoaded?void 0:a.groupCall.participantsCount),(0,h.UF)(e),a.groupCall}function x(e,t){return(0,u.px)("fetchGroupCallParticipants",{call:e,offset:t})}(0,h.aJ)("toggleGroupCallPanel",(e,t,a)=>{const{force:s,tabId:n=(0,i.g0)()}=a||{};return(0,g.w)(e,{isCallPanelVisible:"force"in(a||{})?s:!(0,f.nTw)(e,n).isCallPanelVisible},n)}),(0,h.aJ)("createGroupCall",async(e,t,a)=>{const{chatId:s,tabId:n=(0,i.g0)()}=a,o=(0,f.hds)(e,s);if(!o)return;const r=await(0,u.px)("createGroupCall",{peer:o});r&&(e=(0,h.mS)(),e=(0,p.h9)(e,r.id,{...r,chatId:s}),(0,h.UF)(e),t.requestMasterAndJoinGroupCall({id:r.id,accessHash:r.accessHash,tabId:n}))}),(0,h.aJ)("createGroupCallInviteLink",async(e,t,a)=>{const{tabId:s=(0,i.g0)()}=a||{},n=(0,y.iT)(e);if(!n||!n.chatId)return;const o=(0,f.hds)(e,n.chatId);if(!o)return;const c=Boolean((0,m.Kl)(o));let d=(0,f.AWZ)(e,o.id)?.inviteLink;c&&(d=await(0,u.px)("exportGroupCallInvite",{call:n,canSelfUnmute:!1})),d&&((0,r.eM)(d),t.showNotification({message:{key:"LinkCopied"},tabId:s}))}),(0,h.aJ)("joinVoiceChatByLink",async(e,t,a)=>{const{username:s,inviteHash:n,tabId:o=(0,i.g0)()}=a,r=await(0,I.A$)(e,s);if(!r)return void t.showNotification({message:d.yE("NoUsernameFound"),tabId:o});e=(0,h.mS)();const c=await(0,I.ad)(e,t,r);c?.groupCall&&t.requestMasterAndJoinGroupCall({id:c.groupCall.id,accessHash:c.groupCall.accessHash,inviteHash:n,tabId:o})}),(0,h.aJ)("requestMasterAndJoinGroupCall",(e,t,a)=>{t.requestMasterAndCallAction({action:"joinGroupCall",payload:a,tabId:a.tabId||(0,i.g0)()})}),(0,h.aJ)("requestMasterAndAcceptCall",(e,t,a)=>{t.requestMasterAndCallAction({action:"acceptCall",payload:void 0,tabId:a?.tabId||(0,i.g0)()})}),(0,h.aJ)("joinGroupCall",async(e,t,a)=>{const{chatId:s,id:n,accessHash:r,inviteHash:c,tabId:d=(0,i.g0)()}=a;if(!o.OL)return void t.showNotification({message:"Sorry, your browser doesn't support group calls",tabId:d});if(e.phoneCall)return void t.toggleGroupCallPanel({tabId:d});P(),E(),B(e=(0,h.mS)(),t,!0,d);const{groupCalls:{activeGroupCallId:l}}=e;let u=n?(0,y.Ip)(e,n):(0,y.mD)(e,s);if(u&&u.id===l)t.toggleGroupCallPanel({tabId:d});else if(l)"leaveGroupCall"in t&&t.leaveGroupCall({rejoin:a,tabId:d});else if(u&&l===u.id)t.toggleGroupCallPanel({tabId:d});else{if(u||n&&r||!s)!u&&n&&r&&(u=await M(e,{id:n,accessHash:r}));else{const a=(0,f.hds)(e,s);if(!a)return;await(0,I.ad)(e,t,a),e=(0,h.mS)(),u=(0,y.mD)(e,s)}u&&(e=(0,h.mS)(),e=(0,p.h9)(e,u.id,{...u,inviteHash:c},void 0,u.participantsCount+1),e={...e,groupCalls:{...e.groupCalls,activeGroupCallId:u.id}},(0,h.UF)(e),t.toggleGroupCallPanel({force:!1,tabId:d}))}}),(0,h.aJ)("playGroupCallSound",(e,t,a)=>{const{sound:s}=a;w?.[s]&&("connecting"!==s&&w.connecting.pause(),"incoming"!==s&&w.incoming.pause(),"ringing"!==s&&w.ringing.pause(),(0,l.A)(w[s]))}),(0,h.aJ)("loadMoreGroupCallParticipants",e=>{const t=(0,y.iT)(e);t&&x(t,t.nextOffset)}),(0,h.aJ)("requestMasterAndRequestCall",(e,t,a)=>{t.requestMasterAndCallAction({action:"requestCall",payload:a,tabId:a.tabId||(0,i.g0)()})}),(0,h.aJ)("requestCall",(e,t,a)=>{const{userId:s,isVideo:n,tabId:o=(0,i.g0)()}=a;e.phoneCall?t.toggleGroupCallPanel({tabId:o}):(0,f.mBe)(e,s)&&(E(),B(e=(0,h.mS)(),t,n,o),e=(0,h.mS)(),e={...e,phoneCall:{id:"",state:"requesting",participantId:s,isVideo:n,adminId:e.currentUserId}},(0,h.UF)(e),t.toggleGroupCallPanel({force:!1,tabId:o}))});const k=e=>{const t=e.createOscillator(),a=t.connect(e.createMediaStreamDestination());return t.start(),new MediaStream([Object.assign(a.stream.getAudioTracks()[0],{enabled:!1})])};function P(){const e=new(window.AudioContext||window.webkitAudioContext);b=new Audio,S=e,b.srcObject=k(e),(0,l.A)(b)}function T(){return b}function F(){return S}function N(){b?.pause(),S=void 0,b=void 0}function B(e,t,a,...[s=(0,i.g0)()]){a?navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{0===e.getVideoTracks().length?t.showNotification({message:d.yE("Call.Camera.Error"),tabId:s}):(e.getTracks().forEach(e=>e.stop()),U(0,t,s))}).catch(()=>{t.showNotification({message:d.yE("Call.Camera.Error"),tabId:s})}):U(0,t,s)}function U(e,t,...[a=(0,i.g0)()]){navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{0===e.getAudioTracks().length?t.showNotification({message:d.yE("RequestAcces.Error.HaveNotAccess.Call"),tabId:a}):e.getTracks().forEach(e=>e.stop())}).catch(()=>{t.showNotification({message:d.yE("RequestAcces.Error.HaveNotAccess.Call"),tabId:a})})}s()}catch(R){s(R)}})},13081:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{p:()=>g});var n=a(96540),o=a(46942),r=a.n(o),i=a(30972),c=a(40390),d=a(21579),l=a(34010),u=a(54094),m=a(56112),h=a(89116),p=e([c,l,u]);[c,l,u]=p.then?(await p)():p;const g=()=>{const{isOpen:e,drawerKey:t,drawerParams:a,closeDrawer:s}=(0,h.S)(),[o,p]=(0,n.useState)(null);return(0,n.useEffect)(()=>{switch(t){case h.N.PersonalizeSettings:p(n.createElement(u.A,null));break;case h.N.OriginalMessages:p(n.createElement(l.A,{relevantMessages:a?.relevantMessages}));break;case h.N.CustomizationPrompt:p(n.createElement(d.A,null));break;case h.N.ChatPicker:p(n.createElement(c.A,null));break;case h.N.AddTopicPanel:p(n.createElement(i.A,null));break;default:p(null)}},[t,a]),n.createElement("div",{className:r()("summary-panel-container",{"summary-panel-open":e})},n.createElement(m.A,{drawerKey:t,onClose:s}),n.createElement("div",{className:"flex-1 overflow-hidden w-[var(--right-column-width)]"},o))};s()}catch(e){s(e)}})},13544:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"GiveawayModal",!t);return a?s.Ay.createElement(a,e):void 0}},14e3:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"GuZke_HG",title:"oLWeN4mA",subtitle:"ZxTe54MY"}},14050:(e,t,a)=>{function s(e){document.querySelectorAll('link[rel="icon"], link[rel="alternate icon"]').forEach(t=>{e?t.href.includes("favicon-unread")||(t.href=t.href.replace("favicon","favicon-unread")):t.href=t.href.replace("favicon-unread","favicon")})}a.d(t,{A:()=>s})},14407:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"NewContactModal",!t);return a?s.Ay.createElement(a,e):void 0}},14865:(e,t,a)=>{a.d(t,{$n:()=>h,Y1:()=>m,cf:()=>u});var s=a(31481),n=a(43503),o=a(2673),r=a(90709),i=a(60919),c=a(16350),d=a(82150),l=a(43874);function u(e,t){return t-((0,i.nTw)(e).isLeftColumnShown&&!(0,l.Ny)()?e.leftColumnWidth||((a=n.A.get().width)>s.gQx?Math.min(Math.max(.25*a,o.z6),.33*a):a>s.j7z?Math.min(Math.max(.33*a,o.z6),.4*a):o.D_):0);var a}function m(e,t,a){const s=(0,i.nZ4)(e,t.chatId),n=t.reactions||{results:[],areTags:s},o=(0,i.VF$)(e,t.chatId),c=(0,r.AK)(n.results,a);let{recentReactions:l=[]}=n;return l.length&&(l=l.filter(({isOwn:t,peerId:a})=>!t&&a!==e.currentUserId)),a.forEach(t=>{const{currentUserId:a}=e;"paid"!==t.type&&l.unshift({peerId:o?.id||a,reaction:t,addedDate:Math.floor(Date.now()/1e3),isOwn:!0})}),(0,d.r3)(e,t.chatId,t.id,{reactions:{...n,results:c,recentReactions:l}})}function h(e,t,a){return(0,c.wi)(e,t,a,!0)}},14951:(e,t,a)=>{var s=a(14487),n=a(13439),o=a(17872),r=a(32989);(0,n.aJ)("openMonetizationVerificationModal",(e,t,a)=>{const{tabId:n=(0,s.g0)(),chatId:o}=a||{};return(0,r.w)(e,{monetizationVerificationModal:{chatId:o}},n)}),(0,n.aJ)("closeMonetizationVerificationModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,r.w)(e,{monetizationVerificationModal:void 0},n)}),(0,n.aJ)("clearMonetizationVerificationError",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.Zct)(e,{errorKey:void 0},n)}),(0,n.aJ)("closeMonetizationStatistics",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,r.w)(e,{monetizationStatistics:void 0},n)})},15146:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"ReceiptModal",!t);return a?s.Ay.createElement(a,e):void 0}},15429:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>p});var n=a(84051),o=a(13439),r=a(90709),i=a(60919),c=a(17712),d=a(59030),l=a(96530),u=e([d]),m=u.then?(await u)():u;function h({userName:e}){const t=(0,d.A)(),{openPremiumModal:a}=(0,o.ko)(),s=(0,c.A)(()=>a());return n.Ay.createElement("div",null,n.Ay.createElement("div",null,t("Chat.MessagingRestrictedPlaceholder",e)),n.Ay.createElement(l.A,{isPrimary:!0,onClick:s},t("Chat.MessagingRestrictedPlaceholderAction")))}d=m[0];const p=(0,n.ph)((0,o.EK)((e,{userId:t})=>{const a=(0,i.mBe)(e,t);return{userName:(0,r.u0)(a)}})(h));s()}catch(g){s(g)}})},15578:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"sAWttcxl",icon:"tK9d2y8u"}},15672:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"UnpinAllMessagesModal",!t);return a?s.Ay.createElement(a,e):void 0}},16427:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(84051),n=a(13439),o=a(31481),r=a(60919),i=a(87357),c=a(95807),d=a(28470),l=a(43503),u=a(17712);const m=a.p+"wave_ripple.5d7d9fa793232bef56c0.jpg",h="wave-filter",p=(0,s.ph)((0,n.EK)(e=>({waveInfo:(0,r.nTw)(e).wave}))(({waveInfo:e})=>{const[t,a]=(0,s.J0)([]),n=(0,u.A)(e=>{t.length>=7||a(t=>[...t,e])});return(0,s.vJ)(()=>{if(!e)return;const{startX:t,startY:a}=e,{width:s,height:o}=l.A.get(),r=1.73*Math.max(s-t,o-a,t,a),i=a-r/2,c=t-r/2;n({startTime:e.lastWaveTime,waveWidth:r,top:i,left:c})},[e]),(0,s.vJ)(()=>((0,d.z)(s.Ay.createElement("filter",{x:"0",y:"0",width:"1",height:"1","color-interpolation-filters":"sRGB",xmlns:o.jNX},s.Ay.createElement("feImage",{href:m,result:"waveImage"}),s.Ay.createElement("feDisplacementMap",{in:"SourceGraphic",in2:"waveImage",scale:"20",xChannelSelector:"R",yChannelSelector:"B"})),h),()=>{(0,d.e)(h)}),[]),s.Ay.createElement("div",{className:(0,i.A)("RMsQzedH"),teactFastList:!0},t.map(e=>s.Ay.createElement("div",{className:"YLR2Oh2f",style:(0,c.A)(`--wave-width: ${e.waveWidth}px`,`--wave-pos-top: ${e.top}px`,`--wave-pos-left: ${e.left}px`),key:e.startTime,onAnimationEnd:()=>a(t=>t.filter(t=>t!==e))})))}))},16766:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>d});var n=a(84051),o=a(45227),r=a(52088),i=e([r]),c=i.then?(await i)():i;r=c[0];const d=()=>{const e=(0,o.P)({component:r.A});return n.Ay.createElement("div",{className:"flex w-full h-full overflow-hidden",ref:e})};s()}catch(e){s(e)}})},17742:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>b});var n=a(84051),o=a(13439),r=a(60919),i=a(87357),c=a(35049),d=a(15384),l=a(10722),u=a(14),m=a(39351),h=a(17712),p=a(48885),g=a(21849),f=a(81949),y=a(13352),I=a(64536),A=e([d,m,g,y]);[d,m,g,y]=A.then?(await A)():A;const v=({chatId:e,isBot:t,messageListType:a,sponsoredMessage:s,onPaneStateChange:r})=>{const{viewSponsored:A,openUrl:v,clickSponsored:b,openAboutAdsModal:S}=(0,o.ko)(),w=(0,m.A)(),C=Boolean(t&&s&&"thread"===a),E=(0,u.A)(s),{ref:M,shouldRender:x}=(0,p.A)({isOpen:C,withResizeObserver:!0,onStateChange:r}),{isContextMenuOpen:k,contextMenuAnchor:P,handleBeforeContextMenu:T,handleContextMenu:F,handleContextMenuClose:N,handleContextMenuHide:B}=(0,l.A)(M,!x,!0),U=(0,h.A)(()=>{E&&(b({randomId:E.randomId}),v({url:E.url,shouldSkipModal:!0}))}),R=(0,h.A)(e=>{if(!E)return;const{randomId:t,additionalInfo:a,canReport:s,sponsorInfo:n}=E;e.stopPropagation(),S({randomId:t,additionalInfo:a,canReport:s,sponsorInfo:n})});if((0,n.vJ)(()=>{x&&E&&A({randomId:E.randomId})},[x,E,e]),!x||!E)return;const{randomId:V,canReport:J,additionalInfo:L,sponsorInfo:O}=E,{peerColor:D,content:G,photo:j,title:q}=E;return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{ref:M,className:I.A.root,onClick:U,onMouseDown:T,onContextMenu:F},n.Ay.createElement("div",{className:(0,i.A)(I.A.content,D&&(0,c.a)(D))},n.Ay.createElement("span",{className:I.A.info},w("SponsoredMessageAd"),n.Ay.createElement(f.A,{onClick:R,className:I.A.aboutAd},w("SponsoredMessageAdWhatIsThis"))),n.Ay.createElement("div",{className:I.A.title},q),G.text&&n.Ay.createElement("div",{className:I.A.text},(0,d.fd)({text:G.text.text,entities:G.text.entities}))),j&&n.Ay.createElement(g.A,{size:"large",photo:j,className:I.A.avatar})),P&&n.Ay.createElement(y.A,{isOpen:k,anchor:P,triggerRef:M,randomId:V,additionalInfo:L,canReport:J,sponsorInfo:O,onClose:N,onCloseAnimationEnd:B}))},b=(0,n.ph)((0,o.EK)((e,{chatId:t})=>{const a=(0,r.yps)(e,t),s=(0,r.v8U)(e,t);return{isBot:Boolean(a),sponsoredMessage:s}})(v));s()}catch(e){s(e)}})},17999:(e,t,a)=>{a.d(t,{s:()=>i});var s=a(84051),n=a(66644),o=a(37661),r=a(17712);function i(e,t,a,i,c){const[d,l,u]=(0,o.A)(),[m,h]=(0,s.J0)(0),[p,g]=(0,s.J0)(0),f=(0,r.A)(t=>{(0,n.RK)(()=>{if(!e.current)return;const a=t?`${t}px`:"";e.current.style.width=a,c&&e.current.style.setProperty(c,a)})});function y(){(0,n.RK)(()=>{document.body.classList.remove("cursor-ew-resize")})}return(0,s.Nf)(()=>{e.current&&i&&f(i)},[c,e,i,f]),(0,s.vJ)(()=>{if(!d)return;const a=e=>{const t=Math.ceil(p+e.clientX-m);f(t)};function s(){n(),t(e.current.offsetWidth)}function n(){y(),document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",s,!1),document.removeEventListener("blur",s,!1),u()}return document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),document.addEventListener("blur",s,!1),n},[p,m,e,t,d,u,f]),{initResize:function(t){t.preventDefault(),(0,n.RK)(()=>{document.body.classList.add("cursor-ew-resize")}),h(t.clientX),g(e.current.offsetWidth),l()},resetResize:function(e){e.preventDefault(),f(void 0),a()},handleMouseUp:y}}},18218:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"LeftSearch");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},18389:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"gk6pIryJ",noResults:"WP4wRUbm","section-header":"LWcgK3OX",sectionHeader:"LWcgK3OX",section:"C8KF95yU",user:"oMy5KOFr",stats:"GOzrl0zF",down:"QuLtxDUV",loadMoreSpinner:"ln5zB7KK",status:"r3zLiaXx",info:"Eo1qQlxx",month:"McSPvm0N",quantity:"s1yf_GJa",floatingBadge:"oSCjRZtx",floatingBadgeButtonColor:"duVpAT_e",floatingBadgeWarning:"DsJMXNNk",floatingBadgeButton:"urrWJVYB",floatingBadgeIcon:"hcA9VPeV",floatingBadgeValue:"hHkCO4Ge",content:"SG00REIA",boostSection:"ETgjBS4d",giveawayButton:"wOCtp5Kk",giveawayIcon:"B9GF4NDB",primaryLink:"GXmXwIbx",copy:"rB0gc1GX",boostInfo:"BhoA3MT6"}},18446:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"ContactList");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},18946:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>A});var n=a(84051),o=a(13439),r=a(90709),i=a(4350),c=a(76023),d=a(39351),l=a(17712),u=a(93855),m=a(21849),h=a(35384),p=a(24433),g=a(60859),f=e([d,u,m,h,p]);[d,u,m,h,p]=f.then?(await f)():f;const y=7e3,I=({currentUser:e,totalLimit:t,onSelectCurrent:a})=>{const{showNotification:s}=(0,o.ko)(),f=(0,d.A)(),I=(0,u.A)(e),A=(0,r.Em)(),v=(0,r.SM)(),b=(0,n.Kr)(()=>Object.values(I).find(t=>t.userId===e.id),[I,e.id]),S=A>=v,w=(0,l.A)(()=>{s({title:f("PremiumLimitAccountsTitle"),message:e.isPremium?f("PremiumLimitAccounts"):f("PremiumLimitAccountsNoPremium"),duration:y})}),C=(0,n.Kr)(()=>{if(!Object.values(I).length)return;if(A===t)return;let e=1;for(;I[e];)e+=1;return(0,i.Nv)(e,!0)},[I,A,t]);return n.Ay.createElement(n.Ay.Fragment,null,Object.entries(I||{}).sort(([,t])=>t.userId===e.id?-1:1).map(([t,s],o,r)=>{const d=s.isTest===b?.isTest,l={title:[s.firstName,s.lastName].filter(Boolean).join(" "),isCustomPeer:!0,peerColorId:s.color,emojiStatusId:d?s.emojiStatusId:void 0,isPremium:s.isPremium},u=s.userId===e.id&&(C||r.length>1);return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(p.A,{className:"account-menu-item",customIcon:n.Ay.createElement(m.A,{size:"mini",className:"account-avatar",peer:l,previewUrl:s.avatarUri}),onClick:s.userId===e.id?a:void 0,href:s.userId!==e.id?(0,i.Nv)(Number(t)):void 0},s.isTest&&n.Ay.createElement("span",{className:"account-menu-item-test"},"T"),n.Ay.createElement(h.A,{peer:l,withEmojiStatus:!0,emojiStatusSize:c.$})),u&&n.Ay.createElement(g.A,null))}),C&&n.Ay.createElement(p.A,{icon:"add",rel:"noopener",href:S?void 0:C,onClick:S?w:void 0},f("MenuAddAccount")))},A=(0,n.ph)(I);s()}catch(e){s(e)}})},19086:(e,t,a)=>{var s=a(14487),n=a(188),o=a(13439),r=a(17872),i=a(32989),c=a(60919);(0,o.aJ)("setUserSearchQuery",(e,t,a)=>{const{query:n,tabId:o=(0,s.g0)()}=a;return(0,r.BFh)(e,{globalUserIds:void 0,localUserIds:void 0,fetchingStatus:Boolean(n),query:n},o)}),(0,o.aJ)("openAddContactDialog",(e,t,a)=>{const{userId:n,tabId:o=(0,s.g0)()}=a;return(0,c.trm)(e)?(t.openFrozenAccountModal({tabId:o}),e):(0,i.w)(e,{newContact:{userId:n}},o)}),(0,o.aJ)("openNewContactDialog",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.trm)(e)?(t.openFrozenAccountModal({tabId:n}),e):(0,i.w)(e,{newContact:{isByPhoneNumber:!0}},n)}),(0,o.aJ)("closeNewContactDialog",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,r.BOn)(e,n)}),(0,o.aJ)("closeSuggestedStatusModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,i.w)(e,{suggestedStatusModal:void 0},n)}),(0,n.k)("closeChatRefundModal","chatRefundModal")},19188:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"CreateTopic");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},19223:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(84051),n=a(13439),o=a(60919),r=a(67054),i=a(87894),c=a(83414),d=a(17712);let l,u;function m(e,t,a){const[m,p]=(0,s.Ul)({}),[g,f]=(0,s.Ul)(),y=e?`${e}_${t}`:void 0,I=(0,c.A)(()=>m()[y]??0,[m,y]);return(0,s.vJ)(()=>{l=void 0,f(void 0)},[e,p,f,t]),(0,s.vJ)(()=>{if(!y)return;const e=m()[y],t=a?.length||0;e>=t&&p({...m(),[y]:h(t-1)})},[m,y,a?.length,p]),{handleIntersectPinnedMessage:(0,d.A)(({viewportPinnedIdsToAdd:s=[],viewportPinnedIdsToRemove:r=[],shouldCancelWaiting:c})=>{if(!(e&&t&&y&&a?.length))return;if(c)return u=void 0,void f(void 0);const d=g();if(d){const e=a.indexOf(d);p({...m(),[y]:h(e)}),f(void 0)}l=(0,i.Am)((l?.filter(e=>!r.includes(e))??[]).concat(s));const I=(0,o.kdX)((0,n.mS)(),e)||u;if(u&&l.includes(u)&&(u=void 0),I){const e=a.findIndex(e=>e<I);p({...m(),[y]:h(e)})}else if(l.length){const e=Math.max(...l),t=a.indexOf(e);p({...m(),[y]:h(t)})}}),handleFocusPinnedMessage:(0,d.A)(s=>{if(!e||!t||!a?.length)return;u=s;const i=(0,n.mS)(),c=(0,o.gCU)(i,e,t),d=c?.includes(s)||(0,o.Lzh)(i,e,t,s),l=a.indexOf(s),h=(0,r.A)(a.length,l+1);d?p({...m(),[y]:h}):f(a[h])}),getCurrentPinnedIndex:I,getLoadingPinnedId:g}}function h(e){return Math.max(0,e)}},20051:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>me});var n=a(84051),o=a(13439),r=a(23174),i=a(31481),c=a(66644),d=a(90709),l=a(60919),u=a(30708),m=a(96454),h=a(87357),p=a(95807),g=a(11778),f=a(74863),y=a(62718),I=a(77787),A=a(95815),v=a(10858),b=a(40708),S=a(9716),w=a(31460),C=a(2673),E=a(43874),M=a(65632),x=a(30857),k=a(26072),P=a(39351),T=a(17712),F=a(59030),N=a(23565),B=a(73767),U=a(17999),R=a(35297),V=a(39751),J=a(19223),L=a(48196),O=a(16766),D=a(72531),G=a(42444),j=a(54746),q=a(1630),z=a(27735),_=a(15672),K=a(64493),H=a(41036),W=a(67893),$=a(70361),X=a(47130),Y=a(97095),Q=a(36228),Z=a(35193),ee=a(21830),te=a(36998),ae=a(889),se=a(15429),ne=a(27125),oe=a(75170),re=a(49667),ie=e([f,y,v,P,F,O,G,K,$,Y,Q,Z,te,ae,se]);function ce(e){return"file"===e.kind&&e.type&&i.gex.has(e.type)}function de(e){return"file"===e.kind&&e.type&&i.fNs.has(e.type)}[f,y,v,P,F,O,G,K,$,Y,Q,Z,te,ae,se]=ie.then?(await ie)():ie;const le=450+i.xB5;function ue({leftColumnRef:e,chatId:t,threadId:a,isComments:s,messageListType:r,isMobile:l,chat:u,draftReplyInfo:b,isPrivate:S,isPinnedMessageList:x,canPost:ie,currentUserBannedRights:ue,defaultBannedRights:me,pinnedMessagesCount:pe,customBackground:ge,theme:fe,backgroundColor:ye,patternColor:Ie,isLeftColumnShown:Ae,isRightColumnShown:ve,isBackgroundBlurred:be,leftColumnWidth:Se,hasActiveMiddleSearch:we,isSelectModeActive:Ce,isSeenByModalOpen:Ee,isPrivacySettingsNoticeModalOpen:Me,isReactorListModalOpen:xe,isChatLanguageModalOpen:ke,animationLevel:Pe,withInterfaceAnimations:Te,withRightColumnAnimation:Fe,shouldSkipHistoryAnimations:Ne,currentTransitionKey:Be,isChannel:Ue,arePeerSettingsLoaded:Re,canSubscribe:Ve,canStartBot:Je,canRestartBot:Le,activeEmojiInteractions:Oe,shouldJoinToSend:De,shouldSendJoinRequest:Ge,shouldLoadFullChat:je,pinnedIds:qe,canUnpin:ze,canUnblock:_e,isSavedDialog:Ke,canShowOpenChatButton:He,isContactRequirePremium:We,topics:$e,paidMessagesStars:Xe,isAccountFrozen:Ye,freezeAppealChat:Qe,isSerena:Ze,shouldBlockSendInMonoforum:et}){const{openChat:tt,openPreviousChat:at,unpinAllMessages:st,loadUser:nt,loadPeerSettings:ot,exitMessageSelectMode:rt,joinChannel:it,sendBotCommand:ct,restartBot:dt,showNotification:lt,loadFullChat:ut,setLeftColumnWidth:mt,resetLeftColumnWidth:ht,unblockUser:pt}=(0,o.ko)(),{width:gt}=(0,V.A)(),{isTablet:ft,isDesktop:yt}=(0,E.Ay)(),It=(0,F.A)(),At=(0,P.A)(),[vt,bt]=(0,n.J0)($.I.None),[St,wt]=(0,n.J0)(!1),Ct=St&&(!l||!we),[Et,Mt]=(0,n.J0)(),[xt,kt]=(0,n.J0)(!1),{handleIntersectPinnedMessage:Pt,handleFocusPinnedMessage:Tt,getCurrentPinnedIndex:Ft,getLoadingPinnedId:Nt}=(0,J.A)(t,a,qe),Bt=l?le:void 0,Ut=(0,N.A)(t,Bt),Rt=(0,N.A)(a,Bt),Vt=(0,N.A)(r,Bt),Jt=(0,N.A)(Ve,Bt),Lt=(0,N.A)(Je,Bt),Ot=(0,N.A)(Le,Bt),Dt=(0,N.A)(_e,Bt),Gt=(0,N.A)(ie,Bt)&&!Ot&&!Lt&&!Jt&&!Dt&&t!==i.Xab&&!We,jt=(0,N.A)(Ct,Bt)&&t!==i.Xab,qt=(0,N.A)(Ue,Bt),zt=(0,N.A)(De,Bt),_t=(0,N.A)(Ge,Bt),Kt=(0,N.A)(t?Pt:void 0,Bt),Ht=(0,B.A)(Be),Wt=void 0!==Ht&&Ht<Be?Ht:void 0,{isReady:$t,handleCssTransitionEnd:Xt,handleSlideTransitionStop:Yt}=he(!Ne&&Te,Be,Ht,t,l);(0,n.vJ)(()=>t?(0,g.A)(()=>{tt({id:void 0})}):void 0,[t,tt]),(0,R.A)(()=>{bt($.I.None),Mt(void 0)},[t]),(0,n.vJ)(()=>{if(!m.pz&&!m.Ni)return;const{visualViewport:e}=window;if(!e)return;const t=()=>{const t=e.height!==document.documentElement.clientHeight;(0,c.RK)(()=>{document.body.classList.toggle("keyboard-visible",t),(0,c.YS)(()=>{!t&&e.offsetTop&&(0,c.RK)(()=>{window.scrollTo({top:0})})})})};return e.addEventListener("resize",t),()=>{e.removeEventListener("resize",t)}}),(0,n.vJ)(()=>{S&&nt({userId:t})},[t,S,nt]),(0,n.vJ)(()=>{Re||ot({peerId:t})},[t,S,Re]),(0,n.vJ)(()=>{t&&je&&$t&&ut({chatId:t})},[je,t,$t,ut]);const Qt=(0,T.A)(({message:e})=>{const a=e.isOutgoing,s=e.content.text?.text;if(s===v.HD||s===v.eW||s===v.Dq||s===v.oS)return;if(s?.includes("Event details")&&s.includes("Meeting Invitation")){const e=v.Ay.get(t);return void(e&&e.cleanup())}const n=v.Ay.create({chatId:e.chatId,isMeetingInitiator:a});if(n.timeout||e.isOutgoing||n.isMeetingInitiator)return;const r=(0,y.dL)({messageId:e.id,chatId:e.chatId});I.zs?.message?.storeMessage((0,A.Jr)(e.chatId,[r])[0]),t===e.chatId&&(D.A.emit(D.E.AddRoomAIMessage,r),(0,o.ko)().openChatAIWithInfo({chatId:e.chatId}))});(0,n.vJ)(()=>(D.A.on(D.E.IntentionToScheduleMeeting,Qt),()=>D.A.off(D.E.IntentionToScheduleMeeting,Qt)),[]);const{initResize:Zt,resetResize:ea,handleMouseUp:ta}=(0,U.s)(e,e=>mt({leftColumnWidth:e}),ht,Se,"--left-column-width"),aa=(0,T.A)(e=>{const{items:t}=e.dataTransfer||{},a=m.Yw||t&&t.length>0&&Array.from(t).filter(e=>"text/uri-list"!==e.type).every(e=>ce(e)||de(e));bt(a?$.I.QuickFile:$.I.Document)}),sa=(0,T.A)(()=>{bt($.I.None)}),na=(0,T.A)(()=>{kt(!0)}),oa=(0,T.A)(()=>{kt(!1)}),ra=(0,T.A)(()=>{tt({id:String(a)})}),ia=(0,T.A)(()=>{st({chatId:t,threadId:a}),oa(),at()}),ca=(0,T.A)(()=>{tt({id:t})}),da=(0,T.A)(()=>{it({chatId:t}),_t&&lt({message:It(Ue?"RequestToJoinChannelSentDescription":"RequestToJoinGroupSentDescription")})}),la=(0,T.A)(()=>{ct({command:"/start"})}),ua=(0,T.A)(()=>{dt({chatId:t})}),ma=(0,T.A)(()=>{pt({userId:t})}),ha=(0,M.A)(fe,ge),pa=(0,h.A)(m.So?"mask-image-disabled":"mask-image-enabled"),ga=(0,h.A)(re.A.background,Fe&&re.A.withTransition,ge&&re.A.customBgImage,ye&&re.A.customBgColor,ge&&be&&re.A.blurred,ve&&re.A.withRightColumn,m.cp&&!(Ut&&Rt)&&re.A.draggable),fa=(0,h.A)("messaging-disabled",!Ce&&"shown"),ya=(0,d.gU)(It,ue,me),Ia=(0,d.zc)(It,u,a,$e,Boolean(b)),Aa=ya||Ia||(et?At("MonoforumComposerPlaceholder"):void 0)||(We?n.Ay.createElement(se.A,{userId:t}):void 0)||(Ye&&Qe?.id!==t?n.Ay.createElement(Q.A,null):void 0),{composerHiddenScale:va,toolbarHiddenScale:ba,composerTranslateX:Sa,toolbarTranslateX:wa,unpinHiddenScale:Ca,toolbarForUnpinHiddenScale:Ea}=(0,n.Kr)(()=>(0,C.Ay)(gt,Gt),[Gt,gt]),Ma=(0,h.A)("middle-column-footer",!Gt&&"no-composer",Gt&&Et&&!Ce&&"with-notch");(0,k.A)({isActive:Ce,onBack:rt}),(0,L.A)(Ie);const xa=Boolean(!x&&!Ke&&!Gt&&!Ot&&!Lt&&!Jt&&Aa)||Ye&&Qe?.id!==t,ka=Boolean(Ot||Jt||_t||Lt||x&&ze||He||Dt),Pa=Boolean(xa||Ce);return n.Ay.createElement("div",{id:"MiddleColumn",className:pa,onTransitionEnd:Xt,style:(0,p.A)(`--composer-hidden-scale: ${va}`,`--toolbar-hidden-scale: ${ba}`,`--unpin-hidden-scale: ${Ca}`,`--toolbar-unpin-hidden-scale: ${Ea},`,`--composer-translate-x: ${Sa}px`,`--toolbar-translate-x: ${wa}px`,`--pattern-color: ${Ie}`,ye&&`--theme-background-color: ${ye}`),onClick:ft&&Ae?ca:void 0},yt&&n.Ay.createElement("div",{className:"resize-handle",onMouseDown:Zt,onMouseUp:ta,onDoubleClick:ea}),n.Ay.createElement("div",{className:ga,style:ha?`--custom-background: ${ha}`:void 0}),n.Ay.createElement("div",{id:"middle-column-portals"}),Ze&&n.Ay.createElement(O.A,null),Boolean(Ut&&Rt&&!Ze)&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"messages-layout",onDragEnter:Gt?aa:void 0},n.Ay.createElement(ae.A,{key:Ut,chatId:Ut,threadId:Rt,messageListType:Vt,getCurrentPinnedIndex:Ft,getLoadingPinnedId:Nt,onFocusPinnedMessage:Tt}),n.Ay.createElement(te.A,{chatId:Ut,threadId:Rt,messageListType:Vt,isComments:s,isMobile:l,getCurrentPinnedIndex:Ft,getLoadingPinnedId:Nt,onFocusPinnedMessage:Tt}),n.Ay.createElement(H.Ay,{name:(0,w.P)("slide",Pe,Ne||!Te),activeKey:Be,shouldCleanup:!0,cleanupExceptionKey:Wt,isBlockingAnimation:!0,onStop:Yt},n.Ay.createElement(Z.A,{key:`${Ut}-${Rt}-${Vt}`,chatId:Ut,threadId:Rt,type:Vt,isComments:s,canPost:Gt,onScrollDownToggle:wt,onNotchToggle:Mt,isReady:$t,isContactRequirePremium:We,paidMessagesStars:Xe,withBottomShift:ka,withDefaultBg:Boolean(!ge&&!ye),onIntersectPinnedMessage:Kt}),n.Ay.createElement("div",{className:Ma},Gt&&n.Ay.createElement(G.A,{type:"messageList",chatId:Ut,threadId:Rt,messageListType:Vt,dropAreaState:vt,onDropHide:sa,isReady:$t,isMobile:l,editableInputId:i.CfG,editableInputCssSelector:i.m$5,inputId:"message-input-text"}),x&&ze&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,color:"secondary",className:"composer-button unpin-all-button",onClick:na},n.Ay.createElement(j.A,{name:"unpin"}),n.Ay.createElement("span",null,It("Chat.Pinned.UnpinAll",pe,"i")))),He&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,color:"secondary",className:"composer-button open-chat-button",onClick:ra},n.Ay.createElement("span",null,It("SavedOpenChat")))),xa&&n.Ay.createElement("div",{className:fa},n.Ay.createElement("div",{className:"messaging-disabled-inner"},n.Ay.createElement("span",null,Aa))),l&&(Jt||zt&&!_t)&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,ripple:!0,className:"composer-button join-subscribe-button",onClick:da},It(qt?"ProfileJoinChannel":"ProfileJoinGroup"))),l&&_t&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,ripple:!0,className:"composer-button join-subscribe-button",onClick:da},It("ChannelJoinRequest"))),l&&Lt&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,ripple:!0,className:"composer-button join-subscribe-button",onClick:la},It("BotStart"))),l&&Ot&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,ripple:!0,className:"composer-button join-subscribe-button",onClick:ua},It("BotRestart"))),l&&Dt&&n.Ay.createElement("div",{className:"middle-column-footer-button-container",dir:It.isRtl?"rtl":void 0},n.Ay.createElement(K.A,{size:"tiny",fluid:!0,ripple:!0,className:"composer-button join-subscribe-button",onClick:ma},It("Unblock"))),n.Ay.createElement(ee.A,{messageListType:Vt,isActive:Ce,canPost:Gt}),n.Ay.createElement(z.A,{isOpen:Ee}),n.Ay.createElement(q.A,{isOpen:Me}),n.Ay.createElement(ne.A,{isOpen:xe}),m.CM&&n.Ay.createElement(W.A,{isOpen:ke}))),n.Ay.createElement(f.A,{chatId:t}),n.Ay.createElement(Y.A,{withScrollDown:jt,canPost:Gt,withExtraShift:Pa})),n.Ay.createElement(oe.A,{isActive:Boolean(we)})),t&&n.Ay.createElement(_.A,{isOpen:xt,chatId:t,pinnedMessagesCount:pe,onClose:oa,onUnpin:ia}),n.Ay.createElement("div",{teactFastList:!0},Oe?.map((e,t)=>n.Ay.createElement(X.A,{teactOrderKey:t,key:e.id,activeEmojiInteraction:e}))))}const me=(0,n.ph)((0,o.EK)((e,{isMobile:t})=>{const a=(0,l.SJA)(e),{isBlurred:s,background:n,backgroundColor:o,patternColor:c}=(0,l.Gyz)(e,a)||{},{messageLists:m,isLeftColumnShown:h,activeEmojiInteractions:p,seenByModal:g,reactorModal:f,shouldSkipHistoryAnimations:y,chatLanguageModal:I,privacySettingsNoticeModal:A}=(0,l.nTw)(e),v=(0,l.Xf0)(e),{leftColumnWidth:w}=e,C={theme:a,customBackground:n,backgroundColor:o,patternColor:c,isLeftColumnShown:h,isRightColumnShown:(0,l.gjV)(e,t),isBackgroundBlurred:s,hasActiveMiddleSearch:Boolean((0,l.TCk)(e)),isSelectModeActive:(0,l.rTV)(e),isSeenByModalOpen:Boolean(g),isPrivacySettingsNoticeModalOpen:Boolean(A),isReactorListModalOpen:Boolean(f),isChatLanguageModalOpen:Boolean(I),animationLevel:(0,u.l)(e).animationLevel,withInterfaceAnimations:(0,l.PKK)(e),withRightColumnAnimation:(0,l.MBp)(e),currentTransitionKey:Math.max(0,m.length-1),activeEmojiInteractions:p,leftColumnWidth:w};if(!v)return C;const{chatId:E,threadId:M,type:x}=v,k=(0,S.L8)(E),P=(0,l.hds)(e,E),T=(0,l.yps)(e,E),F=(0,l.fcC)(e,E,M),N=E?(0,l.AWZ)(e,E):void 0,B=E?(0,l.vGo)(e,E):void 0,U=(0,l.Ys6)(e,E,M),R=(0,l.Vw0)(e,E,M),V=Boolean(!R?.isCommentsInfo&&R?.fromChannelId),J=(0,l.S0q)(e,E,M),L=P&&(0,d.__)(P,J,V,N),O=(0,l.I_m)(e,E),D="pinned"===x,G="thread"===x&&M===r.l3,j=Boolean(P&&(0,d.WX)(P)),q=Boolean(P&&G&&(j||(0,d.Vs)(P))&&P.isNotJoined&&!P.joinRequests&&!P.isMonoforum),z=Boolean(P?.isNotJoined&&P.isJoinToSend),_=Boolean(P?.isNotJoined&&P.isJoinRequest),K=!!k&&(0,l.apd)(e,E),H=Boolean(T&&K),W=!H&&O,$=K&&!T,X=Boolean(P&&(0,d.YE)(P)&&!N),Y=(0,l.GA4)(e,E,M)?.replyInfo,Q=!!P?.isForum&&M===r.l3&&!Y&&(0,l.S0q)(e,E,i.HxB)?.isClosed,Z=(0,l.ODG)(e,E),ee=Boolean(P?.isMonoforum&&!Y&&Z&&!U),te=(0,l.pSx)(e,E),ae=(0,d.cG)(E,M,e.currentUserId),se=ae&&M!==i.Ckz,ne=P&&(k||P?.isCreator||!j&&!(0,d.Sq)(P,"pinMessages")||(0,d.ub)(P,"pinMessages")),oe=(0,l.vGo)(e,E),re=oe?.isContactRequirePremium,ie=(0,l.WA9)(e,E),ce=(0,l.trm)(e),de=e.botFreezeAppealId,le=de?(0,l.hds)(e,de):void 0,ue=E===b.bL;return{...C,chatId:E,threadId:M,messageListType:x,chat:P,draftReplyInfo:Y,isPrivate:k,arePeerSettingsLoaded:Boolean(B?.settings),isComments:V,canPost:!D&&(!P||L)&&!O&&!(z&&P?.isNotJoined)&&!Q&&!ee&&!ae&&(!ce||le?.id===E),isPinnedMessageList:D,currentUserBannedRights:P?.currentUserBannedRights,defaultBannedRights:P?.defaultBannedRights,pinnedMessagesCount:F?F.length:0,shouldSkipHistoryAnimations:y,isChannel:j,canSubscribe:q,canStartBot:W,canRestartBot:H,shouldJoinToSend:z,shouldSendJoinRequest:_,shouldLoadFullChat:X,pinnedIds:F,canUnpin:ne,canUnblock:$,isSavedDialog:ae,canShowOpenChatButton:se,isContactRequirePremium:re,topics:te,paidMessagesStars:ie,isAccountFrozen:ce,freezeAppealChat:le,isSerena:ue,shouldBlockSendInMonoforum:ee}})(ue));function he(e,t,a,s,o){const[r,i]=(0,n.J0)(!o),c=(0,x.A)(),d=void 0!==a&&a!==t;return d&&(e?(i(!1),setTimeout(()=>{i(!0)},le)):c()),(0,R.A)(()=>{e||i(!0)},[e]),{isReady:r&&!d,handleCssTransitionEnd:e?function(e){"transform"===e.propertyName&&e.target===e.currentTarget&&i(Boolean(s))}:void 0,handleSlideTransitionStop:e?function(){i(!0)}:void 0}}s()}catch(pe){s(pe)}})},20125:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>y});var n=a(84051),o=a(87357),r=a(14242),i=a(10722),c=a(39351),d=a(59030),l=a(54746),u=a(64493),m=a(71429),h=a(24433),p=a(85637),g=e([c,d,u,h]);[c,d,u,h]=g.then?(await g)():g;const f=({icon:e,ariaLabelLang:t,unreadCount:a,onClick:s,onReadAll:g,className:f})=>{const y=(0,d.A)(),I=(0,c.A)(),A=(0,n.li)(),{isContextMenuOpen:v,handleContextMenu:b,handleContextMenuClose:S,handleContextMenuHide:w}=(0,i.A)(A,!g);return n.Ay.createElement("div",{className:(0,o.A)(p.A.root,f),ref:A},n.Ay.createElement(u.A,{color:"secondary",round:!0,className:p.A.button,onClick:s,onContextMenu:b,ariaLabel:y(t)},n.Ay.createElement(l.A,{name:e,className:p.A.icon})),Boolean(a)&&n.Ay.createElement("div",{className:p.A.unreadCount},(0,r.Vw)(I,a)),g&&n.Ay.createElement(m.A,{isOpen:v,onClose:S,onCloseAnimationEnd:w,autoClose:!0,positionX:"right",positionY:"bottom"},n.Ay.createElement(h.A,{icon:"readchats",onClick:g},y("MarkAllAsRead"))))},y=(0,n.ph)(f);s()}catch(e){s(e)}})},20254:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>m});var n=a(84051),o=a(59030),r=a(54746),i=a(64493),c=a(57474),d=a(41036),l=e([o,i]);[o,i]=l.then?(await l)():l;const u=({connectionStatus:e,connectionStatusText:t,onClick:a})=>{const s=(0,o.A)();return n.Ay.createElement("div",{id:"ConnectionStatusOverlay",dir:s.isRtl?"rtl":void 0,onClick:a},n.Ay.createElement(c.A,{color:"black"}),n.Ay.createElement("div",{className:"state-text"},n.Ay.createElement(d.Ay,{activeKey:e,name:"slideFade"},t)),n.Ay.createElement(i.A,{round:!0,size:"tiny",color:"translucent-black"},n.Ay.createElement(r.A,{name:"close"})))},m=(0,n.ph)(u);s()}catch(e){s(e)}})},21017:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>g});var n=a(84051),o=a(13439),r=a(90709),i=a(60919),c=a(32625),d=a(59030),l=a(73172),u=a(8410),m=e([d,u]);[d,u]=m.then?(await m)():m;const h=5e3,p=({openedGame:e,gameTitle:t,canPost:a})=>{const{closeGame:s,openForwardMenu:r}=(0,o.ko)(),i=(0,d.A)(),{url:m,chatId:p,messageId:g}=e||{},f=Boolean(m),y=(0,l.A)(p);(0,c.A)(()=>{y({type:"playingGame"})},f&&a?h:void 0);const I=(0,n.hb)(e=>{if(p&&g)try{const t=JSON.parse(e.data);"share_score"===t.eventType&&(r({fromChatId:p,messageIds:[g],withMyScore:!0}),s()),"share_game"===t.eventType&&(r({fromChatId:p,messageIds:[g]}),s())}catch(e){}},[p,s,g,r]),A=(0,n.hb)(e=>{e.currentTarget.focus()},[]);return(0,n.vJ)(()=>(window.addEventListener("message",I),()=>window.removeEventListener("message",I)),[I]),n.Ay.createElement(u.A,{className:"GameModal",isOpen:f,onClose:s,title:t,hasCloseButton:!0},f&&n.Ay.createElement("iframe",{className:"game-frame",onLoad:A,src:m,title:i("AttachGame"),sandbox:"allow-scripts allow-same-origin allow-orientation-lock",allow:"fullscreen"}))},g=(0,n.ph)((0,o.EK)((e,{openedGame:t})=>{const{chatId:a}=t||{},s=a&&(0,i.hds)(e,a),n=a?(0,i.AWZ)(e,a):void 0;return{canPost:Boolean(s)&&(0,r.__)(s,void 0,void 0,n)}})(p));s()}catch(e){s(e)}})},21579:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(96540),n=a(69036),o=a(48862),r=a(64719),i=a(29356),c=a(98074),d=a(82936),l=a(92237),u=a(89116);const m=()=>{const{openDrawer:e,drawerParams:t}=(0,u.S)(),[a,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),y=t||{topic:"",prompt:""},[I,A]=(0,s.useState)(y),v=(0,s.useCallback)(()=>{0!==I.topic.trim().length?0!==I.prompt.trim().length?(f(!0),o.Hk.updateSummarizeTemplate(I).then(t=>{f(!1),0===t.code?e(u.N.PersonalizeSettings,{activeKey:0}):n.Ay.info("save failed")}).catch(()=>{n.Ay.info("save failed")})):p(!0):m(!0)},[I,e]),b=(0,s.useCallback)(e=>{const t=e.currentTarget.value;A(e=>(e.topic=t,{...e})),t.trim().length&&m(!1)},[]),S=(0,s.useCallback)(e=>{const t=e.currentTarget.value;A(e=>(e.prompt=t,{...e})),t.trim().length&&p(!1)},[]);return s.createElement("div",{className:"h-full flex flex-col px-[18px]"},s.createElement("p",{className:"text-[14px] text-[#666666]"},"Enter a topic you want AI to track and summarize. Add details so summaries are more accurate and relevant."),s.createElement(c.A,{label:"Topic name",value:I.topic,onChange:b,error:a?"Please enter the topic name":void 0}),s.createElement(l.A,{label:"Topic description",value:I.prompt,noReplaceNewlines:!0,error:h?"Please enter the topic description":void 0,onChange:S}),s.createElement(r.A,{isShown:!0,onClick:v},g?s.createElement(d.A,{color:"white"}):s.createElement(i.A,{name:"check",className:"text-white text-[1.5rem]"})))}},21830:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isActive:t}=e,a=(0,o.A)(n.ar.Extra,"MessageSelectToolbar",!t);return a?s.Ay.createElement(a,e):void 0}},23005:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{customEmojiSetIds:t}=e,a=(0,o.A)(n.ar.Extra,"CustomEmojiSetsModal",!t);return a?s.Ay.createElement(a,e):void 0}},23171:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isActive:t}=e,a=(0,o.A)(n.ar.Calls,"ActiveCallHeader",!t);return a?s.Ay.createElement(a,null):void 0}},23734:(e,t,a)=>{var s=a(8718),n=a(13439),o=a(17872),r=a(60919);const i=(0,s.By)(function(){let e=(0,n.mS)();e=(0,o.wWy)(e,{...e.users.statusesById,...c}),(0,n.UF)(e),c={}});let c={};(0,n.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"deleteContact":return(0,o.MOQ)(e,a.id);case"updateUser":{Object.values(e.byTabId).forEach(({id:s})=>{(0,r.nZ4)(e,a.id)&&a.user.isPremium!==(0,r.g29)(e)&&(a.user.isPremium&&e.byTabId[s].premiumModal&&t.openPremiumModal({isSuccess:!0,tabId:s}),e={...e,translations:{byChatId:{}}})});const s=(0,r.mBe)(e,a.id);return e=(0,o.TKu)(e,a.id,a.user),a.fullInfo&&(e=(0,o.weB)(e,a.id,a.fullInfo)),s?.areStoriesHidden!==a.user.areStoriesHidden&&(e=(0,o.VWO)(e,a.id,a.user.areStoriesHidden||!1)),e}case"updateRequestUserUpdate":t.loadFullUser({userId:a.id});break;case"updateUserEmojiStatus":return e=(0,o.TKu)(e,a.userId,{emojiStatus:a.emojiStatus}),e=(0,o.wix)(e,a.userId,{emojiStatus:a.emojiStatus});case"updateUserStatus":return c[a.userId]=a.status,void i();case"updateUserFullInfo":{const{id:t,fullInfo:s}=a;return(0,o.weB)(e,t,s)}case"updateBotMenuButton":{const{botId:t,button:s}=a,n=(0,r.vGo)(e,t);if(!n?.botInfo)return;return(0,o.weB)(e,t,{botInfo:{...n.botInfo,menuButton:s}})}case"updateBotCommands":{const{botId:t,commands:s}=a,n=(0,r.vGo)(e,t);if(!n?.botInfo)return;return(0,o.weB)(e,t,{botInfo:{...n.botInfo,commands:s}})}case"updatePeerSettings":{const{id:s,settings:n}=a,i=(0,r.vGo)(e,s);return i?.botInfo?e=(0,o.weB)(e,s,{settings:n}):void t.loadFullUser({userId:s})}}})},24028:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(81686),o=a(2178),r=a(17712);const i=e=>{const t=(0,r.A)(t=>{const a=(0,n.A)();a&&a.length>1&&(t.preventDefault(),e({messageIds:a}))});(0,o.v)((0,s.Kr)(()=>({"Mod+C":t}),[]))}},24662:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"MessageStatistics");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},24683:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"Tk8btfOT",avatarContainer:"UPrRM3Ks",senderAvatar:"jdvqXfYh",contextMenu:"FHxnbOg6"}},24692:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(37932),n=a(31481),o=a(96454),r=a(14487),i=a(49763),c=a(14235),d=a(76265),l=a(99375),u=a(87894),m=a(91368),h=a(6e4),p=a(14050),g=a(60688),f=a(90709),y=a(13439),I=a(32989),A=a(60919),v=a(30708),b=a(43874),S=e([m,h]);[m,h]=S.then?(await S)():S;const w="version.txt",C=6e3,E=32;let M;(0,y.aJ)("toggleChatInfo",(e,t,a)=>{const{force:s,tabId:n=(0,r.g0)()}=a||{},o=void 0!==s?s:!(0,A.nTw)(e,n).isChatInfoShown;return e=(0,I.w)(e,{isChatInfoShown:o},n),{...e,lastIsChatInfoShown:o}}),(0,y.aJ)("toggleChatAIInfo",(e,t,a)=>{const{force:s,tabId:n=(0,r.g0)()}=a||{},o=void 0!==s?s:!(0,A.nTw)(e,n).isChatAIShown;return e=(0,I.w)(e,{isChatAIShown:o},n),{...e}}),(0,y.aJ)("toggleUserPortrait",(e,t,a)=>{const{force:s,tabId:n=(0,r.g0)()}=a||{},o=void 0!==s?s:!(0,A.nTw)(e,n).isUserPortraitShown;return e=(0,I.w)(e,{isUserPortraitShown:o},n),{...e}}),(0,y.aJ)("setLeftColumnWidth",(e,t,a)=>{const{leftColumnWidth:s}=a;return{...e,leftColumnWidth:s}}),(0,y.aJ)("resetLeftColumnWidth",e=>({...e,leftColumnWidth:void 0})),(0,y.aJ)("toggleManagement",(e,t,a)=>{const{force:s,tabId:n=(0,r.g0)()}=a||{},{chatId:o}=(0,A.Xf0)(e,n)||{};if(!o)return;const i=(0,A.nTw)(e,n);return(0,I.w)(e,{management:{byChatId:{...i.management.byChatId,[o]:{...i.management.byChatId[o],isActive:void 0!==s?s:!(i.management.byChatId[o]||{}).isActive}}}},n)}),(0,y.aJ)("requestNextManagementScreen",(e,t,a)=>{const{screen:s,tabId:n=(0,r.g0)()}=a||{},{chatId:o}=(0,A.Xf0)(e,n)||{};if(!o)return;const i=(0,A.nTw)(e,n);return(0,I.w)(e,{management:{byChatId:{...i.management.byChatId,[o]:{...i.management.byChatId[o],isActive:!0,nextScreen:s}}}},n)}),(0,y.aJ)("closeManagement",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},{chatId:n}=(0,A.Xf0)(e,s)||{};if(!n)return;const o=(0,A.nTw)(e,s);return(0,I.w)(e,{management:{byChatId:{...o.management.byChatId,[n]:{...o.management.byChatId[n],isActive:!1}}}},s)}),(0,y.aJ)("processOpenChatOrThread",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a;if((0,b.Ny)()||(0,b.Bb)())return(0,I.w)(e,{isLeftColumnShown:0===(0,A.nTw)(e,s).messageLists.length},s)}),(0,y.aJ)("resetNextProfileTab",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},{chatId:n}=(0,A.Xf0)(e,s)||{};if(n)return(0,I.w)(e,{nextProfileTab:void 0,forceScrollProfileTab:!1},s)}),(0,y.aJ)("toggleStatistics",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},n=(0,A.nTw)(e,s);return(0,I.w)(e,{isStatisticsShown:!n.isStatisticsShown,statistics:{...n.statistics,currentMessageId:void 0,currentStoryId:void 0}},s)}),(0,y.aJ)("toggleMessageStatistics",(e,t,a)=>{const{tabId:s=(0,r.g0)(),messageId:n}=a||{};return(0,I.w)(e,{statistics:{...(0,A.nTw)(e,s).statistics,currentMessageId:n,currentMessage:void 0,currentStoryId:void 0,currentStory:void 0}},s)}),(0,y.aJ)("toggleStoryStatistics",(e,t,a)=>{const{tabId:s=(0,r.g0)(),storyId:n}=a||{};return(0,I.w)(e,{statistics:{...(0,A.nTw)(e,s).statistics,currentStoryId:n,currentMessageId:void 0,currentMessage:void 0,currentStory:void 0}},s)}),(0,y.aJ)("toggleLeftColumn",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{isLeftColumnShown:!(0,A.nTw)(e,s).isLeftColumnShown},s)}),(0,y.aJ)("addRecentEmoji",(e,t,a)=>{const{emoji:s}=a,{recentEmojis:n}=e;if(!n)return{...e,recentEmojis:[s]};const o=n.filter(e=>e!==s);return o.unshift(s),o.length>E&&o.pop(),{...e,recentEmojis:o}}),(0,y.aJ)("addRecentSticker",(e,t,a)=>{const{sticker:s}=a,{recent:n}=e.stickers;if(!n)return{...e,stickers:{...e.stickers,recent:{hash:"0",stickers:[s]}}};const o=n.stickers.filter(e=>e.id!==s.id);return o.unshift(s),{...e,stickers:{...e.stickers,recent:{...n,stickers:o}}}}),(0,y.aJ)("addRecentCustomEmoji",(e,t,a)=>{const{documentId:s}=a,{recentCustomEmojis:n}=e;if(!n)return{...e,recentCustomEmojis:[s]};const o=n.filter(e=>e!==s);return o.unshift(s),o.length>E&&o.pop(),{...e,recentCustomEmojis:o}}),(0,y.aJ)("clearRecentCustomEmoji",e=>({...e,recentCustomEmojis:[]})),(0,y.aJ)("reorderStickerSets",(e,t,a)=>{const{order:s,isCustomEmoji:n}=a;return{...e,stickers:{...e.stickers,added:{setIds:n?e.stickers.added.setIds:s}},customEmojis:{...e.customEmojis,added:{setIds:n?s:e.customEmojis.added.setIds}}}}),(0,y.aJ)("showNotification",(e,t,a)=>{const{tabId:s=(0,r.g0)(),...n}=a,o=n.localId;n.localId||(n.localId=(0,c.A)());const i=[...(0,A.nTw)(e,s).notifications],d=i.findIndex(e=>o?e.localId===n.localId:e.message===n.message);return-1!==d&&i.splice(d,1),i.push(n),(0,I.w)(e,{notifications:i},s)}),(0,y.aJ)("showAllowedMessageTypesNotification",(e,t,a)=>{const{chatId:s,messageListType:n,tabId:o=(0,r.g0)()}=a;if((0,A.WA9)(e,s)&&"scheduled"===n)return void t.showNotification({message:{key:"DescriptionScheduledPaidMessagesNotAllowed"},tabId:o});const i=(0,A.hds)(e,s);if(!i)return;const c=(0,A.AWZ)(e,s),d=s?(0,A.nZ4)(e,s):void 0,l=s?(0,A.ALW)(e,i):void 0,{canSendPlainText:m,canSendPhotos:p,canSendVideos:g,canSendDocuments:y,canSendAudios:I,canSendStickers:v,canSendRoundVideos:b,canSendVoices:S}=(0,f.Q_)(i,c,l,d),w=(0,u.oE)([m?"Chat.SendAllowedContentTypeText":void 0,p?"Chat.SendAllowedContentTypePhoto":void 0,g?"Chat.SendAllowedContentTypeVideo":void 0,S?"Chat.SendAllowedContentTypeVoiceMessage":void 0,b?"Chat.SendAllowedContentTypeVideoMessage":void 0,y?"Chat.SendAllowedContentTypeFile":void 0,I?"Chat.SendAllowedContentTypeMusic":void 0,v?"Chat.SendAllowedContentTypeSticker":void 0]).map(e=>h.yE(e));if(!w.length)return void t.showNotification({message:h.yE("Chat.SendNotAllowedText"),tabId:o});const C=h.yE("AutoDownloadSettings.LastDelimeter"),E=w.join(", ").replace(/,([^,]*)$/,`${C}$1`);t.showNotification({message:h.yE("Chat.SendAllowedContentText",E),tabId:o})}),(0,y.aJ)("dismissNotification",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a,n=(0,A.nTw)(e,s).notifications.filter(({localId:e})=>e!==a.localId);return(0,I.w)(e,{notifications:n},s)}),(0,y.aJ)("showDialog",(e,t,a)=>{const{data:s,tabId:n=(0,r.g0)()}=a;if("message"in s&&s.hasErrorKey&&!(0,l.Ay)(s))return e;const o=[...(0,A.nTw)(e,n).dialogs];if("message"in s){const e=o.findIndex(e=>e.message===s.message);-1!==e&&o.splice(e,1)}return o.push(s),(0,I.w)(e,{dialogs:o},n)}),(0,y.aJ)("dismissDialog",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},n=[...(0,A.nTw)(e,s).dialogs];return n.pop(),(0,I.w)(e,{dialogs:n},s)}),(0,y.aJ)("toggleSafeLinkModal",(e,t,a)=>{const{url:s,tabId:n=(0,r.g0)()}=a;return(0,I.w)(e,{safeLinkModalUrl:s},n)}),(0,y.aJ)("openHistoryCalendar",(e,t,a)=>{const{selectedAt:s,tabId:n=(0,r.g0)()}=a;return(0,I.w)(e,{historyCalendarSelectedAt:s},n)}),(0,y.aJ)("closeHistoryCalendar",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{historyCalendarSelectedAt:void 0},s)}),(0,y.aJ)("openGame",(e,t,a)=>{const{url:s,chatId:n,messageId:o,tabId:i=(0,r.g0)()}=a,c=(0,A.O5q)(e,n,o);if(!c)return;const d=c.viaBotId||(0,A.Y7C)(e,c)?.id;if(d){if(!(0,A.nTL)(e,d))return e=(0,I.w)(e,{botTrustRequest:{botId:d,type:"game",onConfirm:{action:"openGame",payload:a}}},i),void(0,y.UF)(e);e=(0,I.w)(e,{openedGame:{url:s,chatId:n,messageId:o}},i),(0,y.UF)(e)}}),(0,y.aJ)("closeGame",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{openedGame:void 0},s)}),(0,y.aJ)("requestConfetti",(e,t,a)=>{const{tabId:s=(0,r.g0)(),...n}=a;if((0,A.PKK)(e))return(0,I.w)(e,{confetti:{lastConfettiTime:Date.now(),...n}},s)}),(0,y.aJ)("requestWave",(e,t,a)=>{const{startX:s,startY:i,tabId:c=(0,r.g0)()}=a;if(!o.J6||!(0,A.PKK)(e))return;const d=(0,A.nTw)(e,c),l=d.wave?.lastWaveTime||0;return Date.now()-l<n.S4O?void 0:(0,I.w)(e,{wave:{lastWaveTime:Date.now(),startX:s,startY:i}},c)}),(0,y.aJ)("updateAttachmentSettings",(e,t,a)=>({...e,attachmentSettings:{...e.attachmentSettings,...a}})),(0,y.aJ)("requestEffectInComposer",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a;return(0,I.w)(e,{shouldPlayEffectInComposer:!0},s)}),(0,y.aJ)("hideEffectInComposer",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a;return(0,I.w)(e,{shouldPlayEffectInComposer:void 0},s)}),(0,y.aJ)("setPaidMessageAutoApprove",e=>({...e,settings:{...e.settings,byKey:{...e.settings.byKey,shouldPaidMessageAutoApprove:!0}}})),(0,y.aJ)("setReactionEffect",(e,t,a)=>{const{chatId:s,threadId:n,reaction:o,tabId:i=(0,r.g0)()}=a,c="emoji"===o?.type&&o.emoticon;if(!c)return;const d=Object.values(e.availableEffectById).find(e=>e.effectAnimationId&&e.emoticon===c),l=d?.id,u=(0,A.g29)(e);!d?.isPremium||u?l&&(t.requestEffectInComposer({tabId:i}),t.saveEffectInDraft({chatId:s,threadId:n,effectId:l})):t.openPremiumModal({initialSection:"effects",tabId:i})}),(0,y.aJ)("openLimitReachedModal",(e,t,a)=>{const{limit:s,tabId:n=(0,r.g0)()}=a;return(0,I.w)(e,{limitReachedModal:{limit:s}},n)}),(0,y.aJ)("closeLimitReachedModal",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{limitReachedModal:void 0},s)}),(0,y.aJ)("closeStickerSetModal",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{openedStickerSetShortName:void 0},s)}),(0,y.aJ)("openCustomEmojiSets",(e,t,a)=>{const{setIds:s,tabId:n=(0,r.g0)()}=a;return(0,I.w)(e,{openedCustomEmojiSetIds:s},n)}),(0,y.aJ)("closeCustomEmojiSets",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{openedCustomEmojiSetIds:void 0},s)}),(0,y.aJ)("updateLastRenderedCustomEmojis",(e,t,a)=>{const{ids:s}=a,{lastRendered:o}=e.customEmojis;return{...e,customEmojis:{...e.customEmojis,lastRendered:(0,u.Am)([...o,...s]).slice(0,n.GW0)}}}),(0,y.aJ)("openCreateTopicPanel",(e,t,a)=>{const{chatId:s,tabId:n=(0,r.g0)()}=a;return(0,A.meB)(e,n)||t.openChat({id:s,tabId:n}),(0,I.w)(e,{createTopicPanel:{chatId:s}},n)}),(0,y.aJ)("closeCreateTopicPanel",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{createTopicPanel:void 0},s)}),(0,y.aJ)("openEditTopicPanel",(e,t,a)=>{const{chatId:s,topicId:n,tabId:o=(0,r.g0)()}=a;return(0,A.meB)(e,o)||t.openChat({id:s,tabId:o}),(0,I.w)(e,{editTopicPanel:{chatId:s,topicId:n}},o)}),(0,y.aJ)("closeEditTopicPanel",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{editTopicPanel:void 0},s)}),(0,y.aJ)("updateArchiveSettings",(e,t,a)=>{const{archiveSettings:s}=e,{isHidden:n=s.isHidden,isMinimized:o=s.isMinimized}=a;return{...e,archiveSettings:{isHidden:n,isMinimized:o}}}),(0,y.aJ)("openMapModal",(e,t,a)=>{const{geoPoint:s,zoom:n,tabId:o=(0,r.g0)()}=a;return(0,I.w)(e,{mapModal:{point:s,zoom:n}},o)}),(0,y.aJ)("closeMapModal",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{};return(0,I.w)(e,{mapModal:void 0},s)}),(0,y.aJ)("checkAppVersion",e=>{fetch(`${w}?${Date.now()}`).then(e=>e.text()).then(t=>{t=t.trim(),(0,d.A)(t,"0.0.15")&&(e=(0,y.mS)(),e={...e,isAppUpdateAvailable:!0},(0,y.UF)(e))}).catch(e=>{n.Oig&&console.error("[checkAppVersion failed] ",e)})}),(0,y.aJ)("setIsElectronUpdateAvailable",(e,t,a)=>{e=(0,y.mS)(),e={...e,isElectronUpdateAvailable:Boolean(a.isAvailable)},(0,y.UF)(e)}),(0,y.aJ)("afterHangUp",e=>{(0,A.nTw)(e,(0,r.g0)()).multitabNextAction&&(0,r.I)()});const x=500;let k;(0,y.aJ)("onTabFocusChange",(e,t,a)=>{const{isBlurred:s,tabId:n=(0,r.g0)()}=a;return s?(M&&clearInterval(M),M=window.setInterval(()=>{t.updatePageTitle({tabId:n})},x)):(clearInterval(M),M=void 0),e=(0,I.w)(e,{isBlurred:s},n),{...e,initialUnreadNotifications:s?(0,i.vp)():void 0}}),(0,y.aJ)("updatePageTitle",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},{canDisplayChatInTitle:c}=(0,v.l)(e),d=e.currentUserId,l=e.config?.isTestServer,u=l?"[T] ":"";if(document.title.includes(n.LaL))return(0,p.A)(!1),void(0,g.V)(`${u}${n.j0M} ${n.LaL}`);if(e.initialUnreadNotifications&&Math.round(Date.now()/1e3)%2==0){const t=(0,i.vp)()-e.initialUnreadNotifications;if(t>0)return(0,g.V)(`${u}${t} notification${t>1?"s":""}`),void(0,p.A)(!0)}(0,p.A)(!1);const m=(0,A.Xf0)(e,s);if(m&&c&&!e.passcode.isScreenLocked){const{chatId:t,threadId:a}=m,s=(0,A.hds)(e,t);if(s){const n=(0,f.Js)(h.yE,s,t===d),o=(0,A.S0q)(e,t,a);return s.isForum&&o?void(0,g.w)(`${u}${n} › ${o.title}`):void(0,g.w)(`${u}${n}`)}}(0,g.V)(o.cp?"":`${u}${n.j0M}`)}),(0,y.aJ)("closeInviteViaLinkModal",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a??{};return(0,I.w)(e,{inviteViaLinkModal:void 0},s)}),(0,y.aJ)("closeCollectibleInfoModal",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a??{};return(0,I.w)(e,{collectibleInfoModal:void 0},s)}),(0,y.aJ)("setShouldCloseRightColumn",(e,t,a)=>{const{value:s,tabId:n=(0,r.g0)()}=a;return(0,I.w)(e,{shouldCloseRightColumn:s},n)}),(0,y.aJ)("refreshLangPackFromCache",(e,t,a)=>{(0,m.K1)(a.langCode)}),(0,y.aJ)("processPremiumFloodWait",(e,t,a)=>{const{isUpload:s}=a,{bandwidthPremiumDownloadSpeedup:n,bandwidthPremiumUploadSpeedup:o,bandwidthPremiumNotifyPeriod:r}=e.appConfig||{},{lastPremiumBandwithNotificationDate:i}=e.settings;if(n&&o&&r&&!(i&&Date.now()<i+1e3*r))return Object.values(e.byTabId).filter(e=>!e.isBlurred).map(e=>e.id).forEach(e=>{t.showNotification({title:h.yE(s?"UploadSpeedLimited":"DownloadSpeedLimited"),message:h.yE(s?"UploadSpeedLimitedMessage":"DownloadSpeedLimitedMessage",s?o:n),duration:C,tabId:e})}),{...e,settings:{...e.settings,lastPremiumBandwithNotificationDate:Date.now()}}});let P,T=0;const F=100;(0,s.DW)(e=>{const{updatePageTitle:t,updateIsOnline:a}=(0,y.ko)(),s=e.passcode.isScreenLocked!==k,n=Object.values(e.byTabId).filter(e=>e.isBlurred).length,o=(0,A.nTw)(e,(0,r.g0)()).isMasterTab;s&&t(),n!==T&&o&&(P&&clearTimeout(P),P=window.setTimeout(()=>{e=(0,y.mS)();const t=Object.values(e.byTabId).filter(e=>e.isBlurred).length;a({isOnline:t!==(0,r.gb)().length})},F)),k=e.passcode.isScreenLocked,T=n}),t()}catch(e){t(e)}})},25179:(e,t,a)=>{a.d(t,{CH:()=>f,Fb:()=>I,I5:()=>h,Jh:()=>p,OZ:()=>l,UK:()=>m,_I:()=>g,eA:()=>u,ot:()=>y,tO:()=>d,uH:()=>i,wr:()=>c});var s=a(14487),n=a(20179),o=a(60919),r=a(32989);function i(e,t,a,...[n=(0,s.g0)()]){const i=(0,o.nTw)(e,n);return(0,r.w)(e,{inlineBots:{...i.inlineBots,byUsername:{...i.inlineBots.byUsername,[t]:a}}},n)}function c(e,t,...[a=(0,s.g0)()]){return(0,r.w)(e,{inlineBots:{...(0,o.nTw)(e,a).inlineBots,isLoading:t}},a)}function d(e,t,a,...[i=(0,s.g0)()]){const c=(0,o.nTw)(e,i),d=c.webApps.openedWebApps,l=d[t];if(!l)return e;const u={...l,...a},m=(0,n.rp)(u);return m?e=(0,r.w)(e,{webApps:{...c.webApps,openedWebApps:{...d,[m]:u}}},i):e}function l(e,t,...[a=(0,s.g0)()]){const n=(0,o.nTw)(e,a);return n.webApps.openedWebApps[t]?e=(0,r.w)(e,{webApps:{...n.webApps,isMoreAppsTabActive:!1,activeWebAppKey:t,modalState:"maximized"}},a):e}function u(e,t,a=!0,i=!0,...[c=(0,s.g0)()]){const d=(0,o.nTw)(e,c),l=(0,n.rp)(t);if(!l)return e;const u=[...d.webApps.openedOrderedKeys];u.includes(l)||u.push(l);const m=[...d.webApps.sessionKeys];m.includes(l)||m.push(l);const h=d.webApps.openedWebApps;return(0,r.w)(e,{webApps:{...d.webApps,...a&&{activeWebAppKey:l},isMoreAppsTabActive:!1,isModalOpen:i,modalState:"maximized",openedWebApps:{...h,[l]:t},openedOrderedKeys:u,sessionKeys:m}},c)}function m(e,...[t=(0,s.g0)()]){const a=(0,o.nTw)(e,t).webApps.activeWebAppKey;return a?h(e,a,!1,t):e}function h(e,t,a,...[i=(0,s.g0)()]){const c=(0,o.nTw)(e,i),{openedWebApps:l,openedOrderedKeys:u,activeWebAppKey:m}=c.webApps,h=l[t];if(!h)return e;if(!a&&h.shouldConfirmClosing)return d(e,t,{isCloseModalOpen:!0},i);const p={...l},g=(0,n.rp)(h);let f=u;g&&(delete p[g],f=u.filter(e=>e!==g));const y=m===(0,n.rp)(h),I=Object.keys(p),A=I.length;return(0,r.w)(e,{webApps:{...c.webApps,...y&&{activeWebAppKey:A?I[A-1]:void 0},openedWebApps:p,openedOrderedKeys:f,...!A&&{sessionKeys:[]}}},i)}function p(e,...[t=(0,s.g0)()]){const a=(0,o.nTw)(e,t),i=Object.fromEntries(Object.entries(a.webApps.openedWebApps).filter(([,e])=>e.shouldConfirmClosing)),c=Object.values(i);if(!(c.length>0))return(0,r.w)(e,{webApps:{...a.webApps,activeWebAppKey:void 0,openedWebApps:{},openedOrderedKeys:[],sessionKeys:[]}},t);const d=(0,o.ES7)(e,t),l=d?.shouldConfirmClosing?d:c[0],u=(0,n.rp)(l);u&&(i[u]={...l,isCloseModalOpen:!0});const m=a.webApps.openedOrderedKeys.filter(e=>i[e]);return(0,r.w)(e,{webApps:{...a.webApps,activeWebAppKey:u,isMoreAppsTabActive:!1,openedWebApps:i,openedOrderedKeys:m}},t)}function g(e,...[t=(0,s.g0)()]){return Object.keys((0,o.nTw)(e,t).webApps.openedWebApps).length>0}function f(e,...[t=(0,s.g0)()]){return Object.keys((0,o.nTw)(e,t).webApps.openedWebApps).length>1}function y(e,t,...[a=(0,s.g0)()]){const n=(0,o.nTw)(e,a);return(0,r.w)(e,{webApps:{...n.webApps,modalState:t}},a)}function I(e,t,...[a=(0,s.g0)()]){const n=(0,o.nTw)(e,a);return(0,r.w)(e,{webApps:{...n.webApps,isModalOpen:t}},a)}},25834:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{g:()=>D});var n=a(23174),o=a(89925),r=a(31481),i=a(93578),c=a(96454),d=a(85982),l=a(46275),u=a(14487),m=a(87894),h=a(60343),p=a(91368),g=a(48775),f=a(74167),y=a(6e4),I=a(37836),A=a(80140),v=a(24021),b=a(81120),S=a(90709),w=a(70636),C=a(13439),E=a(17872),M=a(32989),x=a(60919),k=a(34160),P=e([p,f,y,v,w,k]);[p,f,y,v,w,k]=P.then?(await P)():P;const T="autologin_token",F=new Map,N=(0,I.sg)(e=>e(),500,!1);async function B(e,t,a,s,n,o,r,i,c,d,...[l=(0,u.g0)()]){a||await V(e,o,r,c,i,s,n,d,l),n||t.loadViewportMessages({chatId:o.id,threadId:r,direction:i,isBudgetPreload:!0,onLoaded:d,tabId:l})}async function U({global:e,chatId:t,threadId:a,draft:s,isLocalOnly:n,noLocalTimeUpdate:o}){const r=(0,x.hds)(e,t),i=(0,x.mBe)(e,t);if(!r||i&&(0,S.PL)(i))return;const c=(0,x.OEv)(e,t,a,s?.replyInfo),d=s?{...s,replyInfo:c,date:Math.floor(Date.now()/1e3),isLocal:!0}:void 0;e=(0,E.eww)(e,t,a,"draft",d),o||(e=(0,E.wix)(e,t,{draftDate:d?.date})),(0,C.UF)(e),n||(await(0,v.px)("saveDraft",{chat:r,draft:d})&&d&&(d.isLocal=!1),e=(0,C.mS)(),e=(0,E.eww)(e,t,a,"draft",d),e=(0,E.wix)(e,t,{draftDate:d?.date}),(0,C.UF)(e))}async function R(e,t,a){const{fromChatId:s,messageIds:o,toChatId:r,withMyScore:i,noAuthors:c,noCaptions:d,toThreadId:l=n.l3}=(0,x.nTw)(e,a).forwardMessages,{messagePriceInStars:u,isSilent:h,scheduledAt:p}=t,g=(0,x.g29)(e),f=l===n.l3,y=s?(0,x.hds)(e,s):void 0,I=r?(0,x.hds)(e,r):void 0,A=s&&o?o.sort((e,t)=>e-t).map(t=>(0,x.O5q)(e,s,t)).filter(Boolean):void 0;if(!y||!I||!A||l&&!f&&!I.isForum)return;const b=(0,x.VF$)(e,r),w=(0,x.GA4)(e,r,l||n.l3),E=(0,x.ZZX)(e,I.id),k=[],[P,T]=(0,m.jB)(A,e=>!(0,S.u7)(e)),F=P.filter(t=>(0,x.R4s)(e,t));if(F.length){const a=e.config?.maxForwardedCount?(0,S.v$)(F,e.config.maxForwardedCount):[F];for(const e of a){const a={fromChat:y,toChat:I,toThreadId:l,messages:e,isSilent:h,scheduledAt:p,sendAs:b,withMyScore:i,noAuthors:c,noCaptions:d,isCurrentUserPremium:g,wasDrafted:Boolean(w),lastMessageId:E,messagePriceInStars:u};if(u){const e=await(0,v.px)("forwardMessagesLocal",a);k.push({...t,forwardParams:{...a,forwardedLocalMessagesSlice:e},forwardedLocalMessagesSlice:e})}else(0,v.px)("forwardMessages",a)}}for(const t of T){const{text:a,entities:s}=t.content.text||{},{sticker:n}=t.content,o={chat:I,replyInfo:(0,x.OEv)(e,I.id,l),text:a,entities:s,sticker:n,isSilent:h,scheduledAt:p,sendAs:b,lastMessageId:E};await G(e,o,k)}return e=(0,C.mS)(),e=(0,M.w)(e,{forwardMessages:{},isShareMessageModalShown:!1},a),(0,C.UF)(e),k}async function V(e,t,a,s,i,c=!1,d=!1,l,...[h=(0,u.g0)()]){const p=t.id;let g,f=r.yo2;switch(i){case o.TN.Backwards:s?(g=-1,f+=1):g=void 0;break;case o.TN.Around:g=-(Math.round(r.yo2/2)+1);break;case o.TN.Forwards:g=-(r.yo2+1),s&&(f+=1)}const y=(e=(0,C.mS)()).currentUserId,I=(0,S.cG)(p,a,y),A=I?String(a):p,b=await(0,v.px)("fetchMessages",{chat:(0,x.hds)(e,A),offsetId:s,addOffset:g,limit:f,threadId:a,isSavedDialog:I});if(!b)return;const{messages:w,count:M}=b;e=(0,C.mS)();const k=p===r.zv8?e.serviceNotifications.filter(({isDeleted:e})=>!e).map(({message:e})=>e):[],P=[].concat(w,k),T=(0,m.dU)(P,"id"),F=Object.keys(T).map(Number);if(a!==n.l3&&!(0,S.cG)(p,a,e.currentUserId)){const t=(0,x.dU3)(e,p,a);F[0]&&t!==F[0]||t===a||F.unshift(Number(a))}e=(0,E.o4A)(e,p,T),e=c?(0,E.E0b)(e,p,a,F):(0,E.d4w)(e,p,a,F);let N=(0,x.gCU)(e,p,a);const B=s?(0,x.Lzh)(e,p,a,s):void 0;if(c&&N&&B&&(B.length&&!(0,m.h8)(N,B)||(e=(0,E.d4w)(e,p,a,B),N=(0,x.gCU)(e,p,a),e=(0,E.qKm)(e,p,a,B),c=!1)),!d){const t=c&&B?B:N;if(t){const{newViewportIds:n}=O(t,s,i);e=(0,E.s3Z)(e,p,a,n,h)}}M&&(e=(0,E.eAk)(e,t.id,a,{messagesCount:M})),(0,C.UF)(e),l?.()}async function J(e,t,a,s){const o=await(0,v.px)("fetchMessage",{chat:t,messageId:a});if(o){if(o!==n.K1)return e=(0,C.mS)(),e=(0,E.r3y)(e,t.id,a,o.message),(0,C.UF)(e),o.message;if(s){e=(0,C.mS)();const a=(0,x.O5q)(e,t.id,s);e=(0,E.r3y)(e,t.id,s,{...a,replyInfo:void 0}),(0,C.UF)(e)}}}function L(e,t){return t<e[0]?0:t>e[e.length-1]?e.length-1:e.findIndex((a,s)=>a===t||a<t&&e[s+1]>t)}function O(e,t,a){const{length:s}=e,n=t?L(e,t):-1,i=a===o.TN.Backwards?n:n+1||s,c=a===o.TN.Around?Math.round(r.yo2/2):r.yo2,d=i-c,l=i+c-1,u=e.slice(Math.max(0,d),l+1);let m,h;switch(a){case o.TN.Backwards:m=i>=0,h=d>=0;break;case o.TN.Forwards:m=i<s,h=l<=s-1;break;case o.TN.Around:default:m=u.length>0,h=u.length===r.yo2}return{newViewportIds:u,areSomeLocal:m,areAllLocal:h}}async function D(e,t){const a=(0,x.PVB)(e,t);if(!a)return;if((0,w.vj)(a)){if((0,x.ODG)(e,t))return;return a.paidMessagesStars}if(!a?.paidMessagesStars)return;const s=(0,x.vGo)(e,a.id);return s?s.paidMessagesStars:await(0,v.px)("fetchPaidMessagesStarsAmount",a)}async function G(e,t,a){if(t.messagePriceInStars){const e=await(0,v.px)("sendMessageLocal",t);e&&a.push({...t,localMessage:e})}else j(e,t)}async function j(e,t){let a;(t.replyInfo||c.pz)&&await(0,I.P_)();const s=t.attachment?(t,n)=>{F.has(n)||(a=n,F.set(n,s)),e=(0,C.mS)(),e=(0,E.mR)(e,n,t),(0,C.UF)(e)}:void 0;await(0,v.px)("sendMessage",t,s),s&&a&&(e=(0,C.mS)(),e=(0,E.mR)(e,a,void 0),(0,C.UF)(e),F.delete(a))}async function q(e,t){const a=t[0]?.chat;if(!a||!t.length)return;const s=await D(e,a.id);if(!s)return void(0,C.ko)().sendMessages({sendParams:t});const n=t.reduce((e,t)=>{if(t.localMessage?.id)e.push(t.localMessage.id);else if(t.forwardedLocalMessagesSlice?.localMessages){const a=Object.values(t.forwardedLocalMessagesSlice.localMessages).map(e=>e.id).filter(Boolean);e.push(...a)}return e},[]),o=t[0]?.forwardedLocalMessagesSlice?.localMessages,r=t[0]?.localMessage||o&&Object.values(o)[0];if(!r)return;const i=n.length,c=t[0];let d;if(1===t.length&&c.isStoryReply){const{gif:e,sticker:t,isReaction:a}=c;e?d={key:"MessageSentPaidToastTitle",variables:{count:1},options:{pluralValue:1}}:t?d={key:"StoryTooltipStickerSent"}:a&&(d={key:"StoryTooltipReactionSent"})}const l=d||{key:"MessageSentPaidToastTitle",variables:{count:i},options:{pluralValue:i}};(0,C.ko)().sendMessages({sendParams:t}),(0,C.ko)().showNotification({localId:(0,h.bj)(r),title:l,message:{key:"MessageSentPaidToastText",variables:{amount:(0,g.Kk)((0,p.Yw)(),s*i)}},icon:"star",shouldUseCustomIcon:!0,type:"paidMessage"})}async function z(e,t,a){const s=(0,x.hds)(e,t);if(!s)return;const n=await(0,v.px)("fetchUnreadMentions",{chat:s,offsetId:a});if(!n)return;const{messages:o}=n,r=(0,m.dU)(o,"id"),i=Object.keys(r).map(Number);e=(0,C.mS)(),e=(0,E.o4A)(e,s.id,r),e=(0,E.Wez)(e,t,s,i),(0,C.UF)(e)}async function _(e,t,a){let s=(0,x.vGo)(e,a);if(!s){const{accessHash:e}=t,n=await(0,v.px)("fetchFullUser",{id:a,accessHash:e});s=n?.fullInfo}return Boolean(!s?.noVoiceMessages)}function K(e,t,a,s){const n=(0,x.GA4)(e,s,t);a.replyToMsgId&&U({global:e,chatId:s,threadId:t,draft:{...n,replyInfo:a},isLocalOnly:!0,noLocalTimeUpdate:!0})}(0,C.aJ)("loadViewportMessages",(e,t,a)=>{const{direction:s=o.TN.Around,isBudgetPreload:n=!1,shouldForceRender:r=!1,onLoaded:i,onError:c,tabId:d=(0,u.g0)()}=a||{};let{chatId:l,threadId:m}=a||{};if(!l||!m){const t=(0,x.Xf0)(e,d);if(!t)return void c?.();l=t.chatId,m=t.threadId}const p=(0,x.hds)(e,l),g=(0,x._ls)(e,l);if(!p||g)return void c?.();const f=(0,x.rA3)(e,l,m,d),y=(0,x.gCU)(e,l,m);if(f&&f.length&&s!==o.TN.Around){const a=s===o.TN.Backwards?f[0]:f[f.length-1];if((0,h.iL)(a))return;if(a===m&&s===o.TN.Backwards)return;const r=Boolean(y&&!y.includes(a)),c=r?(0,x.Lzh)(e,l,m,a):y;if(c?.length){const{newViewportIds:o,areSomeLocal:u,areAllLocal:h}=O(c,a,s);u&&(e=(0,E.s3Z)(e,l,m,o,d)),(0,I.aj)(()=>{B(e,t,h,r,n,p,m,s,a,i,d)})}if(n)return}else{const t=(0,x.kdX)(e,l,d)||(0,x.EHH)(e,l,m),a=Boolean(t&&y&&!y.includes(t)),s=(a?(0,x.Lzh)(e,l,m,t):y)||[],{newViewportIds:r,areSomeLocal:c,areAllLocal:u}=O(s,t,o.TN.Around);c&&(e=(0,E.s3Z)(e,l,m,r,d)),u?i?.():(0,I.aj)(()=>{V(e,p,m,t,o.TN.Around,a,n,i,d)})}(0,C.UF)(e,{forceOnHeavyAnimation:r})}),(0,C.aJ)("loadMessage",async(e,t,a)=>{const{chatId:s,messageId:n,replyOriginForId:o,threadUpdate:r}=a,i=(0,x.hds)(e,s);if(!i)return;const c=await J(e,i,n,o);if(c&&r){const{lastMessageId:t,isDeleting:a}=r;e=(0,C.mS)(),e=(0,E.Wwn)(e,c,s,t,a),(0,C.UF)(e)}}),(0,C.aJ)("loadMessagesById",async(e,t,a)=>{const{chatId:s,messageIds:n}=a,o=(0,x.hds)(e,s);if(!o)return;const r=await(0,v.px)("fetchMessagesById",{chat:o,messageIds:n});r&&(e=(0,C.mS)(),e=(0,E.o4A)(e,s,(0,m.dU)(r,"id")),(0,C.UF)(e))}),(0,C.aJ)("sendMessage",async(e,t,a)=>{const{messageList:s,tabId:o=(0,u.g0)()}=a,{storyId:i,peerId:c}=(0,x.V9I)(e,o),d=Boolean(i&&c);if(!s&&!d)return;let{chatId:l,threadId:h,type:p}=s||{};if(d&&(l=c,h=n.l3,p="thread"),a=(0,m.cJ)(a,["tabId"]),"scheduled"===p&&!a.scheduledAt)return e=(0,M.w)(e,{contentToBeScheduled:a},o),void(0,C.UF)(e);const g=(0,x.hds)(e,l),f=(0,x.GA4)(e,l,h),y=(0,x.nTw)(e,o).forwardMessages?.messageIds?.length,I=y||d?void 0:f?.replyInfo,A=y||d?void 0:f?.suggestedPostInfo,v=d?{type:"story",peerId:c,storyId:i}:void 0,b=(0,x.OEv)(e,l,h,I),S=v||b,w=(0,x.Vw0)(e,l,h),E=h===n.l3?(0,x.ZZX)(e,l):w?.lastMessageId,k=await D(e,l),P=A?.price,T=P?.currency||r.OUy,F=P?.amount||0;if(F&&!I)if(T===r.OUy){if(F>(e.stars?.balance?.amount||0))return void t.openStarsBalanceModal({topup:{balanceNeeded:F},tabId:o})}else if(T===r.ykW&&F>(e.ton?.balance?.amount||0))return void t.openStarsBalanceModal({currency:r.ykW,tabId:o});const N=I&&A?(0,x.O5q)(e,l,I.replyToMsgId):void 0;let B;A&&N?.content&&(B=N.content);const U={...a,chat:g,replyInfo:S,suggestedPostInfo:A,suggestedMedia:B,noWebPage:(0,x.rQx)(e,l,h),sendAs:(0,x.VF$)(e,l),lastMessageId:E,messagePriceInStars:k,isStoryReply:d,isPending:!!k||void 0,...N&&{isInvertedMedia:N?.isInvertedMedia}};d||t.clearWebPagePreview({tabId:o});const V=(!a.attachments||a.attachments.length<=1)&&!y,J=!V&&a.shouldGroupMessages,L=[];if(V){const{attachments:t,...a}=U,s={...a,attachment:t?t[0]:void 0,wasDrafted:Boolean(f)};await G(e,s,L)}else if(J){const{text:t,entities:a,attachments:s,...n}=U,o=ee(s);let i=!1;for(let s=0;s<o.length;s++){const c=o[s],d=(0,m.lD)(c,r.ynd);for(let r=0;r<d.length;r++){const l=`${Date.now()}${s}${r}`,u=0===r&&0===s,m=r===d.length-1&&s===o.length-1;if(c[0].quick&&!c[0].shouldSendAsFile){const[s,...o]=d[r];let c={...n,text:u&&!i?t:void 0,entities:u&&!i?a:void 0,attachment:s,groupedId:o.length>0?l:void 0,wasDrafted:Boolean(f)};await G(e,c,L),i=!0;for(const t of o)c={...n,attachment:t,groupedId:l},await G(e,c,L)}else{const s=d[r].slice(0,-1),o=d[r][d[r].length-1];for(const t of s){const a={...n,attachment:t,groupedId:l};await G(e,a,L)}const c={...n,text:m&&!i?t:void 0,entities:m&&!i?a:void 0,attachment:o,groupedId:s.length>0?l:void 0,wasDrafted:Boolean(f)};await G(e,c,L),i=!0}}}}else{const{text:t,entities:a,attachments:s,replyInfo:n,...o}=U;if(t){const s={...o,text:t,entities:a,replyInfo:n,wasDrafted:Boolean(f)};await G(e,s,L)}if(s)for(const t of s){const a={...o,attachment:t};await G(e,a,L)}}if(y){const t=await R(e,U,o);t&&L.push(...t)}L?.length&&q(e,L)}),(0,C.aJ)("sendInviteMessages",async(e,t,a)=>{const{chatId:s,userIds:n,tabId:o=(0,u.g0)()}=a,r=(0,x.AWZ)(e,s);if(!r?.inviteLink)return;const i=[];return await Promise.all(n.map(t=>{const a=(0,x.hds)(e,t);if(!a)return;const s=(0,S.Yg)((0,x.mBe)(e,t));return s&&i.push(s),j(e,{chat:a,text:r.inviteLink})})),t.showNotification({message:(0,y.yE)("Conversation.ShareLinkTooltip.Chat.One",i.join(", ")),tabId:o})}),(0,C.aJ)("editMessage",(e,t,a)=>{const{messageList:s,text:n,entities:o,attachments:r,tabId:i=(0,u.g0)()}=a;if(!s)return;let c;const d=r?(t,a)=>{F.has(a)||(c=a,F.set(a,d)),e=(0,C.mS)(),e=(0,E.mR)(e,a,t),(0,C.UF)(e)}:void 0,{chatId:l,threadId:m,type:h}=s,p=(0,x.hds)(e,l),g=(0,x.KLw)(e,l,m,h);p&&g&&(t.setEditingId({messageId:void 0,tabId:i}),(async()=>{await(0,v.px)("editMessage",{chat:p,message:g,attachment:r?r[0]:void 0,text:n,entities:o,noWebPage:(0,x.rQx)(e,l,m)},d),d&&c&&(e=(0,C.mS)(),e=(0,E.mR)(e,c,void 0),(0,C.UF)(e),F.delete(c))})())}),(0,C.aJ)("editTodo",(e,t,a)=>{const{chatId:s,todo:n,messageId:o}=a,r=(0,x.hds)(e,s),i=(0,x.O5q)(e,s,o);r&&i&&(0,v.px)("editTodo",{chat:r,message:i,todo:n})}),(0,C.aJ)("cancelUploadMedia",(e,t,a)=>{const{chatId:s,messageId:n}=a,o=(0,x.O5q)(e,s,n);if(!o)return;const r=o&&F.get((0,h.bj)(o));r&&(0,v.om)(r),(0,S.Nb)(o)&&t.apiUpdate({"@type":"deleteMessages",ids:[n],chatId:s})}),(0,C.aJ)("saveDraft",(e,t,a)=>{const{chatId:s,threadId:n,text:o}=a,r=(0,x.hds)(e,s);if(!o||!r)return;const i=(0,x.GA4)(e,s,n);(!r.isMonoforum||i?.replyInfo||i?.suggestedPostInfo)&&U({global:e,chatId:s,threadId:n,draft:{text:o,replyInfo:i?.replyInfo,effectId:i?.effectId,suggestedPostInfo:i?.suggestedPostInfo}})}),(0,C.aJ)("saveReplyDraft",(e,t,a)=>{const{chatId:s,threadId:n,draft:o,isLocalOnly:r}=a;U({global:e,chatId:s,threadId:n,draft:o,isLocalOnly:r})}),(0,C.aJ)("clearDraft",(e,t,a)=>{const{chatId:s,threadId:o=n.l3,isLocalOnly:r,shouldKeepReply:i,shouldKeepSuggestedPost:c}=a,d=(0,x.GA4)(e,s,o);if(!d)return;const l=d.replyInfo;U({global:e,chatId:s,threadId:o,draft:i&&l||c&&d.suggestedPostInfo?{replyInfo:i?l:void 0,suggestedPostInfo:c?d.suggestedPostInfo:void 0}:void 0,isLocalOnly:r})}),(0,C.aJ)("updateDraftReplyInfo",(e,t,a)=>{const{tabId:s=(0,u.g0)(),...n}=a,o=(0,x.Xf0)(e,s);if(!o)return;const{chatId:r,threadId:i}=o,c=(0,x.GA4)(e,r,i),d={type:"message",...c?.replyInfo,...n};d.replyToMsgId&&U({global:e,chatId:r,threadId:i,draft:{...c,replyInfo:d,suggestedPostInfo:void 0},isLocalOnly:!0,noLocalTimeUpdate:!0})}),(0,C.aJ)("resetDraftReplyInfo",(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{},n=(0,x.Xf0)(e,s);if(!n)return;const{chatId:o,threadId:r}=n,i=(0,x.hds)(e,o),c=(0,x.GA4)(e,o,r);if(i?.isMonoforum&&!c?.replyInfo&&!c?.suggestedPostInfo)return;const d=c?.text?{...c,replyInfo:void 0}:void 0;U({global:e,chatId:o,threadId:r,draft:d,isLocalOnly:Boolean(d)})}),(0,C.aJ)("updateDraftSuggestedPostInfo",(e,t,a)=>{const{tabId:s=(0,u.g0)(),...n}=a,o=(0,x.Xf0)(e,s);if(!o)return;const{chatId:r,threadId:i}=o,c=(0,x.GA4)(e,r,i),d={...c?.suggestedPostInfo,...n};U({global:e,chatId:r,threadId:i,draft:{...c,suggestedPostInfo:d},isLocalOnly:!0,noLocalTimeUpdate:!0})}),(0,C.aJ)("resetDraftSuggestedPostInfo",(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{},n=(0,x.Xf0)(e,s);if(!n)return;const{chatId:o,threadId:r}=n;U({global:e,chatId:o,threadId:r,draft:void 0,isLocalOnly:!1})}),(0,C.aJ)("initDraftFromSuggestedMessage",(e,t,a)=>{const{chatId:s,messageId:n,tabId:o=(0,u.g0)()}=a,i=(0,x.O5q)(e,s,n);if(!i)return;const c=(0,x.Xf0)(e,o);if(!c)return;const{threadId:d}=c;if(t.clearDraft({chatId:s,threadId:d,isLocalOnly:!0}),t.updateDraftReplyInfo({replyToMsgId:n,monoforumPeerId:(0,x.QP5)(e,i),tabId:o}),i.suggestedPostInfo){const{scheduleDate:a,...s}=i.suggestedPostInfo,n=(0,A.Fm)(),c=e.appConfig?.starsSuggestedPostFutureMin||r.WHU,d=a&&a>n+c?a:void 0;t.updateDraftSuggestedPostInfo({...s,scheduleDate:d,tabId:o})}t.saveDraft({chatId:s,threadId:d,text:i.content.text})}),(0,C.aJ)("saveEffectInDraft",(e,t,a)=>{const{chatId:s,threadId:n,effectId:o}=a,r=(0,x.hds)(e,s),i=(0,x.GA4)(e,s,n);(!r?.isMonoforum||i?.replyInfo||i?.suggestedPostInfo)&&U({global:e,chatId:s,threadId:n,draft:{...i,effectId:o},isLocalOnly:!0,noLocalTimeUpdate:!0})}),(0,C.aJ)("updateInsertingPeerIdMention",(e,t,a)=>{const{peerId:s,tabId:n=(0,u.g0)()}=a||{};return(0,M.w)(e,{insertingPeerIdMention:s},n)}),(0,C.aJ)("toggleMessageWebPage",(e,t,a)=>{const{chatId:s,threadId:n,noWebPage:o}=a;return(0,E.eww)(e,s,n,"noWebPage",o)}),(0,C.aJ)("pinMessage",(e,t,a)=>{const{chatId:s,messageId:n,isUnpin:o,isOneSide:r,isSilent:i}=a,c=(0,x.hds)(e,s);c&&(0,v.px)("pinMessage",{chat:c,messageId:n,isUnpin:o,isOneSide:r,isSilent:i})}),(0,C.aJ)("unpinAllMessages",async(e,t,a)=>{const{chatId:s,threadId:o}=a,r=(0,x.hds)(e,s);if(!r)return;await(0,v.px)("unpinAllMessages",{chat:r,threadId:o}),e=(0,C.mS)();const i=(0,x.fcC)(e,s,o);i?.forEach(t=>{e=(0,E.r3y)(e,s,t,{isPinned:!1})}),e=(0,E.eww)(e,r.id,n.l3,"pinnedIds",[]),(0,C.UF)(e)}),(0,C.aJ)("deleteMessages",(e,t,a)=>{const{messageIds:s,shouldDeleteForAll:n,messageList:o,tabId:r=(0,u.g0)()}=a,i=(0,x.Xf0)(e,r),c=o||i;if(!c)return;const{chatId:d,threadId:l}=c,m=(0,x.hds)(e,d),h=s.filter(t=>{const a=(0,x.O5q)(e,d,t);return a&&!(0,S.Nb)(a)});if(!h.length&&s.length)return void(0,k.gQ)(e,(0,S.WX)(m)||(0,S.Vs)(m)?d:void 0,s,t);(0,v.px)("deleteMessages",{chat:m,messageIds:h,shouldDeleteForAll:n});const p=(0,x.Ys6)(e,d,l);p&&s.includes(p)&&t.setEditingId({messageId:void 0,tabId:r})}),(0,C.aJ)("resetLocalPaidMessages",(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{},n=(0,x.nTw)(e,s).notifications;return n&&n.length?(n.forEach(e=>{if("paidMessage"===e.type){const a=e.dismissAction;a&&!Array.isArray(a)&&t[a.action](a.payload),t.dismissNotification({localId:e.localId,tabId:s})}}),e):e}),(0,C.aJ)("deleteParticipantHistory",(e,t,a)=>{const{chatId:s,peerId:n}=a,o=(0,x.hds)(e,s),r=(0,x.PVB)(e,n);(0,v.px)("deleteParticipantHistory",{chat:o,peer:r})}),(0,C.aJ)("deleteScheduledMessages",(e,t,a)=>{const{messageIds:s,tabId:n=(0,u.g0)()}=a,o=(0,x.Xf0)(e,n);if(!o)return;const{chatId:r}=o,i=(0,x.hds)(e,r);(0,v.px)("deleteScheduledMessages",{chat:i,messageIds:s});const c=(0,x.VlN)(e,r);c&&s.includes(c)&&t.setEditingId({messageId:void 0,tabId:n})}),(0,C.aJ)("deleteHistory",async(e,t,a)=>{const{chatId:s,shouldDeleteForAll:n,tabId:o=(0,u.g0)()}=a,r=(0,x.hds)(e,s);if(!r)return;await(0,v.px)("deleteHistory",{chat:r,shouldDeleteForAll:n}),e=(0,C.mS)();const i=(0,x.Xf0)(e,o);i&&i.chatId===s&&t.openChat({id:void 0,tabId:o});const c=e.chatFolders.byId;Object.values(c).forEach(e=>{if(e.includedChatIds.includes(s)||e.pinnedChatIds?.includes(s)){const t=e.includedChatIds.filter(e=>e!==s),a=e.pinnedChatIds?.filter(e=>e!==s),n={...e,includedChatIds:t,pinnedChatIds:a};(0,v.px)("editChatFolder",{id:e.id,folderUpdate:n})}})}),(0,C.aJ)("deleteSavedHistory",async(e,t,a)=>{const{chatId:s,tabId:n=(0,u.g0)()}=a,o=(0,x.hds)(e,s);if(!o)return;await(0,v.px)("deleteSavedHistory",{chat:o}),e=(0,C.mS)();const r=(0,x.Xf0)(e,n);r&&r.threadId===s&&t.openChat({id:void 0,tabId:n})}),(0,C.aJ)("reportMessages",async(e,t,a)=>{const{messageIds:s,description:n="",option:o="",chatId:i,tabId:c=(0,u.g0)()}=a,d=(0,x.hds)(e,i),l=await(0,v.px)("reportMessages",{peer:d,messageIds:s,description:n,option:o});if(!l)return;const{result:m,error:h}=l;if(h===r.zLi)return t.showNotification({message:(0,y.yE)("lng_report_please_select_messages"),tabId:c}),void t.closeReportModal({tabId:c});if(m){if("reported"===m.type)return t.showNotification({message:m?(0,y.yE)("ReportPeer.AlertSuccess"):"An error occurred while submitting your report. Please, try again later.",tabId:c}),void t.closeReportModal({tabId:c});if("selectOption"===m.type){e=(0,C.mS)();const t=(0,x.nTw)(e,c).reportModal?.sections,a=t?.[t.length-1]?.options?.find(e=>e.option===o),r={title:m.title,options:m.options,subtitle:a?.text};e=(0,M.w)(e,{reportModal:{chatId:i,messageIds:s,description:n,subject:"message",sections:t?[...t,r]:[r]}},c),(0,C.UF)(e)}if("comment"===m.type){e=(0,C.mS)();const t=(0,x.nTw)(e,c).reportModal?.sections,a=t?.[t.length-1]?.options?.find(e=>e.option===o),r={isOptional:m.isOptional,option:m.option,title:a?.text};e=(0,M.w)(e,{reportModal:{chatId:i,messageIds:s,description:n,subject:"message",sections:t?[...t,r]:[r]}},c),(0,C.UF)(e)}}}),(0,C.aJ)("sendMessageAction",async(e,t,a)=>{const{action:s,chatId:n,threadId:o}=a;if("connectionStateReady"!==e.connectionState)return;if((0,x.nZ4)(e,n))return;const r=(0,x.hds)(e,n);if(!r||r.isMonoforum)return;const i=(0,x.mBe)(e,n);i&&((0,S.tv)(i)||(0,S.PL)(i))||await(0,v.px)("sendMessageAction",{peer:r,threadId:o,action:s})}),(0,C.aJ)("reportChannelSpam",(e,t,a)=>{const{participantId:s,chatId:n,messageIds:o}=a,r=(0,x.PVB)(e,s),i=(0,x.hds)(e,n);r&&i&&(0,v.px)("reportChannelSpam",{peer:r,chat:i,messageIds:o})}),(0,C.aJ)("markMessageListRead",(e,t,a)=>{if((0,x.trm)(e))return;const{maxId:s,tabId:o=(0,u.g0)()}=a,i=(0,x.Xf0)(e,o);if(!i)return;const{chatId:c,threadId:d}=i,l=(0,x.hds)(e,c);if(!l||(0,S.cG)(c,d,e.currentUserId))return;N(()=>{(0,v.px)("markMessageListRead",{chat:l,threadId:d,maxId:s})}),c===r.zv8&&(e={...e,serviceNotifications:e.serviceNotifications.map(e=>e.isUnread&&e.id<=s?{...e,isUnread:!1}:e)});const m=(0,x.rA3)(e,c,d,o),h=(0,x.RjD)(e,c,d);if(d!==n.l3&&!l.isForum)return(0,E.eAk)(e,c,d,{lastReadInboxMessageId:s});if(!m||!h||!l.unreadCount)return e;const p=Z(m,h,s);if(!p)return e;const g=(0,x.S0q)(e,c,d);if(l.isForum&&g){e=(0,E.eAk)(e,c,d,{lastReadInboxMessageId:s});const t=Math.max(0,g.unreadCount-p);return 0===t&&(e=(0,E.wix)(e,c,{unreadCount:Math.max(0,l.unreadCount-1)})),(0,E.TwA)(e,c,Number(d),{unreadCount:t})}return(0,E.wix)(e,c,{lastReadInboxMessageId:s,unreadCount:Math.max(0,l.unreadCount-p)})}),(0,C.aJ)("markMessagesRead",(e,t,a)=>{const{messageIds:s,tabId:n=(0,u.g0)(),shouldFetchUnreadReactions:o}=a,r=(0,x.meB)(e,n);r&&(0,v.px)("markMessagesRead",{chat:r,messageIds:s}).then(()=>{o&&t.fetchUnreadReactions({chatId:r.id})})}),(0,C.aJ)("loadWebPagePreview",async(e,t,a)=>{const{text:s,tabId:n=(0,u.g0)()}=a,o=await(0,v.px)("fetchWebPagePreview",{text:s});e=(0,C.mS)(),e=(0,M.w)(e,{webPagePreviewId:o?.id},n),(0,C.UF)(e),o&&t.apiUpdate({"@type":"updateWebPage",webPage:o})}),(0,C.aJ)("clearWebPagePreview",(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{};return(0,M.w)(e,{webPagePreviewId:void 0},s)}),(0,C.aJ)("sendPollVote",(e,t,a)=>{const{chatId:s,messageId:n,options:o}=a,r=(0,x.hds)(e,s);r&&(0,v.px)("sendPollVote",{chat:r,messageId:n,options:o})}),(0,C.aJ)("toggleTodoCompleted",(e,t,a)=>{const{chatId:s,messageId:n,completedIds:o,incompletedIds:r}=a,i=(0,x.hds)(e,s),c=(0,x.O5q)(e,s,n),d=e.currentUserId,l=c?.content.todo;if(!l||!d||!i)return;const u=l.completions||[],m=u.map(e=>e.itemId),h=[...u],p=(0,A.Fm)();o.forEach(e=>{m.includes(e)||h.push({itemId:e,completedBy:d,completedAt:p})});const g=h.filter(e=>!r.includes(e.itemId)),f={...c.content,todo:{...l,completions:g}},y={...c,content:f};e=(0,k.No)(e,s,c.id,y),(0,C.UF)(e),(0,v.px)("toggleTodoCompleted",{chat:i,messageId:c.id,completedIds:o,incompletedIds:r})}),(0,C.aJ)("appendTodoList",(e,t,a)=>{const{chatId:s,items:n,messageId:o}=a,r=(0,x.hds)(e,s),i=(0,x.O5q)(e,s,o);r&&i&&(0,v.px)("appendTodoList",{chat:r,message:i,items:n})}),(0,C.aJ)("cancelPollVote",(e,t,a)=>{const{chatId:s,messageId:n}=a,o=(0,x.hds)(e,s);o&&(0,v.px)("sendPollVote",{chat:o,messageId:n,options:[]})}),(0,C.aJ)("closePoll",(e,t,a)=>{const{chatId:s,messageId:n}=a,o=(0,x.hds)(e,s),r=(0,x.O5q)(e,s,n),i=r&&(0,x.zcZ)(e,r);o&&i&&(0,v.px)("closePoll",{chat:o,messageId:n,poll:i})}),(0,C.aJ)("loadPollOptionResults",async(e,t,a)=>{const{chat:s,messageId:n,option:o,offset:r,limit:i,shouldResetVoters:c,tabId:d=(0,u.g0)()}=a,l=await(0,v.px)("loadPollOptionResults",{chat:s,messageId:n,option:o,offset:r,limit:i});if(!l)return;e=(0,C.mS)();const h=(0,x.nTw)(e,d),{pollResults:p}=h,{voters:g}=h.pollResults;e=(0,M.w)(e,{pollResults:{...p,voters:{...g,[o]:(0,m.Am)([...!c&&g?.[o]?g[o]:[],...l.votes.map(e=>e.peerId)])},offsets:{...p.offsets?p.offsets:{},[o]:l.nextOffset||""}}},d),(0,C.UF)(e)}),(0,C.aJ)("loadExtendedMedia",(e,t,a)=>{const{chatId:s,ids:n}=a,o=(0,x.hds)(e,s);o&&(0,v.px)("fetchExtendedMedia",{chat:o,ids:n})}),(0,C.aJ)("loadScheduledHistory",async(e,t,a)=>{if((0,x.trm)(e))return;const{chatId:s}=a,o=(0,x.hds)(e,s);if(!o)return;const r=await(0,v.px)("fetchScheduledHistory",{chat:o});if(!r)return;const{messages:i}=r,c=(0,m.dU)(i,"id"),d=Object.keys(c).map(Number).sort((e,t)=>t-e);if(e=(0,C.mS)(),e=(0,E.Ffw)(e,o.id,c),e=(0,E.eww)(e,o.id,n.l3,"scheduledIds",d),d.length||(e=(0,E.zTz)(e,o.id,{hasScheduledMessages:!1})),o?.isForum){const t={};i.forEach(a=>{const s=(0,x.L_2)(e,a),n=t[s]||[];n.push(a.id),t[s]=n}),Object.entries(t).forEach(([t,a])=>{e=(0,E.eww)(e,o.id,Number(t),"scheduledIds",a)})}(0,C.UF)(e)}),(0,C.aJ)("sendScheduledMessages",(e,t,a)=>{const{chatId:s,id:n}=a,o=(0,x.hds)(e,s);o&&(0,v.px)("sendScheduledMessages",{chat:o,ids:[n]})}),(0,C.aJ)("rescheduleMessage",(e,t,a)=>{const{chatId:s,messageId:n,scheduledAt:o}=a,r=(0,x.hds)(e,s),i=r&&(0,x.Jl6)(e,r.id,n);r&&i&&(0,v.px)("rescheduleMessage",{chat:r,message:i,scheduledAt:o})}),(0,C.aJ)("transcribeAudio",async(e,t,a)=>{const{messageId:s,chatId:n}=a,o=(0,x.hds)(e,n);if(!o)return;e=(0,E.r3y)(e,n,s,{transcriptionId:""}),(0,C.UF)(e);const r=await(0,v.px)("transcribeAudio",{chat:o,messageId:s});e=(0,C.mS)(),e=(0,E.r3y)(e,n,s,{transcriptionId:r,isTranscriptionError:!r}),(0,C.UF)(e)}),(0,C.aJ)("transcribeAudioByOpenai",async(e,t,a)=>{const{messageId:s,chatId:n}=a,{autoTranslateLanguage:o="en"}=e.settings.byKey,r=(0,x.O5q)(e,n,s),i=(0,x.hds)(e,n);if(!i)return;e=(0,E.r3y)(e,n,s,{transcriptionId:""}),(0,C.UF)(e);const c=r?.content?.voice;if(!c)return;const d=(0,S.VO)(c,"download");if(!d)return;await f.hd(d,0);const l=f.Ih(d);if(!l)return;const u=await fetch(l),m=await u.blob(),h=new FormData;h.append("file",m,"audio.ogg"),h.append("language",o);const p=await(0,b.Nj)(h),g=`${i?.id}-${s}`;(0,v.px)("transcribeAudioByOpenai",{transcriptionId:g,transcriptionText:p.text}),e=(0,C.mS)(),e=(0,E.r3y)(e,n,s,{transcriptionId:g,isTranscriptionError:!p}),(0,C.UF)(e)}),(0,C.aJ)("loadCustomEmojis",async(e,t,a)=>{const{ids:s,ignoreCache:n}=a,o=n?s:(0,m.Am)(s.filter(t=>!e.customEmojis.byId[t])),r=await(0,v.px)("fetchCustomEmoji",{documentId:o});r&&(e=(0,C.mS)(),e={...e,customEmojis:{...e.customEmojis,byId:{...e.customEmojis.byId,...(0,m.dU)(r,"id")}}},(0,C.UF)(e))}),(0,C.aJ)("forwardMessages",(e,t,a)=>{const{isSilent:s,scheduledAt:n,tabId:o=(0,u.g0)()}=a,{toChatId:r}=(0,x.nTw)(e,o).forwardMessages,i=r?(0,x.hds)(e,r):void 0;i&&R(e,{chat:i,isSilent:s,scheduledAt:n},o)}),(0,C.aJ)("sendMessages",async(e,t,a)=>{const{sendParams:s}=a;await Promise.all(s.map(async t=>{t.forwardedLocalMessagesSlice&&t.forwardParams?(await(0,I.P_)(),await(0,v.px)("forwardApiMessages",t.forwardParams)):await j(e,t)})),s.length>0&&s[0].messagePriceInStars&&t.loadStarStatus()}),(0,C.aJ)("loadPinnedMessages",async(e,t,a)=>{const{chatId:s,threadId:n}=a,o=(0,x.hds)(e,s);if(!o||(0,S.cG)(s,n,e.currentUserId))return;const r=await(0,v.px)("fetchPinnedMessages",{chat:o,threadId:n});if(!r)return;const{messages:i}=r,c=(0,m.dU)(i,"id"),d=Object.keys(c).map(Number).sort((e,t)=>t-e);e=(0,C.mS)(),e=(0,E.o4A)(e,o.id,c),e=(0,E.gz3)(e,o.id,n,d),(0,C.UF)(e)}),(0,C.aJ)("loadSeenBy",async(e,t,a)=>{const{chatId:s,messageId:n}=a,o=(0,x.hds)(e,s);if(!o)return;const r=await(0,v.px)("fetchSeenBy",{chat:o,messageId:n});r&&(e=(0,C.mS)(),e=(0,E.r3y)(e,s,n,{seenByDates:r}),(0,C.UF)(e))}),(0,C.aJ)("saveDefaultSendAs",(e,t,a)=>{const{chatId:s,sendAsId:n}=a,o=(0,x.hds)(e,s),r=(0,x.hds)(e,n)||(0,x.mBe)(e,n);if(o&&r)return(0,v.px)("saveDefaultSendAs",{sendAs:r,chat:o}),(0,E.ltr)(e,s,{sendAsId:n})}),(0,C.aJ)("loadSendAs",async(e,t,a)=>{const{chatId:s}=a,n=(0,x.hds)(e,s);if(!n)return;const o=await(0,v.px)("fetchSendAs",{chat:n});if(!o)return e=(0,C.mS)(),e=(0,E.wix)(e,s,{sendAsPeerIds:[]}),void(0,C.UF)(e);e=(0,C.mS)(),e=(0,E.wix)(e,s,{sendAsPeerIds:o}),(0,C.UF)(e)}),(0,C.aJ)("loadSendPaidReactionsAs",async(e,t,a)=>{const{chatId:s}=a,n=(0,x.hds)(e,s);if(!n)return;const o=await(0,v.px)("fetchSendAs",{chat:n,isForPaidReactions:!0});if(!o)return e=(0,C.mS)(),e=(0,E.wix)(e,s,{sendPaidReactionsAsPeerIds:[]}),void(0,C.UF)(e);e=(0,C.mS)(),e=(0,E.wix)(e,s,{sendPaidReactionsAsPeerIds:o}),(0,C.UF)(e)}),(0,C.aJ)("loadSponsoredMessages",async(e,t,a)=>{if((0,x.trm)(e))return;const{peerId:s}=a,n=(0,x.PVB)(e,s);if(!n)return;if((0,w.mO)(n)&&(0,x.I_m)(e,n.id))return;const o=await(0,v.px)("fetchSponsoredMessages",{peer:n});o&&(e=(0,C.mS)(),e=(0,E.EKx)(e,s,o.messages[0]),(0,C.UF)(e))}),(0,C.aJ)("viewSponsored",(e,t,a)=>{const{randomId:s}=a;(0,v.px)("viewSponsoredMessage",{random:s})}),(0,C.aJ)("clickSponsored",(e,t,a)=>{const{randomId:s,isMedia:n,isFullscreen:o}=a;(0,v.px)("clickSponsoredMessage",{random:s,isMedia:n,isFullscreen:o})}),(0,C.aJ)("reportSponsored",async(e,t,a)=>{const{peerId:s,randomId:n,option:o="",tabId:r=(0,u.g0)()}=a,i=await(0,v.px)("reportSponsoredMessage",{randomId:n,option:o});if(i){if("premiumRequired"===i.type)return t.openPremiumModal({initialSection:"no_ads",tabId:r}),void t.closeReportAdModal({tabId:r});if("reported"===i.type||"hidden"===i.type)return t.showNotification({message:(0,y.yE)("reported"===i.type?"AdReported":"AdHidden"),tabId:r}),t.closeReportAdModal({tabId:r}),e=(0,C.mS)(),e=s?(0,E.Itk)(e,s):(0,E.b8O)(e,{sponsoredPeer:void 0},r),void(0,C.UF)(e);if("selectOption"===i.type){e=(0,C.mS)();const t=(0,x.nTw)(e,r).reportAdModal?.sections,a=t?.[t.length-1]?.options.find(e=>e.option===o),c={title:i.title,options:i.options,subtitle:a?.text};e=(0,M.w)(e,{reportAdModal:{chatId:s,randomId:n,sections:t?[...t,c]:[c]}},r),(0,C.UF)(e)}}}),(0,C.aJ)("hideSponsored",async(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{};(0,x.g29)(e)?await(0,v.px)("toggleSponsoredMessages",{enabled:!1})&&(e=(0,C.mS)(),e=(0,E.weB)(e,e.currentUserId,{areAdsEnabled:!1}),(0,C.UF)(e),t.showNotification({message:(0,y.yE)("AdHidden"),tabId:s})):t.openPremiumModal({initialSection:"no_ads",tabId:s})}),(0,C.aJ)("fetchUnreadMentions",async(e,t,a)=>{const{chatId:s,offsetId:n}=a;await z(e,s,n)}),(0,C.aJ)("approveSuggestedPost",async(e,t,a)=>{const{chatId:s,messageId:n,scheduleDate:o,tabId:i=(0,u.g0)()}=a,c=(0,x.hds)(e,s);if(!c)return;const d=(0,x.O5q)(e,s,n);if(!(0,x.ODG)(e,s)&&d?.suggestedPostInfo?.price?.amount){const a=d.suggestedPostInfo.price.amount;if(d.suggestedPostInfo.price.currency===r.OUy){if(a>(e.stars?.balance?.amount||0))return void t.openStarsBalanceModal({topup:{balanceNeeded:a},tabId:i})}else if(a>(e.ton?.balance?.amount||0))return void t.openStarsBalanceModal({currency:r.ykW,tabId:i})}await(0,v.px)("toggleSuggestedPostApproval",{chat:c,messageId:n,reject:!1,scheduleDate:o})&&t.showNotification({message:{key:"SuggestedPostApproved"},tabId:i})}),(0,C.aJ)("rejectSuggestedPost",async(e,t,a)=>{const{chatId:s,messageId:n,rejectComment:o,tabId:r=(0,u.g0)()}=a,i=(0,x.hds)(e,s);i&&await(0,v.px)("toggleSuggestedPostApproval",{chat:i,messageId:n,reject:!0,rejectComment:o})&&t.showNotification({message:{key:"SuggestedPostRejectedNotification"},tabId:r})}),(0,C.aJ)("markMentionsRead",(e,t,a)=>{const{chatId:s,messageIds:n,tabId:o=(0,u.g0)()}=a,r=(0,x.hds)(e,s);r&&(e=(0,E.pWt)(e,s,r,n,!0),(0,C.UF)(e),t.markMessagesRead({messageIds:n,tabId:o}))}),(0,C.aJ)("focusNextMention",async(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{};let n=(0,x.meB)(e,s);if(n){if(!n.unreadMentions){await z(e,n.id),e=(0,C.mS)();const t=n.id;if(n=(0,x.meB)(e,s),!n?.unreadMentions||t!==n.id)return}t.focusMessage({chatId:n.id,messageId:n.unreadMentions[0],tabId:s})}}),(0,C.aJ)("readAllMentions",(e,t,a)=>{const{chatId:s,threadId:o=n.l3}=a,r=(0,x.hds)(e,s);if(r)return(0,v.px)("readAllMentions",{chat:r,threadId:o===n.l3?void 0:o}),o===n.l3?(0,E.wix)(e,r.id,{unreadMentionsCount:void 0,unreadMentions:void 0}):void 0}),(0,C.aJ)("openUrl",(e,t,a)=>{const{url:s,shouldSkipModal:n,ignoreDeepLinks:o,tabId:c=(0,u.g0)()}=a,d=(0,i.Tc)(s),m=new URL(d),h=(0,i._G)(d);if(!o&&(0,l.zq)(d))return t.closeStoryViewer({tabId:c}),t.closePaymentModal({tabId:c}),void t.openTelegramLink({url:s,tabId:c});const{appConfig:p,config:g}=e;if(p){if(g?.autologinToken&&p.autologinDomains.includes(m.hostname))return m.searchParams.set(T,g.autologinToken),void window.open(m.href,"_blank","noopener");if(p.urlAuthDomains.includes(m.hostname))return t.closeStoryViewer({tabId:c}),void t.requestLinkUrlAuth({url:s,tabId:c})}d.match(r.H_r)||n?window.open(m,"_blank","noopener"):t.toggleSafeLinkModal({url:h?m.toString():d,tabId:c})}),(0,C.aJ)("openChatOrTopicWithReplyInDraft",(e,t,a)=>{const{chatId:s,topicId:o,tabId:r=(0,u.g0)()}=a;e=(0,C.mS)();const i=(0,x.nTw)(e,r).replyingMessage;e=(0,M.w)(e,{isShareMessageModalShown:!1,replyingMessage:{}},r),(0,C.UF)(e),e=(0,C.mS)();const c=(0,x.meB)(e,r),d=(0,x.Xf0)(e,r)?.threadId;if(!c||!d)return;const l=o||n.l3,m=c.id,h={type:"message",replyToMsgId:i.messageId,replyToTopId:i.toThreadId,replyToPeerId:m,monoforumPeerId:i.toThreadId,quoteText:i.quoteText,quoteOffset:i.quoteOffset},p=i.messageId?h:(0,x.GA4)(e,m,d)?.replyInfo;if(!p)return;if(!(0,x.Vz3)(e,s,m,p))return void t.showNotification({message:(0,y.yE)("Chat.SendNotAllowedText"),tabId:r});if(!p.replyToPeerId&&s===c.id)return;const g=p?.replyToPeerId?p.replyToPeerId===s?void 0:p.replyToPeerId:m;K(e,l,{...p,replyToPeerId:g,type:"message"},s),t.openThread({chatId:s,threadId:l,tabId:r}),t.closeMediaViewer({tabId:r}),t.exitMessageSelectMode({tabId:r}),t.clearDraft({chatId:m,threadId:d})}),(0,C.aJ)("setForwardChatOrTopic",async(e,t,a)=>{const{chatId:s,topicId:o,tabId:r=(0,u.g0)()}=a,i=(0,x.mBe)(e,s);(0,x.lC)(e,r)&&i&&!await _(e,i,s)?t.showDialog({data:{message:(0,y.yE)("VoiceMessagesRestrictedByPrivacy",(0,S.Yg)(i))},tabId:r}):(e=(0,C.mS)(),(0,x.DI)(e,s,r)?(e=(0,M.w)(e,{forwardMessages:{...(0,x.nTw)(e,r).forwardMessages,toChatId:s,toThreadId:o},isShareMessageModalShown:!1},r),(0,C.UF)(e),t.openThread({chatId:s,threadId:o||n.l3,tabId:r}),t.closeMediaViewer({tabId:r}),t.exitMessageSelectMode({tabId:r})):t.showAllowedMessageTypesNotification({chatId:s,tabId:r}))}),(0,C.aJ)("forwardToSavedMessages",(e,t,a)=>{const{tabId:s=(0,u.g0)()}=a||{};e=(0,M.w)(e,{forwardMessages:{...(0,x.nTw)(e,s).forwardMessages,toChatId:e.currentUserId}},s),(0,C.UF)(e),t.exitMessageSelectMode({tabId:s}),t.forwardMessages({isSilent:!0,tabId:s})}),(0,C.aJ)("forwardStory",(e,t,a)=>{const{toChatId:s,tabId:n=(0,u.g0)()}=a||{},{fromChatId:o,storyId:r}=(0,x.nTw)(e,n).forwardMessages,i=o?(0,x.hds)(e,o):void 0,c=s?(0,x.hds)(e,s):void 0,d=o&&r?(0,x.Msb)(e,o,r):void 0;if(!i||!c||!d||"isDeleted"in d)return;const l=(0,x.ZZX)(e,s),{text:m,entities:h}=d.content.text||{};j(e,{chat:c,text:m,entities:h,story:d,lastMessageId:l}),e=(0,C.mS)(),e=(0,M.w)(e,{forwardMessages:{},isShareMessageModalShown:!1},n),(0,C.UF)(e)}),(0,C.aJ)("requestMessageTranslation",(e,t,a)=>{const{chatId:s,id:n,toLanguageCode:o=(0,x.Qq_)(e),tabId:r=(0,u.g0)()}=a;return(0,E._Bm)(e,s,n,o,r)}),(0,C.aJ)("showOriginalMessage",(e,t,a)=>{const{chatId:s,id:n,tabId:o=(0,u.g0)()}=a;return(0,E.xGf)(e,s,n,o)}),(0,C.aJ)("markMessagesTranslationPending",(e,t,a)=>{const{chatId:s,messageIds:n,toLanguageCode:o=(0,x.wmb)(e)}=a;return n.forEach(t=>{e=(0,E.oeN)(e,s,t,o,{isPending:!0})}),e}),(0,C.aJ)("translateMessages",(e,t,a)=>{const{chatId:s,messageIds:n,toLanguageCode:o=(0,x.wmb)(e)}=a,r=(0,x.hds)(e,s);if(r)return t.markMessagesTranslationPending({chatId:s,messageIds:n,toLanguageCode:o}),(0,v.px)("translateText",{chat:r,messageIds:n,toLanguageCode:o}),e}),(0,C.aJ)("translateMessagesByTencent",(e,t,a)=>{const{chatId:s,messageIds:n,toLanguageCode:o=(0,x.wmb)(e)}=a,r=(0,x.hds)(e,s);if(!r)return;t.markMessagesTranslationPending({chatId:s,messageIds:n,toLanguageCode:o});const i=n.map(t=>{const a=(0,x.O5q)(e,s,t);return a?.content.text}),{currentUserId:c}=e,d=(0,S.Yg)((0,x.mBe)(e,c));return(0,v.px)("translateTextByTencent",{chat:r,messageIds:n,text:i,toLanguageCode:o,userId:c,userName:d}),e});const H=1e3;let W,$={};function X(){W&&(clearTimeout(W),W=void 0);const{loadMessageViews:e}=(0,C.ko)();Object.entries($).forEach(([t,a])=>{e({chatId:t,ids:Array.from(a),shouldIncrement:!0})}),$={}}(0,C.aJ)("scheduleForViewsIncrement",(e,t,a)=>{const{ids:s,chatId:n}=a;W||setTimeout(X,H),$[n]||($[n]=new Set),s.forEach(e=>{$[n].add(e)})}),(0,C.aJ)("loadMessageViews",async(e,t,a)=>{const{chatId:s,ids:n,shouldIncrement:o}=a;if((0,x.trm)(e))return;const r=(0,x.hds)(e,s);if(!r)return;const i=await(0,v.px)("fetchMessageViews",{chat:r,ids:n,shouldIncrement:o});i&&(e=(0,C.mS)(),i.viewsInfo.forEach(t=>{e=(0,E.r3y)(e,s,t.id,{viewsCount:t.views,forwardsCount:t.forwards},!0),t.threadInfo&&(e=(0,E.eAk)(e,s,t.id,t.threadInfo))}),(0,C.UF)(e))}),(0,C.aJ)("loadFactChecks",async(e,t,a)=>{const{chatId:s,ids:n}=a,o=(0,x.hds)(e,s);if(!o)return;const r=await(0,v.px)("fetchFactChecks",{chat:o,ids:n});r&&(e=(0,C.mS)(),r.forEach((t,a)=>{e=(0,E.r3y)(e,s,n[a],{factCheck:t})}),(0,C.UF)(e))}),(0,C.aJ)("loadPaidReactionPrivacy",()=>{(0,v.px)("fetchPaidReactionPrivacy")}),(0,C.aJ)("loadOutboxReadDate",async(e,t,a)=>{const{chatId:s,messageId:n}=a,o=(0,x.hds)(e,s);if(o)try{const t=await(0,v.px)("fetchOutboxReadDate",{chat:o,messageId:n});t?.date&&(e=(0,C.mS)(),e=(0,E.r3y)(e,s,n,{readDate:t.date}),(0,C.UF)(e))}catch(t){const{message:a}=t;if("USER_PRIVACY_RESTRICTED"===a||"YOUR_PRIVACY_RESTRICTED"===a){if(e=(0,C.mS)(),!(0,x.mBe)(e,s))return;const t=(0,x.K0y)(e,s);if(!t)return;const o="USER_PRIVACY_RESTRICTED"===a?{isReadDateRestricted:!0}:{isReadDateRestrictedByMe:!0};e=(0,E.wWy)(e,{[s]:{...t,...o}}),e=(0,E.r3y)(e,s,n,{readDate:void 0}),(0,C.UF)(e)}}}),(0,C.aJ)("loadQuickReplies",async e=>{const t=await(0,v.px)("fetchQuickReplies");t&&(e=(0,C.mS)(),e=(0,E.tMr)(e,(0,m.dU)(t.messages,"id")),e=(0,E.xAV)(e,t.quickReplies),(0,C.UF)(e))}),(0,C.aJ)("sendQuickReply",(e,t,a)=>{const{chatId:s,quickReplyId:n}=a,o=(0,x.hds)(e,s);return o?((0,v.px)("sendQuickReply",{chat:o,shortcutId:n}),e):e}),(0,C.aJ)("copyMessageLink",async(e,t,a)=>{const{chatId:s,messageId:n,shouldIncludeThread:o,shouldIncludeGrouped:r,tabId:i=(0,u.g0)()}=a,c=(0,x.hds)(e,s);if(!c)return void t.showNotification({message:(0,y.yE)("ErrorOccurred"),tabId:i});const l=()=>t.showNotification({message:(0,y.yE)("ErrorOccurred"),tabId:i});if(!(0,S.WX)(c)&&!(0,S.Vs)(c))return void l();const m=(0,v.px)("exportMessageLink",{chat:c,id:n,shouldIncludeThread:o,shouldIncludeGrouped:r});await(0,d.LD)(m,()=>t.showNotification({message:(0,y.yE)("LinkCopied"),tabId:i}),l)});const Y=new Map;let Q;function Z(e,t,a){if(0===e.length||t<e[0]||a>e[e.length-1])return;let s=0;for(let n=0,o=e.length;n<o&&(e[n]>=t&&e[n]<=a&&s++,!(e[n]>=a));n++);return s}function ee(e){return e.reduce((e,t,a,s)=>0===a?(e.push([t]),e):(te(t)===te(s[a-1])?e[e.length-1].push(t):e.push([t]),e),[])}function te(e){const{shouldSendAsFile:t,mimeType:a}=e;return r.IH3.has(a)?"audio":t?"file":a===r.Vz3?"gif":r.gex.has(a)||r.fNs.has(a)?"media":e.voice?"voice":"file"}(0,C.aJ)("reportMessageDelivery",(e,t,a)=>{const{chatId:s,messageId:n}=a,o=Y.get(s)||[];o.push(n),Y.set(s,o),Q||(Q=window.setTimeout(()=>{Q=void 0,Y.forEach((t,a)=>{const s=(0,x.hds)(e,a);s&&(0,v.px)("reportMessagesDelivery",{chat:s,messageIds:t})}),Y.clear()},500))}),(0,C.aJ)("openPreparedInlineMessageModal",async(e,t,a)=>{const{botId:s,messageId:n,webAppKey:o,tabId:r=(0,u.g0)()}=a,i=(0,x.mBe)(e,s);if(!i)return;const c=await(0,v.px)("fetchPreparedInlineMessage",{bot:i,id:n});c?(e=(0,C.mS)(),e=(0,M.w)(e,{preparedMessageModal:{message:c,webAppKey:o,botId:s}},r),(0,C.UF)(e)):t.sendWebAppEvent({webAppKey:o,event:{eventType:"prepared_message_failed",eventData:{error:"MESSAGE_EXPIRED"}},tabId:r})}),(0,C.aJ)("openSharePreparedMessageModal",(e,t,a)=>{const{webAppKey:s,message:n,tabId:o=(0,u.g0)()}=a,r=n.peerTypes?.filter(e=>"self"!==e);e=(0,C.mS)(),e=(0,M.w)(e,{sharePreparedMessageModal:{webAppKey:s,filter:r,message:n}},o),(0,C.UF)(e)}),s()}catch(ae){s(ae)}})},27125:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"ReactorListModal",!t);return a?s.Ay.createElement(a,e):void 0}},27735:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"SeenByModal",!t);return a?s.Ay.createElement(a,e):void 0}},28218:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=()=>{const e=(0,o.A)(n.ar.Extra,"PollResults");return e?s.Ay.createElement(e,null):s.Ay.createElement(r.A,null)}},30053:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isActive:t}=e,a=(0,o.A)(n.ar.Calls,"PhoneCall",!t);return a?s.Ay.createElement(a,null):void 0}},30744:(e,t,a)=>{var s=a(89925),n=a(31481),o=a(14487),r=a(87894),i=a(70934),c=a(37836),d=a(57751),l=a(42385),u=a(13439),m=a(20714),h=a(17872);let p=!1;(0,c.yu)(()=>{const e=(0,u.mS)();e.isInited&&e.passcode.hasPasscode&&!p&&1===Object.keys(e.byTabId).length&&(0,d.rE)()}),(0,u.aJ)("setPasscode",async(e,t,a)=>{const{passcode:n,tabId:r=(0,o.g0)()}=a;e=(0,h.Vg3)(e,{isLoading:!0}),(0,u.UF)(e),await(0,i.IG)(n);const c=JSON.stringify({...(0,d.CX)(),userId:e.currentUserId});e=(0,u.mS)();const m=(0,l.Mm)((0,h.Vg3)(e,{hasPasscode:!0,error:void 0,isLoading:!1}));try{await(0,i.yp)(c,m),(0,o.ZQ)(),e=(0,u.mS)(),e=(0,h.Vg3)(e,{hasPasscode:!0,error:void 0,isLoading:!1}),(0,u.UF)(e),(0,l.Bo)(!0)}catch(a){(0,i.m)(),e=(0,u.mS)(),e=(0,h.Vg3)(e,{isLoading:!1}),(0,u.UF)(e),t.showNotification({message:"Failed to set passcode",tabId:r}),t.openSettingsScreen({screen:s.VS.PasscodeDisabled,tabId:r})}}),(0,u.aJ)("clearPasscode",e=>((0,i.WN)(),localStorage.removeItem(n.ozB),(0,h.XQb)(e))),(0,u.aJ)("unlockScreen",(e,t,a)=>{const s=Object.values(e.byTabId),{sessionJson:n,globalJson:i}=a,c=JSON.parse(n);(0,d.AA)(c);const p=e;(e=JSON.parse(i)).byTabId=p.byTabId,(0,l.e)(e,(0,r.mg)(m.HB)),e=(0,h.Vg3)(e,{isScreenLocked:!1,error:void 0,invalidAttemptsCount:0}),(0,u.UF)(e),(0,o.ZQ)(),s.forEach(({id:e,isMasterTab:a})=>t.init({tabId:e,isMasterTab:a})),t.initApi()}),(0,u.aJ)("logInvalidUnlockAttempt",e=>{const t=(e.passcode?.invalidAttemptsCount??0)+1;return(0,h.Vg3)(e,{invalidAttemptsCount:t,timeoutUntil:t>=5?Date.now()+15e3:void 0})}),(0,u.aJ)("resetInvalidUnlockAttempts",e=>(0,h.Vg3)(e,{invalidAttemptsCount:0,timeoutUntil:void 0})),(0,u.aJ)("setPasscodeError",(e,t,a)=>{const{error:s}=a;return(0,h.Vg3)(e,{error:s})}),(0,u.aJ)("clearPasscodeError",e=>(0,h.Vg3)(e,{error:void 0})),(0,u.aJ)("skipLockOnUnload",()=>{p=!0})},30972:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(96540),n=a(69036),o=a(12609),r=a(48862),i=a(64719),c=a(29356),d=a(98074),l=a(82936),u=a(92237),m=a(89116);const h=()=>{const{phone:e}=r.Hk.telegptSettings,t=e.replace(/^\+\d+\s*/,"").replace(/\s/g,""),{openDrawer:a,drawerParams:h}=(0,m.S)(),[p,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),[v,b]=(0,s.useState)(t),[S,w]=(0,s.useState)(!1),C=h||{topic:"",prompt:"",is_call:!1,is_open:!1},[E,M]=(0,s.useState)(C),x=(0,s.useCallback)(e=>{const t=e.currentTarget.value;M(e=>(e.topic=t,{...e})),t.trim().length&&g(!1)},[]),k=(0,s.useCallback)(e=>{const t=e.currentTarget.value;M(e=>(e.prompt=t,{...e})),t.trim().length&&y(!1)},[]),P=(0,s.useCallback)(e=>{const t=e.currentTarget.value.trim();b(t),0===t.trim().length&&A(!1)},[]),T=(0,s.useCallback)(()=>{0!==E.topic.trim().length?0!==E.prompt.trim().length?E.is_call&&0===v.length?A(!0):(w(!0),r.Hk.updateUrgentTopic(E).then(e=>{w(!1),0===e.code?(a(m.N.PersonalizeSettings,{activeKey:1}),E.is_call&&v.length>0&&r.Hk.setSettingOption({phone:v})):n.Ay.info("save failed")}).catch(()=>{n.Ay.info("save failed"),w(!1)})):y(!0):g(!0)},[E,a,v]);return s.createElement("div",{className:"urgent-topic-edit h-full overflow-hidden px-[18px] flex flex-col"},s.createElement("div",{className:"h-full overflow-y-auto flex-1"},s.createElement("div",{className:"text-[14px] text-[#666666] mb-[24px]"},"Please set the topics and descriptions for which you want alerts. When a message contains these keywords, you’ll be notified."),s.createElement(d.A,{label:"Topic Name",value:E.topic,onChange:x,error:p?"Please enter the topic name":void 0}),s.createElement("div",{className:"mb-[24px]"},s.createElement(u.A,{className:"!mb-[12px]",label:"Topic Description",value:E.prompt,noReplaceNewlines:!0,error:f?"Please enter the topic description":void 0,onChange:k}),s.createElement("div",{className:"text-[14px] text-[#767676]"},"Please describe the specific content or keywords that should trigger an alert. For example, if ‘Vitalik’ + ‘ETH’ + ‘sell’ appear, please notify me.")),s.createElement("div",{className:"mb-[24px]"},s.createElement("div",{className:"flex items-center justify-between px-[14px] py-[10px] bg-[var(--color-chat-hover)] rounded-[6px] mb-[12px]"},s.createElement("span",{className:"text-[var(--color-text)]"},"Enable strong alerts"),s.createElement(o.A,{value:E.is_call,onChange:e=>{M(t=>(t.is_call=e,{...t})),e||A(!1)}})),s.createElement("span",{className:"text-[14px] text-[#767676]"},"Once enabled, these types of messages will trigger a phone alert.")),E.is_call&&s.createElement(d.A,{label:"Phone Number",type:"number",value:v,onChange:P,error:I?"Please enter a valid phone number":void 0})),s.createElement(i.A,{isShown:!0,onClick:T},S?s.createElement(l.A,{color:"white"}):s.createElement(c.A,{name:"check",className:"text-white text-[1.5rem]"})))}},31936:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(84051);const n=()=>{const[e,t]=(0,s.J0)(0);return[e,(0,s.hb)(()=>{t(e=>e+1)},[])]}},32004:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"ReactionPicker",!t);return a?s.Ay.createElement(a,e):void 0}},32165:(e,t,a)=>{var s=a(13439),n=a(17872);(0,s.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateDefaultNotifySettings":return(0,n.p92)(e,a.peerType,a.settings);case"updateChatNotifySettings":{const{chatId:t,settings:o}=a;e=(0,n.m1I)(e,t,o),(0,s.UF)(e);break}case"updateTopicNotifySettings":{const{chatId:t,topicId:o,settings:r}=a;e=(0,n.TwA)(e,t,o,{notifySettings:r}),(0,s.UF)(e);break}}})},33354:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>x});var n=a(84051),o=a(13439),r=a(89925),i=a(96454),c=a(57914),d=a(22199),l=a(11462),u=a(17712),m=a(59030),h=a(72531),p=a(64493),g=a(41036),f=a(89040),y=a(18218),I=a(52533),A=a(18446),v=a(33213),b=a(46357),S=e([m,p,f,I,v,b]);[m,p,f,I,v,b]=S.then?(await S)():S;const w=Object.keys(r.Bn).length/2,C=250;let E;const M=({content:e,searchQuery:t,searchDate:a,isClosingSearch:s,contactsFilter:S,shouldSkipTransition:M,foldersDispatch:x,isForumPanelOpen:k,onSearchQuery:P,onReset:T,onTopicSearch:F,isAccountFrozen:N})=>{const{closeForumPanel:B,openLeftColumnContent:U}=(0,o.ko)(),[R,V]=(0,n.J0)(i.TF),[J,L]=(0,n.J0)(!1),[O,D]=(0,n.J0)(),G=e=>{try{const{webFireBase:t}=e,{force_update_current_version:a}=t,[s]=JSON.parse(localStorage.getItem(c.d)||'["0.0.0",0]');-1===(0,d.Gm)(s,a)&&(L(!0),D(t))}catch(e){console.log(e)}};(0,n.vJ)(()=>(h.A.on(h.E.UpdateFirebaseConfig,G),()=>{h.A.off(h.E.UpdateFirebaseConfig,G)}),[]);const{shouldRenderForumPanel:j,handleForumPanelAnimationEnd:q,handleForumPanelAnimationStart:z,isAnimationStarted:_}=(0,l.A)(k),K=k&&e===r.Bn.ChatList,H=K&&_,W=(0,n.li)(!1),$=(0,u.A)(()=>{e===r.Bn.ChatList&&(W.current=!0,V(!0))}),X=(0,u.A)(()=>{W.current=!1,E&&(clearTimeout(E),E=void 0),E=window.setTimeout(()=>{W.current||V(!1)},C)}),Y=(0,u.A)(()=>{U({contentKey:r.Bn.Settings})}),Q=(0,u.A)(()=>{U({contentKey:r.Bn.AIKonwledge})}),Z=(0,u.A)(()=>{U({contentKey:r.Bn.AITranslate})}),ee=(0,u.A)(()=>{U({contentKey:r.Bn.Contacts})}),te=(0,u.A)(()=>{U({contentKey:r.Bn.Archived}),B()}),ae=(0,u.A)(()=>{c.K.deferUpdate(O?.force_update_current_version),O?.force_update_store_url?window.location.href=O?.force_update_store_url:window.location.reload()}),se=(0,u.A)(()=>{U({contentKey:r.Bn.NewChannelStep1})}),ne=(0,u.A)(()=>{U({contentKey:r.Bn.NewGroupStep1})});(0,n.vJ)(()=>{let t;return e!==r.Bn.ChatList?t=window.setTimeout(()=>{V(!1)},C):(W.current||i.TF)&&V(!0),()=>{t&&(clearTimeout(t),t=void 0)}},[e]);const oe=(0,m.A)();return n.Ay.createElement("div",{id:"LeftColumn-main",onMouseEnter:i.TF?void 0:$,onMouseLeave:i.TF?void 0:X},n.Ay.createElement(b.A,{shouldHideSearch:H,content:e,contactsFilter:S,onSearchQuery:P,onSelectSettings:Y,onSelectContacts:ee,onSelectArchived:te,onSelectAIKnowledge:Q,onSelectAITranslate:Z,onReset:T,shouldSkipTransition:M,isClosingSearch:s}),n.Ay.createElement(g.Ay,{name:M?"none":"zoomFade",renderCount:w,activeKey:e,shouldCleanup:!0,cleanupExceptionKey:r.Bn.ChatList,shouldWrap:!0,wrapExceptionKey:r.Bn.ChatList},s=>{switch(e){case r.Bn.ChatList:return n.Ay.createElement(I.A,{shouldHideFolderTabs:H,foldersDispatch:x,isForumPanelOpen:H});case r.Bn.GlobalSearch:return n.Ay.createElement(y.A,{searchQuery:t,searchDate:a,isActive:s,onReset:T});case r.Bn.Contacts:return n.Ay.createElement(A.A,{filter:S,isActive:s,onReset:T});default:return}}),J&&n.Ay.createElement(p.A,{fluid:!0,badge:!0,className:"btn-update",onClick:ae},oe("lng_update_telegpt")),j&&n.Ay.createElement(v.A,{isOpen:k,isHidden:!K,onTopicSearch:F,onOpenAnimationStart:z,onCloseAnimationEnd:q}),n.Ay.createElement(f.A,{isShown:R,onNewPrivateChat:ee,onNewChannel:se,onNewGroup:ne,isAccountFrozen:N}))},x=(0,n.ph)(M);s()}catch(e){s(e)}})},33424:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"Statistics");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},33777:(e,t,a)=>{var s=a(14487),n=a(13439),o=a(32989),r=a(60919);(0,n.aJ)("openFrozenAccountModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.w)(e,{isFrozenAccountModalOpen:!0},n)}),(0,n.aJ)("closeFrozenAccountModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.w)(e,{isFrozenAccountModalOpen:!1},n)}),(0,n.aJ)("openDeleteAccountModal",(e,t,a)=>{const{days:i,tabId:c=(0,s.g0)()}=a||{};i&&(e=(0,o.w)(e,{...(0,r.nTw)(e,c),deleteAccountModal:{selfDestructAccountDays:i}},c),(0,n.UF)(e))}),(0,n.aJ)("closeDeleteAccountModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.w)(e,{deleteAccountModal:void 0},n)}),(0,n.aJ)("openAgeVerificationModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.w)(e,{isAgeVerificationModalOpen:!0},n)}),(0,n.aJ)("closeAgeVerificationModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,o.w)(e,{isAgeVerificationModalOpen:!1},n)})},33900:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"tE8PJzpv",mini:"lrBhOgvf",fullWidth:"gutn4asD",pinnedMessage:"ayLUtX1S",messageText:"ETMw73qH",loading:"yvd9_9PF",pinListIcon:"LFRysfVa",pinListIconHidden:"E_C4DXKN","no-hover":"WVjde2rq",noHover:"WVjde2rq",messageTextTransition:"mA1i07pG",withMedia:"BWZytkCB",title:"IWpRWVBg",summary:"k19QLKaH",inlineButton:"fpQMpARI",pictogramTransition:"Gp431jU4",pinnedThumb:"XjjZeOUy",pinnedThumbImage:"ljzqevcj"}},34010:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>P});var n=a(96540),o=a(66049),r=a(97072),i=a(13439),c=a(23174),d=a(31481),l=a(90709),u=a(70636),m=a(82150),h=a(60919),p=a(19408),g=a(24021),f=a(81885),y=a(70809),I=a(80923),A=a(81120),v=a(22199),b=a(40459),S=a(15972),w=a(75606),C=a(99299),E=a(41055),M=e([u,g,f,b,S,w]);[u,g,f,b,S,w]=M.then?(await M)():M;const x=({chatId:e,messageId:t})=>{const a=(0,i.mS)(),{userId:s,userName:C}=(0,A.pD)(),M=(0,f.A)(),x=(0,h.hds)(a,e),[k,P]=(0,n.useState)(void 0),[T,F]=(0,n.useState)(!1),[N,B]=(0,n.useState)(""),[U,R]=(0,n.useState)(!0),V=(0,n.useRef)(void 0),{messages:J,append:L}=(0,o.Y_)({api:`${d.Vjs}/chat?userId=${s}&userName=${C}&platform=web`,sendExtraMessageFields:!0,initialMessages:[{id:"0",role:"system",content:I.dm}]}),{updateDraftReplyInfo:O,sendMessage:D,clearDraft:G}=(0,i.ko)(),j=()=>{V.current&&(V.current.style.height="auto",V.current.style.height=`${V.current.scrollHeight+2}px`)},{focusMessage:q}=(0,i.ko)();(0,n.useEffect)(()=>{if(t){const s=(0,p.O5)(a,e,Number(t));s?(P(s),R(!1)):x&&(0,g.px)("fetchMessage",{chat:x,messageId:t}).then(e=>{e&&(e===c.K1?P(void 0):e.message.content.text?.text&&(P(e.message),(0,m.r3)(a,x.id,t,e.message))),R(!1)}).catch(()=>{R(!1)})}},[e,t]),(0,n.useEffect)(()=>{J.length>0&&J.forEach(e=>{"assistant"===e.role&&(B(e.content),j())})},[J]),(0,n.useEffect)(()=>{V.current&&j()},[]);const z=e=>{B(e.target.value),j()},_=()=>{O({replyToMsgId:k?.id,replyToPeerId:void 0}),setTimeout(()=>{D({messageList:{chatId:e,threadId:-1,type:"thread"},text:N})}),B(""),F(!1),setTimeout(()=>{G({chatId:e,isLocalOnly:!0})})},K=()=>{t&&q({chatId:e,messageId:Number(t)})};return n.createElement("div",{className:"right-panel-message-item pb-[20px] pt-[16px] border-solid border-b-[1px] border-[rgba(0,0,0,0.1)] px-[18px]"},U?n.createElement(r.A,{active:!0,paragraph:{rows:2}}):(()=>{if(!k||!k.content.text?.text)return n.createElement("div",{className:"text-[15px] text-[#979797]"},"Message Deleted");const t=k.content.text?.text,s=(0,v.Ey)(1e3*k.date),o=k.senderId,r=o?(0,h.mBe)(a,o):void 0,i=r&&(0,u.mO)(r),c=(0,h.hds)(a,e),d=r&&i?(0,l.Yg)(r):(0,l.Js)(M,c);return n.createElement(n.Fragment,null,n.createElement("div",{className:"flex flex-row items-center mb-[12px]"},i?n.createElement(S.A,{peer:r,size:34}):n.createElement(w.A,{chatId:e,size:34}),n.createElement("span",{className:"text-[16px] font-semibold mr-[8px] ml-[12px] flex-1 whitespace-nowrap overflow-hidden text-ellipsis"},d),n.createElement("span",{className:"text-[#979797] text-[13px]"},s)),n.createElement("div",{className:"text-[15px] relative flex flex-row items-end justify-between"},n.createElement("div",{className:"w-full"},t),n.createElement("div",{className:(0,v.cn)("right-panel-message-actions flex items-center flex-row justify-end gap-[4px]",{"!flex":T})},n.createElement("div",{className:"w-[15px] h-[15px] cursor-pointer",onClick:()=>{F(!0),(async e=>{if(e.content.text?.text){const t=await(0,b.G)(e.content.text.text);t&&t.score>.8?B(t.answer):(0,A.g4)({data:{messages:[{role:"system",content:"你是一个多语种智能助手。接收用户消息后，自动识别其使用的语言，并用相同的语言进行自然、得体的回复。你应该理解消息的语境，确保回复简洁、友好且符合语言习惯。",id:"1"},{role:"user",content:`请回复下面的消息: ${e.content.text?.text}`,id:"2"}]},onResponse:e=>{B(e)},onFinish:()=>{console.log("Finish")}})}L({role:"user",content:`请回复下面的消息: ${e.content.text?.text}`})})(k)}},n.createElement("img",{src:E,alt:"ai-reply",className:"w-full h-full"})),n.createElement("div",{className:"text-[#9F9F9F] cursor-pointer",onClick:K,"aria-label":"Smart Reply"},n.createElement(y.fl,{size:16})))),T?n.createElement("div",null,n.createElement("div",{className:"flex flex-row items-center gap-[6px]"},n.createElement("img",{className:"w-[15px] h-[15px]",src:E,alt:"MingcuteaiIcon"}),n.createElement("span",{className:"text-[14px] text-[#757575]"},"Reply suggested by Tely AI")),n.createElement("div",{className:"flex flex-row items-end gap-[12px]"},n.createElement("textarea",{ref:V,className:"w-full py-[8px] px-[12px] border border-[#7949FF] rounded-[8px] mt-[12px] resize-none leading-[18px]",placeholder:"Type your reply here...",rows:1,value:N,onChange:z}),n.createElement("button",{className:"w-[36px] h-[36px] bg-[#8C59D0] flex items-center justify-center text-white rounded-full flex-shrink-0","aria-label":"Send message",onClick:_},n.createElement(y.qx,{size:15})))):null)})())},k=({relevantMessages:e})=>{const t=e.flatMap(e=>e.messageIds.map(t=>({chatId:e.chatId,messageId:t})));return n.createElement("div",{className:"h-full overflow-y-auto"},t.map(e=>n.createElement(C.A,null,n.createElement(x,{chatId:e.chatId,messageId:e.messageId}))))},P=({relevantMessages:e})=>n.createElement("div",{className:"h-full"},e.length>0&&n.createElement(k,{relevantMessages:e}));s()}catch(e){s(e)}})},34160:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{No:()=>k,gQ:()=>R});var n=a(23174),o=a(31481),r=a(22986),i=a(9716),c=a(14487),d=a(87894),l=a(60343),u=a(5560),m=a(37836),h=a(80140),p=a(90709),g=a(26129),f=a(13439),y=a(17872),I=a(14865),A=a(32989),v=a(60919),b=e([u]),S=b.then?(await b)():b;u=S[0];const w=350,C=1e3,E=1e3;let M=0;function x(e,t,a,s,n,o,i,d){const h=d?.reactions;if(h&&(0,r.T)(n,h))return e;const g=h?.results.find(e=>e.localAmount);if(g?.localAmount){const{localIsPrivate:e,localAmount:t,localPeerId:a}=g;n.results=(0,p.Ny)(n.results,t,e,a)}if(e=(0,y.r3y)(e,a,s,{reactions:n}),!i)return e;const{reaction:f,isOwn:A,isUnread:b}=n.recentReactions?.[0]??{};if((0,v.xYJ)(e,"reactionEffects")&&d&&f&&b&&!A){const e=(0,l.bj)(d);t.startActiveReaction({containerId:e,reaction:f,tabId:(0,c.g0)()})}const S=o.unreadReactions?.includes(s),w=(0,p.pU)(e,n);if(w&&!S){e=(0,I.$n)(e,a,{unreadReactionsCount:(o?.unreadReactionsCount||0)+1,unreadReactions:[...o?.unreadReactions||[],s].sort((e,t)=>t-e)});const t=(0,v.O5q)(e,a,s);if(!o||!t)return e;(0,m.aj)(()=>{(0,u.Oq)({chat:o,message:t,isReaction:!0})})}return!w&&S&&(e=(0,I.$n)(e,a,{unreadReactionsCount:(o?.unreadReactionsCount||1)-1,unreadReactions:o?.unreadReactions?.filter(e=>e!==s)})),e}function k(e,t,a,s,n=!1){const o=n?(0,v.Jl6)(e,t,a):(0,v.O5q)(e,t,a);if(o&&s.content&&!(0,l.iL)(a)){const{photo:e,video:t,sticker:a,document:n}=(0,p.r_)(o);var r,i;if(e&&s.content.photo)(r=s.content.photo).blobUrl??(r.blobUrl=e.blobUrl),(i=s.content.photo).thumbnail??(i.thumbnail=e.thumbnail);else if(t&&s.content.video){var c;(c=s.content.video).blobUrl??(c.blobUrl=t.blobUrl)}else if(a&&s.content.sticker){var d;(d=s.content.sticker).isPreloadedGlobally??(d.isPreloadedGlobally=a.isPreloadedGlobally)}else if(n&&s.content.document){var u;(u=s.content.document).previewBlobUrl??(u.previewBlobUrl=n.previewBlobUrl)}}const m=o?{...o,...s}:s;return n?(0,y.Egm)(e,t,a,m):(0,y.r3y)(e,t,a,m)}function P(e,t,a,s){const{chatId:n}=a,o=(0,g.Q)(a),{threadInfo:r}=(0,v.Tac)(e,a)||{};if(!r&&o?.replyToMsgId){const r=(0,v.O5q)(e,n,o.replyToMsgId);r?e=(0,y.Wwn)(e,r,n,a.id,s):t.loadMessage({chatId:n,messageId:o.replyToMsgId,threadUpdate:{isDeleting:s,lastMessageId:a.id}})}return e}function T(e,t,a){const{id:s,chatId:o}=a,r=(0,v.QP5)(e,a),{threadInfo:i}=(0,v.Tac)(e,a)||{},c=(0,v.hds)(e,o),d=c?.unreadCount&&!(0,v.gCU)(e,o,n.l3);e=P(e,t,a);const{threadId:l}=i??{threadId:r};return l&&(e=(0,y.d4w)(e,o,l,[s]),Object.values(e.byTabId).forEach(({id:t})=>{if((0,v.haw)(e,o,l,t)){const a=(0,v.RjD)(e,o,l),n=(0,y.fgD)(e,o,l,s,t),r=(0,v.rA3)(n,o,l,t);a&&!r.includes(a)||(e=n)}}),i&&(e=(0,y.eww)(e,o,l,"threadInfo",{...i,lastMessageId:a.id}),(0,p.Nb)(a)||(0,p._P)(a)||(e=(0,y.eAk)(e,o,l,{messagesCount:(i.messagesCount||0)+1})))),d||(e=(0,y.d4w)(e,o,n.l3,[s]),Object.values(e.byTabId).forEach(({id:t})=>{if((0,v.haw)(e,o,n.l3,t)){const a=(0,v.RjD)(e,o,n.l3),r=(0,y.fgD)(e,o,n.l3,s,t),i=(0,v.rA3)(r,o,n.l3,t);a&&!i.includes(a)||(e=r)}})),e}function F(e,t,a,s=!1){const{chats:n}=e,o=n.byId[t],r=(0,v.ZZX)(e,t),i=o?.isForum?(0,v.nkm)(e,a):void 0;i&&(e=(0,y.TwA)(e,t,i.id,{lastMessageId:a.id}));const c=(0,v.L_2)(e,a);e=(0,y.eAk)(e,t,c,{lastMessageId:a.id});const d=(0,v.QP5)(e,a);return d&&(e=(0,y.yKC)(e,d,a.id,"saved")),!r||s||r===a.id||r===a.previousLocalId||a.id>r?(0,y.yKC)(e,t,a.id):e}function N(e,t,a=n.l3){const s=(0,v.zeq)(e,t),o=(0,v.gCU)(e,t,a);if(!s||!o)return;let r=o.length;for(;r--;){const e=s[o[r]];if(e&&!e.isDeleting)return e}}function B(e,t,a,s){const n=(0,v.zeq)(e,t),o=Object.values(n).filter(e=>e.senderId===a).map(e=>e.id);o.length&&R(e,t,o,s)}function U(e,t,a,s){const n=(0,v.zeq)(e,t);if(!n)return;const o=Object.values(n).filter(t=>(0,v.L_2)(e,t)===a).map(e=>e.id);o.length&&R(e,t,o,s)}function R(e,t,a,s){if(t){const o=(0,v.hds)(e,t);if(!o)return;const r=new Set;r.add(n.l3),a.forEach(a=>{e=(0,y.r3y)(e,t,a,{isDeleting:!0}),(0,v.S0q)(e,t,a)&&(e=(0,y.do9)(e,t,a));const n=(0,v.O5q)(e,t,a);if(!n)return;"chatEditPhoto"===n.content.action?.type&&n.content.action.photo&&(e=(0,y.sol)(e,t,n.content.action.photo.id,!0)),e=P(e,s,n,!0);const o=(0,v.L_2)(e,n);o&&r.add(o)}),s.requestChatUpdate({chatId:t});const i=new Set(a);r.forEach(a=>{const r=(0,v.Vw0)(e,t,a);if(!r?.lastMessageId||!i.has(r.lastMessageId))return;const c=N(e,t,a);c?(a===n.l3&&(e=F(e,t,c,!0)),e=(0,y.eAk)(e,t,a,{lastMessageId:c.id}),o.isForum&&(e=(0,y.TwA)(e,t,Number(a),{lastMessageId:c.id}))):o.isForum&&a!==n.l3&&s.loadTopicById({chatId:t,topicId:Number(a)})}),(0,f.UF)(e);const c=(0,v.Rwe)(e);return void setTimeout(()=>{e=(0,f.mS)();const s=a.filter(a=>(0,v.O5q)(e,t,a)?.isDeleting);e=(0,y.AH0)(e,t,s),(0,f.UF)(e)},c?C:w)}const o=[];a.forEach(t=>{const a=(0,v.Egn)(e,t);if(a){o.push(a);const n=N(e=(0,y.r3y)(e,a,t,{isDeleting:!0}),a);n&&(e=F(e,a,n,!0));const r=(0,v.O5q)(e,a,t);if((0,v.nZ4)(e,a)&&r){const t=(0,v.L_2)(e,r);if((0,p.cG)(a,t,e.currentUserId)){const n=N(e,a,t);s.requestSavedDialogUpdate({chatId:String(t)}),n&&(e=(0,y.yKC)(e,a,n.id,"saved"))}}"chatEditPhoto"===r?.content.action?.type&&r.content.action.photo&&(e=(0,y.sol)(e,a,r.content.action.photo.id,!0));const i=(0,v.Rwe)(e);setTimeout(()=>{e=(0,f.mS)(),e=(0,y.AH0)(e,a,[t]),(0,f.UF)(e)},i?C:w)}}),(0,f.UF)(e),(0,d.Am)(o).forEach(e=>{s.requestChatUpdate({chatId:e})})}function V(e,t,a,s){t.forEach(t=>{s=(0,y.Egm)(s,e,t,{isDeleting:!0})}),(0,f.UF)(s);const o=(0,v.Rwe)(s);setTimeout(()=>{s=(0,f.mS)(),s=(0,y.XAm)(s,e,t);const a=(0,v.yFI)(s,e);s=(0,y.eww)(s,e,n.l3,"scheduledIds",Object.keys(a||{}).map(Number)),(0,f.UF)(s)},o?C:w)}(0,f.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"newMessage":{const{chatId:s,id:n,message:o,shouldForceReply:r,wasDrafted:i,poll:c,webPage:d}=a;e=T(e=k(e,s,n,o),t,o);const l=(0,v.O5q)(e,s,n),u=(0,g.Q)(l),m=(0,g.W)(l),I=(0,v.hds)(e,s);I?.isForum&&u?.isForumTopic&&!(0,v.nkm)(e,l)&&u.replyToMsgId&&t.loadTopicById({chatId:s,topicId:u.replyToMsgId});const A=(0,p.Nb)(o);if(Object.values(e.byTabId).forEach(({id:a})=>{A&&i&&(e=F(e,s,l));const c=(0,v.L_2)(e,l);if(e=(0,y.PKO)(e,l,s,c,a),(0,v.fo$)(e,s,o,a)){if(A&&o.isOutgoing&&!o.content?.action&&!m?.storyId&&!o.content?.storyData){const n=(0,v.Xf0)(e,a);n&&t.focusMessage({chatId:s,threadId:n.threadId,messageId:o.id,noHighlight:!0,isResizingContainer:!0,tabId:a})}A||setTimeout(()=>{e=(0,f.mS)(),r&&t.updateDraftReplyInfo({replyToMsgId:n,tabId:a}),e=F(e,s,l),(0,f.UF)(e)},w)}else e=F(e,s,l)}),c&&(e=(0,y.J81)(e,c.id,c)),d&&(e=(0,y.o7c)(e,d.id,d)),o.reportDeliveryUntilDate&&o.reportDeliveryUntilDate>(0,h.Fm)()&&t.reportMessageDelivery({chatId:s,messageId:n}),(0,f.UF)(e),A||I?.isNotJoined||(0,v.mJZ)(e,s)||t.loadTopChats(),!A&&(0,v.nZ4)(e,s)){const a=(0,v.QP5)(e,l);a&&!(0,v.mJZ)(e,a,"saved")&&t.requestSavedDialogUpdate({chatId:a})}break}case"updateChatLastMessage":{const{id:t,lastMessage:s}=a;e=F(e,t,s,!0),e=(0,y.KcS)(e,[s]),(0,f.UF)(e);break}case"updateStartEmojiInteraction":Object.values(e.byTabId).forEach(({id:t})=>{const{chatId:s}=(0,v.Xf0)(e,t)||{};if(s!==a.id)return;const n=(0,v.O5q)(e,s,a.messageId);if(!n)return;if((0,p.P5)(n)?.text!==a.emoji)return;const o=(0,v.nTw)(e,t);e=(0,A.w)(e,{activeEmojiInteractions:[...o.activeEmojiInteractions||[],{id:Math.random(),animatedEffect:a.emoji,messageId:a.messageId}]},t)}),(0,f.UF)(e);break;case"newScheduledMessage":{const{chatId:t,id:s,message:o,poll:r,webPage:i}=a;e=k(e,t,s,o,!0);const c=(0,v.K3w)(e,t,n.l3)||[];e=(0,y.eww)(e,t,n.l3,"scheduledIds",(0,d.Am)([...c,s]));const l=(0,v.L_2)(e,o);if(l!==n.l3){const a=(0,v.K3w)(e,t,l)||[];e=(0,y.eww)(e,t,l,"scheduledIds",(0,d.Am)([...a,s]))}r&&(e=(0,y.J81)(e,r.id,r)),i&&(e=(0,y.o7c)(e,i.id,i)),e=(0,y.zTz)(e,t,{hasScheduledMessages:!0}),(0,f.UF)(e);break}case"updateScheduledMessage":{const{chatId:s,id:o,message:r,poll:i,webPage:c,isFromNew:d}=a,l=(0,v.Jl6)(e,s,o);if(!l)return void(d&&t.apiUpdate({"@type":"newScheduledMessage",id:a.id,chatId:a.chatId,message:a.message,poll:a.poll,webPage:a.webPage}));e=k(e,s,o,r,!0);const u=Object.keys((0,v.yFI)(e,s)||{}).map(Number).sort((e,t)=>t-e);e=(0,y.eww)(e,s,n.l3,"scheduledIds",u);const m=(0,v.L_2)(e,l);if(m!==n.l3){const t=(0,v.K3w)(e,s,m)||[];e=(0,y.eww)(e,s,m,"scheduledIds",t.sort((e,t)=>t-e))}i&&(e=(0,y.J81)(e,i.id,i)),c&&(e=(0,y.o7c)(e,c.id,c)),(0,f.UF)(e);break}case"updateMessage":{const{chatId:s,id:n,message:o,poll:r,webPage:i,isFromNew:c,shouldForceReply:d}=a,l=(0,v.O5q)(e,s,n);if(!l)return void(c&&t.apiUpdate({"@type":"newMessage",id:a.id,chatId:a.chatId,message:a.message,poll:a.poll,webPage:a.webPage,shouldForceReply:d}));const u=(0,v.hds)(e,s);e=k(e,s,n,o);const m=(0,v.O5q)(e,s,n);o.reactions&&u&&(e=x(e,t,s,n,o.reactions,u,m.isOutgoing,l)),o.content?.text?.text!==l?.content?.text?.text&&(e=(0,y.gt4)(e,s,n)),r&&(e=(0,y.J81)(e,r.id,r)),i&&(e=(0,y.o7c)(e,i.id,i)),(0,f.UF)(e);break}case"updateQuickReplyMessage":{const{id:t,message:s,poll:n,webPage:o}=a;e=(0,y.QNR)(e,t,s),n&&(e=(0,y.J81)(e,n.id,n)),o&&(e=(0,y.o7c)(e,o.id,o)),(0,f.UF)(e);break}case"deleteQuickReplyMessages":{const{messageIds:t}=a;e=(0,y.vad)(e,t),(0,f.UF)(e);break}case"updateQuickReplies":{const{quickReplies:t}=a,s=(0,d.dU)(t,"id");e=(0,y.xAV)(e,s),(0,f.UF)(e);break}case"deleteQuickReply":e=(0,y.hjk)(e,a.quickReplyId),(0,f.UF)(e);break;case"updateVideoProcessingPending":{const{chatId:s,localId:n,newScheduledMessageId:o}=a;e=(0,y.AH0)(e,s,[n]),e=(0,y.zTz)(e,s,{hasScheduledMessages:!0}),(0,f.UF)(e),Object.values(e.byTabId).forEach(({id:a})=>{const n=(0,v.Xf0)(e,a);if(n?.chatId!==s)return;const r=Date.now();r-M<E||(M=r,t.showNotification({message:{key:"VideoConversionText"},title:{key:"VideoConversionTitle"},tabId:a}),t.focusMessage({chatId:s,messageId:o,messageListType:"scheduled",tabId:a}))});break}case"updateMessageSendSucceeded":{const{chatId:s,localId:o,message:r,poll:i}=a;e=T(e,t,r);const c=(0,v.O5q)(e,s,o);e=(0,y.AH0)(e,s,[o]),r.isScheduled&&(e=(0,y.XAm)(e,s,[o])),e=(0,y.r3y)(e,s,r.id,{...c,...r,previousLocalId:o,isDeleting:void 0}),i&&(e=(0,y.J81)(e,i.id,i)),e={...e,fileUploads:{byMessageKey:(0,d.cJ)(e.fileUploads.byMessageKey,[(0,l.bj)(r)])}};const u=(0,v.O5q)(e,s,r.id);e=F(e,s,u);const m=(0,v.Tac)(e,r);Object.values(e.byTabId).forEach(({id:a})=>{const{chatId:o,threadId:i}=(0,v.Xf0)(e,a)||{};o===s&&(m?.threadInfo?.threadId||n.l3)===i&&t.markMessageListRead({maxId:r.id,tabId:a})}),m?.threadInfo?.threadId&&(e=(0,y.eww)(e,s,m.threadInfo.threadId,"threadInfo",{...m.threadInfo,lastMessageId:r.id,lastReadInboxMessageId:r.id})),e=(0,y.wix)(e,s,{lastReadInboxMessageId:r.id});const h=(0,v.hds)(e,s);if(h?.isNotJoined||(0,v.mJZ)(e,s)||t.loadTopChats(),(0,v.nZ4)(e,s)){const a=(0,v.QP5)(e,u);a&&!(0,v.mJZ)(e,a,"saved")&&t.requestSavedDialogUpdate({chatId:a})}(0,f.UF)(e);break}case"updateScheduledMessageSendSucceeded":{const{chatId:t,localId:s,message:o,poll:r}=a,i=(0,v.K3w)(e,t,n.l3)||[];e=(0,y.eww)(e,t,n.l3,"scheduledIds",[...i,o.id]);const c=(0,v.L_2)(e,o);if(c!==n.l3){const a=(0,v.K3w)(e,t,c)||[];e=(0,y.eww)(e,t,c,"scheduledIds",[...a,o.id])}const d=(0,v.Jl6)(e,t,s);e=(0,y.XAm)(e,t,[s]),e=(0,y.Egm)(e,t,o.id,{...d,...o,previousLocalId:s,isDeleting:void 0}),r&&(e=(0,y.J81)(e,r.id,r)),(0,f.UF)(e);break}case"updatePinnedIds":{const{chatId:t,isPinned:s,messageIds:o}=a,r=(0,d._E)((0,v.zeq)(e,t),o),i={[n.l3]:o};Object.values(r).forEach(a=>{const o=(0,v.L_2)(e,a);if(e=(0,y.r3y)(e,t,a.id,{isPinned:s}),o===n.l3)return;const r=i[o]||[];r.push(a.id),i[o]=r}),Object.entries(i).forEach(([a,o])=>{const r=(0,v.fcC)(e,t,n.l3)||[],i=s?(0,d.Am)(r.concat(o)).sort((e,t)=>t-e):r.filter(e=>!o.includes(e));e=(0,y.eww)(e,t,Number(a),"pinnedIds",i)}),(0,f.UF)(e);break}case"updateThreadInfo":{const{threadInfo:s}=a;e=(0,y.Ng8)(e,[s]);const{chatId:n,threadId:o}=s;if(!n||!o)return;const r=(0,v.hds)(e,n),i=(0,v.Vw0)(e,n,o),c=(0,v.S0q)(e,n,o);if(r?.isForum&&(c&&c.lastMessageId===i?.lastReadInboxMessageId?e=(0,y.TwA)(e,n,Number(o),{unreadCount:0}):t.loadTopicById({chatId:n,topicId:Number(o)})),!r?.isForum){const t=r?.lastReadInboxMessageId,a=s.lastReadInboxMessageId||t;t&&a&&(e=(0,y.eAk)(e,n,o,{lastReadInboxMessageId:Math.max(a,t)}))}(0,f.UF)(e);break}case"resetMessages":{const{id:s}=a,o=(0,v.zeq)(e,s);if(o&&!(0,i.L8)(s)){const a=(0,c.g0)();e=(0,y.AH0)(e,s,Object.keys(o).map(Number)),(0,f.UF)(e),t.loadFullChat({chatId:s,force:!0}),t.loadViewportMessages({chatId:s,threadId:n.l3,tabId:a})}break}case"deleteMessages":{const{ids:s,chatId:n}=a;R(e,n,s,t);break}case"deleteScheduledMessages":{const{ids:s,newIds:n,chatId:o}=a,r=s?.some(t=>(0,v.Jl6)(e,o,t)?.isVideoProcessingPending),i=n?.find(t=>{const a=(0,v.O5q)(e,o,t);return a?.content.video});r&&i&&Object.values(e.byTabId).forEach(({id:e})=>{t.showNotification({message:{key:"VideoConversionDone"},actionText:{key:"VideoConversionView"},action:{action:"focusMessage",payload:{chatId:o,messageId:i,tabId:e}},tabId:e})}),V(o,s,0,e);break}case"deleteHistory":{const{chatId:s}=a,n=e.messages.byChatId[s];if(s===o.zv8&&(e={...e,serviceNotifications:e.serviceNotifications.map(e=>({...e,isDeleted:!0}))},(0,f.UF)(e)),n){const a=Object.keys(n.byId).map(Number);R(e=(0,f.mS)(),s,a,t)}else t.requestChatUpdate({chatId:s});e=(0,f.mS)(),e=(0,y.SJu)(e,s),(0,f.UF)(e);break}case"deleteSavedHistory":{const{chatId:s}=a,n=e.currentUserId;e=(0,y.SJu)(e,s,"saved"),(0,f.UF)(e),U(e=(0,f.mS)(),n,s,t);break}case"deleteParticipantHistory":{const{chatId:s,peerId:n}=a;B(e=(0,f.mS)(),s,n,t);break}case"updateCommonBoxMessages":{const{ids:t,messageUpdate:s}=a;t.forEach(t=>{const a=(0,v.Egn)(e,t);a&&(e=(0,y.r3y)(e,a,t,s))}),(0,f.UF)(e);break}case"updateChannelMessages":{const{channelId:t,ids:s,messageUpdate:n}=a;s.forEach(a=>{e=(0,y.r3y)(e,t,a,n)}),(0,f.UF)(e);break}case"updateMessagePoll":{const{pollId:t,pollUpdate:s}=a;e=(0,y.J81)(e,t,s),(0,f.UF)(e);break}case"updateMessagePollVote":{const{pollId:t,peerId:s,options:n}=a;e=(0,y.DLl)(e,t,s,n),(0,f.UF)(e);break}case"updateServiceNotification":{const{message:s}=a;(0,v.dqr)(e)&&t.createServiceNotification({message:s});break}case"updateMessageReactions":{const{chatId:s,id:n,reactions:o}=a,r=(0,v.O5q)(e,s,n),i=(0,v.hds)(e,a.chatId);if(!i||!r)return;e=x(e,t,s,n,o,i,r.isOutgoing,r),(0,f.UF)(e);break}case"updateMessageExtendedMedia":{const{chatId:t,id:s,extendedMedia:n,isBought:o}=a,r=(0,v.O5q)(e,t,s);if(!(0,v.hds)(e,a.chatId)||!r)return;if(r.content.invoice){const a=n[0];if("mediaType"in a&&"extendedMediaPreview"===a.mediaType){if(!r.content.invoice)return;e=(0,y.r3y)(e,t,s,{content:{...r.content,invoice:{...r.content.invoice,extendedMedia:a}}}),(0,f.UF)(e)}else{const n=a;e=(0,y.r3y)(e,t,s,{content:{...n}}),(0,f.UF)(e)}}if(r.content.paidMedia){const a=o?{isBought:o,extendedMedia:n}:{extendedMedia:n,isBought:void 0};e=(0,y.r3y)(e,t,s,{content:{...r.content,paidMedia:{...r.content.paidMedia,...a}}}),(0,f.UF)(e)}break}case"updateTranscribedAudio":{const{transcriptionId:t,text:s,isPending:n}=a;e={...e,transcriptions:{...e.transcriptions,[t]:{...e.transcriptions[t]||{},transcriptionId:t,text:s,isPending:n}}},(0,f.UF)(e);break}case"updateMessageSendFailed":{const{chatId:s,localId:n,error:o}=a;o.match(/CHAT_SEND_.+?FORBIDDEN/)&&Object.values(e.byTabId).forEach(({id:e})=>{t.showAllowedMessageTypesNotification({chatId:s,tabId:e})}),e=(0,y.r3y)(e,s,n,{sendingState:"messageSendingStateFailed"}),(0,f.UF)(e);break}case"updateMessageTranslations":{const{chatId:t,messageIds:s,toLanguageCode:n,translations:o}=a;e=(0,y.rmT)(e,t,s,n,o),(0,f.UF)(e);break}case"failedMessageTranslations":{const{chatId:t,messageIds:s,toLanguageCode:n}=a;e=(0,y.rmT)(e,t,s,n,[]),(0,f.UF)(e)}}}),s()}catch(J){s(J)}})},35193:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>se});var n=a(84051),o=a(61433),r=a(13439),i=a(23174),c=a(89925),d=a(31481),l=a(66644),u=a(90709),m=a(60919),h=a(21133),p=a(19408),g=a(81954),f=a(87357),y=a(9716),I=a(87894),A=a(60343),v=a(9718),b=a(37836),S=a(16460),w=a(10289),C=a(54464),E=a(32625),M=a(82117),x=a(17712),k=a(37859),P=a(24028),T=a(41257),F=a(35297),N=a(61157),B=a(12394),U=a(84718),R=a(52745),V=a(41036),J=a(36681),L=a(75604),O=a(64238),D=a(68547),G=a(70115),j=e([J,L,O,D,G]);[J,L,O,D,G]=j.then?(await j)():j;var q=function(e){return e[e.Loading=0]="Loading",e[e.Restricted=1]="Restricted",e[e.StarsRequired=2]="StarsRequired",e[e.PremiumRequired=3]="PremiumRequired",e[e.AccountInfo=4]="AccountInfo",e[e.ContactGreeting=5]="ContactGreeting",e[e.NoMessages=6]="NoMessages",e[e.MessageList=7]="MessageList",e}(q||{});const z=2e4,_=2e4,K=5e3,H=3e5,W=50,$=10,X=200,Y=500,Q=20,Z=200,ee="unread-divider",te=(0,b.sg)(e=>e(),X,!1),ae=({chatId:e,threadId:t,type:a,autoTranslate:s,autoTranslateLanguage:h,isChatLoaded:p,isForum:j,isChannelChat:X,isGroupChat:ae,isChannelWithAvatars:se,canPost:oe,isSynced:re,isChatMonoforum:ie,isReady:ce,isChatWithSelf:de,isSystemBotChat:le,isAnonymousForwards:ue,isCreator:me,isBot:he,isNonContact:pe,nameChangeDate:ge,photoChangeDate:fe,messageIds:ye,messagesById:Ie,firstUnreadId:Ae,isComments:ve,isViewportNewest:be,isRestricted:Se,restrictionReasons:we,isEmptyThread:Ce,focusingId:Ee,isSelectModeActive:Me,lastMessage:xe,hasLinkedChat:ke,withBottomShift:Pe,withDefaultBg:Te,topic:Fe,noMessageSendingAnimation:Ne,isServiceNotificationsChat:Be,currentUserId:Ue,isContactRequirePremium:Re,paidMessagesStars:Ve,areAdsEnabled:Je,channelJoinInfo:Le,isChatProtected:Oe,isAccountFrozen:De,hasCustomGreeting:Ge,monoforumChannelId:je,isAppConfigLoaded:qe,onIntersectPinnedMessage:ze,onScrollDownToggle:_e,onNotchToggle:Ke})=>{const{loadViewportMessages:He,setScrollOffset:We,loadSponsoredMessages:$e,loadMessageReactions:Xe,copyMessagesByIds:Ye,loadMessageViews:Qe,loadPeerStoriesByIds:Ze,loadFactChecks:et,requestMessageTranslation:tt}=(0,r.ko)(),at=(0,n.li)(),st=(0,n.li)("thread"===a&&(0,m.j_4)((0,r.mS)(),e,t)||(0,m.rKQ)((0,r.mS)(),e,t)||0),nt=(0,n.li)(),ot=(0,n.li)(),rt=(0,n.li)(),it=(0,n.li)(),ct=(0,n.li)(),dt=(0,n.li)(),lt=(0,n.li)(!1),ut=(0,n.li)(Boolean(xe)),mt=(0,u.cG)(e,t,Ue),ht=mt&&t!==d.Ckz,pt=Boolean(ye),gt=(0,y.L8)(e),ft=Boolean(!gt&&!X||de||le||ue||se);(0,F.A)(()=>{pt&&(0,b.aj)(()=>{ut.current=!1})},[pt]),(0,F.A)(()=>{it.current=Ae},[Ae]),(0,n.vJ)(()=>{Je&&(X||he)&&re&&ce&&qe&&$e({peerId:e})},[e,re,ce,X,he,Je,qe]),(0,F.A)(()=>{pt&&(ct.current=it.current)},[pt]),(0,F.A)(()=>{dt.current=Ee},[Ee]),(0,n.vJ)(()=>{s&&ye?.forEach(t=>{tt({chatId:e,id:t,toLanguageCode:h})})},[s,h,e,ye]),(0,P.A)(Ye);const yt=(0,n.Kr)(()=>{if(!ye?.length||!Ie)return;const e=[];ye.forEach((t,s,n)=>{const o=e[e.length-1],r=Ie[t];if(!r)return;const{shouldAppendJoinMessage:i,shouldAppendJoinMessageAfterCurrent:c}=(()=>{if(Le&&"thread"===a)return o&&o.date<Le.joinedDate&&Le.joinedDate<=r.date?{shouldAppendJoinMessage:!0,shouldAppendJoinMessageAfterCurrent:!1}:s===n.length-1&&r.date<Le.joinedDate?{shouldAppendJoinMessage:!0,shouldAppendJoinMessageAfterCurrent:!0}:void 0})()||{};if(c&&e.push(r),i){const t=c?r.id:o?.id||r.id-1;e.push({id:ne(t),chatId:r.chatId,date:Le.joinedDate,isOutgoing:!1,content:{action:{mediaType:"action",type:"channelJoined",inviterId:Le?.inviterId,isViaRequest:Le?.isViaRequest||void 0}}})}c||e.push(r)});const s="scheduled"===a||Be?["date","id"]:["id"];return e.length?(0,w.e)((0,I.My)(e,s),ct.current,j?void 0:Number(t),de,ft):void 0},[ft,ye,Ie,a,Be,j,t,de,Le]);(0,E.A)(()=>{if(!ye||!Ie||"scheduled"===a||De)return;if(!X&&!ae)return;const t=ye.filter(e=>{const t=Ie[e];return t&&t.reactions?.results.length&&!t.content.action});t.length&&Xe({chatId:e,ids:t})},z),(0,E.A)(()=>{if(!ye||!Ie||"scheduled"===a)return;const e=ye.map(e=>Ie[e]?.content.storyData).filter(Boolean);if(!e.length)return;const t=e.reduce((e,t)=>{const{peerId:a,id:s}=t;return e[a]||(e[a]=[]),e[a].push(s),e},{});Object.entries(t).forEach(([e,t])=>{Ze({peerId:e,storyIds:t})})},H),(0,E.A)(()=>{if(!ye||!Ie||t!==i.l3||"scheduled"===a)return;const s=(0,r.mS)(),n=ye.filter(t=>(0,m.Vw0)(s,e,t)?.isCommentsInfo||void 0!==Ie[t]?.viewsCount);n.length&&Qe({chatId:e,ids:n})},_,!0),(0,E.A)(()=>{if(!ye||!Ie||t!==i.l3||"scheduled"===a)return;const s=ye.filter(e=>Ie[e]?.factCheck?.shouldFetch);s.length&&et({chatId:e,ids:s})},K);const It=(0,n.Kr)(()=>{if("thread"===a)return(0,b.sg)(()=>He({direction:c.TN.Around}),1e3,!0,!1)},[He,ye]),{isScrolled:At,updateStickyDates:vt}=(0,U.A)(),bt=(0,x.A)(()=>{if(lt.current)return void(lt.current=!1);const s=at.current;s&&(dt.current||vt(s),te(()=>{const n=(0,r.mS)();Boolean((0,m.nTw)(n).focusedMessage?.chatId)||ze({shouldCancelWaiting:!0}),s.parentElement&&(st.current=s.scrollHeight-s.scrollTop,"thread"===a&&We({chatId:e,threadId:t,scrollOffset:st.current}))}))}),[St,wt]=(0,B.A)(at,oe&&!Me);(0,n.vJ)(()=>{if(!It||!p||Se||Ee)return;if(ye&&(0,A.iL)(ye[ye.length-1]))return;const e=at.current;(!ye||1===ye.length||ye.length<d.yo2/2&&e.firstElementChild.clientHeight<=e.offsetHeight)&&It()},[p,ye,It,Ee,Se]);const Ct=(0,T.i)(()=>{if(!ye||!rt.current)return;const e=rt.current.filter(e=>ye.includes(Number(e.dataset.messageId))),t=e[1]||e[0];t&&(nt.current=t.id,ot.current=t.getBoundingClientRect().top)});(0,F.A)(()=>(0,l.Uj)(()=>Ct.current()),[ye,be,Ct]),(0,n.vJ)(()=>Ct.current(),[St,Ct]),(0,k.A)(([e,t])=>{const a=St(),s=wt.current;if(wt.current=a,ye===e&&be===t&&a!==s&&void 0===s)return;const n=at.current;rt.current=Array.from(n.querySelectorAll(".message-list-item"));const r=rt.current[rt.current.length-1],i=it.current?n.querySelector(`#${(0,u.GZ)(it.current)}`):void 0,c=ye&&e&&ye[ye.length-1]!==e[e.length-1],m=ye?.[0]!==e?.[0]&&ye?.length===d.yo2/2+1,h=c&&!m;be&&h&&ye&&ye.length<d.yo2/2&&!n.parentElement.classList.contains("force-messages-scroll")&&(0,l.Uj)(()=>n.firstElementChild.clientHeight<=2*n.offsetHeight)&&((0,o.YM)(n.parentElement,"force-messages-scroll"),n.parentElement.classList.add("force-messages-scroll"),setTimeout(()=>{n.parentElement&&(0,o.HW)(n.parentElement,"force-messages-scroll")},Y)),(0,l.gm)(()=>{const{scrollTop:e,scrollHeight:o,offsetHeight:c}=n,d=st.current;let u=d-(s||c);h&&(u-=r?r.offsetHeight:0);const m=be&&t&&u<=W,p=ye&&dt.current===ye[ye.length-1];h&&m&&!p&&(0,l.YS)(()=>{const e=!(0,N.g1)()||!i;(0,g.Ay)({container:n,element:e?r:i,position:e?"end":"start",margin:Q,forceDuration:Ne?0:void 0})});const f=void 0!==s&&s!==a;if(f&&(0,g.o8)())return;const y=nt.current&&n.querySelector(`#${nt.current}`),I=!y&&ct.current&&n.querySelector(`.${ee}`);let A;if(m&&f)A=o-c;else if(y){const t=y.getBoundingClientRect().top;A=e+(t-(ot.current||0))}else A=I?Math.min((0,S.A)(I,n).top-$,o-d):o-d;return()=>{(0,v.A)(n,Math.ceil(A)),(0,g._v)(),st.current=Math.max(Math.ceil(o-A),c),dt.current||(lt.current=!0,(0,l.YS)(()=>{lt.current=!1}))}})},[ye,be,St,wt,Ne]),(0,M.A)(([e])=>{void 0!==e&&(0,n.VK)(Z+d.xB5)},[Me]);const Et=Boolean(!ft||X&&!se),Mt=(0,y.L8)(e)&&!de&&!he&&!ue&&"thread"===a&&(!yt&&!xe&&ye&&(!rt.current||0===rt.current.length)||1===ye?.length&&"contactSignUp"===Ie?.[ye[0]]?.content.action?.type||"contactSignUp"===xe?.content?.action?.type),xt=ae&&me&&1===ye?.length&&"chatCreate"===Ie?.[ye[0]]?.content.action?.type,kt=1===ye?.length&&"topicCreate"===Ie?.[ye[0]]?.content.action?.type,Pt=(0,f.A)("MessageList custom-scroll",Et&&"no-avatars",!oe&&"no-composer","pinned"===a&&"type-pinned",Pe&&"with-bottom-shift",Te&&"with-default-bg",Me&&"select-mode-active",At&&"scrolled",!ce&&"is-animating",ht&&"saved-dialog",Oe&&"hide-on-print"),Tt=Boolean(ye&&yt||xe);(0,n.vJ)(()=>{Tt||_e(!1)},[Tt,_e]);const Ft=Se?q.Restricted:!Ve||Tt||Ge?Re&&!Tt?q.PremiumRequired:!he&&!pe||Tt?Mt?q.ContactGreeting:ye&&(!yt||xt||kt)?q.NoMessages:Tt?q.MessageList:q.Loading:q.AccountInfo:q.StarsRequired;return n.Ay.createElement(V.Ay,{ref:at,className:Pt,name:"fade",activeKey:Ft,shouldCleanup:!0,onScroll:bt,onMouseDown:C.l},Ft===q.Restricted?n.Ay.createElement("div",{className:"empty"},n.Ay.createElement("span",null,we?.[0]?.text||"This is a private "+(X?"channel":"chat"))):Ft===q.StarsRequired?n.Ay.createElement(G.A,{paidMessagesStars:Ve,peerId:je||e}):Ft===q.PremiumRequired?n.Ay.createElement(G.A,{peerId:e}):Ft===q.AccountInfo?n.Ay.createElement(L.A,{chatId:e,hasMessages:Tt}):Ft===q.ContactGreeting?n.Ay.createElement(J.A,{key:e,userId:e}):Ft===q.NoMessages?n.Ay.createElement(D.A,{chatId:e,topic:Fe,type:a,isChatWithSelf:de,isGroupChatJustCreated:xt}):Ft===q.MessageList?n.Ay.createElement(O.A,{canShowAds:Je&&X,chatId:e,isComments:ve,isChannelChat:X,isChatMonoforum:ie,isSavedDialog:mt,messageIds:ye||[xe.id],messageGroups:yt||(0,w.e)([xe]),getContainerHeight:St,isViewportNewest:Boolean(be),isUnread:Boolean(Ae),isEmptyThread:Ce,withUsers:ft,noAvatars:Et,containerRef:at,anchorIdRef:nt,memoUnreadDividerBeforeIdRef:ct,memoFirstUnreadIdRef:it,threadId:t,type:a,isReady:ce,hasLinkedChat:ke,isSchedule:!!yt&&"scheduled"===a,shouldRenderAccountInfo:he||pe,nameChangeDate:ge,photoChangeDate:fe,noAppearanceAnimation:!yt||!ut.current,onScrollDownToggle:_e,onNotchToggle:Ke,onIntersectPinnedMessage:ze,canPost:oe}):n.Ay.createElement(R.A,{color:"white",backgroundColor:"dark"}))},se=(0,n.ph)((0,r.EK)((e,{chatId:t,threadId:a,type:s})=>{const{autoTranslate:n,autoTranslateLanguage:o}=e.settings.byKey,r=e.currentUserId,c=(0,m.hds)(e,t),l=(0,m.vGo)(e,t);if(!c)return{currentUserId:r};const g=(0,m.vRX)(e,t,a,s),f="scheduled"===s?(0,m.yFI)(e,t):(0,m.zeq)(e,t),I=(0,u.cG)(t,a,r);if(!(a===i.l3||I||c?.isForum||f&&a&&f[Number(a)]))return{currentUserId:r};const A=(0,h._l)(e,t),v=(0,p.G6)(e,c?.restrictionReasons),b=(0,m.yHC)(e,t,I?"saved":"all"),S=(0,m.kdX)(e,t),w=a===i.l3&&!g&&!c.unreadCount&&!S&&b&&!b.groupedId,C=(0,m.yps)(e,t),E=Boolean(l?.settings?.canAddContact),M=l?.settings?.nameChangeDate,x=l?.settings?.photoChangeDate,k=(0,m.S0q)(e,t,a),P=(0,y.L8)(t)?void 0:(0,m.AWZ)(e,t),T=!(0,m.Vw0)(e,t,a)?.messagesCount,F=!(0,m.g29)(e)||(0,m.vGo)(e,r)?.areAdsEnabled,N=(0,m.trm)(e),B=Boolean(l?.businessIntro),U=e.isAppConfigLoaded,R=(0,m.k2W)(e,t)?.id,V=(0,m.jGY)(e,t)&&!P?.isTranslationDisabled,J=c?.hasAutoTranslation,L=(0,m.Qq_)(e);return{autoTranslate:n,autoTranslateLanguage:o,areAdsEnabled:F,isChatLoaded:!0,isRestricted:A,restrictionReasons:v,isChannelChat:(0,u.WX)(c),isChatMonoforum:(0,u.Ve)(c),isGroupChat:(0,u.YE)(c),isChannelWithAvatars:c.areProfilesShown,isCreator:c.isCreator,isChatWithSelf:(0,m.nZ4)(e,t),isSystemBotChat:(0,u.DX)(t),isAnonymousForwards:(0,u.Qe)(t),isBot:Boolean(C),isNonContact:E,nameChangeDate:M,photoChangeDate:x,isSynced:e.isSynced,messageIds:g,messagesById:f,firstUnreadId:(0,m.RjD)(e,t,a),isViewportNewest:"thread"!==s||(0,m.haw)(e,t,a),focusingId:S,isSelectModeActive:(0,m.rTV)(e),hasLinkedChat:P?Boolean(P.linkedChatId):void 0,channelJoinInfo:P?.joinInfo,topic:k,noMessageSendingAnimation:!(0,m.xYJ)(e,"messageSendingAnimations"),isServiceNotificationsChat:t===d.zv8,isForum:c.isForum,isEmptyThread:T,currentUserId:r,isChatProtected:(0,m.ryq)(e,t),...w&&{lastMessage:b},isAccountFrozen:N,hasCustomGreeting:B,isAppConfigLoaded:U,monoforumChannelId:R,canTranslate:V,translationLanguage:L,shouldAutoTranslate:J}})(ae));function ne(e){return e+1e-6}s()}catch(oe){s(oe)}})},35868:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"StickerSetModal",!t);return a?s.Ay.createElement(a,e):void 0}},36228:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>m});var n=a(84051),o=a(13439),r=a(39351),i=a(17712),c=a(14e3),d=e([r]),l=d.then?(await d)():d;function u(){const e=(0,r.A)(),{openFrozenAccountModal:t}=(0,o.ko)(),a=(0,i.A)(()=>{t()});return n.Ay.createElement("div",{className:c.A.root,onClick:a},n.Ay.createElement("div",{className:c.A.title},e("ComposerTitleFrozenAccount")),n.Ay.createElement("div",{className:c.A.subtitle},e("ComposerSubtitleFrozenAccount")))}r=l[0];const m=(0,n.ph)(u);s()}catch(h){s(h)}})},36681:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>p});var n=a(84051),o=a(13439),r=a(90709),i=a(60919),c=a(17712),d=a(59030),l=a(80146),u=a(89967),m=e([d,l]);[d,l]=m.then?(await m)():m;const h=({defaultStickers:e,connectionState:t,lastUnreadMessageId:a,currentMessageList:s,businessIntro:i,user:m})=>{const{loadGreetingStickers:h,sendMessage:p,markMessageListRead:g}=(0,o.ko)(),f=(0,d.A)(),y=(0,n.li)(),I=(0,n.Kr)(()=>{if(i?.sticker)return i.sticker;if(!e?.length)return;const t=Math.floor(Math.random()*e.length);return e[t]},[i?.sticker,e]);(0,n.vJ)(()=>{e?.length||"connectionStateReady"!==t||h()},[t,h,e]),(0,n.vJ)(()=>{"connectionStateReady"===t&&a&&g({maxId:a})},[t,g,a]);const A=(0,c.A)(()=>{s&&p({sticker:{...I,isPreloadedGlobally:!0},messageList:s})}),v=i?.title||f("Conversation.EmptyPlaceholder"),b=i?.description||f("Conversation.GreetingText");return n.Ay.createElement("div",{className:u.A.root},n.Ay.createElement("div",{className:u.A.wrapper},n.Ay.createElement("p",{className:u.A.title,dir:"auto"},v),n.Ay.createElement("p",{className:u.A.description,dir:"auto"},b),n.Ay.createElement("div",{ref:y,className:u.A.sticker,onClick:A},I&&n.Ay.createElement(l.A,{containerRef:y,sticker:I,size:160,shouldLoop:!0}))),i&&n.Ay.createElement("div",{className:u.A.explainer},f("Chat.EmptyStateIntroFooter",(0,r.Yg)(m))))},p=(0,n.ph)((0,o.EK)((e,{userId:t})=>{const{stickers:a}=e.stickers.greeting,s=(0,i.hds)(e,t);if(!s)return{};const n=(0,i.mBe)(e,t),o=(0,i.vGo)(e,t),r=(0,i.yHC)(e,s.id);return{defaultStickers:a,lastUnreadMessageId:r&&r.id!==s.lastReadInboxMessageId?r.id:void 0,connectionState:e.connectionState,currentMessageList:(0,i.Xf0)(e),businessIntro:o?.businessIntro,user:n}})(h));s()}catch(e){s(e)}})},36757:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(31481),n=a(14487),o=a(6e4),r=a(80140),i=a(24021),c=a(90709),d=a(13439),l=a(17872),u=a(32989),m=a(60919),h=e([o,i]);[o,i]=h.then?(await h)():h;const p=100;(0,d.aJ)("loadAllStories",async e=>{let t=0;for(;e.stories.hasNext;){if(t++>=p)return void(s.Oig&&console.error("`actions/loadAllStories`: Infinite loop detected"));e=(0,d.mS)();const{stateHash:a,hasNext:n}=e.stories;if(a&&!n)return;const o=await(0,i.px)("fetchAllStories",{isFirstRequest:!a,stateHash:a});if(!o)return;(e=(0,d.mS)()).stories.stateHash=o.state,"peerStories"in o&&(e=(0,l.Niu)(e,o.peerStories),e=(0,l.Gzl)(e,o.peerStories),(e=(0,l.qsx)(e,o.stealthMode)).stories.hasNext=o.hasMore),(0,d.UF)(e)}}),(0,d.aJ)("loadAllHiddenStories",async e=>{let t=0;for(;e.stories.hasNextInArchive;){if(t++>=p)return void(s.Oig&&console.error("`actions/loadAllHiddenStories`: Infinite loop detected"));e=(0,d.mS)();const{archiveStateHash:a,hasNextInArchive:n}=e.stories;if(a&&!n)return;const o=await(0,i.px)("fetchAllStories",{isFirstRequest:!a,stateHash:a,isHidden:!0});if(!o)return;(e=(0,d.mS)()).stories.archiveStateHash=o.state,"peerStories"in o&&(e=(0,l.Niu)(e,o.peerStories),e=(0,l.Gzl)(e,o.peerStories),(e=(0,l.qsx)(e,o.stealthMode)).stories.hasNextInArchive=o.hasMore),(0,d.UF)(e)}}),(0,d.aJ)("loadPeerSkippedStories",async(e,t,a)=>{const{peerId:s}=a,n=(0,m.PVB)(e,s),o=(0,m._bp)(e,s);if(!n||!o)return;const r=Object.values(o.byId).reduce((e,t)=>("content"in t||e.push(t.id),e),[]);if(0===r.length)return;const c=await(0,i.px)("fetchPeerStoriesByIds",{peer:n,ids:r});c&&(e=(0,d.mS)(),e=(0,l.K4v)(e,s,c.stories,c.pinnedIds),(0,d.UF)(e))}),(0,d.aJ)("viewStory",async(e,t,a)=>{const{peerId:s,storyId:o,tabId:c=(0,n.g0)()}=a,u=(0,m.PVB)(e,s),h=(0,m.Msb)(e,s,o);if(!u||!h||!("content"in h))return;e=(0,l.SYp)(e,s,o,c),(0,d.UF)(e);const p=(0,r.Fm)();h.expireDate<p&&h.isInProfile&&(0,i.px)("viewStory",{peer:u,storyId:o}),(e.stories.byPeerId[s].lastReadId||0)<h.id&&await(0,i.px)("markStoryRead",{peer:u,storyId:o})&&(e=(0,d.mS)(),e=(0,l.Ahb)(e,s,o),(0,d.UF)(e))}),(0,d.aJ)("deleteStory",async(e,t,a)=>{const{peerId:s,storyId:n}=a,o=(0,m.PVB)(e,s);o&&await(0,i.px)("deleteStory",{peer:o,storyId:n})&&(e=(0,d.mS)(),e=(0,l.ONz)(e,s,n),(0,d.UF)(e))}),(0,d.aJ)("toggleStoryInProfile",async(e,t,a)=>{const{peerId:s,storyId:n,isInProfile:o}=a,r=(0,m.PVB)(e,s);if(!r)return;const c=(0,m.Msb)(e,s,n),u=c&&"content"in c?c.isInProfile:void 0;e=(0,l.Xzz)(e,s,n,{isInProfile:o}),e=(0,l.KpR)(e,s,n,o),(0,d.UF)(e);const h=await(0,i.px)("toggleStoryInProfile",{peer:r,storyId:n,isInProfile:o});h?.length||(e=(0,d.mS)(),e=(0,l.Xzz)(e,s,n,{isInProfile:u}),e=(0,l.KpR)(e,s,n,u),(0,d.UF)(e))}),(0,d.aJ)("toggleStoryPinnedToTop",async(e,t,a)=>{const{peerId:s,storyId:n}=a,o=(0,m.PVB)(e,s),r=(0,m._bp)(e,s);if(!o||!r)return;const c=(0,m.gVx)(e,s)?.map(e=>e.id)||[],l=c.includes(n)?c.filter(e=>e!==n):[...c,n];e=(0,d.mS)(),e={...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[s]:{...r,pinnedIds:l.sort((e,t)=>t-e)}}}},(0,d.UF)(e),await(0,i.px)("toggleStoryPinnedToTop",{peer:o,storyIds:l})||(e=(0,d.mS)(),e={...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[s]:{...r,pinnedIds:c}}}},(0,d.UF)(e))}),(0,d.aJ)("loadPeerStories",async(e,t,a)=>{if((0,m.trm)(e))return;const{peerId:s}=a,n=(0,m.PVB)(e,s);if(!n)return;const o=await(0,i.px)("fetchPeerStories",{peer:n});o&&(e=(0,d.mS)(),e=(0,l.K4v)(e,s,o.stories),o.lastReadStoryId&&(e=(0,l.Ahb)(e,s,o.lastReadStoryId)),(0,d.UF)(e))}),(0,d.aJ)("loadPeerProfileStories",async(e,t,a)=>{if((0,m.trm)(e))return;const{peerId:s,offsetId:n}=a,o=(0,m.PVB)(e,s);let r=(0,m._bp)(e,s);if(!o||r?.isFullyLoaded)return;const c=await(0,i.px)("fetchPeerProfileStories",{peer:o,offsetId:n});c&&(e=(0,d.mS)(),e=(0,l.K4v)(e,s,c.stories,c.pinnedIds),r=(0,m._bp)(e,s),(0===Object.values(c.stories).length||r?.profileIds?.length&&r?.profileIds.length>=c.count)&&(e=(0,l.oeX)(e,s,!0)),(0,d.UF)(e))}),(0,d.aJ)("loadStoriesArchive",async(e,t,a)=>{if((0,m.trm)(e))return;const{peerId:s,offsetId:n}=a,o=(0,m.PVB)(e,s);let r=(0,m._bp)(e,s);if(!o||r?.isArchiveFullyLoaded)return;const c=await(0,i.px)("fetchStoriesArchive",{peer:o,offsetId:n});c&&(e=(0,d.mS)(),e=(0,l.K4v)(e,s,c.stories,void 0,!0),r=(0,m._bp)(e,s),(0===Object.values(c.stories).length||r?.archiveIds?.length&&r?.archiveIds.length>=c.count)&&(e=(0,l.oeX)(e,s,!0,!0)),(0,d.UF)(e))}),(0,d.aJ)("loadPeerStoriesByIds",async(e,t,a)=>{const{peerId:s,storyIds:n}=a,o=(0,m.PVB)(e,s);if(!o)return;const r=await(0,i.px)("fetchPeerStoriesByIds",{peer:o,ids:n});r&&(e=(0,d.mS)(),e=(0,l.K4v)(e,s,r.stories),(0,d.UF)(e))}),(0,d.aJ)("loadStoryViews",async(e,t,a)=>{const{peerId:s,storyId:n}=a,o=(0,m.PVB)(e,s);if(!o)return;const r=await(0,i.px)("fetchStoriesViews",{peer:o,storyIds:[n]});r&&(e=(0,d.mS)(),e=(0,l.ZCo)(e,s,n,r.views),(0,d.UF)(e))}),(0,d.aJ)("loadStoryViewList",async(e,t,a)=>{const{peerId:s,storyId:o,offset:r,areReactionsFirst:c,areJustContacts:u,query:h,limit:p,tabId:g=(0,n.g0)()}=a,f=(0,m.PVB)(e,s);if(!f)return;e=(0,l.dxy)(e,!0,g),(0,d.UF)(e);const y=await(0,i.px)("fetchStoryViewList",{peer:f,storyId:o,offset:r,areReactionsFirst:c,areJustContacts:u,limit:p,query:h});if(!y)return e=(0,d.mS)(),e=(0,l.dxy)(e,!1,g),void(0,d.UF)(e);e=(0,d.mS)(),e=(0,l.X5v)(e,o,y.views,y.nextOffset,g),(0,d.UF)(e)}),(0,d.aJ)("reportStory",async(e,t,a)=>{const{peerId:r,storyId:c,description:l="",option:h="",tabId:p=(0,n.g0)()}=a,g=(0,m.PVB)(e,r);if(!g)return;const f=await(0,i.px)("reportStory",{peer:g,storyId:c,description:l,option:h});if(!f)return;const{result:y,error:I}=f;if(I===s.zLi)return t.showNotification({message:(0,o.yE)("lng_report_please_select_messages"),tabId:p}),void t.closeReportModal({tabId:p});if(y){if("reported"===y.type)return t.showNotification({message:y?(0,o.yE)("ReportPeer.AlertSuccess"):"An error occurred while submitting your report. Please, try again later.",tabId:p}),void t.closeReportModal({tabId:p});if("selectOption"===y.type){e=(0,d.mS)();const t=(0,m.nTw)(e,p).reportModal?.sections,a=t?.[t.length-1]?.options?.find(e=>e.option===h),s={title:y.title,options:y.options,subtitle:a?.text};e=(0,u.w)(e,{reportModal:{messageIds:[c],subject:"story",peerId:r,description:l,sections:t?[...t,s]:[s]}},p),(0,d.UF)(e)}if("comment"===y.type){e=(0,d.mS)();const t=(0,m.nTw)(e,p).reportModal?.sections,a=t?.[t.length-1]?.options?.find(e=>e.option===h),s={isOptional:y.isOptional,option:y.option,title:a?.text};e=(0,u.w)(e,{reportModal:{messageIds:[c],description:l,peerId:r,subject:"story",sections:t?[...t,s]:[s]}},p),(0,d.UF)(e)}}}),(0,d.aJ)("editStoryPrivacy",(e,t,a)=>{const{peerId:s,storyId:n,privacy:o}=a,r=(0,m.PVB)(e,s);if(!r)return;const d=[...o.allowUserIds,...o.allowChatIds],l=[...o.blockUserIds,...o.blockChatIds],u=(0,c.wT)(e,{visibility:o.visibility,isUnspecified:o.isUnspecified,allowedIds:d,blockedIds:l,botsPrivacy:"none"});(0,i.px)("editStoryPrivacy",{peer:r,id:n,privacy:u})}),(0,d.aJ)("toggleStoriesHidden",async(e,t,a)=>{const{peerId:s,isHidden:n}=a,o=(0,m.PVB)(e,s);o&&await(0,i.px)("toggleStoriesHidden",{peer:o,isHidden:n})&&(e=(0,d.mS)(),e=(0,l.VWO)(e,s,n),(0,d.UF)(e))}),(0,d.aJ)("loadStoriesMaxIds",async(e,t,a)=>{const{peerIds:s}=a,n=s.map(t=>(0,m.PVB)(e,t)).filter(Boolean);if(!n.length)return;const o=await(0,i.px)("fetchStoriesMaxIds",{peers:n});if(!o)return;const r=[];e=(0,d.mS)(),o.forEach((t,a)=>{const s=n[a];e=(0,l.kTB)(e,s.id,{maxStoryId:t,hasStories:0!==t}),0!==t&&r.push(s.id)}),(0,d.UF)(e),r?.forEach(e=>t.loadPeerStories({peerId:e}))}),(0,d.aJ)("sendStoryReaction",async(e,t,a)=>{const{peerId:s,storyId:o,containerId:r,reaction:c,shouldAddToRecent:u,tabId:h=(0,n.g0)()}=a,p=(0,m.PVB)(e,s);if(!p)return;const g=(0,m.Msb)(e,s,o);if(!g||!("content"in g))return;const f=g.sentReaction;e=(0,l.k31)(e,s,o,c),(0,d.UF)(e),c?t.startActiveReaction({containerId:r,reaction:c,tabId:h}):t.stopActiveReaction({containerId:r,tabId:h});const y=await(0,i.px)("sendStoryReaction",{peer:p,storyId:o,reaction:c,shouldAddToRecent:u});e=(0,d.mS)(),y||(e=(0,l.k31)(e,s,o,f)),(0,d.UF)(e)}),(0,d.aJ)("activateStealthMode",(e,t,a)=>{const{isForPast:s=!0,isForFuture:n=!0}=a||{};(0,i.px)("activateStealthMode",{isForPast:s||!0,isForFuture:n||!0})}),t()}catch(e){t(e)}})},36998:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>U});var n=a(84051),o=a(13439),r=a(23174),i=a(89925),c=a(31481),d=a(90709),l=a(60919),u=a(87357),m=a(9716),h=a(43874),p=a(76786),g=a(77523),f=a(17712),y=a(38218),I=a(59030),A=a(73767),v=a(39751),b=a(51083),S=a(17751),w=a(48343),C=a(64493),E=a(41036),M=a(59148),x=a(58269),k=a(47934),P=e([I,b,S,w,C,M,x,k]);[I,b,S,w,C,M,x,k]=P.then?(await P)():P;const T=450,F=22,N=500,B=({chatId:e,threadId:t,messageListType:a,isMobile:s,typingStatus:d,isSelectModeActive:l,isLeftColumnShown:P,audioMessage:B,chat:U,messagesCount:R,isComments:V,isChatWithSelf:J,shouldSkipHistoryAnimations:L,currentTransitionKey:O,connectionState:D,isSyncing:G,isFetchingDifference:j,getCurrentPinnedIndex:q,getLoadingPinnedId:z,emojiStatusSticker:_,emojiStatusSlug:K,isSavedDialog:H,onFocusPinnedMessage:W})=>{const{openThreadWithInfo:$,openChat:X,openPreviousChat:Y,toggleLeftColumn:Q,exitMessageSelectMode:Z,openPremiumModal:ee,openStickerSet:te,updateMiddleSearch:ae,openUniqueGiftBySlug:se}=(0,o.ko)(),ne=(0,I.A)(),oe=(0,n.li)(!0),{isTablet:re}=(0,h.Ay)(),{width:ie}=(0,v.A)(),{isDesktop:ce}=(0,h.Ay)(),de=ie<=c.j7z,le=re&&P,ue=(0,n.li)(),me=(0,f.A)(()=>{ae({chatId:e,threadId:t,update:{}})}),he=(0,f.A)(a=>{a.target.closest(".title > .custom-emoji")||$({chatId:e,threadId:t})}),{onMouseDown:pe,onMouseUp:ge,onMouseLeave:fe,onTouchStart:ye,onTouchEnd:Ie}=(0,y.A)({onStart:me,onClick:he,threshold:N}),Ae=(0,f.A)(()=>{setTimeout(()=>{oe.current=!0},T)}),ve=(0,f.A)(()=>{K?se({slug:K}):ee({fromUserId:e})}),be=(0,f.A)(()=>{K?se({slug:K}):te({stickerSetInfo:_.stickerSetInfo})}),Se=(0,f.A)(e=>{if(oe.current){if(oe.current=!1,s){const e=document.querySelector(c.m$5);e?.blur()}if(l)return Z(),void Ae();if("thread"===a&&0===O)return!re||le?(e.stopPropagation(),X({id:void 0},{forceOnHeavyAnimation:!0})):Q(),void Ae();Y(),Ae()}}),we=(0,A.A)(O),Ce=void 0!==we&&we<O?we:void 0,Ee=Boolean(B),Me=ce&&Ee,xe=Ee||!ce,{connectionStatusText:ke}=(0,p.A)(ne,D,G||j,!0);function Pe(e=!1,t=!1){return n.Ay.createElement("div",{className:"back-button"},n.Ay.createElement(C.A,{round:!0,size:"smaller",color:"translucent",onClick:Se,ariaLabel:ne(e?"Close":"Back")},n.Ay.createElement("div",{className:(0,u.A)("animated-close-icon",!e&&"state-back")})),t&&n.Ay.createElement(w.A,null))}return(0,g.A)(ue),n.Ay.createElement("div",{className:"MiddleHeader",ref:ue},n.Ay.createElement(E.Ay,{name:L?"none":"slideFade",activeKey:O,shouldCleanup:!0,cleanupExceptionKey:Ce},"thread"===a&&(t===r.l3||H||U?.isForum)?function(){const a=H?ne("SavedMessages"):void 0,s=H?String(t):e,o=U?.isMonoforum?U.linkedMonoforumId:s;return n.Ay.createElement(n.Ay.Fragment,null,(de||O>0)&&Pe(le,!H),n.Ay.createElement("div",{className:"chat-info-wrapper",onMouseDown:pe,onMouseUp:ge,onMouseLeave:fe,onTouchStart:ye,onTouchEnd:Ie},(0,m.L8)(o)?n.Ay.createElement(S.A,{key:o,userId:o,typingStatus:d,status:ke||a,withDots:Boolean(ke),withFullInfo:!0,withMediaViewer:!0,withStory:!J,withUpdatingStatus:!0,isSavedDialog:H,storyViewerOrigin:i.G9.MiddleHeaderAvatar,emojiStatusSize:F,noRtl:!0,onEmojiStatusClick:ve}):n.Ay.createElement(b.A,{key:o,chatId:o,threadId:H?void 0:t,typingStatus:d,withMonoforumStatus:U?.isMonoforum,status:ke||a,withDots:Boolean(ke),withMediaViewer:t===r.l3,withFullInfo:t===r.l3,withUpdatingStatus:!0,withStory:!0,isSavedDialog:H,storyViewerOrigin:i.G9.MiddleHeaderAvatar,emojiStatusSize:F,onEmojiStatusClick:be,noRtl:!0})))}():n.Ay.createElement(n.Ay.Fragment,null,Pe(),n.Ay.createElement("h3",null,void 0!==R?"thread"===a?R?ne(V?"Comments":"Replies",R,"i"):ne(V?"CommentsTitle":"RepliesTitle"):"pinned"===a?ne("PinnedMessagesCount",R,"i"):"scheduled"===a?J?ne("Reminders"):ne("messages",R,"i"):void 0:ne("Loading")))),!xe&&n.Ay.createElement(k.A,{key:e,chatId:e,threadId:t,messageListType:a,onFocusPinnedMessage:W,getLoadingPinnedId:z,getCurrentPinnedIndex:q}),n.Ay.createElement("div",{className:"header-tools"},Me&&n.Ay.createElement(x.A,null),n.Ay.createElement(M.A,{chatId:e,threadId:t,messageListType:a,isMobile:s,canExpandActions:!Me})))},U=(0,n.ph)((0,o.EK)((e,{chatId:t,threadId:a,messageListType:s,isMobile:n})=>{const{isLeftColumnShown:o,shouldSkipHistoryAnimations:i,audioPlayer:c,messageLists:u}=(0,l.nTw)(e),m=(0,l.hds)(e,t),h=(0,l.PVB)(e,t),{chatId:p,messageId:g}=c,f=p&&g?(0,l.O5q)(e,p,g):void 0;let y;if("pinned"===s){const s=(0,l.fcC)(e,t,a);y=s?.length}else if("scheduled"===s){const s=(0,l.K3w)(e,t,a);y=s?.length}else if("thread"===s&&a!==r.l3){const s=(0,l.Vw0)(e,t,a);y=s?.messagesCount||0}const I=(0,l.C5H)(e,t,a,"typingStatus"),A=h?.emojiStatus,v=A&&e.customEmojis.byId[A.documentId],b="collectible"===A?.type?A.slug:void 0,S=(0,d.cG)(t,a,e.currentUserId);return{typingStatus:I,isLeftColumnShown:o,isRightColumnShown:(0,l.gjV)(e,n),isSelectModeActive:(0,l.rTV)(e),audioMessage:f,chat:m,messagesCount:y,isChatWithSelf:(0,l.nZ4)(e,t),shouldSkipHistoryAnimations:i,currentTransitionKey:Math.max(0,u.length-1),connectionState:e.connectionState,isSyncing:e.isSyncing,isFetchingDifference:e.isFetchingDifference,emojiStatusSticker:v,emojiStatusSlug:b,isSavedDialog:S}})(B));s()}catch(e){s(e)}})},37103:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"Settings");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},39021:(e,t,a)=>{a.d(t,{O:()=>h});var s=a(84051),n=a(36680),o=a(71429),r=a(13439),i=a(60919),c=a(77787),d=a(17712);const l=["#E5D9FF","#CCD6FF","#B6FFCE","#FFD9D9","#FFD9FF"],u=(0,s.ph)((0,r.EK)((e,{userId:t})=>({user:t?(0,i.mBe)(e,t):void 0}))(({userId:e,user:t,onClose:a})=>{const[n,o]=(0,s.J0)(void 0),i=(0,d.A)(async()=>{const t=await(c.zs.userPortrait?.getUserPortrait(e));o(t)});(0,s.vJ)(()=>{i()},[e]);const u=(0,d.A)(()=>{(0,r.ko)().openUserPortrait({userId:e}),a()});return s.Ay.createElement("div",{className:"w-[24rem]"},s.Ay.createElement("div",{className:"border-b-[1px] border-[#F3F3F3] px-[12px] pb-[12px]"},s.Ay.createElement("div",{className:"text-[20px] font-[700] mb-2"},"Portrait"),s.Ay.createElement("div",{className:"text-[16px] font-[700] mb-2"},"Basic Description"),s.Ay.createElement("div",{className:"flex flex-col gap-1"},t?.usernames?.[0]?.username&&s.Ay.createElement("div",null,s.Ay.createElement("span",{className:"font-[600]"},"Username: "),t?.usernames?.[0]?.username),s.Ay.createElement("div",null,s.Ay.createElement("span",{className:"font-[600]"},"Alias/Nickname: "),t?.firstName," ",t?.lastName),n&&s.Ay.createElement(s.Ay.Fragment,null,n.langs&&s.Ay.createElement("div",null,s.Ay.createElement("span",{className:"font-[600]"},"Language: "),`${n.langs?.[0]?`${n.langs?.[0]}(Primary)`:""} ${n.langs?.[1]?`, ${n.langs?.[1]}(Secondary)`:""}`),n?.tags&&n?.tags?.length>0&&s.Ay.createElement(s.Ay.Fragment,null,s.Ay.createElement("div",null,s.Ay.createElement("span",{className:"font-[600]"},"Tags: ")),s.Ay.createElement("div",{className:"flex flex-row flex-wrap items-center gap-2"},n?.tags?.map((e,t)=>s.Ay.createElement("div",{className:"flex items-center justify-center px-2 rounded-[4px] h-[28px] text-[12px] font-[500] text-black",style:`background: ${l[t]}`},e))))))),s.Ay.createElement("div",{className:"h-[42px] flex items-center justify-center text-[var(--color-primary)] text-[14px] font-semibold pt-[0.5rem] cursor-pointer",onClick:u},"View details"))}));function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},m.apply(null,arguments)}const h=({menuRef:e,isOpen:t,userId:a,onClose:r,...i})=>{const[c,d,l]=(0,n.A)(t,r);return(0,s.vJ)(()=>{t&&l()},[t,l]),s.Ay.createElement(o.A,m({ref:e,isOpen:t,onClose:r,onCloseAnimationEnd:r,className:"PortraitMenu",withPortal:!0,onMouseEnter:c,onMouseLeave:d,noCompact:!0},i),t&&s.Ay.createElement(u,{userId:a,onClose:r}))}},39441:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(89925),n=a(14487),o=a(6e4),r=a(24021),i=a(90709),c=a(13439),d=a(17872),l=a(60919),u=a(42347),m=e([o,r,u]);[o,r,u]=m.then?(await m)():m,(0,c.aJ)("checkPublicLink",async(e,t,a)=>{const{username:o,tabId:i=(0,n.g0)()}=a,{chatId:u}=(0,l.Xf0)(e,i)||{};if(!u)return;if((0,l.nTw)(e,i).management.progress===s.TD.InProgress)return;e=(0,d.H6X)(e,u,{isUsernameAvailable:void 0,checkedUsername:void 0},i),(0,c.UF)(e);const{result:m,error:h}=await(0,r.px)("checkChatUsername",{username:o});e=(0,c.mS)(),e=(0,d.G42)(e,!0===m?s.TD.Complete:s.TD.Error,i),e=(0,d.H6X)(e,u,{isUsernameAvailable:!0===m,checkedUsername:o,error:h},i),(0,c.UF)(e),void 0===m&&t.openLimitReachedModal({limit:"channelsPublic",tabId:i})}),(0,c.aJ)("updatePublicLink",async(e,t,a)=>{const{username:o,shouldDisableUsernames:i,tabId:m=(0,n.g0)()}=a,{chatId:h}=(0,l.Xf0)(e,m)||{};if(!h)return;const p=await(0,u.Jm)(e,t,h,m);if(!p)return;e=(0,c.mS)(),e=(0,d.G42)(e,s.TD.InProgress,m),(0,c.UF)(e);const g=await(0,r.px)("setChatUsername",{chat:p,username:o});i&&await(0,r.px)("deactivateAllUsernames",{chat:p}),e=(0,c.mS)(),e=(0,d.G42)(e,g?s.TD.Complete:s.TD.Error,m),e=(0,d.H6X)(e,p.id,{isUsernameAvailable:void 0,checkedUsername:void 0,error:void 0},m),(0,c.UF)(e)}),(0,c.aJ)("updatePrivateLink",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{chatId:o}=(0,l.Xf0)(e,s)||{},i=o&&(0,l.hds)(e,o);o&&i&&(0,r.px)("updatePrivateLink",{chat:i})}),(0,c.aJ)("setEditingExportedInvite",(e,t,a)=>{const{chatId:s,invite:o,tabId:r=(0,n.g0)()}=a;e=(0,d.H6X)(e,s,{editingInvite:o},r),(0,c.UF)(e)}),(0,c.aJ)("setOpenedInviteInfo",(e,t,a)=>{const{chatId:s,invite:o,tabId:r=(0,n.g0)()}=a,i=o?{inviteInfo:{invite:o}}:{inviteInfo:void 0};e=(0,d.H6X)(e,s,i,r),(0,c.UF)(e)}),(0,c.aJ)("loadExportedChatInvites",async(e,t,a)=>{if((0,l.trm)(e))return;const{chatId:s,adminId:o,isRevoked:i,limit:u,tabId:m=(0,n.g0)()}=a,h=(0,l.hds)(e,s),p=(0,l.mBe)(e,o||e.currentUserId);if(!h||!p)return;const g=await(0,r.px)("fetchExportedChatInvites",{peer:h,admin:p,isRevoked:i,limit:u});if(!g)return;e=(0,c.mS)();const{invites:f}=g,y=i?{revokedInvites:f}:{invites:f};e=(0,d.H6X)(e,s,y,m),(0,c.UF)(e)}),(0,c.aJ)("editExportedChatInvite",async(e,t,a)=>{const{chatId:s,link:o,isRevoked:i,expireDate:u,usageLimit:m,isRequestNeeded:h,title:p,tabId:g=(0,n.g0)()}=a,f=(0,l.hds)(e,s);if(!f)return;const y=await(0,r.px)("editExportedChatInvite",{peer:f,link:o,isRevoked:i,expireDate:u,usageLimit:m,isRequestNeeded:h,title:p});if(!y)return;const{oldInvite:I,newInvite:A}=y;e=(0,c.mS)();const{management:v}=(0,l.nTw)(e,g),b=(v.byChatId[s].invites||[]).filter(e=>e.link!==I.link),S=[...v.byChatId[s].revokedInvites||[]];A.isRevoked?S.unshift(A):b.push(A),e=(0,d.H6X)(e,s,{invites:b,revokedInvites:S},g),(0,c.UF)(e)}),(0,c.aJ)("exportChatInvite",async(e,t,a)=>{const{chatId:s,expireDate:o,usageLimit:i,isRequestNeeded:u,title:m,tabId:h=(0,n.g0)()}=a,p=(0,l.hds)(e,s);if(!p)return;const g=await(0,r.px)("exportChatInvite",{peer:p,expireDate:o,usageLimit:i,isRequestNeeded:u,title:m});if(!g)return;e=(0,c.mS)();const f=(0,l.nTw)(e,h).management.byChatId[s].invites||[];e=(0,d.H6X)(e,s,{invites:[...f,g]},h),(0,c.UF)(e)}),(0,c.aJ)("deleteExportedChatInvite",async(e,t,a)=>{const{chatId:s,link:o,tabId:i=(0,n.g0)()}=a,u=(0,l.hds)(e,s);if(!u)return;if(!await(0,r.px)("deleteExportedChatInvite",{peer:u,link:o}))return;e=(0,c.mS)();const m=(0,l.nTw)(e,i).management.byChatId[s];e=(0,d.H6X)(e,s,{invites:m?.invites?.filter(e=>e.link!==o),revokedInvites:m?.revokedInvites?.filter(e=>e.link!==o)},i),(0,c.UF)(e)}),(0,c.aJ)("deleteRevokedExportedChatInvites",async(e,t,a)=>{const{chatId:s,adminId:o,tabId:i=(0,n.g0)()}=a,u=(0,l.hds)(e,s),m=(0,l.mBe)(e,o||e.currentUserId);u&&m&&await(0,r.px)("deleteRevokedExportedChatInvites",{peer:u,admin:m})&&(e=(0,c.mS)(),e=(0,d.H6X)(e,s,{revokedInvites:[]},i),(0,c.UF)(e))}),(0,c.aJ)("loadChatInviteImporters",async(e,t,a)=>{const{chatId:s,link:o,offsetDate:i,offsetUserId:u,limit:m,tabId:h=(0,n.g0)()}=a,p=(0,l.hds)(e,s),g=u?(0,l.mBe)(e,u):void 0;if(!p||u&&!g)return;const f=await(0,r.px)("fetchChatInviteImporters",{peer:p,link:o,offsetDate:i,offsetUser:g,limit:m});if(!f)return;const{importers:y}=f;e=(0,c.mS)();const I=(0,l.nTw)(e,h).management.byChatId[s]?.inviteInfo;I?.invite&&I.invite.link===o&&(e=(0,d.H6X)(e,s,{inviteInfo:{...I,importers:y}},h),(0,c.UF)(e))}),(0,c.aJ)("loadChatInviteRequesters",async(e,t,a)=>{const{chatId:s,link:o,offsetDate:i,offsetUserId:u,limit:m,tabId:h=(0,n.g0)()}=a,p=(0,l.hds)(e,s),g=u?(0,l.mBe)(e,u):void 0;if(!p||u&&!g)return;const f=await(0,r.px)("fetchChatInviteImporters",{peer:p,link:o,offsetDate:i,offsetUser:g,limit:m,isRequested:!0});if(!f)return;const{importers:y}=f;e=(0,c.mS)();const I=(0,l.nTw)(e,h).management.byChatId[s]?.inviteInfo;I?.invite&&I.invite.link===o&&(e=(0,d.H6X)(e,s,{inviteInfo:{...I,requesters:y}},h),(0,c.UF)(e))}),(0,c.aJ)("loadChatJoinRequests",async(e,t,a)=>{const{chatId:s,offsetDate:n=0,offsetUserId:o,limit:i=0}=a,u=(0,l.hds)(e,s),m=o?(0,l.mBe)(e,o):void 0;if(!u||o&&!m)return;const h=await(0,r.px)("fetchChatInviteImporters",{peer:u,offsetDate:n,offsetUser:m,limit:i,isRequested:!0});if(!h)return;const{importers:p}=h;e=(0,c.mS)(),e=(0,d.wix)(e,s,{joinRequests:p}),(0,c.UF)(e)}),(0,c.aJ)("hideChatJoinRequest",async(e,t,a)=>{const{chatId:s,userId:n,isApproved:o}=a,i=(0,l.hds)(e,s),u=(0,l.mBe)(e,n);if(!i||!u)return;if(!await(0,r.px)("hideChatJoinRequest",{peer:i,user:u,isApproved:o}))return;e=(0,c.mS)();const m=(0,l.hds)(e,s);m&&(e=(0,d.wix)(e,s,{joinRequests:m.joinRequests?.filter(e=>e.userId!==n)}),(0,c.UF)(e))}),(0,c.aJ)("hideAllChatJoinRequests",async(e,t,a)=>{const{chatId:s,isApproved:n,link:o}=a,i=(0,l.hds)(e,s);i&&await(0,r.px)("hideAllChatJoinRequests",{peer:i,isApproved:n,link:o})&&(e=(0,c.mS)(),(0,l.hds)(e,s)&&(e=(0,d.wix)(e,s,{joinRequests:[]}),e=(0,d.ltr)(e,s,{recentRequesterIds:[],requestsPending:0}),(0,c.UF)(e)))}),(0,c.aJ)("hidePeerSettingsBar",async(e,t,a)=>{const{peerId:s}=a,n=(0,l.mBe)(e,s);n&&await(0,r.px)("hidePeerSettingsBar",n)&&(e=(0,c.mS)(),e=(0,d.weB)(e,s,{settings:void 0}),(0,c.UF)(e))}),(0,c.aJ)("uploadContactProfilePhoto",async(e,t,a)=>{const{userId:u,file:m,isSuggest:h,tabId:p=(0,n.g0)()}=a,g=(0,l.mBe)(e,u);if(!g)return;if(e=(0,d.G42)(e,s.TD.InProgress,p),(0,c.UF)(e),!await(0,r.px)("uploadContactProfilePhoto",{user:g,file:m,isSuggest:h}))return e=(0,c.mS)(),e=(0,d.G42)(e,s.TD.Error,p),void(0,c.UF)(e);e=(0,c.mS)(),(0,c.UF)(e);const{id:f,accessHash:y}=g;if(!await(0,r.px)("fetchFullUser",{id:f,accessHash:y}))return e=(0,c.mS)(),e=(0,d.G42)(e,s.TD.Error,p),void(0,c.UF)(e);t.loadMoreProfilePhotos({peerId:u,shouldInvalidateCache:!0}),e=(0,c.mS)(),e=(0,d.G42)(e,s.TD.Complete,p),(0,c.UF)(e),m&&!h&&t.showNotification({message:o.yE("UserInfo.SetCustomPhoto.SuccessPhotoText",(0,i.u0)(g)),tabId:p})}),(0,c.aJ)("resetManagementError",(e,t,a)=>{const{chatId:s,tabId:o=(0,n.g0)()}=a||{};return(0,d.H6X)(e,s,{error:void 0},o)}),t()}catch(e){t(e)}})},40040:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{bot:t}=e,a=(0,o.A)(n.ar.Extra,"BotTrustModal",!t);return a?s.Ay.createElement(a,e):void 0}},40183:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"AIKnowledge");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},40257:(e,t,a)=>{var s=a(23174),n=a(14487),o=a(13439),r=a(17872),i=a(60919);(0,o.aJ)("openMiddleSearch",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{chatId:o,threadId:c}=(0,i.Xf0)(e,s)||{};if(o&&c)return(0,r.$RI)(e,o,c,{},s)}),(0,o.aJ)("closeMiddleSearch",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{chatId:o,threadId:c}=(0,i.Xf0)(e,s)||{};if(o&&c)return(0,r._54)(e,o,c,s)}),(0,o.aJ)("updateMiddleSearch",(e,t,a)=>{const{update:o,tabId:c=(0,n.g0)()}=a;let d,l;if(a.chatId)d=a.chatId,l=a.threadId||s.l3;else{const t=(0,i.Xf0)(e,c);if(!t)return;d=t.chatId,l=t.threadId}return(0,r.$RI)(e,d,l,o,c)}),(0,o.aJ)("resetMiddleSearch",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{chatId:o,threadId:c}=(0,i.Xf0)(e,s)||{};if(o&&c)return(0,r.zde)(e,o,c,s)}),(0,o.aJ)("setSharedMediaSearchType",(e,t,a)=>{const{mediaType:s,tabId:o=(0,n.g0)()}=a,{chatId:c,threadId:d}=(0,i.Xf0)(e,o)||{};if(c&&d)return(0,r.Tu_)(e,c,d,s,o)})},40390:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>b});var n=a(96540),o=a(32697),r=a(42754),i=a(13439),c=a(31481),d=a(90709),l=a(70636),u=a(60919),m=a(49763),h=a(79582),p=a(81885),g=a(15972),f=a(64719),y=a(29356),I=a(89116),A=e([l,p,g]);[l,p,g]=A.then?(await A)():A;const v=({id:e,isChecked:t,onChange:a})=>{const s=(0,i.mS)(),r=(0,p.A)(),{currentUserId:c}=s,m=(0,u.PVB)(s,e);if(!m)return;const h=m&&!(0,l.vj)(m)?m.isSelf:void 0,f="isCustomPeer"in m?m:void 0,y="id"in m?m:void 0,I=y&&(0,l.mO)(y),A=y&&(I?(0,d.Yg)(y):(0,d.Js)(r,y)),v=function(){if(!m)return;if(m.id===c)return[r("SavedMessagesInfo")];if((0,l.vj)(m))return[(0,d.sT)(r,m)];const e=(0,u.K0y)(s,m.id);return(0,d.CD)(r,m,e)}()||"",b=f?f?.title||r(f?.titleKey):h?r("SavedMessages"):A;return n.createElement(o.A,{value:e,className:"chat-picker-item rounded-[12px]",checked:t,onChange:a},n.createElement("div",{className:"flex-1 flex flex-row items-center gap-[12px] px-[12px] py-[10px] hover:bg-[var(--color-chat-hover)] rounded-[12px]"},n.createElement(g.A,{peer:m,isSavedMessages:h,clickOpenRoom:!1,size:"medium"}),n.createElement("div",{className:"flex flex-col gap-[4px] justify-center text-[var(--color-text)] flex-1 overflow-hidden"},n.createElement("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap"},b),n.createElement("div",null,v))))},b=()=>{const e=(0,i.mS)(),t=n.useMemo(()=>(0,m.YA)(c.DSF)||[],[]),{drawerParams:a}=(0,I.S)(),s=a?.selectedChats||[],[d,p]=(0,n.useState)(s),[g,A]=(0,n.useState)(""),b=(0,n.useMemo)(()=>["channels","chats","users","groups"],[]),S=(0,n.useMemo)(()=>{const a=(0,h.A)((0,l.PU)({ids:t,query:g}),void 0);return(0,u.yMZ)(e,a,b)},[b,e,t,g]),w=(0,n.useCallback)(()=>{a?.onSave(d)},[a,d]);return n.createElement("div",{className:"h-full px-[20px] flex flex-col text-[var(--color-text)]"},n.createElement(r.A,{placeholder:"Search",onChange:e=>A(e.target.value)}),n.createElement("div",{className:"flex-1 overflow-y-auto"},n.createElement(o.A.Group,{className:"w-full",value:d},n.createElement("div",{className:"flex flex-col gap-[12px] w-full overflow-hidden"},S.map(e=>{const t=d.includes(e);return n.createElement(v,{id:e,isChecked:t,onChange:t=>{const a=t.target.checked;p(t=>a?[...t,e]:t.filter(t=>t!==e))}})})))),n.createElement(f.A,{isShown:!0,onClick:w},n.createElement(y.A,{name:"check",className:"text-white text-[1.5rem]"})))};s()}catch(e){s(e)}})},40485:(e,t,a)=>{function s(e){const t=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return t.length>0?`?${t}`:""}a.d(t,{G:()=>s})},40611:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>A});var n=a(84051),o=a(90709),r=a(70636),i=a(24909),c=a(49642),d=a(76023),l=a(56863),u=a(62587),m=a(59030),h=a(42630),p=e([r,u,m]);[r,u,m]=p.then?(await p)():p;const g={width:200,height:200},f=115;function y(e,t){if(!e)return Promise.resolve(h);if(!t)return(0,i.y)(e,f,f);const a=Math.min(t.width,t.height);if(a<f){const t=f/a;return(0,i.s)(e,t)}return Promise.resolve(e)}function I(e,t,a){if(!a)return g;if(e){if(!e.thumbnailSizes?.length)return;return e.thumbnailSizes.find(e=>"m"===e.type)||e.thumbnailSizes[0]}return t?d.cf:void 0}const A=(e,t,a)=>{const s=(0,m.A)(),{audio:i,voice:d}=e?(0,o.r_)(e):{},p=i?i.title||i.fileName:d?"Voice message":"",g=i?.performer||t&&(0,r.F9)(s,t),f=a&&(0,o.Js)(s,a)||"Telegram",A=i&&(0,o.AB)(i)&&(0,o.VO)(i,"pictogram"),v=t&&(0,o.cP)(t,"big"),b=i&&A||d&&v,S=(0,u.A)(b),w=(0,n.Kr)(()=>I(i,d,S),[i,S,d]),{result:C}=(0,l.A)(()=>y(S,w),[S,w],h);return(0,n.Kr)(()=>(0,c.wp)({title:p,artist:g,album:f,artwork:[{src:C}]}),[f,g,p,C])};s()}catch(v){s(v)}})},41040:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Stars,"StarsGiftingPickerModal",!t);return a?s.Ay.createElement(a,e):void 0}},41055:(e,t,a)=>{e.exports=a.p+"cgat-ai-logo.7f71c08ed2a48c5fc95b.png"},41411:(e,t,a)=>{a.d(t,{g:()=>h});var s=a(96540),n=a(46942),o=a.n(n),r=a(64721),i=a(88486),c=a(57674),d=a(10587),l=a(4955),u=a(70809);function m({status:e,stop:t,setMessages:a,handleInputSubmit:n,className:c}){const l=(0,s.useRef)(null),{width:u}=(0,i.lW)(),m=()=>{if(l.current){l.current.style.height="auto";const e=Math.min(200,Math.max(45,l.current.scrollHeight+2));l.current.style.height=`${e}px`}},[h,p]=(0,i.Mj)("input",""),[f,I]=(0,s.useState)("");(0,s.useEffect)(()=>{if(l.current){const e=l.current.value||h||"";I(e),e&&m()}},[h]),(0,s.useEffect)(()=>{p(f)},[f,p]);const A=(0,s.useCallback)(()=>{f&&(n(f),I(""),p(""),l.current&&(l.current.style.height="auto",l.current.style.height="45px"),u&&u>768&&l.current?.focus())},[n,f,p,u]);return s.createElement("div",{className:"relative w-full flex flex-col gap-4"},s.createElement(d.X,{ref:l,placeholder:"Send a message...",value:f,onChange:e=>{I(e.target.value),m()},className:o()("h-[45px] overflow-y-auto border-[#7D40FF] resize-none rounded-2xl !text-base pb-10 focus-visible:!ring-0 !ring-offset-0 dark:border-[#2F2F2F]",c),rows:2,autoFocus:!0,onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),"ready"!==e?r.oR.error("Please wait for the model to finish its response!"):A())}}),s.createElement("div",{className:"absolute bottom-0 right-0 p-2 w-fit flex flex-col justify-end"},"submitted"===e?s.createElement(g,{stop:t,setMessages:a}):s.createElement(y,{input:f,submitForm:A})))}const h=(0,s.memo)(m,(e,t)=>e.status===t.status);function p({stop:e,setMessages:t}){return s.createElement(l.$,{className:"rounded-full p-1.5 h-fit border dark:border-zinc-600",onClick:a=>{a.preventDefault(),e(),t(e=>(0,c.y8)(e))}},s.createElement(u.wF,{size:14}))}const g=(0,s.memo)(p);function f({submitForm:e,input:t}){return s.createElement(l.$,{className:"!px-0 !py-0 !w-[24px] !h-[24px] !bg-transparent ",onClick:t=>{t.preventDefault(),e()},disabled:0===t.length},s.createElement("i",{className:"icon icon-send text-[#000000] text-[24px] dark:text-[#AAAAAA]"}))}const y=(0,s.memo)(f,(e,t)=>e.input===t.input)},41790:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(14487),n=a(6e4),o=a(24021),r=a(13439),i=a(60919),c=e([n,o]);[n,o]=c.then?(await c)():c,(0,r.aJ)("reportPeer",async(e,t,a)=>{const{chatId:r,reason:c,description:d,tabId:l=(0,s.g0)()}=a;if(!r)return;const u=(0,i.hds)(e,r);if(!u)return;const m=await(0,o.px)("reportPeer",{peer:u,reason:c,description:d});t.showNotification({message:m?(0,n.yE)("ReportPeer.AlertSuccess"):"An error occurred while submitting your report. Please, try again later.",tabId:l})}),(0,r.aJ)("reportProfilePhoto",async(e,t,a)=>{const{chatId:r,reason:c,description:d,photo:l,tabId:u=(0,s.g0)()}=a;if(!r)return;const m=(0,i.hds)(e,r);if(!m||!l)return;const h=await(0,o.px)("reportProfilePhoto",{peer:m,photo:l,reason:c,description:d});t.showNotification({message:h?(0,n.yE)("ReportPeer.AlertSuccess"):"An error occurred while submitting your report. Please, try again later.",tabId:u})}),(0,r.aJ)("loadAuthorizations",async e=>{const t=await(0,o.px)("fetchAuthorizations");t&&(e=(0,r.mS)(),e={...e,activeSessions:{byHash:t.authorizations,orderedHashes:Object.keys(t.authorizations),ttlDays:t.ttlDays}},(0,r.UF)(e))}),(0,r.aJ)("terminateAuthorization",async(e,t,a)=>{const{hash:s}=a;if(!await(0,o.px)("terminateAuthorization",s))return;e=(0,r.mS)();const{[s]:n,...i}=e.activeSessions.byHash;e={...e,activeSessions:{byHash:i,orderedHashes:e.activeSessions.orderedHashes.filter(e=>e!==s)}},(0,r.UF)(e)}),(0,r.aJ)("terminateAllAuthorizations",async e=>{if(!await(0,o.px)("terminateAllAuthorizations"))return;const t=(e=(0,r.mS)()).activeSessions.orderedHashes.find(t=>e.activeSessions.byHash[t].isCurrent);if(!t)return;const a=e.activeSessions.byHash[t];e={...e,activeSessions:{byHash:{[t]:a},orderedHashes:[t]}},(0,r.UF)(e)}),(0,r.aJ)("changeSessionSettings",async(e,t,a)=>{const{hash:s,areCallsEnabled:n,areSecretChatsEnabled:i,isConfirmed:c}=a;await(0,o.px)("changeSessionSettings",{hash:s,areCallsEnabled:n,areSecretChatsEnabled:i,isConfirmed:c})&&(e=(0,r.mS)(),e={...e,activeSessions:{...e.activeSessions,byHash:{...e.activeSessions.byHash,[s]:{...e.activeSessions.byHash[s],...void 0!==n?{areCallsEnabled:n}:void 0,...void 0!==i?{areSecretChatsEnabled:i}:void 0,...c&&{isUnconfirmed:void 0}}}}},(0,r.UF)(e))}),(0,r.aJ)("changeSessionTtl",async(e,t,a)=>{const{days:s}=a;await(0,o.px)("changeSessionTtl",{days:s})&&(e=(0,r.mS)(),e={...e,activeSessions:{...e.activeSessions,ttlDays:s}},(0,r.UF)(e))}),(0,r.aJ)("loadWebAuthorizations",async e=>{const t=await(0,o.px)("fetchWebAuthorizations");if(!t)return;const{webAuthorizations:a}=t;e=(0,r.mS)(),e={...e,activeWebSessions:{byHash:a,orderedHashes:Object.keys(a)}},(0,r.UF)(e)}),(0,r.aJ)("terminateWebAuthorization",async(e,t,a)=>{const{hash:s}=a;if(!await(0,o.px)("terminateWebAuthorization",s))return;e=(0,r.mS)();const{[s]:n,...i}=e.activeWebSessions.byHash;e={...e,activeWebSessions:{byHash:i,orderedHashes:e.activeWebSessions.orderedHashes.filter(e=>e!==s)}},(0,r.UF)(e)}),(0,r.aJ)("terminateAllWebAuthorizations",async e=>{await(0,o.px)("terminateAllWebAuthorizations")&&(e=(0,r.mS)(),e={...e,activeWebSessions:{byHash:{},orderedHashes:[]}},(0,r.UF)(e))}),(0,r.aJ)("loadAccountDaysTtl",async(e,t,a)=>{const s=await(0,o.px)("fetchAccountTTL");s&&(e=(0,r.mS)(),e={...e,settings:{...e.settings,accountDaysTtl:s.days}},(0,r.UF)(e))}),(0,r.aJ)("setAccountTTL",async(e,t,a)=>{const{days:n,tabId:i=(0,s.g0)()}=a||{};n&&await(0,o.px)("setAccountTTL",{days:n})&&(e=(0,r.mS)(),e={...e,settings:{...e.settings,accountDaysTtl:n}},(0,r.UF)(e),t.closeDeleteAccountModal({tabId:i}))}),t()}catch(e){t(e)}})},42630:(e,t,a)=>{e.exports=a.p+"telegram-logo-filled.67469f6dc5e301e8e0bd.svg"},43411:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"AITranslate");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},44051:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=()=>{const e=(0,o.A)(n.ar.Extra,"GifSearch");return e?s.Ay.createElement(e,null):s.Ay.createElement(r.A,null)}},44524:e=>{e.exports="**Telegram Web A Digest**\n\nMany new features and useful optimizations have been added in recent months. Here is a brief overview of what's been happening in Web A since August.\n\n**September – November** \n\n✏️ __General__\n• [Reply Revolution](https://telegram.org/blog/reply-revolution#reply-revolution) – the app learned to quote specific parts of any message, making your responses 100% precise.\n• Also, [Quote Formatting](https://telegram.org/blog/reply-revolution#quote-formatting) have arrived.\n\n📣 __Channels__\n• Channels added [boosts](https://telegram.org/blog/channel-stories#stories-for-channels) and [giveaways.](https://telegram.org/blog/giveaways#free-telegram-premium) \n• Users also got an option to reassign their boosts between channels.\n\n🌄 __Stories__\n• Numerous improvements have been made to the animations flow, ensuring the stories bar expands more smoothly. Additionally, a package of optimizations has been added to enhance the performance of stories on mobile devices.\n• Stories have been introduced for [channels,](https://telegram.org/blog/channel-stories#stories-for-channels) and the story viewer has been updated with new gestures to expand and reply.\n\n⚙️ __Settings__\n• The app has added an option, 'Who can find me by phone number,' along with a setting under 'Privacy and Security' to manage the visibility of your bio.\n\n✨ __Extra__\n• Some further improvements have been made to the Mini Apps area.\n• New security notifications have been added to the chat list to alert you when your account is logged into from a new device.\n• New design for code blocks formatting.\n\n**December – February**\n\n✏️ __General__\n• [Saved Messages 2.0](https://telegram.org/blog/new-saved-messages-and-9-more#saved-messages-2-0) – including tags, My Notes, Replies and forwards from hidden authors.\n• [One-Time Voice Messages](https://telegram.org/blog/new-saved-messages-and-9-more#one-time-voice-and-video-messages) including both listening and recording. Added support for viewing One-Time Video Messages.\n• [Read-Time in Private Chats](https://telegram.org/blog/new-saved-messages-and-9-more#read-time-in-private-chats)\n• You can now replace media when editing messages.\n• The app learned to [preserve the selected mode](https://telegram.org/blog/similar-channels#improvements-for-topics) for topics in groups.\n• Whenever you create a small group, Web A suggests a name for it based on users' name you have added.\n\n📣 __Channels__ \n• Added [custom channel reactions.](https://telegram.org/blog/similar-channels#custom-reactions-for-channels)\n• Implemented [channel stories stats.](https://telegram.org/blog/similar-channels#story-stats-for-channels)\n• Channel emoji statuses.\n• [Similar Channels.](https://telegram.org/blog/similar-channels#similar-channels)\n\n👥 __Groups__\n• [9 new features for groups.](https://telegram.org/blog/february2024)\n\n🤖 __Bots__\n• Edit your bots info right from their profile.\n\n🌄 __Stories__\n• Added support for [forwarded stories](https://telegram.org/blog/posts-in-stories-and-more#view-reposts-and-more) and [channel posts in stories.](https://telegram.org/blog/posts-in-stories-and-more#share-posts-in-stories)\n\n✨ __Extra__\n• Giveaway Improvements: displaying winners list and additional prizes.\n\n**March**\n\n📣 __Channels__ \n• Admins will soon be able to launch giveaways in their channels.\n\n✨ __Extra__\n• Added support for Emoji v15.1.\n• Some design enhancements for shared contacts, links preview and more.\n"},44869:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>f});var n=a(84051),o=a(13439),r=(a(90709),a(70636)),i=a(60919),c=a(48775),d=a(39351),l=a(17712),u=a(48885),m=a(64493),h=a(47387),p=e([r,d,m]);[r,d,m]=p.then?(await p)():p;const g=({chargedPaidMessageStars:e,chat:t,peerId:a,onPaneStateChange:s})=>{const i=Boolean(e),p=(0,d.A)(),{openChatRefundModal:g}=(0,o.ko)(),{ref:f,shouldRender:y}=(0,u.A)({isOpen:i,onStateChange:s}),I=(0,l.A)(()=>{g({userId:a})});if(!y||!e)return;const A=p("PaneMessagePaidMessageCharge",{peer:t?(0,r.F9)(p,t):void 0,amount:(0,c.U2)(p,e,{asFont:!0,className:h.A.messageStarIcon,containerClassName:h.A.messageStars})},{withMarkdown:!0,withNodes:!0});return n.Ay.createElement("div",{ref:f,className:h.A.root},n.Ay.createElement("div",{className:h.A.message},A),n.Ay.createElement(m.A,{isText:!0,noForcedUpperCase:!0,pill:!0,fluid:!0,size:"tiny",className:h.A.button,onClick:I},p("RemoveFeeTitle")))},f=(0,n.ph)((0,o.EK)((e,{peerId:t})=>{const a=(0,i.hds)(e,t),s=(0,i.vGo)(e,t),n=s?.settings?.chargedPaidMessageStars;return{chargedPaidMessageStars:n,chat:a}})(g));s()}catch(e){s(e)}})},46182:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>x});var n=a(96540),o=a(66049),r=a(25279),i=a(13439),c=a(31481),d=a(72531),l=a(70758),u=a(87357),m=a(76526),h=a(75304),p=a(57291),g=a(95547),f=a(77787),y=a(95815),I=a(81120),A=a(80395),v=a(80878),b=a(6995),S=a(1229),w=a(62718),C=a(47778),E=e([p,g,b,w]);[p,g,b,w]=E.then?(await E)():E;const M=e=>{const{showNotification:t}=(0,i.ko)(),{chatId:a}=e,{userId:s,userName:E}=(0,I.pD)(),[M,x]=(0,n.useState)({lastTime:void 0,hasMore:!0}),[k,P]=(0,n.useState)(!1),T=(0,n.useRef)(null),{scrollToBottom:F,scrollLocked:N,isScrollLock:B}=(0,h.R)(),{messages:U,setMessages:R,append:V,stop:J,status:L}=(0,o.Y_)({api:`${c.Vjs}/chat?userId=${s}&userName=${E}&platform=web`,id:a,sendExtraMessageFields:!0});(0,n.useEffect)(()=>{B||F()},[B,U,F]),(0,n.useEffect)(()=>{l.xS.get("google-token").then(e=>{e&&(T.current=e)})},[]);const O=(0,n.useCallback)(e=>{R(t=>{const a=t.findIndex(t=>t.id===e.id);if(-1!==a){const s=[...t];return s[a]=e,s}return[...t,e]})},[R]);(0,n.useEffect)(()=>(d.A.on(d.E.AddRoomAIMessage,O),()=>{d.A.off(d.E.AddRoomAIMessage,O)}),[O]);const D=(0,n.useCallback)(()=>{R([]),x({lastTime:void 0,hasMore:!0})},[R]);(0,n.useEffect)(()=>{a&&(D(),f.zs.message?.getMessages(a,void 0,10)?.then(e=>{if(e.messages.length>0){const t=(0,y.Lf)(e.messages);R(t)}else{const e=(0,w.He)(a);R([e])}x({lastTime:e.lastTime,hasMore:e.hasMore})}),g.A.updateRoomAIData(a,"unreadCount",0))},[a,D,R]);const G=(0,n.useCallback)(()=>(N(),new Promise(e=>{a&&f.zs.message?.getMessages(a,M?.lastTime,10)?.then(t=>{if(t.messages){const e=(0,y.Lf)(t.messages);R(t=>[...e,...t])}x({lastTime:t.lastTime,hasMore:t.hasMore}),e()})})),[a,M?.lastTime,N,R]),j=(0,n.useCallback)(e=>{R(t=>[...t,e])},[R]),q=(0,n.useCallback)(e=>{const{message:a,response:s}=e;if(s?.error){if(t({message:s.error?.message||"Create Calendar Failed"}),401===s.error?.code||403===s.error?.code){f.zs.message?.delMessage(a?.id);const e=U.filter(e=>e.id!==a?.id);R(e),j((0,w.s2)())}}else{f.zs.message?.delMessage(a?.id);const e=[...U.filter(e=>e.id!==a?.id),{id:(0,r.A)(),role:"assistant",content:"I'll send the meeting invitation shortly. Please check your inbox in the next few minutes.",createdAt:new Date,parts:[]},{id:(0,r.A)(),role:"assistant",content:JSON.stringify(s),createdAt:new Date,annotations:[{type:"google-event-detail"}]}];R(e)}},[j,U,R]),z=(0,n.useCallback)(e=>{const{message:t,token:a}=e;T.current=a,t&&(f.zs.message?.delMessage(t.id),R(e=>e.filter(e=>e.id!==t.id)))},[R]),_=(0,n.useCallback)(()=>{j((0,w.wi)())},[j]);(0,n.useEffect)(()=>(d.A.on(d.E.CreateCalendarSuccess,q),d.A.on(d.E.UpdateGoogleToken,z),d.A.on(d.E.GoogleAuthSuccess,_),()=>{d.A.off(d.E.CreateCalendarSuccess,q),d.A.off(d.E.UpdateGoogleToken,z),d.A.off(d.E.GoogleAuthSuccess,_)}),[q,_,z]),(0,n.useEffect)(()=>{if("ready"===L&&a){const e=(0,y.Jr)(a,U);f.zs.message?.storeMessages([...e])}},[U,L,a]);const K=(0,n.useCallback)(e=>{f.zs.message?.delMessage(e).then(()=>{R(t=>t.filter(t=>t.id!==e))})},[R]);return n.createElement("div",{className:(0,u.A)(C.A.rightPanelBg,"right-panel-chat-ai")},n.createElement(p.B,{className:"chat-ai-output-wrapper flex-1",isLoading:k,status:L,messages:U,deleteMessage:K,loadMore:G,hasMore:M.hasMore,chatId:a}),n.createElement("div",null,n.createElement(b.A,{setIsLoading:e=>P(e),insertMessage:j,chatId:a}),n.createElement("form",{className:"flex mx-auto px-[12px] pb-4  gap-2 w-full"},n.createElement(S.w,{status:L,stop:J,setMessages:R,handleInputSubmit:async e=>{F();const t={role:"user",content:e,id:(0,r.A)(),createdAt:new Date};R(e=>[...e,t]),P(!0),(await v.qX.similaritySearch({query:e,k:10})).similarItems.filter(e=>e.score>.8).length>0||(0,m.M6)(e)?(async e=>{(0,I.xd)(e.content).then(async t=>{P(!1),t&&t.length>0&&t.forEach(async t=>{if("checkIsCreateMeet"===t.toolName){const e=(0,A.IM)();e&&await(0,A.G6)(e)?j((0,w.wi)()):j((0,w.s2)())}else if("checkIsUserPortrait"===t.toolName){const e=t.result?.keyword;j((0,w.O4)(e))}else"nullTool"===t.toolName&&(console.log("没有命中工具"),R(e=>e.slice(0,e.length-1)),f.zs.message?.delMessage(e.id),V({role:"user",content:e.content,id:(0,r.A)(),createdAt:new Date}))})}).catch(e=>{P(!1),console.log(e)})})(t):(P(!1),R(e=>e.slice(0,e.length-1)),f.zs.message?.delMessage(t.id),V(t))}}))))},x=(0,n.memo)(M,(e,t)=>e.chatId===t.chatId);s()}catch(e){s(e)}})},46357:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>O});var n=a(84051),o=a(13439),r=a(89925),i=a(31481),c=a(60919),d=a(30708),l=a(96454),u=a(87357),m=a(11778),h=a(17663),p=a(57914),g=a(43874),f=a(76786),y=a(77523),I=a(37661),A=a(2178),v=a(39351),b=a(17712),S=a(59030),w=a(90423),C=a(24920),E=a(54746),M=a(99952),x=a(40175),k=a(64493),P=a(22699),T=a(36393),F=a(26607),N=a(20254),B=a(77973),U=a(90452),R=e([v,S,M,x,k,P,T,N,B,U]);[v,S,M,x,k,P,T,N,B,U]=R.then?(await R)():R;const V={date:void 0},J={id:void 0},L=({shouldHideSearch:e,content:t,contactsFilter:a,isClosingSearch:s,searchQuery:c,isLoading:d,isCurrentUserPremium:R,shouldSkipTransition:L,globalSearchChatId:O,currentContent:D,searchDate:G,theme:j,connectionState:q,isSyncing:z,isFetchingDifference:_,isMessageListOpen:K,isConnectionStatusMinimized:H,areChatsLoaded:W,hasPasscode:$,canSetPasscode:X,onSearchQuery:Y,onSelectSettings:Q,onSelectContacts:Z,onSelectArchived:ee,onReset:te,onSelectAIKnowledge:ae,onSelectAITranslate:se})=>{const{setGlobalSearchDate:ne,setSharedSettingOption:oe,setGlobalSearchChatId:re,lockScreen:ie,openSettingsScreen:ce,searchMessagesGlobal:de}=(0,o.ko)(),le=(0,S.A)(),ue=(0,v.A)(),{isMobile:me}=(0,g.Ay)(),[he,pe,ge]=(0,I.A)(),fe=t===r.Bn.Contacts,ye=t===r.Bn.ChatList,Ie=(0,n.Kr)(()=>G?(0,h.A)(new Date(1e3*G)):void 0,[G]),{connectionStatus:Ae,connectionStatusText:ve,connectionStatusPosition:be}=(0,f.A)(le,q,z||_,K,H,!W),Se=(0,b.A)(e=>{e.preventDefault(),e.stopPropagation(),$?ie():ce({screen:r.VS.PasscodeDisabled})});(0,A.v)((0,n.Kr)(()=>X?{"Ctrl+Shift+L":Se,"Alt+Shift+L":Se,"Meta+Shift+L":Se,...l.lE&&{"Mod+L":Se}}:void 0,[X]));const we=(0,n.Kr)(()=>({onTrigger:e,isOpen:t})=>n.Ay.createElement(k.A,{round:!0,ripple:ye&&!me,size:"smaller",color:"translucent",className:t?"active":"",onClick:ye?e:()=>te(),ariaLabel:ye?le("AccDescrOpenMenu2"):"Return to chat list"},n.Ay.createElement("div",{className:(0,u.A)("animated-menu-icon",!ye&&"state-back",L&&"no-animation")})),[ye,me,le,te,L]),Ce=(0,b.A)(()=>{c||Y("")}),Ee=(0,b.A)(()=>{oe({isConnectionStatusMinimized:!H})}),Me=(0,b.A)(()=>{ie()}),xe=(0,b.A)(()=>{c&&t===r.Bn.GlobalSearch&&de({type:"publicPosts",shouldResetResultsByType:!0})}),ke=Boolean(O)||t===r.Bn.GlobalSearch||t===r.Bn.Contacts,Pe=me?!K&&ke:ke;(0,n.vJ)(()=>Pe?(0,m.A)(()=>te()):void 0,[Pe,te]);const Te=t===r.Bn.Contacts?ue("SearchFriends"):ue("Search"),Fe=(i.Cmz||i.Oig,(0,w.zk)()),{shouldDisableDropdownMenuTransitionRef:Ne,handleDropdownMenuTransitionEnd:Be}=(0,C.A)(e),Ue=(0,n.li)();(0,y.A)(Ue);const Re=!(Pe||Ie||O||fe),Ve=(0,n.Kr)(()=>n.Ay.createElement(n.Ay.Fragment,null,Ie&&n.Ay.createElement(M.A,{icon:"calendar",title:Ie,canClose:!0,isMinimized:Boolean(O),className:"left-search-picker-item",onClick:ne,isCloseNonDestructive:!0,clickArg:V}),O&&n.Ay.createElement(M.A,{className:"left-search-picker-item",peerId:O,onClick:re,canClose:!0,isMinimized:!0,clickArg:J})),[O,Ie]),[Je]=JSON.parse(localStorage.getItem(p.d)||'["0.0.0",0]');return n.Ay.createElement("div",{className:"LeftMainHeader"},n.Ay.createElement("div",{id:"LeftMainHeader",className:"left-header",ref:Ue},le.isRtl&&n.Ay.createElement("div",{className:"DropdownMenuFiller"}),n.Ay.createElement(P.A,{trigger:we,footer:`TeleGPT ${Je||""}`,className:(0,u.A)("main-menu",le.isRtl&&"rtl",e&&le.isRtl&&"right-aligned",Ne.current&&le.isRtl&&"disable-transition"),forceOpen:he,positionX:e&&le.isRtl?"right":"left",transformOriginX:l.cp&&l.MP&&!Fe?90:void 0,onTransitionEnd:le.isRtl?Be:void 0},n.Ay.createElement(B.A,{onSelectArchived:ee,onSelectContacts:Z,onSelectSettings:Q,onSelectAIKnowledge:ae,onSelectAITranslate:se,onBotMenuOpened:pe,onBotMenuClosed:ge})),D!==r.$C.AI||ye?n.Ay.createElement(T.A,{inputId:"telegram-search-input",resultsItemSelector:".LeftSearch .ListItem-button",className:(0,u.A)(O||G?"with-picker-item":void 0,e&&"SearchInput--hidden"),value:s?void 0:a||c,focused:Pe,isLoading:d||"minimized"===be,spinnerColor:"minimized"===be?"yellow":void 0,spinnerBackgroundColor:"minimized"===be&&"light"===j?"light":void 0,placeholder:Te,autoComplete:"off",canClose:Boolean(O||G),onChange:Y,onReset:te,onFocus:Ce,onSpinnerClick:"minimized"===be?Ee:void 0,onEnter:xe},Ve,n.Ay.createElement(x.A,{canShow:Re})):n.Ay.createElement("div",{className:"text-[16px] font-semibold flex flex-row justify-center items-center flex-1"},"AI Search"),R&&n.Ay.createElement(U.A,null),$&&n.Ay.createElement(k.A,{round:!0,ripple:!me,size:"smaller",color:"translucent",ariaLabel:`${le("ShortcutsController.Others.LockByPasscode")} (Ctrl+Shift+L)`,onClick:Me,className:(0,u.A)(!R&&"extra-spacing")},n.Ay.createElement(E.A,{name:"lock"})),n.Ay.createElement(F.A,{isOpen:"overlay"===be,isCustom:!0,className:"connection-state-wrapper"},n.Ay.createElement(N.A,{connectionStatus:Ae,connectionStatusText:ve,onClick:Ee}))))},O=(0,n.ph)((0,o.EK)(e=>{const t=(0,c.nTw)(e),{query:a,fetchingStatus:s,chatId:n,minDate:o,currentContent:r}=t.globalSearch,{connectionState:i,isSyncing:l,isFetchingDifference:u}=e,{isConnectionStatusMinimized:m}=(0,d.l)(e);return{searchQuery:a,isLoading:!!s&&Boolean(s.chats||s.messages),globalSearchChatId:n,currentContent:r,searchDate:o,theme:(0,c.SJA)(e),connectionState:i,isSyncing:l,isFetchingDifference:u,isMessageListOpen:Boolean((0,c.Xf0)(e)),isConnectionStatusMinimized:m,isCurrentUserPremium:(0,c.g29)(e),areChatsLoaded:Boolean(e.chats.listIds.active),hasPasscode:Boolean(e.passcode.hasPasscode),canSetPasscode:(0,c.Ntz)(e)}})(L));s()}catch(e){s(e)}})},46407:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"oCUr3DTX",root_withRightColumnAnimation:"YPrc0luK",rootWithRightColumnAnimation:"YPrc0luK"}},46520:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>F});var n=a(84051),o=a(13439),r=a(31481),i=a(90709),c=a(60919),d=a(96454),l=a(87357),u=a(50442),m=a(7971),h=a(31936),p=a(5912),g=a(39351),f=a(17712),y=a(59030),I=a(72067),A=a(44589),v=a(81524),b=a(42827),S=a(37378),w=a(46222),C=a(8410),E=a(57474),M=a(24680),x=a(41036),k=e([m,g,y,A,v,b,S,C,M]);[m,g,y,A,v,b,S,C,M]=k.then?(await k)():k;const P=[{type:"media",key:"ProfileTabMedia"},{type:"documents",key:"ProfileTabFiles"},{type:"links",key:"ProfileTabLinks"}],T=({messagesById:e,foundIds:t,mediaSearchType:a,isChatProtected:s,nextProfileTab:c,isOpen:k,onClose:T})=>{const{setSharedMediaSearchType:F,searchSharedMediaMessages:N}=(0,o.ko)(),B=(0,n.li)(),U=(0,n.li)(),R=(0,y.A)(),V=(0,g.A)(),J=(0,n.Kr)(()=>{const e=[];return e.push(...P),e.map(e=>({type:e.type,title:V(e.key)}))},[V]),L=(0,n.Kr)(()=>{if(!c)return 0;const e=J.findIndex(({type:e})=>e===c);return-1===e?0:e},[c,J]),[O,D]=(0,n.J0)(L);(0,n.vJ)(()=>{if(!c)return;const e=J.findIndex(({type:e})=>e===c);-1!==e&&D(e)},[c,J]);const G=(0,n.hb)(e=>{D(e)},[]),j=O>J.length-1?J.length-1:O,q=J[j].type,z="members"!==q&&a?a:q,_=t,K=(0,f.A)(()=>{N&&N()}),H="media"===z,W=J.findIndex(({type:e})=>e===z),{applyTransitionFix:$,releaseTransitionFix:X}=(0,I.A)(B),[Y,Q]=(0,h.A)(),{observe:Z}=(0,p.BL)({rootRef:B}),ee=(0,f.A)(()=>{X(),Q()});(0,n.vJ)(()=>{F({mediaType:q})},[F,q]);const te=(0,f.A)(t=>{const a=e?.[t];if(a){const{photo:e,document:t,webPage:s,text:n,video:o}=a.content,r=(0,m.Ah)(n?.text);e?(0,m.tg)(a):s||r?(0,m.ur)(a):t?(0,m.mu)(a):o&&(0,m.Al)(a),T()}});if((0,n.vJ)(()=>{if(U.current&&d.TF)return(0,u.wJ)(U.current,{selectorToPreventScroll:".Profile",onSwipe:(e,t)=>t===u.ez.Left?(D(Math.min(j+1,J.length-1)),!0):t===u.ez.Right&&(D(Math.max(0,j-1)),!0)})},[j,J.length]),k)return n.Ay.createElement(C.A,{isOpen:k,onClose:T,className:"room-attachments-modal",title:"Select a file",hasCloseButton:!0},n.Ay.createElement("div",{ref:B,className:"profile-container"},n.Ay.createElement("div",{className:"shared-media"},n.Ay.createElement("div",{className:(0,l.A)("profile-content-wrapper","no-selection")},n.Ay.createElement("div",{className:"shared-media-wrapper"},n.Ay.createElement("div",{className:"shared-media-header"},J.length>1&&n.Ay.createElement(M.A,{tabs:J,activeTab:W,onSwitchTab:G})),n.Ay.createElement(x.Ay,{ref:U,name:"slide",activeKey:W,renderCount:J.length,className:"shared-media-transition",onStart:$,onStop:ee},n.Ay.createElement(w.A,{className:"shared-media-list",items:_,onLoadMore:K,cacheBuster:Y,noScrollRestore:O!==W,noFastList:!0},function(){if(!_||!e){const e=H;return n.Ay.createElement("div",{className:"content empty-list"},!e&&n.Ay.createElement(E.A,null))}if(_&&!_?.length){let e;switch(z){case"documents":e=R("lng_media_file_empty");break;case"links":e=R("lng_media_link_empty");break;default:e=R("SharedMedia.EmptyTitle")}return n.Ay.createElement("div",{className:"content empty-list"},n.Ay.createElement(b.A,{text:e}))}return n.Ay.createElement("div",{className:`content ${z}-list`,dir:R.isRtl&&"media"===z?"rtl":void 0,teactFastList:!0},"media"===z?_.map(t=>e[t]&&n.Ay.createElement(v.A,{key:t,message:e[t],isProtected:s||e[t].isProtected,observeIntersection:Z,onClick:()=>te(t)})):"documents"===z?_.map(t=>e[t]&&n.Ay.createElement(A.A,{key:t,document:(0,i.zC)(e[t]),withDate:!0,smaller:!0,className:"scroll-item",message:e[t],observeIntersection:Z,canAutoLoad:!0,autoLoadFileMaxSizeMb:r.Um,onSelect:()=>te(t)})):"links"===z?_.map(t=>e[t]&&n.Ay.createElement(S.A,{key:t,message:e[t],isProtected:s||e[t].isProtected,onlyWebPage:!0,observeIntersection:Z,onMessageClick:()=>te(t)})):void 0)}())))))))},F=(0,n.ph)((0,o.EK)(e=>{const{chatId:t}=(0,c.Xf0)(e)||{},a=(0,c.hds)(e,t),{currentType:s,resultsByType:n}=(0,c.BU_)(e)||{},{foundIds:o}=n&&s&&n[s]||{},r=(0,c.zeq)(e,t),{nextProfileTab:i}=(0,c.nTw)(e),d=(0,c.gjV)(e);return{chatId:t,messagesById:r,foundIds:o,mediaSearchType:s,chatsById:e.chats.byId,usersById:e.users.byId,userStatusesById:e.users.statusesById,isRightColumnShown:d,isChatProtected:a?.isProtected,nextProfileTab:i}})(T));s()}catch(e){s(e)}})},46576:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>N});var n=a(84051),o=a(13439),r=a(89925),i=a(90709),c=a(60919),d=a(56494),l=a(96454),u=a(87357),m=a(15384),h=a(54464),p=a(35127),g=a(43874),f=a(10722),y=a(5912),I=a(17712),A=a(59030),v=a(21849),b=a(81949),S=a(54746),w=a(93700),C=a(64493),E=a(48906),M=a(51644),x=a(77642),k=a(25477),P=e([m,A,v,w,C,M,k]);[m,A,v,w,C,M,k]=P.then?(await P)():P;const T=200,F=({chatId:e,message:t,containerRef:a,theme:s,observeIntersectionForLoading:c,observeIntersectionForPlaying:d,isDownloading:P,canAutoLoadMedia:F,canAutoPlayMedia:N})=>{const{viewSponsored:B,openUrl:U,hideSponsored:R,clickSponsored:V,openMediaViewer:J,openAboutAdsModal:L}=(0,o.ko)(),O=(0,A.A)(),D=(0,n.li)(),G=(0,n.li)(),j=Boolean(t),{isMobile:q}=(0,g.Ay)(),{observe:z}=(0,y.BL)({rootRef:a,debounceMs:T,threshold:1}),{isContextMenuOpen:_,contextMenuAnchor:K,handleBeforeContextMenu:H,handleContextMenu:W,handleContextMenuClose:$,handleContextMenuHide:X}=(0,f.A)(G,void 0,!0,l.Ni);(0,n.vJ)(()=>j?z(D.current,e=>{e.isIntersecting&&t?.randomId&&B({randomId:t.randomId})}):void 0,[t?.randomId,j,z,B]);const Y=(0,I.A)(()=>{R()}),{photo:Q,video:Z}=t?(0,i.r_)(t):{photo:void 0,video:void 0},ee=Z?.isGif,te=Boolean(Q||Z),ae=(0,I.A)(()=>{t&&(V({randomId:t.randomId,isMedia:!(!Q&&!ee)||void 0}),U({url:t.url,shouldSkipModal:!0}))}),se=(0,I.A)(()=>{t&&(V({randomId:t.randomId,isMedia:!0}),J({origin:r.TQ.SponsoredMessage,chatId:e,isSponsoredMessage:!0}))}),ne=(0,I.A)(()=>{t&&L({randomId:t.randomId,canReport:t.canReport,additionalInfo:t.additionalInfo,sponsorInfo:t.sponsorInfo})}),oe=(0,n.Kr)(()=>{let e,t,a="";if(Q||Z){let a;Q?a=(0,p.yA)({media:Q,isMobile:q}).width:Z&&(a=(0,p.yA)({media:Z,isMobile:q}).width),a&&(a<p.MC&&(t=a),e=Math.max((0,p.nP)(),a))}return e&&(a=`width: ${e+0}px`),{contentWidth:t,noMediaCorners:!1,style:a}},[Q,Z,q]),{contentWidth:re,style:ie}=oe;if(t&&t.content)return n.Ay.createElement("div",{ref:G,key:"sponsored-message",className:"SponsoredMessage Message open sponsored-media-preview"},n.Ay.createElement("div",{className:"message-content media has-shadow has-solid-background has-appendix",dir:"auto",style:ie,onMouseDown:e=>{(0,h.l)(e),H(e)},onContextMenu:W},n.Ay.createElement(w.A,{peerColor:t.peerColor,className:"content-inner",dir:"auto"},function(){if(t)return Q?n.Ay.createElement(M.A,{photo:Q,theme:s,canAutoLoad:F,isDownloading:P,observeIntersection:c,noAvatars:!0,onClick:ae,forcedWidth:re}):Z?n.Ay.createElement(k.A,{video:Z,observeIntersectionForLoading:c,observeIntersectionForPlaying:d,noAvatars:!0,canAutoLoad:F,canAutoPlay:N,isDownloading:P,onClick:ee?ae:se,forcedWidth:re}):void 0}(),t.photo&&n.Ay.createElement(v.A,{size:"large",photo:t.photo,className:(0,u.A)("channel-avatar",O.isRtl&&"is-rtl")}),n.Ay.createElement("span",{className:(0,u.A)("message-title message-type",te&&"has-media")},t.isRecommended?O("Message.RecommendedLabel"):O("SponsoredMessage"),n.Ay.createElement(b.A,{onClick:ne,className:"ad-about"},O("SponsoredMessageAdWhatIsThis"))),function(){if(t)return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"message-title message-peer",dir:"auto"},t.title),Boolean(t.content?.text)&&n.Ay.createElement("div",{className:"text-content with-meta",dir:"auto",ref:D},n.Ay.createElement("span",{className:"text-content-inner",dir:"auto"},(0,m.fd)({text:t.content.text.text,entities:t.content.text.entities}))),n.Ay.createElement(C.A,{className:"SponsoredMessage__button",size:"tiny",color:"translucent",isRectangular:!0,onClick:ae},t.buttonText))}()),n.Ay.createElement(E.A,null),n.Ay.createElement("div",{className:"message-action-buttons"},n.Ay.createElement(C.A,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:O("Close"),onClick:Y},n.Ay.createElement(S.A,{name:"close",className:"sponsored-action-icon"})),t.canReport&&n.Ay.createElement(C.A,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:O("More"),onClick:W,onContextMenu:W},n.Ay.createElement(S.A,{name:"more",className:"sponsored-action-icon"})))),K&&n.Ay.createElement(x.A,{isOpen:_,anchor:K,triggerRef:G,randomId:t.randomId,canReport:t.canReport,sponsorInfo:t.sponsorInfo,additionalInfo:t.additionalInfo,onClose:$,onCloseAnimationEnd:X}))},N=(0,n.ph)((0,o.EK)((e,{chatId:t})=>{const a=(0,c.v8U)(e,t),s=(0,c.yuw)(e),n=a?(0,d.iS)(e,a):void 0,o=n&&(0,i.$r)(s,n);return{message:a,theme:(0,c.SJA)(e),isDownloading:o,canAutoLoadMedia:a?(0,c.wwb)(e,a):void 0,canAutoPlayMedia:a?(0,c.OEt)(e,a):void 0}})(F));s()}catch(e){s(e)}})},46773:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(89925),n=a(31481),o=a(14487),r=a(6e4),i=a(5181),c=a(40485),d=a(80140),l=a(59852),u=a(24021),m=a(90709),h=a(86046),p=a(13439),g=a(17872),f=a(32989),y=a(60919),I=e([r,u]);[r,u]=I.then?(await I)():I;const A=86400;async function v(e,t,a,...[n=(0,o.g0)()]){const r=(0,c.G)({"card[number]":t.cardNumber,"card[exp_month]":t.expiryMonth,"card[exp_year]":t.expiryYear,"card[cvc]":t.cvv,"card[address_zip]":t.zip,"card[address_country]":t.country}),d=await fetch(`https://api.stripe.com/v1/tokens${r}`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${a}`}}),l=await d.json();if(l.error){const t=(0,i.i)(l.error);return e=(0,p.mS)(),e=(0,f.w)(e,{payment:{...(0,y.nTw)(e,n).payment,status:"failed",error:{...t}}},n),void(0,p.UF)(e)}e=(0,p.mS)(),e=(0,g.yQW)(e,{type:l.type,id:l.id},n),e=(0,g.lwH)(e,s.tn.Checkout,n),(0,p.UF)(e)}async function b(e,t,a,...[r=(0,o.g0)()]){const i={card:{number:t.cardNumber.replace(/\D+/g,""),expiration_month:t.expiryMonth,expiration_year:t.expiryYear,security_code:t.cvv.replace(/\D+/g,"")}},c=(0,y.nTw)(e,r).payment.form?.nativeParams.tokenizeUrl;let d;d=n.qKY?"https://tgb-playground.smart-glocal.com/cds/v1/tokenize/card":"https://tgb.smart-glocal.com/cds/v1/tokenize/card",c?.startsWith("https://")&&c.endsWith(".smart-glocal.com/cds/v1/tokenize/card")&&(d=c);const l=await fetch(d,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-PUBLIC-TOKEN":a},body:JSON.stringify(i)}),u=await l.json();if("ok"!==u.status){const t={descriptionKey:{key:"ErrorUnexpected"}};return e=(0,p.mS)(),e=(0,f.w)(e,{payment:{...(0,y.nTw)(e,r).payment,status:"failed",error:{...t}}},r),void(0,p.UF)(e)}e=(0,p.mS)(),e=(0,g.Mac)(e,{type:"card",token:u.data.token},r),e=(0,g.lwH)(e,s.tn.Checkout,r),(0,p.UF)(e)}async function S(e,t,a,n,...[r=(0,o.g0)()]){const i=await(0,u.px)("validateRequestedInfo",{inputInvoice:t,requestInfo:a,shouldSave:n});if(!i)return;const{id:c,shippingOptions:d}=i;e=(0,p.mS)(),e=(0,g.bbG)(e,c,r),d?.length?(e=(0,g.oFy)(e,d,r),e=(0,g.lwH)(e,s.tn.Shipping,r)):e=(0,g.lwH)(e,s.tn.Checkout,r),(0,p.UF)(e)}async function w(e,t,a,...[s=(0,o.g0)()]){const n=(0,p.ko)(),r="stargiftResale"===t.type&&"TON"===t.currency,i=r?e.ton?.balance:e.stars?.balance;if(void 0===i)return;if(i.amount<a)return void n.openStarsBalanceModal({currency:r?"TON":"XTR",tabId:s});const c=(0,h.jA)(e,t);if(!c)return;e=(0,f.w)(e,{isPaymentFormLoading:!0},s),(0,p.UF)(e);const d=(0,l.A)(),m=await(0,u.px)("getPaymentForm",c,d);if(!m)return;if(e=(0,p.mS)(),e=(0,f.w)(e,{isPaymentFormLoading:!1},s),(0,p.UF)(e),"error"in m)return void C(m.error,s);const g=m.invoice.totalAmount;if(g!==a){const e="stargiftResale"===t.type&&"TON"===t.currency;return void n.openPriceConfirmModal({originalAmount:a,newAmount:g,currency:e?"TON":"XTR",directInfo:{inputInvoice:t,formId:m.formId},tabId:s})}n.sendStarPaymentForm({directInfo:{inputInvoice:t,formId:m.formId},tabId:s})}function C(e,t){"SLUG_INVALID"!==e?(0,p.ko)().showDialog({data:{message:e,hasErrorKey:!0},tabId:t}):(0,p.ko)().showNotification({message:{key:"PaymentInvoiceNotFound"},tabId:t})}(0,p.aJ)("validateRequestedInfo",(e,t,a)=>{const{requestInfo:s,saveInfo:n,tabId:r=(0,o.g0)()}=a,i=(0,y.aF2)(e,r);if(!i)return;const c=(0,h.jA)(e,i);c&&S(e,c,s,n,r)}),(0,p.aJ)("openInvoice",async(e,t,a)=>{const{tabId:n=(0,o.g0)(),...r}=a,i=(0,h.jA)(e,r);if(!i)return;e=(0,f.w)(e,{isPaymentFormLoading:!0},n),(0,p.UF)(e);const c=(0,l.A)(),d=await(0,u.px)("getPaymentForm",i,c);if(d){if(e=(0,p.mS)(),e=(0,f.w)(e,{isPaymentFormLoading:!1},n),"error"in d)return(0,p.UF)(e),void C(d.error,n);"regular"===d.type&&(e=(0,g._$X)(e,{inputInvoice:a,form:d,isPaymentModalOpen:!0,isExtendedMedia:a.isExtendedMedia,status:void 0},n),e=(0,g.lwH)(e,s.tn.Checkout,n)),"stars"===d.type&&(e=(0,f.w)(e,{starsPayment:{inputInvoice:r,form:d,status:"pending"}},n)),(0,p.UF)(e)}}),(0,p.aJ)("sendStarGift",(e,t,a)=>{const{gift:s,peerId:n,message:r,shouldHideName:i,shouldUpgrade:c,tabId:d=(0,o.g0)()}=a;w(e,{type:"stargift",peerId:n,giftId:s.id,message:r,shouldHideName:i,shouldUpgrade:c||void 0},s.stars,d)}),(0,p.aJ)("buyStarGift",(e,t,a)=>{const{slug:s,peerId:n,price:r,tabId:i=(0,o.g0)()}=a;w(e,{type:"stargiftResale",slug:s,peerId:n,currency:r.currency},r.amount,i)}),(0,p.aJ)("sendPremiumGiftByStars",(e,t,a)=>{const{userId:s,months:n,amount:r,message:i,tabId:c=(0,o.g0)()}=a;w(e,{type:"premiumGiftStars",userId:s,months:n,message:i},r,c)}),(0,p.aJ)("getReceipt",async(e,t,a)=>{const{chatId:s,messageId:n,tabId:r=(0,o.g0)()}=a,i=s&&(0,y.hds)(e,s);if(!n||!i)return;const c=await(0,u.px)("getReceipt",i,n);c&&(e=(0,p.mS)(),e="stars"===c.receipt.type?(0,g.MeL)(e,c.receipt,r):(0,g.lEm)(e,c.receipt,r),(0,p.UF)(e))}),(0,p.aJ)("clearPaymentError",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};e=(0,f.w)(e,{payment:{...(0,y.nTw)(e,s).payment,error:void 0}},s),(0,p.UF)(e)}),(0,p.aJ)("clearReceipt",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{};return(0,f.w)(e,{payment:{...(0,y.nTw)(e,s).payment,receipt:void 0}},s)}),(0,p.aJ)("sendCredentialsInfo",(e,t,a)=>{const{credentials:s,tabId:n=(0,o.g0)()}=a,{nativeProvider:r}=(0,y.nTw)(e,n).payment.form,{data:i}=s;if("stripe"===r){const t=(0,y.EGt)(e,n);if(!t)return;v(e,i,t,n)}else if("smartglocal"===r){const t=(0,y.Kt9)(e,n);if(!t)return;b(e,i,t,n)}}),(0,p.aJ)("sendPaymentForm",async(e,t,a)=>{const{shippingOptionId:s,saveCredentials:n,savedCredentialId:r,tipAmount:i,tabId:c=(0,o.g0)()}=a,d=(0,y.PGw)(e,c),l=(0,y.nTw)(e,c).payment,{form:m,temporaryPassword:f,inputInvoice:I}=l;if(!I||!m)return;const{nativeProvider:A,formId:v}=m,b=(0,h.jA)(e,I);if(!b)return;e=(0,g._$X)(e,{status:"pending"},c),(0,p.UF)(e);const S={save:n,data:"stripe"===A?(0,y.e7$)(e,c):(0,y.G4m)(e,c)};await(0,u.px)("sendPaymentForm",{inputInvoice:b,formId:v,credentials:S,requestedInfoId:d,shippingOptionId:s,savedCredentialId:r,temporaryPassword:f?.value,tipAmount:i})&&(e=(0,p.mS)(),e=(0,g._$X)(e,{status:"paid"},c),e=(0,g.cYc)(e,c),(0,p.UF)(e),t.apiUpdate({"@type":"updatePaymentStateCompleted",paymentState:l,tabId:c}))}),(0,p.aJ)("sendStarPaymentForm",async(e,t,a)=>{const{directInfo:s,tabId:n=(0,o.g0)()}=a,r=(0,y.Osl)(e,n),i=r?.inputInvoice||s?.inputInvoice;if(!i)return;const c=(0,h.jA)(e,i);if(!c)return;const d=r.form?.formId||r.subscriptionInfo?.subscriptionFormId||s?.formId;e=(0,g.nv6)(e,{status:"pending"},n),(0,p.UF)(e);const l=await(0,u.px)("sendStarPaymentForm",{inputInvoice:c,formId:d});if(!l)return e=(0,p.mS)(),e=(0,g.nv6)(e,{status:"failed"},n),(0,p.UF)(e),t.closeStarsPaymentModal({tabId:n}),void t.closeGiftModal({tabId:n});e=(0,p.mS)(),e=(0,g.nv6)(e,{status:"paid"},n),(0,p.UF)(e),t.closeStarsPaymentModal({tabId:n}),"channelId"in l&&t.openChat({id:l.channelId,tabId:n}),t.apiUpdate({"@type":"updateStarPaymentStateCompleted",paymentState:s?{inputInvoice:i}:r,tabId:n}),t.loadStarStatus()}),(0,p.aJ)("setSmartGlocalCardInfo",(e,t,a)=>{const{tabId:s=(0,o.g0)(),type:n,token:r}=a;return(0,g.Mac)(e,{type:n,token:r},s)}),(0,p.aJ)("setPaymentStep",(e,t,a)=>{const{step:n,tabId:r=(0,o.g0)()}=a;return(0,g.lwH)(e,n??s.tn.Checkout,r)}),(0,p.aJ)("closePremiumModal",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{},n=(0,y.nTw)(e,s);if(n.premiumModal)return(0,f.w)(e,{premiumModal:{promo:n.premiumModal.promo,isOpen:!1}},s)}),(0,p.aJ)("openPremiumModal",async(e,t,a)=>{const{initialSection:s,fromUserId:n,isSuccess:r,isGift:i,monthsAmount:c,toUserId:d,gift:l,tabId:m=(0,o.g0)()}=a||{};t.loadPremiumStickers();const h=await(0,u.px)("fetchPremiumPromo");h&&(e=(0,p.mS)(),e=(0,f.w)(e,{premiumModal:{promo:h.promo,initialSection:s,isOpen:!0,fromUserId:n,toUserId:d,isGift:i,monthsAmount:c,isSuccess:r,gift:l}},m),(0,p.UF)(e),t.closeReactionPicker({tabId:m}))}),(0,p.aJ)("openGiveawayModal",async(e,t,a)=>{const{chatId:s,prepaidGiveaway:n,tabId:r=(0,o.g0)()}=a,i=(0,y.hds)(e,s);if(!i)return;const c=await(0,u.px)("getPremiumGiftCodeOptions",{chat:i}),d=await(0,u.px)("fetchStarsGiveawayOptions");c&&d&&(e=(0,p.mS)(),e=(0,f.w)(e,{giveawayModal:{chatId:s,gifts:c,isOpen:!0,prepaidGiveaway:n,starOptions:d}},r),(0,p.UF)(e))}),(0,p.aJ)("openGiftModal",async(e,t,a)=>{const{forUserId:s,tabId:n=(0,o.g0)()}=a;if((0,y.trm)(e))return void t.openFrozenAccountModal({tabId:n});const r=await(0,u.px)("getPremiumGiftCodeOptions",{});r&&(e=(0,p.mS)(),e=(0,f.w)(e,{giftModal:{forPeerId:s,gifts:r}},n),(0,p.UF)(e))}),(0,p.aJ)("openStarsGiftModal",async(e,t,a)=>{const{forUserId:s,tabId:n=(0,o.g0)()}=a||{};if((0,y.trm)(e))return void t.openFrozenAccountModal({tabId:n});const r=await(0,u.px)("getStarsGiftOptions",{});e=(0,p.mS)(),e=(0,f.w)(e,{starsGiftModal:{isOpen:!0,forUserId:s,starsGiftOptions:r}},n),(0,p.UF)(e)}),(0,p.aJ)("validatePaymentPassword",async(e,t,a)=>{const{password:n,tabId:r=(0,o.g0)()}=a,i=await(0,u.px)("fetchTemporaryPaymentPassword",n);e=(0,p.mS)(),e=i?"error"in i?(0,g._$X)(e,{error:{messageKey:i.messageKey,field:"password"}},r):(0,g._$X)(e,{temporaryPassword:i,step:s.tn.Checkout},r):(0,g._$X)(e,{error:{messageKey:{key:"ErrorUnexpected"},field:"password"}},r),(0,p.UF)(e)}),(0,p.aJ)("openBoostModal",async(e,t,a)=>{const{chatId:s,tabId:n=(0,o.g0)()}=a,r=(0,y.hds)(e,s);if(!r||!(0,m.WX)(r)&&!(0,m.Vs)(r))return;e=(0,f.w)(e,{boostModal:{chatId:s}},n),(0,p.UF)(e);const i=await(0,u.px)("fetchBoostStatus",{chat:r});if(!i)return void t.closeBoostModal({tabId:n});e=(0,p.mS)(),e=(0,f.w)(e,{boostModal:{chatId:s,boostStatus:i}},n),(0,p.UF)(e);const c=await(0,u.px)("fetchMyBoosts");if(!c)return;e=(0,p.mS)();const d=(0,y.nTw)(e,n);d.boostModal&&(e=(0,f.w)(e,{boostModal:{...d.boostModal,myBoosts:c.boosts}},n),(0,p.UF)(e))}),(0,p.aJ)("openBoostStatistics",async(e,t,a)=>{const{chatId:s,tabId:n=(0,o.g0)()}=a,r=(0,y.hds)(e,s);if(!r)return;e=(0,f.w)(e,{boostStatistics:{chatId:s}},n),(0,p.UF)(e);const[i,c,d]=await Promise.all([(0,u.px)("fetchBoostList",{chat:r}),(0,u.px)("fetchBoostList",{chat:r,isGifts:!0}),(0,u.px)("fetchBoostStatus",{chat:r})]);if(e=(0,p.mS)(),!i||!c||!d)return e=(0,f.w)(e,{boostStatistics:void 0},n),void(0,p.UF)(e);e=(0,f.w)(e,{boostStatistics:{chatId:s,boostStatus:d,nextOffset:i.nextOffset,boosts:{count:i.count,list:i.boostList},giftedBoosts:{count:c?.count,list:c?.boostList}}},n),(0,p.UF)(e)}),(0,p.aJ)("openMonetizationStatistics",(e,t,a)=>{const{chatId:s,tabId:n=(0,o.g0)()}=a;(0,y.hds)(e,s)&&(e=(0,f.w)(e,{monetizationStatistics:{chatId:s}},n),(0,p.UF)(e))}),(0,p.aJ)("loadMoreBoosters",async(e,t,a)=>{const{isGifts:s,tabId:n=(0,o.g0)()}=a||{};let r=(0,y.nTw)(e,n);if(!r.boostStatistics)return;const i=(0,y.hds)(e,r.boostStatistics.chatId);if(!i)return;e=(0,f.w)(e,{boostStatistics:{...r.boostStatistics,isLoadingBoosters:!0}},n),(0,p.UF)(e);const c=await(0,u.px)("fetchBoostList",{chat:i,offset:r.boostStatistics.nextOffset,isGifts:s});if(!c)return;if(e=(0,p.mS)(),r=(0,y.nTw)(e,n),!r.boostStatistics)return;const d=(s?r.boostStatistics.giftedBoosts?.list||[]:r.boostStatistics.boosts?.list||[]).concat(c.boostList);e=(0,f.w)(e,{boostStatistics:{...r.boostStatistics,nextOffset:c.nextOffset,isLoadingBoosters:!1,[s?"giftedBoosts":"boosts"]:{count:c.count,list:d}}},n),(0,p.UF)(e)}),(0,p.aJ)("applyBoost",async(e,t,a)=>{const{chatId:s,slots:n,tabId:r=(0,o.g0)()}=a,i=(0,y.hds)(e,s);if(!i)return;const c=(0,y.AWZ)(e,s),l=c?.boostsApplied||0,m=n.length;let h=(0,y.nTw)(e,r);const I=h.boostModal?.boostStatus;if(I){const t=I.nextLevelBoosts?I.nextLevelBoosts-I.currentLevelBoosts:1,a=I.boosts+m,s=I.nextLevelBoosts&&a>=I.nextLevelBoosts,n=s?I.nextLevelBoosts:I.currentLevelBoosts,o=s?I.nextLevelBoosts+t:I.nextLevelBoosts;e=(0,f.w)(e,{boostModal:{...h.boostModal,boostStatus:{...I,level:s?I.level+1:I.level,currentLevelBoosts:n,nextLevelBoosts:o,hasMyBoost:!0,boosts:a}}},r),(0,p.UF)(e)}e=(0,p.mS)(),h=(0,y.nTw)(e,r);const v=h.boostModal?.myBoosts;if(v){const t=(0,d.Fm)(),a=v.map(e=>n.includes(e.slot)?{...e,chatId:s,date:t,cooldownUntil:t+A}:e);e=(0,f.w)(e,{boostModal:{...h.boostModal,myBoosts:a}},r),(0,p.UF)(e)}const b=await(0,u.px)("applyBoost",{slots:n,chat:i});if(e=(0,p.mS)(),!b){const t=(0,y.nTw)(e,r).boostModal;return void(t&&(e=(0,f.w)(e,{boostModal:{...t,boostStatus:I,myBoosts:v}},r),(0,p.UF)(e)))}h=(0,y.nTw)(e,r),c&&(e=(0,g.ltr)(e,s,{boostsApplied:l+n.length})),h.boostModal&&(e=(0,f.w)(e,{boostModal:{...h.boostModal,myBoosts:b.boosts}},r)),(0,p.UF)(e)}),(0,p.aJ)("checkGiftCode",async(e,t,a)=>{const{slug:s,message:n,tabId:i=(0,o.g0)()}=a,c=await(0,u.px)("checkGiftCode",{slug:s});c?(e=(0,p.mS)(),e=(0,f.w)(e,{giftCodeModal:{slug:s,info:c.code,message:n}},i),(0,p.UF)(e)):t.showNotification({message:r.yE("lng_gift_link_expired"),tabId:i})}),(0,p.aJ)("applyGiftCode",async(e,t,a)=>{const{slug:s,tabId:n=(0,o.g0)()}=a;await(0,u.px)("applyGiftCode",{slug:s})&&(t.requestConfetti({withStars:!0,tabId:n}),t.closeGiftCodeModal({tabId:n}))}),(0,p.aJ)("launchPrepaidGiveaway",async(e,t,a)=>{const{chatId:s,giveawayId:n,paymentPurpose:r,tabId:i=(0,o.g0)()}=a,c=(0,y.hds)(e,s);if(!c)return;const d=r?.additionalChannelIds?.map(t=>(0,y.hds)(e,t)).filter(Boolean);await(0,u.px)("launchPrepaidGiveaway",{chat:c,giveawayId:n,paymentPurpose:{type:"giveaway",chat:c,areWinnersVisible:r?.areWinnersVisible,additionalChannels:d,countries:r?.countries,prizeDescription:r.prizeDescription,untilDate:r.untilDate,currency:r.currency,amount:r.amount}})&&t.openBoostStatistics({chatId:s,tabId:i})}),(0,p.aJ)("launchPrepaidStarsGiveaway",async(e,t,a)=>{const{chatId:s,giveawayId:n,paymentPurpose:r,tabId:i=(0,o.g0)()}=a,c=(0,y.hds)(e,s);if(!c)return;const d=r?.additionalChannelIds?.map(t=>(0,y.hds)(e,t)).filter(Boolean);await(0,u.px)("launchPrepaidGiveaway",{chat:c,giveawayId:n,paymentPurpose:{type:"starsgiveaway",chat:c,areWinnersVisible:r?.areWinnersVisible,additionalChannels:d,countries:r?.countries,prizeDescription:r.prizeDescription,untilDate:r.untilDate,currency:r.currency,amount:r.amount,stars:r.stars,users:r.users}})&&t.openBoostStatistics({chatId:s,tabId:i})}),(0,p.aJ)("upgradeGift",(e,t,a)=>{const{gift:s,shouldKeepOriginalDetails:n,upgradeStars:r,tabId:i=(0,o.g0)()}=a,c=(0,h.HT)(e,s);c&&(e=(0,f.w)(e,{isWaitingForStarGiftUpgrade:!0},i),(0,p.UF)(e),e=(0,p.mS)(),t.closeGiftUpgradeModal({tabId:i}),t.closeGiftInfoModal({tabId:i}),r?w(e,{type:"stargiftUpgrade",inputSavedGift:s,shouldKeepOriginalDetails:n||void 0},r,i):(0,u.px)("upgradeStarGift",{inputSavedGift:c,shouldKeepOriginalDetails:n||void 0}))}),(0,p.aJ)("transferGift",(e,t,a)=>{const{gift:s,recipientId:n,transferStars:r,tabId:i=(0,o.g0)()}=a,c=(0,y.hds)(e,n),d=(0,h.HT)(e,s);c&&d&&(e=(0,f.w)(e,{isWaitingForStarGiftTransfer:!0},i),(0,p.UF)(e),e=(0,p.mS)(),t.closeGiftTransferModal({tabId:i}),t.closeGiftInfoModal({tabId:i}),r?w(e,{type:"stargiftTransfer",inputSavedGift:s,recipientId:n},r,i):(0,u.px)("transferStarGift",{inputSavedGift:d,toPeer:c}))}),(0,p.aJ)("openUniqueGiftBySlug",async(e,t,a)=>{const{slug:s,tabId:n=(0,o.g0)()}=a,r=await(0,u.px)("fetchUniqueStarGift",{slug:s});r?t.openGiftInfoModal({gift:r,tabId:n}):t.showNotification({message:{key:"GiftWasNotFound"},tabId:n})}),(0,p.aJ)("processStarGiftWithdrawal",async(e,t,a)=>{const{gift:s,password:n,tabId:r=(0,o.g0)()}=a;let i=(0,y.nTw)(e,r).giftWithdrawModal;if(!i)return;e=(0,f.w)(e,{giftWithdrawModal:{...i,isLoading:!0,errorKey:void 0}},r),(0,p.UF)(e);const c=(0,h.HT)(e,s);if(!c)return;const d=await(0,u.px)("fetchStarGiftWithdrawalUrl",{inputGift:c,password:n});if(d&&(e=(0,p.mS)(),i=(0,y.nTw)(e,r).giftWithdrawModal,i)){if("error"in d)return e=(0,f.w)(e,{giftWithdrawModal:{...i,isLoading:!1,errorKey:d.messageKey}},r),void(0,p.UF)(e);t.openUrl({url:d.url,shouldSkipModal:!0,tabId:r}),t.closeGiftWithdrawModal({tabId:r})}}),t()}catch(E){t(E)}})},47130:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{activeEmojiInteraction:t}=e,a=(0,o.A)(n.ar.Extra,"EmojiInteractionAnimation",!t);return a?s.Ay.createElement(a,e):void 0}},47387:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"xqcWnBH4",message:"CJhqoyif",messageStars:"sZR8zqEk",messageStarIcon:"AKXOpk8S"}},47467:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(84051),n=a(89925),o=a(81954),r=a(37836),i=a(82117),c=a(17712);const d=300,l=350,u=(0,r.nF)(e=>e(),250,!1);let m=!1;function h(e,t,a,r,h=!1,g=!1,f){(0,i.A)(([a])=>{if(a&&a!==t&&g||t&&h){const a=e.current,s=a.querySelector(".TabList");f(),a.scrollTop<s.offsetTop&&(r(p(t)),m=!0,(0,o.Ay)({container:a,element:s,position:"start",forceDuration:d}),setTimeout(()=>{m=!1},l))}},[t,r,e,h,g,f]),(0,i.A)(([t])=>{if(a!==n.zW.Profile||a===t)return;const s=e.current;if(!s)return;const r=s.querySelector(".TabList");!r||r.offsetTop>s.scrollTop||(m=!0,(0,o.Ay)({container:s,element:s.firstElementChild,position:"start",maxDistance:2*s.offsetHeight}),setTimeout(()=>{m=!1},l))},[a,e]);const y=(0,c.A)(()=>{const a=e.current;if(!a)return;const s=a.querySelector(".TabList");if(!s)return;let o=n.zW.Profile;Math.ceil(a.scrollTop)>=s.offsetTop&&(o=p(t)),r(o)});return(0,s.vJ)(()=>{m||y()},[y,t]),{handleScroll:(0,c.A)(()=>{m||u(y)})}}function p(e){switch(e){case"members":return n.zW.MemberList;case"gifts":return n.zW.GiftList;case"stories":return n.zW.StoryList;case"dialogs":return n.zW.SavedDialogs;default:return n.zW.SharedMedia}}},47934:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>_});var n=a(84051),o=a(13439),r=a(23174),i=a(90709),c=a(70636),d=a(60919),l=a(96454),u=a(87357),m=a(67054),h=a(76023),p=a(4961),g=a(85449),f=a(35749),y=a(2338),I=a(14),A=a(19129),v=a(49746),b=a(11217),S=a(37661),w=a(39351),C=a(17712),E=a(62587),M=a(34201),x=a(93809),k=a(48885),P=a(4421),T=a(54746),F=a(46256),N=a(18653),B=a(64493),U=a(94189),R=a(42452),V=a(57474),J=a(41036),L=a(12654),O=a(33900),D=e([c,w,E,P,F,N,B,U]);[c,w,E,P,F,N,B,U]=D.then?(await D)():D;const G=256,j=450,q=1.125*h.$,z=({chatId:e,threadId:t,canUnpin:a,getLoadingPinnedId:s,pinnedMessageIds:d,messagesById:D,isFullWidth:z,topMessageSender:_,getCurrentPinnedIndex:K,className:H,chat:W,isSynced:$,shouldHide:X,onPaneStateChange:Y,onFocusPinnedMessage:Q})=>{const{clickBotInlineButton:Z,focusMessage:ee,openThread:te,pinMessage:ae,loadPinnedMessages:se}=(0,o.ko)(),ne=(0,w.A)(),oe=(0,A.A)(K),re=Array.isArray(d)?d[oe]:d,ie=D&&re?D[re]:void 0,ce=Array.isArray(d)?d.length:d?1:0,de=Math.max(ce-oe,1),le=_?(0,c.F9)(ne,_):void 0,ue=ie&&(0,i.zX)(ie),me=ue?.isGif?ue:void 0,he=Boolean(me&&!me.previewPhotoSizes?.length),pe=(0,y.A)(ie),ge=(0,f.A)(ie,he?"full":"pictogram"),fe=(0,E.A)(ge),ye=ie&&(0,i.y2)(ie),Ie=Boolean((0,A.A)(s)),Ae=(0,x.A)([Ie],j)&&Ie,ve=(0,I.A)(ie,!0);(0,n.vJ)(()=>{$&&(t===r.l3||W?.isForum)&&se({chatId:e,threadId:t})},[e,t,$,W?.isForum]),(0,v.A)(e,re,ie);const be=Boolean(ie)&&!X,{ref:Se}=(0,M.A)({isOpen:be,noOpenTransition:!0,shouldForceOpen:z}),{ref:we,shouldRender:Ce}=(0,k.A)({isOpen:be,isDisabled:!z,ref:Se,onStateChange:Y}),[Ee,Me,xe]=(0,S.A)(),ke=(0,C.A)(()=>{xe(),ae({chatId:e,messageId:ie.id,isUnpin:!0})}),Pe=ie&&(0,i.rK)(ie),Te=(0,C.A)(()=>{Pe&&Z({chatId:ie.chatId,messageId:ie.id,button:Pe})}),Fe=(0,C.A)(()=>{te({chatId:e,threadId:t,type:"pinned"})}),Ne=(0,C.A)(a=>{const n=a.shiftKey&&Array.isArray(d)?d[(0,m.A)(d.length,d.indexOf(re)-2)]:re;s()||(ee({chatId:e,threadId:t,messageId:n,noForumTopicPanel:!0}),Q(n))}),[Be,Ue,Re]=(0,S.A)(),{handleClick:Ve,handleMouseDown:Je}=(0,b.Q)(Ne);if(Ce&&ve)return n.Ay.createElement("div",{ref:we,className:(0,u.A)("HeaderPinnedMessageWrapper",O.A.root,z?O.A.fullWidth:O.A.mini,H)},(ce>1||Ae)&&n.Ay.createElement(B.A,{round:!0,size:"smaller",color:"translucent",ariaLabel:ne("EventLogFilterPinnedMessages"),onClick:Ae?void 0:Fe},Ie&&n.Ay.createElement(V.A,{color:"blue",className:(0,u.A)(O.A.loading,O.A.pinListIcon,!Ae&&O.A.pinListIconHidden)}),n.Ay.createElement(T.A,{name:"pin-list",className:(0,u.A)(O.A.pinListIcon,Ae&&O.A.pinListIconHidden)})),a&&n.Ay.createElement(B.A,{round:!0,size:"smaller",color:"translucent",ariaLabel:ne("UnpinMessageAlertTitle"),onClick:Me},n.Ay.createElement(T.A,{name:"close"})),n.Ay.createElement(U.A,{isOpen:Ee,onClose:xe,text:ne("PinnedConfirmUnpin"),confirmLabel:ne("DialogUnpin"),confirmHandler:ke}),n.Ay.createElement("div",{className:(0,u.A)(O.A.pinnedMessage,Be&&O.A.noHover),onClick:Ve,onMouseDown:Je,dir:ne.isRtl?"rtl":void 0},n.Ay.createElement(L.A,{count:ce,index:oe}),n.Ay.createElement(J.Ay,{activeKey:ve.id,name:"slideVertical",className:O.A.pictogramTransition},function(e,t,a,s){const{width:o,height:r}=(0,h.mr)(),i=t||e,c=a&&t;return n.Ay.createElement("div",{className:O.A.pinnedThumb},e&&!s&&!c&&n.Ay.createElement("img",{className:O.A.pinnedThumbImage,src:i,width:o,height:r,alt:"",draggable:!1}),c&&!s&&n.Ay.createElement("video",{src:t,width:o,height:r,playsInline:!0,disablePictureInPicture:!0,className:O.A.pinnedThumbImage}),e&&n.Ay.createElement(F.A,{thumbDataUri:i,isVisible:Boolean(s),width:o,height:r}))}(pe,fe,he,ye)),n.Ay.createElement("div",{className:(0,u.A)(O.A.messageText,pe&&O.A.withMedia),dir:ne.isRtl?"rtl":void 0},n.Ay.createElement("div",{className:O.A.title,dir:ne.isRtl?"rtl":void 0},!le&&n.Ay.createElement(P.A,{text:1===ce?ne("PinnedMessageTitleSingle"):ne("PinnedMessageTitle",{index:de},{pluralValue:ce})}),le&&(0,p.A)(le)),n.Ay.createElement(J.Ay,{activeKey:ve.id,name:"slideVerticalFade",className:O.A.messageTextTransition},n.Ay.createElement("p",{dir:"auto",className:O.A.summary},n.Ay.createElement(N.A,{message:ve,truncateLength:G,noEmoji:Boolean(pe),emojiSize:q})))),n.Ay.createElement(R.A,null),Pe&&n.Ay.createElement(B.A,{size:"tiny",className:O.A.inlineButton,onClick:Te,shouldStopPropagation:!0,onMouseEnter:l.TF?void 0:Ue,onMouseLeave:l.TF?void 0:Re},(0,g.A)(ne,Pe))))},_=(0,n.ph)((0,o.EK)((e,{chatId:t,threadId:a,messageListType:s})=>{const n=(0,d.hds)(e,t),o=e.isSynced,c=(0,i.cG)(t,a,e.currentUserId),l=(0,d.zeq)(e,t),u={chat:n,isSynced:o};if("thread"!==s||!l)return u;if(a!==r.l3&&!c&&!n?.isForum){const s=Number(a),n=s?(0,d.O5q)(e,t,s):void 0,o=n?(0,d.Szq)(e,n):void 0;return{...u,pinnedMessageIds:s,messagesById:l,canUnpin:!1,topMessageSender:o}}const m=c?void 0:(0,d.fcC)(e,t,a);if(m?.length){const t=l[m[0]],{canUnpin:s=!1}=t&&1===m.length&&(0,d.WAX)(e,t,a)||{};return{...u,pinnedMessageIds:m,messagesById:l,canUnpin:s}}return u})(z));s()}catch(e){s(e)}})},48343:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>m});var n=a(84051),o=a(26120),r=a(49763),i=a(14242),c=a(74984),d=a(39351),l=e([c,d]);[c,d]=l.then?(await l)():l;const u=({isForAppBadge:e})=>{(0,c.ic)();const t=(0,r.vp)(),a=(0,d.A)();if((0,n.vJ)(()=>{e&&(0,o.q)(t)},[e,t]),!e&&t)return n.Ay.createElement("div",{className:"unread-count active"},(0,i.Vw)(a,t))},m=(0,n.ph)(u);s()}catch(e){s(e)}})},49401:(e,t,a)=>{a.d(t,{A:()=>I});var s=a(84051),n=a(13439),o=a(89925),r=a(66644),i=a(96454),c=a(37836),d=a(63988),l=a(5912),u=a(17712),m=a(5718),h=a(35297);const p=50,g=1,f=200,y=350;function I(e,t,a,I,A,v,b,S,w){const{loadViewportMessages:C}=(0,n.ko)(),[E,M]=(0,s.Kr)(()=>"thread"===e?[(0,c.sg)(()=>C({direction:o.TN.Backwards}),1e3,!0,!1),(0,c.sg)(()=>C({direction:o.TN.Forwards}),1e3,!0,!1)]:[],[C,a]),x=(0,s.li)(),k=(0,s.li)(),P=(0,s.li)(),T=(0,u.A)(()=>{if(!w)return;if(!a?.length)return b(!1),void S(!1);if(!A)return b(!0),void S(!0);const e=t.current,s=P.current;if(!e||!s)return;const{offsetHeight:n,scrollHeight:o,scrollTop:r}=e,i=s.offsetTop,c=Math.round(i-r-n),d=c<=g;0!==o&&(b(v?!d:!(c<=p)),S(!d))}),{observe:F}=(0,l.BL)({rootRef:t,margin:i.et},e=>{M&&E&&e.forEach(({isIntersecting:e,target:t})=>{e&&("backwards-trigger"===t.className&&E(),"forwards-trigger"===t.className&&M())})}),N=a&&a.length>1;(0,l.mv)(x,N?F:void 0),(0,l.mv)(k,N?F:void 0);const{observe:B,freeze:U,unfreeze:R}=(0,l.BL)({rootRef:t,margin:2*p,throttleScheduler:r.YS},T);(0,l.mv)(P,B);const{observe:V,freeze:J,unfreeze:L}=(0,l.BL)({rootRef:t,margin:g,throttleScheduler:r.YS},T);(0,l.mv)(P,V),(0,s.vJ)(()=>{w&&T()},[w,T]);const O=(0,u.A)(()=>{U(),J(),setTimeout(()=>{L(),R()},y)});(0,h.A)(O,[O,a]);const D=(0,d.D7)(I,f);return(0,m.R)(O,[O,D]),{withHistoryTriggers:N,backwardsTriggerRef:x,forwardsTriggerRef:k,fabTriggerRef:P}}},49667:(e,t,a)=>{a.d(t,{A:()=>s});const s={background:"C6IaXYew",customBgImage:"K1xhz7U5",customBgColor:"CwoXMwaR",withTransition:"nXhZtCma",draggable:"jMpPshUt",blurred:"JBrOVLsX",withRightColumn:"Lyw3O8XE"}},50503:(e,t,a)=>{a.d(t,{A:()=>y});var s=a(84051),n=a(13439),o=a(66644),r=a(60919),i=a(95807),c=a(87894),d=a(43874),l=a(30857),u=a(17712),m=a(35297),h=a(39751);const p={root:"YUAfqWPN"},g=["#E8BC2C","#D0049E","#02CBFE","#5723FD","#FE8C27","#6CB859"],f=new Path2D("M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z"),y=(0,s.ph)((0,n.EK)(e=>(0,c.Up)((0,r.nTw)(e),["confetti"]))(({confetti:e})=>{const t=(0,s.li)(),a=(0,s.li)([]),n=(0,s.li)(!1),r=(0,h.A)(),c=(0,l.A)(),{isMobile:y}=(0,d.Ay)(),v=y?50:100,{lastConfettiTime:b,top:S,width:w,left:C,height:E,style:M="poppers"}=e||{},x=(0,u.A)((t,s,n=v)=>{for(let o=0;o<n;o++){const{position:n,velocity:r}=I(M,t,s,o),i=10+A(5),c=g[Math.floor(Math.random()*g.length)];a.current.push({pos:n,size:i,color:c,velocity:r,flicker:i,flickerFrequency:.2*Math.random(),rotation:0,lastDrawnAt:Date.now(),frameCount:0,isStar:e?.withStars&&Math.random()>.8})}}),k=(0,u.A)(()=>{if(!t.current||!n.current)return;const e=t.current,s=e.getContext("2d");if(!s)return;const{width:r,height:i}=e;s.clearRect(0,0,r,i);const c=[];a.current.forEach((e,t)=>{const{pos:n,velocity:o,size:r,color:d,flicker:l,flickerFrequency:u,rotation:m,lastDrawnAt:h,frameCount:p}=e,g=(Date.now()-h)/1e3,y={x:n.x+o.x*g,y:n.y+o.y*g},I={x:o.x*.5**(g/1),y:o.y+=1e3*g},A=r*Math.abs(Math.sin(p*u)),v=5*p*u*(Math.PI/180),b=p+1,S=Date.now();if(y.y>i+e.size)return void c.push(e);const w={...e,pos:y,velocity:I,flicker:A,rotation:v,lastDrawnAt:S,frameCount:b};a.current[t]=w,s.fillStyle=d,e.isStar?(s.save(),s.translate(n.x,n.y),s.scale(r/10*1.5,r/10*1.5),s.rotate(m),s.fill(f),s.restore()):(s.beginPath(),s.ellipse(n.x,n.y,r,l,m,0,2*Math.PI),s.fill())}),a.current=a.current.filter(e=>!c.includes(e)),a.current.length?(0,o.YS)(k):n.current=!1});if((0,m.A)(([e])=>{let t;return e!==b&&(x(w||r.width,E||r.height),t=setTimeout(c,1e4),n.current||(n.current=!0,(0,o.YS)(k))),()=>{clearTimeout(t)}},[b,c,k]),!b||Date.now()-b>1e4)return;const P=(0,i.A)(Boolean(S)&&`top: ${S}px`,Boolean(C)&&`left: ${C}px`,Boolean(w)&&`width: ${w}px`,Boolean(E)&&`height: ${E}px`);return s.Ay.createElement("div",{id:"Confetti",className:p.root,style:P},s.Ay.createElement("canvas",{ref:t,className:p.canvas,width:r.width,height:r.height}))}));function I(e,t,a,s){if("poppers"===e){const e=s%2,n={x:t*(e?-.1:1.1),y:.66*a},o=Math.random()*t;return{position:n,velocity:{x:e?o:-1*o,y:-a-A(.75*a)}}}return{position:{x:Math.random()*t,y:-20},velocity:{x:A(t),y:-a*Math.random()*1.25}}}function A(e=1){return Math.random()*e-e/2}},50616:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(89925),n=a(31481),o=a(9716),r=a(14487),i=a(87894),c=a(6e4),d=a(37836),l=a(80140),u=a(24021),m=a(90709),h=a(77787),p=a(13439),g=a(17872),f=a(32989),y=a(60919),I=e([c,u]);[c,u]=I.then?(await I)():I;const A=10,v=60,b=(0,d.nF)(e=>e(),500,!1);(0,p.aJ)("loadFullUser",async(e,t,a)=>{const{userId:s,withPhotos:n}=a,o=(0,y.mBe)(e,s);if(!o)return;const{id:r,accessHash:c}=o,d=await(0,u.px)("fetchFullUser",{id:r,accessHash:c});if(!d?.user)return;e=(0,p.mS)();const l=(0,y.vGo)(e,s),{user:m,fullInfo:h}=d,f=(0,y.IVq)(e,s),I=o.avatarPhotoId!==m.avatarPhotoId||l?.profilePhoto?.id!==h?.profilePhoto?.id||l?.fallbackPhoto?.id!==h?.fallbackPhoto?.id||l?.personalPhoto?.id!==h?.personalPhoto?.id;e=(0,g.TKu)(e,s,d.user),e=(0,g.weB)(e,s,d.fullInfo),e=(0,g.CKT)(e,(0,i.dU)(d.users,"id")),e=(0,g.h7P)(e,(0,i.dU)(d.chats,"id")),(0,p.UF)(e),(n||f?.count&&I)&&t.loadMoreProfilePhotos({peerId:s,shouldInvalidateCache:!0})}),(0,p.aJ)("loadUser",async(e,t,a)=>{const{userId:s}=a,n=(0,y.mBe)(e,s);if(!n)return;const o=await(0,u.px)("fetchUsers",{users:[n]});if(!o)return;const{users:r,userStatusesById:c}=o;e=(0,p.mS)(),e=(0,g.CKT)(e,(0,i.dU)(r,"id")),e=(0,g.wWy)(e,{...e.users.statusesById,...c}),(0,p.UF)(e)}),(0,p.aJ)("loadTopUsers",async e=>{const{topPeers:{lastRequestedAt:t}}=e;if(t&&!((0,l.Fm)()-t>v))return;const a=await(0,u.px)("fetchTopUsers");if(!a)return;const{ids:s}=a;e=(0,p.mS)(),e={...e,topPeers:{...e.topPeers,userIds:s,lastRequestedAt:(0,l.Fm)()}},(0,p.UF)(e)}),(0,p.aJ)("loadContactList",async e=>{const t=await(0,u.px)("fetchContactList");if(!t)return;e=(0,p.mS)(),e=(0,g.d2X)(e,t.userStatusesById);const a=e=>e.lastName||e.firstName||"",s=new Intl.Collator("en-US"),n=t.users.sort((e,t)=>s.compare(a(e),a(t))).filter(e=>!e.isSelf);n.forEach(e=>{h.zs.contact?.addContact({id:e.id,name:`${e?.firstName||""} ${e?.lastName||""}`,phoneNumber:e.phoneNumber}),h.zs.user?.addUser({id:e.id,name:`${e?.firstName||""} ${e?.lastName||""}`,phoneNumber:e.phoneNumber})}),e={...e,contactList:{userIds:n.map(e=>e.id)}},(0,p.UF)(e)}),(0,p.aJ)("loadCurrentUser",()=>{(0,u.px)("fetchCurrentUser")}),(0,p.aJ)("loadCommonChats",async(e,t,a)=>{const{userId:s}=a;if((0,y.trm)(e))return;const n=(0,y.mBe)(e,s),o=(0,y.Ua4)(e,s);if(!n||(0,m.tv)(n)||o?.isFullyLoaded)return;const r=await(0,u.px)("fetchCommonChats",n,o?.maxId);if(!r)return;const{chatIds:c,count:d}=r,l=(0,i.Am)((o?.ids||[]).concat(c));e=(0,p.mS)(),e=(0,g.lWl)(e,n.id,{maxId:c.length?c[c.length-1]:void 0,ids:l,isFullyLoaded:l.length>=d}),(0,p.UF)(e)}),(0,p.aJ)("toggleNoPaidMessagesException",async(e,t,a)=>{const{userId:s,shouldRefundCharged:n}=a,o=(0,y.mBe)(e,s);o&&await(0,u.px)("toggleNoPaidMessagesException",{user:o,shouldRefundCharged:n})&&(e=(0,p.mS)(),e=(0,g.weB)(e,s,{settings:void 0}),(0,p.UF)(e))}),(0,p.aJ)("openChatRefundModal",async(e,t,a)=>{const{userId:s,tabId:n=(0,r.g0)()}=a,o=(0,y.mBe)(e,s);if(!o)return;const i=await(0,u.px)("fetchPaidMessagesRevenue",{user:o});void 0!==i&&(e=(0,p.mS)(),e=(0,f.w)(e,{chatRefundModal:{userId:s,starsToRefund:i}},n),(0,p.UF)(e))}),(0,p.aJ)("updateContact",async(e,t,a)=>{const{userId:n,isMuted:o=!1,firstName:i,lastName:c,shouldSharePhoneNumber:d,tabId:l=(0,r.g0)()}=a,m=(0,y.mBe)(e,n);if(!m)return;let h;if(t.updateChatMutedState({chatId:n,isMuted:o}),e=(0,p.mS)(),e=(0,g.G42)(e,s.TD.InProgress,l),(0,p.UF)(e),!m.isContact&&m.phoneNumber)h=await(0,u.px)("importContact",{phone:m.phoneNumber,firstName:i,lastName:c});else{const{id:e,accessHash:t}=m;h=await(0,u.px)("updateContact",{id:e,accessHash:t,phoneNumber:"",firstName:i,lastName:c,shouldSharePhoneNumber:d})}h&&(t.loadPeerSettings({peerId:n}),t.loadPeerStories({peerId:n}),e=(0,p.mS)(),e=(0,g.TKu)(e,m.id,{firstName:i,lastName:c}),(0,p.UF)(e)),e=(0,p.mS)(),e=(0,g.G42)(e,s.TD.Complete,l),e=(0,g.BOn)(e,l),(0,p.UF)(e)}),(0,p.aJ)("deleteContact",async(e,t,a)=>{const{userId:s}=a,n=(0,y.mBe)(e,s);if(!n)return;const{id:o,accessHash:r}=n;await(0,u.px)("deleteContact",{id:o,accessHash:r})}),(0,p.aJ)("loadMoreProfilePhotos",async(e,t,a)=>{if((0,y.trm)(e))return;const{peerId:s,shouldInvalidateCache:n,isPreload:r}=a,i=(0,o.L8)(s),c=i?(0,y.mBe)(e,s):void 0,d=i?void 0:(0,y.hds)(e,s),l=c||d;if(d&&(0,y._ls)(e,s))return;const m=(0,y.IVq)(e,s);if(!l?.avatarPhotoId)return;if(m&&!n&&(r||!m.nextOffset))return;e=(0,g.Tqk)(e,s,!0),(0,p.UF)(e),e=(0,p.mS)();let h=(0,y.vGo)(e,s),f=(0,y.AWZ)(e,s);if(c&&!h){const{id:e,accessHash:t}=c,a=await(0,u.px)("fetchFullUser",{id:e,accessHash:t});if(!a?.user)return;h=a.fullInfo}if(d&&!f){const e=await(0,u.px)("fetchFullChat",d);if(!e?.fullInfo)return;f=e.fullInfo}const I=h||f;if(!I)return;const v=m?.nextOffset,b=!v||r||n?A:void 0,S=await(0,u.px)("fetchProfilePhotos",{peer:l,offset:v,limit:b});if(!S||!S.photos)return;e=(0,p.mS)();const{photos:w,count:C,nextOffsetId:E}=S;e=(0,g.LZP)(e,s,{newPhotos:w,count:C,nextOffset:E,fullInfo:I,shouldInvalidateCache:n}),(0,p.UF)(e)}),(0,p.aJ)("setUserSearchQuery",(e,t,a)=>{const{query:s,tabId:n=(0,r.g0)()}=a;s&&b(async()=>{const t=await(0,u.px)("searchChats",{query:s});e=(0,p.mS)();const a=(0,y.nTw)(e,n).userSearch.query;if(!t||!a||s!==a)return e=(0,g.Z0S)(e,!1,n),void(0,p.UF)(e);const{accountResultIds:r,globalResultIds:i}=t,c=r.filter(o.L8),d=i.filter(o.L8);e=(0,g.Z0S)(e,!1,n),e=(0,g.BFh)(e,{localUserIds:c,globalUserIds:d},n),(0,p.UF)(e)})}),(0,p.aJ)("importContact",async(e,t,a)=>{const{phoneNumber:s,firstName:n,lastName:o,tabId:i=(0,r.g0)()}=a,d=await(0,u.px)("importContact",{phone:s,firstName:n,lastName:o});d?(t.openChat({id:d,tabId:i}),e=(0,p.mS)(),e=(0,g.BOn)(e,i),(0,p.UF)(e)):t.showNotification({message:c.yE("Contacts.PhoneNumber.NotRegistred"),tabId:i})}),(0,p.aJ)("reportSpam",(e,t,a)=>{const{chatId:s}=a,n=(0,y.PVB)(e,s);n&&(0,u.px)("reportSpam",n)}),(0,p.aJ)("setEmojiStatus",async(e,t,a)=>{const{emojiStatus:s,referrerWebAppKey:n,tabId:o=(0,r.g0)()}=a;if(!(0,y.g29)(e))return n&&t.sendWebAppEvent({webAppKey:n,event:{eventType:"emoji_status_failed",eventData:{error:"USER_DECLINED"}},tabId:o}),void t.openPremiumModal({initialSection:"emoji_status",tabId:o});const i=await(0,u.px)("updateEmojiStatus",s);if(n){if(!i)return void t.sendWebAppEvent({webAppKey:n,event:{eventType:"emoji_status_failed",eventData:{error:"SERVER_ERROR"}},tabId:o});t.sendWebAppEvent({webAppKey:n,event:{eventType:"emoji_status_set"},tabId:o}),t.showNotification({message:{key:"BotSuggestedStatusUpdated"},customEmojiIconId:s.documentId,tabId:o})}}),(0,p.aJ)("saveCloseFriends",async(e,t,a)=>{const{userIds:s}=a;await(0,u.px)("saveCloseFriends",s)&&(e=(0,p.mS)(),e.contactList?.userIds.forEach(t=>{const{isCloseFriend:a}=e.users.byId[t]||{};a&&!s.includes(t)&&(e=(0,g.TKu)(e,t,{isCloseFriend:void 0}))}),s.forEach(t=>{e=(0,g.TKu)(e,t,{isCloseFriend:!0})}),(0,p.UF)(e))}),(0,p.aJ)("openSuggestedStatusModal",async(e,t,a)=>{const{customEmojiId:s,duration:n,botId:o,webAppKey:i,tabId:c=(0,r.g0)()}=a,d=await(0,u.px)("fetchCustomEmoji",{documentId:[s]});d?.[0]?(e=(0,p.mS)(),e=(0,f.w)(e,{suggestedStatusModal:{customEmojiId:s,duration:n,webAppKey:i,botId:o}},c),(0,p.UF)(e)):i&&t.sendWebAppEvent({webAppKey:i,event:{eventType:"emoji_status_failed",eventData:{error:"SUGGESTED_EMOJI_INVALID"}},tabId:c})}),(0,p.aJ)("loadPeerSettings",async(e,t,a)=>{const{peerId:s}=a;if((0,y.trm)(e))return;if(!(0,y.vGo)(e,s))return void t.loadFullUser({userId:s});const n=(0,y.mBe)(e,s);if(!n)return;const o=await(0,u.px)("fetchPeerSettings",n);if(!o)return;const{settings:r}=o;e=(0,p.mS)(),e=(0,g.weB)(e,s,{settings:r}),(0,p.UF)(e)}),(0,p.aJ)("markBotVerificationInfoShown",(e,t,a)=>{const{peerId:s}=a,o=e.settings.botVerificationShownPeerIds,r=(0,i.Am)([s,...o]).slice(0,n.qLe);e={...e,settings:{...e.settings,botVerificationShownPeerIds:r}},(0,p.UF)(e)}),t()}catch(e){t(e)}})},50653:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"J2RfusJI",button:"Nz8BOo0i",disabled:"zHsizIwX",inner:"C90W_KKX","icons-container":"Qi7tZATP",iconsContainer:"Qi7tZATP","animated-unlock":"lfcZJyxp",animatedUnlock:"lfcZJyxp","comments-icon":"zd5EAc5e",commentsIcon:"zd5EAc5e",description:"E_YZ3IQs",starIconContainer:"IL_EHscS",starIcon:"C_e1ij6A"}},50991:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>b});var n=a(84051),o=a(13439),r=a(89925),i=a(90709),c=a(70636),d=a(60919),l=a(87894),u=a(79582),m=a(26072),h=a(59030),p=a(73767),g=a(54746),f=a(54960),y=a(12933),I=a(57474),A=e([c,h,f,y]);[c,h,f,y]=A.then?(await A)():A;const v=({isChannel:e,members:t,onNextStep:a,currentUserId:s,localContactIds:r,isLoading:d,searchQuery:A,isSearching:v,localUserIds:b,globalUserIds:S,onClose:w,isActive:C})=>{const{setUserSearchQuery:E}=(0,o.ko)(),M=(0,h.A)(),[x,k]=(0,n.J0)([]),P=(0,p.A)(x)===x;(0,m.A)({isActive:C,onBack:w});const T=(0,n.Kr)(()=>t?t.map(e=>e.userId):[],[t]),F=(0,n.hb)(e=>{E({query:e})},[E]),N=(0,n.Kr)(()=>{const t=(0,o.mS)().users.byId,a=(0,c.PU)({ids:(0,l.Am)([...r||[],...b||[],...S||[]]),query:A,type:"user"});return(0,u.A)(a.filter(a=>{const n=t[a];return!T.includes(a)&&a!==s&&(!n||!(0,i.tv)(n)||!e&&n.canBeInvitedToGroup)}))},[r,A,b,S,s,T,e]),B=(0,n.hb)(()=>{x.length&&(E({query:""}),a(x))},[x,E,a]);return n.Ay.createElement("div",{className:"AddChatMembers"},n.Ay.createElement("div",{className:"AddChatMembers-inner"},n.Ay.createElement(f.A,{itemIds:N,selectedIds:x,filterValue:A,filterPlaceholder:M("lng_channel_add_users"),searchInputId:"new-members-picker-search",isLoading:v,onSelectedIdsChange:k,onFilterChange:F,isSearchable:!0,withDefaultPadding:!0,noScrollRestore:P,allowMultiple:!0,withStatus:!0,itemInputType:"checkbox"}),n.Ay.createElement(y.A,{isShown:Boolean(x.length),disabled:d,ariaLabel:M("lng_channel_add_users"),onClick:B},d?n.Ay.createElement(I.A,{color:"white"}):n.Ay.createElement(g.A,{name:"arrow-right"}))))},b=(0,n.ph)((0,o.EK)((e,{chatId:t})=>{const a=(0,d.hds)(e,t),{userIds:s}=e.contactList||{},{newChatMembersProgress:n}=(0,d.nTw)(e),{currentUserId:o}=e,c=a&&(0,i.WX)(a),{query:l,fetchingStatus:u,globalUserIds:m,localUserIds:h}=(0,d.nTw)(e).userSearch;return{isChannel:c,members:(0,d.AWZ)(e,t)?.members,currentUserId:o,localContactIds:s,searchQuery:l,isSearching:u,isLoading:n===r.D7.Loading,globalUserIds:m,localUserIds:h}})(v));s()}catch(e){s(e)}})},51209:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{folder:t}=e,a=(0,o.A)(n.ar.Extra,"DeleteFolderDialog",!t);return a?s.Ay.createElement(a,e):void 0}},51291:(e,t,a)=>{var s=a(89925),n=a(14487),o=a(13439),r=a(17872),i=a(60919);(0,o.aJ)("setGlobalSearchQuery",(e,t,a)=>{const{query:o,tabId:c=(0,n.g0)()}=a,{chatId:d,currentContent:l}=(0,i.nTw)(e,c).globalSearch,u=o&&l!==s.$C.BotApps&&l!==s.$C.PublicPosts?{chats:!d,messages:!0}:void 0;return t.checkSearchPostsFlood({query:o,tabId:c}),(0,r.b8O)(e,{globalResults:{},localResults:{},resultsByType:void 0,fetchingStatus:u,query:o},c)}),(0,o.aJ)("setGlobalSearchClosing",(e,t,a)=>{const{tabId:s=(0,n.g0)(),isClosing:o}=a||{};return(0,r.b8O)(e,{isClosing:o},s)}),(0,o.aJ)("addRecentlyFoundChatId",(e,t,a)=>{const{id:s}=a,{recentlyFoundChatIds:n}=e;if(!n)return{...e,recentlyFoundChatIds:[s]};const o=n.filter(e=>e!==s);return o.unshift(s),o.length>10&&o.pop(),{...e,recentlyFoundChatIds:o}}),(0,o.aJ)("clearRecentlyFoundChats",e=>({...e,recentlyFoundChatIds:void 0})),(0,o.aJ)("setGlobalSearchContent",(e,t,a)=>{const{content:s,tabId:o=(0,n.g0)()}=a;return(0,r.GQ)(e,s,o)}),(0,o.aJ)("setGlobalSearchChatId",(e,t,a)=>{const{id:s,tabId:o=(0,n.g0)()}=a;return(0,r.b8O)(e,{chatId:s,query:void 0,resultsByType:void 0},o)})},51647:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>q});var n=a(84051),o=a(13439),r=a(89925),i=a(31481),c=a(90709),d=a(60919),l=a(85444),u=a(40708),m=a(30708),h=a(11778),p=a(31460),g=a(14),f=a(26072),y=a(17712),I=a(37859),A=a(60406),v=a(39751),b=a(41036),S=a(50991),w=a(19188),C=a(84519),E=a(44051),M=a(87544),x=a(28218),k=a(54680),P=a(86434),T=a(88011),F=a(24662),N=a(82837),B=a(33424),U=a(1835),R=a(97688),V=a(62504),J=e([l,S,k,P,T,N,V]);[l,S,k,P,T,N,V]=J.then?(await J)():J;const L=450+i.xB5,O=Object.keys(r.Ul).length/2,D=Object.keys(r.je).length/2;function G(){const e=document.querySelector(".RightHeader .SearchInput input");e&&e.blur()}const j=({contentKey:e,chatId:t,threadId:a,isMobile:s,isChatSelected:c,animationLevel:d,shouldSkipHistoryAnimations:m,nextManagementScreen:J,nextProfileTab:j,shouldCloseRightColumn:q,isSavedMessages:z,isSavedDialog:_,userPortraitUserId:K})=>{const{toggleChatInfo:H,toggleChatAIInfo:W,toggleManagement:$,setStickerSearchQuery:X,setGifSearchQuery:Y,closePollResults:Q,addChatMembers:Z,setNewChatMembersDialogState:ee,setEditingExportedInvite:te,toggleStatistics:ae,toggleMessageStatistics:se,toggleStoryStatistics:ne,setOpenedInviteInfo:oe,requestNextManagementScreen:re,resetNextProfileTab:ie,closeCreateTopicPanel:ce,closeEditTopicPanel:de,closeBoostStatistics:le,setShouldCloseRightColumn:ue,closeMonetizationStatistics:me,openChatAIWithInfo:he,toggleUserPortrait:pe}=(0,o.ko)(),ge=(0,n.li)(),{width:fe}=(0,v.A)(),[ye,Ie]=(0,n.J0)(z&&!_?r.zW.SavedDialogs:r.zW.Profile),[Ae,ve]=(0,n.J0)(r.je.Initial),[be,Se]=(0,n.J0)(),[we,Ce]=(0,n.J0)(),Ee=ye!==r.zW.Profile,Me=void 0!==e,xe=e===r.Ul.ChatInfo,ke=e===r.Ul.ChatAI,Pe=e===r.Ul.Management,Te=e===r.Ul.Statistics,Fe=e===r.Ul.MessageStatistics,Ne=e===r.Ul.StoryStatistics,Be=e===r.Ul.BoostStatistics,Ue=e===r.Ul.MonetizationStatistics,Re=e===r.Ul.StickerSearch,Ve=e===r.Ul.GifSearch,Je=e===r.Ul.PollResults,Le=e===r.Ul.AddingMembers,Oe=e===r.Ul.CreateTopic,De=e===r.Ul.EditTopic,Ge=e===r.Ul.UserPortrait,je=fe<=i.gQx,[qe,ze]=(0,n.J0)(!Me),_e=(0,g.A)(e,!0,!c)??-1;(0,A.A)({containerRef:ge,selector:":scope .custom-scroll, :scope .panel-content"},[e,Ae,t,a]);const Ke=(0,y.A)((a=!0)=>{switch(e){case r.Ul.AddingMembers:ee({newChatMembersProgress:r.D7.Closed});break;case r.Ul.ChatInfo:if(Ee&&a&&!z){Ie(r.zW.Profile);break}H({force:!1},{forceSyncOnIOs:!0});break;case r.Ul.ChatAI:W({force:!1},{forceSyncOnIOs:!0});break;case r.Ul.UserPortrait:pe({force:!1},{forceSyncOnIOs:!0});break;case r.Ul.Management:switch(Ae){case r.je.Initial:$();break;case r.je.ChatPrivacyType:case r.je.Discussion:case r.je.GroupPermissions:case r.je.GroupType:case r.je.ChatAdministrators:case r.je.ChannelSubscribers:case r.je.GroupMembers:case r.je.Invites:case r.je.Reactions:case r.je.JoinRequests:case r.je.ChannelRemovedUsers:ve(r.je.Initial);break;case r.je.GroupUserPermissionsCreate:case r.je.GroupRemovedUsers:case r.je.GroupUserPermissions:ve(r.je.GroupPermissions),Se(void 0),Ce(void 0);break;case r.je.NewDiscussionGroup:ve(r.je.Discussion);break;case r.je.ChatAdminRights:case r.je.ChatNewAdminRights:case r.je.GroupAddAdmins:case r.je.GroupRecentActions:ve(r.je.ChatAdministrators);break;case r.je.EditInvite:case r.je.InviteInfo:ve(r.je.Invites),oe({chatId:t,invite:void 0}),te({chatId:t,invite:void 0})}break;case r.Ul.MessageStatistics:se();break;case r.Ul.StoryStatistics:ne();break;case r.Ul.Statistics:ae();break;case r.Ul.BoostStatistics:le();break;case r.Ul.MonetizationStatistics:me();break;case r.Ul.StickerSearch:G(),X({query:void 0});break;case r.Ul.GifSearch:G(),Y({query:void 0});break;case r.Ul.PollResults:Q();break;case r.Ul.CreateTopic:ce();break;case r.Ul.EditTopic:de()}}),He=(0,y.A)((e,t)=>{Se(e),Ce(t)}),We=(0,y.A)(e=>{Z({chatId:t,memberIds:e})});function $e(e){if(-1!==_e)switch(_e){case r.Ul.AddingMembers:return n.Ay.createElement(S.A,{key:`add_chat_members_${t}`,chatId:t,isActive:Me&&e,onNextStep:We,onClose:Ke});case r.Ul.ChatInfo:return n.Ay.createElement(k.A,{key:`profile_${t}_${a}`,chatId:t,threadId:a,profileState:ye,isMobile:s,isActive:Me&&e,onProfileStateChange:Ie});case r.Ul.Management:return n.Ay.createElement(M.A,{key:`management_${t}_${Ae}`,chatId:t,currentScreen:Ae,isPromotedByCurrentUser:we,selectedChatMemberId:be,isActive:Me&&e,onScreenSelect:ve,onChatMemberSelect:He,onClose:Ke});case r.Ul.Statistics:return n.Ay.createElement(B.A,{chatId:t});case r.Ul.BoostStatistics:return n.Ay.createElement(T.A,null);case r.Ul.MonetizationStatistics:return n.Ay.createElement(N.A,null);case r.Ul.MessageStatistics:return n.Ay.createElement(F.A,{chatId:t,isActive:Me&&e});case r.Ul.StoryStatistics:return n.Ay.createElement(U.A,{chatId:t,isActive:Me&&e});case r.Ul.StickerSearch:return n.Ay.createElement(R.A,{onClose:Ke,isActive:Me&&e});case r.Ul.GifSearch:return n.Ay.createElement(E.A,{onClose:Ke,isActive:Me&&e});case r.Ul.PollResults:return n.Ay.createElement(x.A,{onClose:Ke,isActive:Me&&e});case r.Ul.CreateTopic:return n.Ay.createElement(w.A,{onClose:Ke,isActive:Me&&e});case r.Ul.EditTopic:return n.Ay.createElement(C.A,{onClose:Ke,isActive:Me&&e});case r.Ul.ChatAI:return n.Ay.createElement(l.A,{chatId:t,threadId:a,onClose:Ke});case r.Ul.UserPortrait:return K&&n.Ay.createElement(V.A,{userId:K})}}if((0,n.vJ)(()=>Me&&t?(0,h.A)(Ke):void 0,[Me,Ke,t]),(0,n.vJ)(()=>{setTimeout(()=>{ze(!Me)},L)},[Me]),(0,n.vJ)(()=>{J&&(ve(J),re(void 0))},[J]),(0,n.vJ)(()=>{j&&ie()},[j]),(0,n.vJ)(()=>{q&&(Ke(),ue({value:void 0}))},[q]),(0,n.vJ)(()=>{Me&&je&&Ke()},[je]),(0,I.A)(([e,s])=>{e===t&&s===a||(Ie(z&&!_?r.zW.SavedDialogs:r.zW.Profile),ve(r.je.Initial))},[t,a,_,z]),(0,f.A)({isActive:c&&(e===r.Ul.ChatInfo||e===r.Ul.Management||e===r.Ul.AddingMembers||e===r.Ul.CreateTopic||e===r.Ul.EditTopic),onBack:()=>Ke(!1)}),(0,n.vJ)(()=>{-1===_e&&t&&!q&&t!==u.bL&&he({chatId:t})},[t,_e,q,a]),t!==u.bL)return n.Ay.createElement("div",{id:"RightColumn-wrapper",className:c?void 0:"is-hidden"},je&&n.Ay.createElement("div",{className:"overlay-backdrop",onClick:Ke}),n.Ay.createElement("div",{id:"RightColumn"},n.Ay.createElement(P.A,{chatId:t,threadId:a,isColumnOpen:Me,isProfile:xe,isChatAI:ke,isManagement:Pe,isStatistics:Te,isBoostStatistics:Be,isMonetizationStatistics:Ue,isMessageStatistics:Fe,isStoryStatistics:Ne,isStickerSearch:Re,isGifSearch:Ve,isPollResults:Je,isCreatingTopic:Oe,isEditingTopic:De,isAddingChatMembers:Le,isUserPortrait:Ge,profileState:ye,managementScreen:Ae,onClose:Ke,onScreenSelect:ve}),n.Ay.createElement(b.Ay,{ref:ge,name:(0,p.P)("layers",d,qe||m),renderCount:O+D,activeKey:Pe?O+Ae:_e,shouldCleanup:!0,cleanupExceptionKey:_e===r.Ul.MessageStatistics||_e===r.Ul.StoryStatistics?r.Ul.Statistics:void 0},$e)))},q=(0,n.ph)((0,o.EK)((e,{isMobile:t})=>{const{chatId:a,threadId:s}=(0,d.Xf0)(e)||{},n=(0,d.bE$)(e),{animationLevel:o}=(0,m.l)(e),{management:r,shouldSkipHistoryAnimations:i,nextProfileTab:l,shouldCloseRightColumn:u}=(0,d.nTw)(e),h=a?r.byChatId[a]?.nextScreen:void 0,p=a?(0,d.nZ4)(e,a):void 0,g=a?(0,c.cG)(a,s,e.currentUserId):void 0,{userPortraitUserId:f}=(0,d.nTw)(e);return{contentKey:(0,d.t75)(e,t),chatId:a,threadId:s,isChatSelected:Boolean(a&&n),animationLevel:o,shouldSkipHistoryAnimations:i,nextManagementScreen:h,nextProfileTab:l,shouldCloseRightColumn:u,isSavedMessages:p,isSavedDialog:g,userPortraitUserId:f}})(j));s()}catch(z){s(z)}})},52088:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>T});var n=a(96540),o=a(66049),r=a(2543),i=a(25279),c=a(31481),d=a(72531),l=a(87357),u=a(59950),m=a(75304),h=a(57291),p=a(41411),g=a(13081),f=a(95547),y=a(77787),I=a(22487),A=a(81120),v=a(40708),b=a(77030),S=a(58324),w=a(67909),C=a(99299),E=a(89116),M=a(7876),x=a(8235),k=e([u,h,g,f]);[u,h,g,f]=k.then?(await k)():k;const P=()=>{const{isOpen:e}=(0,E.S)(),{userId:t,userName:a}=(0,A.pD)(),[s,k]=(0,n.useState)(null),[P,T]=(0,n.useState)([]),[F,N]=(0,n.useState)([]),[B,U]=(0,n.useState)({lastTime:void 0,hasMore:!0}),{scrollToBottom:R,scrollLocked:V,isScrollLock:J}=(0,m.R)(),{messages:L,setMessages:O,append:D,stop:G,status:j}=(0,o.Y_)({api:`${c.Vjs}/chat?userId=${t}&userName=${a}&platform=web`,id:v.bL,sendExtraMessageFields:!0});(0,n.useEffect)(()=>{const e=(0,r.orderBy)([...L,...P],[e=>new Date(e.createdAt).getTime()],["asc"]);N(e)},[L,P]),(0,n.useEffect)(()=>{J||R()},[J,F,R]);const q=(0,n.useCallback)(()=>(V(),new Promise(e=>{y.zs.summary?.getMessages(B?.lastTime,10)?.then(t=>{if(t.messages){const e=(0,I.R4)(t.messages);T(t=>[...e,...t])}U({lastTime:t.lastTime,hasMore:t.hasMore}),e()})})),[B?.lastTime,V,T]),z=(0,n.useCallback)(e=>{T(t=>[...t,e])},[T]),_=(0,n.useCallback)(e=>{T(t=>[...t,e]),k(e)},[T]),K=(0,n.useCallback)(()=>{y.zs.summary?.getMessages(void 0,30)?.then(e=>{if(e.messages.length>0){const t=(0,I.R4)(e.messages);T(e=>[...t,...e])}else{const e=(0,S.ku)();T([e])}U({lastTime:e.lastTime,hasMore:e.hasMore})})},[T]);(0,n.useEffect)(()=>(d.A.on(d.E.AddUrgentMessage,_),d.A.on(d.E.AddSummaryMessage,z),d.A.on(d.E.ChatAIStoreReady,K),()=>{d.A.off(d.E.AddUrgentMessage,_),d.A.off(d.E.AddSummaryMessage,z),d.A.off(d.E.ChatAIStoreReady,K),N([])}),[K,z,_]),(0,n.useEffect)(()=>{y.zs.summary&&K()},[K]),(0,n.useEffect)(()=>{const e=f.A.getRoomLastFocusTime(v.bL);e&&e<Date.now()-216e5&&u.z.initSummaryChats(!1),f.A.updateRoomAIData(v.bL,"lastFocusTime",(new Date).getTime())},[]);const H=(0,n.useCallback)(e=>{V(),y.zs.summary?.delMessage(e).then(()=>{N(t=>t.filter(t=>t.id!==e))})},[V]),W=(0,n.useCallback)(e=>{R(),D({role:"user",content:e,id:(0,i.A)(),createdAt:new Date})},[D,R]);(0,n.useEffect)(()=>{if("ready"===j){const e=(0,I.pC)(L);y.zs.summary?.storeMessages(e)}},[L,j]);const $=(0,l.A)(M.A.globaSummaryBg,"flex flex-col w-full h-full","global-summary-inner",e&&"right-panel-open");return n.createElement(C.A,null,n.createElement("div",{className:"flex flex-row w-full"},n.createElement("div",{className:$},n.createElement("div",{className:"h-[56px] w-full px-[20px] flex items-center bg-[var(--color-background)]"},n.createElement("img",{className:"w-[40px] h-[40px] rounded-full mr-[12px]",src:x,alt:"Tely AI"}),n.createElement("span",{className:"text-[15px] font-semibold"},"Tely AI"),n.createElement("div",{className:"flex items-center ml-auto gap-[20px]"},n.createElement(b.A,null))),n.createElement("div",{className:"flex-1 flex flex-col overflow-hidden"},n.createElement(h.B,{className:"px-[15%] flex-1",status:j,messages:F,deleteMessage:H,loadMore:q,hasMore:B.hasMore,chatId:v.bL}),n.createElement("div",{className:"mb-[26px] px-[15%]"},n.createElement(p.g,{status:j,setMessages:O,stop:G,handleInputSubmit:W})))),n.createElement(g.p,null)),n.createElement(w.A,{message:s}))},T=(0,n.memo)(P);s()}catch(e){s(e)}})},52132:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"tFPZHCMt",chatInfo:"ubFGDy3d",chatBackground:"niS9Gfcl",botBackground:"kXKBpNnb","bot-info-description":"kpMdEhns",botInfoDescription:"kpMdEhns","bot-info-title":"H__cBlx8",botInfoTitle:"H__cBlx8",media:"mtKNWJmZ",chatInfoTitle:"RyB2zw9K",chatInfoSubtitle:"n9OcHdnh",chatDescription:"TYJGFKqJ",country:"WuX68A65",chatNotVerified:"sCB3zhO3",verifiedTitle:"dlaTjW_s",link:"yIJ4jRxH",linkInfo:"_MPDNfhr",icon:"KYcoeDmo",textColor:"BH_g_jqY"}},52533:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>D});var n=a(84051),o=a(13439),r=a(89925),i=a(31481),c=a(60919),d=a(64520),l=a(30708),u=a(96454),m=a(87357),h=a(11778),p=a(50442),g=a(79824),f=a(77121),y=a(99256),I=a(52733),A=a(51217),v=a(96140),b=a(77787),S=a(15384),w=a(19129),C=a(37661),E=a(31460),M=a(74984),x=a(26072),k=a(39351),P=a(17712),T=a(34201),F=a(72531),N=a(50425),B=a(24680),U=a(41036),R=a(29924),V=e([y,I,v,S,M,k,N,B,R]);[y,I,v,S,M,k,N,B,R]=V.then?(await V)():V;const J="0",L=0,O=({foldersDispatch:e,chatFoldersById:t,orderedFolderIds:a,activeChatFolder:s,currentUserId:d,isForumPanelOpen:l,animationLevel:v,shouldSkipHistoryAnimations:V,maxFolders:O,maxChatLists:D,shouldHideFolderTabs:G,folderInvitesById:j,maxFolderInvites:q,hasArchivedChats:z,hasArchivedStories:_,archiveSettings:K,isStoryRibbonShown:H,sessions:W,isAccountFrozen:$,aiChatFolders:X})=>{const{loadChatFolders:Y,setActiveChatFolder:Q,openChat:Z,openShareChatFolderModal:ee,openDeleteChatFolderModal:te,openEditChatFolder:ae,openLimitReachedModal:se,markChatMessagesRead:ne,openSettingsScreen:oe}=(0,o.ko)(),re=(0,n.li)(),[ie,ce,de]=(0,C.A)(),[le,ue]=(0,n.J0)([]),[me,he]=(0,n.J0)([]),[pe,ge,fe]=(0,C.A)(),[ye,Ie]=(0,n.J0)(y.H.classify),[Ae,ve]=(0,n.J0)(!1),be=(0,k.A)();(0,n.vJ)(()=>{Y()},[]);const{ref:Se,shouldRender:we,getIsClosing:Ce}=(0,T.A)({isOpen:H,className:!1,withShouldRender:!0}),Ee=(0,w.A)(Ce),Me=(0,P.A)(()=>{const e=Se.current?.querySelector(".chat-list.Transition_slide-active");e?.scrollTo({top:0,behavior:"smooth"})}),xe=(0,n.Kr)(()=>({id:i.DSF,title:{text:a?.[0]===i.DSF?be("FilterAllChatsShort"):be("FilterAllChats")},includedChatIds:g.p,excludedChatIds:g.p}),[a,be]),ke=(0,n.Kr)(()=>({id:i.LFk,title:{text:i.g25},includedChatIds:g.p,excludedChatIds:g.p}),[]),Pe=(0,n.Kr)(()=>({id:i.j7l,title:{text:i.Gjs},includedChatIds:g.p,excludedChatIds:g.p}),[]),Te=(0,n.Kr)(()=>({id:i.Sab,title:{text:i.Jg3},includedChatIds:g.p,excludedChatIds:g.p}),[]),Fe=(0,n.Kr)(()=>{const e=Object.values(t);return a?a?.map(a=>a===i.DSF?xe:a!==i.LFk||e.find(e=>e?.title?.text===i.g25)?a!==i.j7l||e.find(e=>e?.title?.text===i.Gjs)?a!==i.Sab||e.find(e=>e?.title?.text===i.Jg3)?t?.[a]||{}:Te:Pe:ke).filter(Boolean):void 0},[t,xe,a,JSON.stringify(a),ke,Pe,Te]),Ne=Fe?.findIndex(e=>e.id===i.DSF),Be=Ne===s,Ue=L===s,Re=Fe?.findIndex(e=>e.id===i.LFk)===s,Ve=Fe?.findIndex(e=>e.id===i.j7l)===s,Je=Fe?.findIndex(e=>e.id===i.Sab)===s,Le=(0,M.Jm)(),Oe=(0,P.A)(e=>{const t=Le[e];t?.length&&t.forEach(e=>{ne({id:e})})}),De=(0,M.ic)(),Ge=(0,n.Kr)(()=>{if(Fe&&Fe.length)return Fe.map((e,a)=>{const{id:s,title:n}=e,d=s!==i.DSF&&a>O-1,l=(0,c.w5O)((0,o.mS)(),s),u=[];let m=De[s]?.chatsCount;return l&&u.push({title:be("FilterShare"),icon:"link",handler:()=>{Object.values(t).reduce((e,t)=>e+(t.isChatList?1:0),0)>=D&&!e.isChatList?se({limit:"chatlistJoined"}):j[s]?.length>=q?se({limit:"chatlistInvites"}):ee({folderId:s})}}),s===i.DSF&&(u.push({title:be("FilterEditFolders"),icon:"edit",handler:()=>{oe({screen:r.VS.Folders})}}),Le[s]?.length&&u.push({title:be("ChatListMarkAllAsRead"),icon:"readchats",handler:()=>Oe(e.id)})),s===i.LFk||s===i.j7l||s===i.Sab?(Le[s]?.length&&u.push({title:be("ChatListMarkAllAsRead"),icon:"readchats",handler:()=>Oe(e.id)}),s===i.LFk?m=(0,A.od)(Le[s])?.length:s===i.Sab&&(m=(0,A.Ho)(Le[s])?.length)):(u.push({title:be("EditFolder"),icon:"edit",handler:()=>{ae({folderId:s})}}),Le[s]?.length&&u.push({title:be("ChatListMarkAllAsRead"),icon:"readchats",handler:()=>Oe(e.id)}),u.push({title:be("FilterMenuDelete"),icon:"delete",destructive:!0,handler:()=>{te({folderId:s})}})),{id:s,title:(0,S.fd)({text:n.text,entities:n.entities,noCustomEmojiPlayback:e.noTitleAnimations}),badgeCount:m,isBadgeActive:Boolean(De[s]?.notificationsCount),isBlocked:d,contextActions:u?.length?u:void 0}})},[Fe,O,De,be,t,D,j,q,Le,oe]),je=(0,P.A)(e=>{Q({activeChatFolder:e},{forceOnHeavyAnimation:!0}),s===e&&Me(),Ge[e].id===i.LFk||Ge[e].id===i.Sab?ce():de()});(0,n.vJ)(()=>{Ge?.length&&s>=Ge.length&&Q({activeChatFolder:L})},[s,Ge,Q]),(0,n.vJ)(()=>{if(u.TF&&Ge?.length&&!l)return(0,p.wJ)(re.current,{selectorToPreventScroll:".chat-list",onSwipe:(e,t)=>t===p.ez.Left?(Q({activeChatFolder:Math.min(s+1,Ge.length-1)},{forceOnHeavyAnimation:!0}),!0):t===p.ez.Right&&(Q({activeChatFolder:Math.max(0,s-1)},{forceOnHeavyAnimation:!0}),!0)})},[s,Ge,l,Q]);const qe=(0,n.li)();qe.current=!Ue,(0,n.vJ)(()=>qe.current?(0,h.A)(()=>{qe.current&&Q({activeChatFolder:L})}):void 0,[s,Q]),(0,x.A)({isActive:!Ue,onBack:()=>Q({activeChatFolder:L},{forceOnHeavyAnimation:!0})}),(0,n.vJ)(()=>{const e=e=>{if(e.ctrlKey&&e.shiftKey&&e.code.startsWith("Digit")&&Ge){const[,t]=e.code.match(/Digit(\d)/)||[];if(!t)return;if(t===J)return void Z({id:d,shouldReplaceHistory:!0});const a=Number(t)-1;if(a>Ge.length-1)return;Q({activeChatFolder:a},{forceOnHeavyAnimation:!0}),e.preventDefault()}};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[d,Ge,Z,Q]),(0,n.vJ)(()=>{b.zs.general?.get(b.HM)?.then(e=>{ue(e??[])}),b.zs.general?.get(b.al)?.then(e=>{he(e??[])})},[]),(0,n.vJ)(()=>{const e=(0,o.mS)().chatFolders.nextAiChatFolders?.length;Ie(e?y.H.apply:y.H.classify),b.zs.general?.get(b._9)?.then(e=>{void 0===e||!0===e&&X?ge():fe()})},[Ae,pe,X]);const ze=(0,n.hb)(async({loading:e,isShowTip:t})=>{ve(e);const a=await(b.zs.general?.get(b._9));(X||void 0===a)&&t&&ge()},[X]);(0,n.vJ)(()=>(F.A.on(F.E.UpdateAIChatFoldersApplying,ze),()=>{F.A.off(F.E.UpdateAIChatFoldersApplying,ze)}),[ze]);const{ref:_e,shouldRender:Ke}=(0,T.A)({isOpen:!a,noMountTransition:!0,withShouldRender:!0});function He(a){const o=Object.values(t).find(({id:e})=>e===Ge[s].id),r=o&&!Be;return n.Ay.createElement(R.A,{folderType:r?"folder":"all",folderId:r?o.id:void 0,isActive:a,isForumPanelOpen:l,foldersDispatch:e,isMainList:!0,canDisplayArchive:(z||_)&&!K.isHidden,archiveSettings:K,sessions:W,isAccountFrozen:$,activeTag:We?Ge[s]?.id===i.LFk?le:me:[]})}const We=Ge&&Ge.length>1;return n.Ay.createElement("div",{ref:Se,className:(0,m.A)("ChatFolders",We&&G&&"ChatFolders--tabs-hidden",we&&"with-story-ribbon")},we&&n.Ay.createElement(N.A,{isClosing:Ee}),We?n.Ay.createElement(B.A,{contextRootElementSelector:"#LeftColumn",tabs:Ge,activeTab:s,onSwitchTab:je}):Ke?n.Ay.createElement("div",{ref:_e,className:"tabs-placeholder"}):void 0,pe&&ye===y.H.apply&&n.Ay.createElement(y.A,{loading:Ae,step:ye,onClose:fe}),We&&ie&&n.Ay.createElement(I.A,{activeTag:Ge[s].id===i.LFk?le:me,setActiveTag:Ge[s].id===i.LFk?ue:he,isOpen:ie,onClose:de,folderId:Ge[s].id}),We&&n.Ay.createElement(f.A,{folderType:Be?"all":Re?"preset":Ve?"unread":Je?"ai":"folder",tags:Ge[s]?.id===i.LFk?le:me,setActiveTag:Ge[s]?.id===i.LFk?ue:he}),n.Ay.createElement(U.Ay,{ref:re,name:(0,E.P)("slideOptimized",v,V,be.isRtl),activeKey:s,renderCount:We?Ge.length:void 0},He))},D=(0,n.ph)((0,o.EK)(e=>{const{chatFolders:{byId:t,invites:a},chats:{listIds:{archived:s}},stories:{orderedPeerIds:{archived:n}},activeSessions:{byHash:o},currentUserId:r,archiveSettings:i}=e;let u=e.chatFolders.orderedIds;const{shouldSkipHistoryAnimations:m,activeChatFolder:h}=(0,c.nTw)(e),{storyViewer:{isRibbonShown:p}}=(0,c.nTw)(e),g=(0,c.trm)(e),{aiChatFolders:f}=(0,l.l)(e);!0!==f&&(u=(0,v.hc)(u));const{animationLevel:y}=(0,l.l)(e);return{chatFoldersById:t,folderInvitesById:a,orderedFolderIds:u,activeChatFolder:h,currentUserId:r,animationLevel:y,shouldSkipHistoryAnimations:m,hasArchivedChats:Boolean(s?.length),hasArchivedStories:Boolean(n?.length),maxFolders:(0,d.d)(e,"dialogFilters"),maxFolderInvites:(0,d.d)(e,"chatlistInvites"),maxChatLists:(0,d.d)(e,"chatlistJoined"),archiveSettings:i,isStoryRibbonShown:p,sessions:o,isAccountFrozen:g,aiChatFolders:f}})(O));s()}catch(e){s(e)}})},52733:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>g});var n=a(31481),o=a(13439),r=a(84051),i=a(87357),c=a(8410),d=a(77787),l=a(51217),u=e([c]),m=u.then?(await u)():u;c=m[0];const h=["Public Chain","DeFi","NFT/GameFi","Wallets & Tools","DAO","Layer2","Security & Audits","Fundraising & Investment","Meme","Launchpad/IDO","KOL & Community Growth","Legal & Compliance"],p=({folderId:e,activeTag:t,setActiveTag:a,isOpen:s,onClose:u})=>{const m=(0,r.Kr)(()=>e===n.LFk?h:(0,l.Su)(),[e,l.Su]);return 0===m?.length?null:r.Ay.createElement(c.A,{isOpen:s,onClose:u,dialogStyle:"max-width: 400px; max-height: 600px; position: absolute; left: 100px; top: 70px;"},r.Ay.createElement("div",{className:"m-[-10px]"},r.Ay.createElement("div",{className:"text-[#676B74] text-[12px] font-[600] mb-2"},e===n.LFk?"Industry":"AI Tags"),r.Ay.createElement("div",{className:"flex flex-row flex-wrap gap-2 my-2"},m.map(s=>r.Ay.createElement("div",{className:(0,i.A)("rounded-[6px] px-2 py-2 font-[500] text-[13px] hover:opacity-80 cursor-pointer",t.indexOf(s)>=0?"bg-[var(--color-aichatfolders-tag-bg-active)] text-[#fff]":"bg-[var(--color-aichatfolders-tag-bg)] text-[var(--color-aichatfolders-tag-text)]"),onClick:()=>function(s){let r=t;r=r.indexOf(s)>=0?r.filter(e=>e!==s):[...r,s],a(r);let i=(0,o.mS)();d.zs.general?.set(e===n.LFk?d.HM:d.al,r),i={...i,chatFolders:{...i.chatFolders,aiChatFolders:{...i.chatFolders.aiChatFolders,[e===n.LFk?"activePresetTag":"activeAITag"]:r}}},(0,o.UF)(i),u?.()}(s)},s)))))},g=(0,r.ph)(p);s()}catch(e){s(e)}})},52771:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(96454),n=a(14487),o=a(87894),r=a(5560),i=a(37836),c=a(13439),d=a(17872),l=a(80840),u=a(32989),m=a(60919),h=a(71331),p=a(12859),g=e([r,p]);[r,p]=g.then?(await g)():g,(0,c.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateGroupCall":{if("discarded"===a.call.connectionState)return e.groupCalls.activeGroupCallId?void("leaveGroupCall"in t&&t.leaveGroupCall({shouldRemove:!0,tabId:(0,n.g0)()})):(0,l.um)(e,a.call.id);const s=(0,h.Ip)(e,a.call.id),r=s?.chatId;return r&&(e=(0,d.wix)(e,r,{isCallNotEmpty:s.participantsCount>0||Boolean(s.participants?.length)})),(0,l.h9)(e,a.call.id,(0,o.cJ)(a.call,["connectionState"]),void 0,a.call.participantsCount)}case"updateGroupCallChatId":return(0,m.hds)(e,a.chatId)&&(e=(0,d.ltr)(e,a.chatId,{groupCallId:a.call.id})),e;case"updateGroupCallParticipants":{const{groupCallId:t,participants:s,nextOffset:n}=a,{currentUserId:o}=e;e=(0,c.mS)(),s.forEach(a=>{a.id&&(e=(0,l.c5)(e,t,a.id,a,Boolean(n)||o===a.id))}),n&&(e=(0,l.h9)(e,t,{nextOffset:n}));const r=(0,h.Ip)(e,t),i=r?.chatId;return i&&(e=(0,d.wix)(e,i,{isCallNotEmpty:r.participantsCount>0||Boolean(r.participants?.length)})),e}case"updatePhoneCall":{if(!s.OL)return;const{phoneCall:o,currentUserId:d}=e,{call:l}=a;if(o)return"discarded"===l.state?(t.playGroupCallSound({sound:"end"}),"hangUp"in t&&t.hangUp({tabId:(0,n.g0)()}),{...e,...l.needRating&&{ratingPhoneCall:l}}):void 0;if(l?.adminId!==d&&"requested"===l.state)return(0,i.aj)(()=>{e=(0,c.mS)();const t=(0,h.uu)(e);t&&(0,r.DJ)({call:l,user:t})}),(0,p.JD)(),(0,p.re)(e,t,l.isVideo,(0,n.g0)()),e={...e,phoneCall:l},(0,u.w)(e,{isCallPanelVisible:!1},(0,n.g0)())}}}),t()}catch(e){t(e)}})},54094:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>l});var n=a(96540),o=a(89092),r=a(86916),i=a(70958),c=a(89116),d=e([o,r,i]);[o,r,i]=d.then?(await d)():d;const l=()=>{const{drawerParams:e}=(0,c.S)(),[t,a]=(0,n.useState)(e?.activeKey||0);return n.createElement("div",{className:"flex flex-col h-full w-full"},n.createElement(i.A,{activeTab:t,tabs:[{title:"Chat Summary"},{title:"Urgent Alert"}],onSwitchTab:a}),n.createElement("div",{className:"pt-[20px] flex-1 overflow-y-auto"},(()=>{switch(t){case 0:return n.createElement(o.A,null);case 1:return n.createElement(r.A,null);default:return}})()))};s()}catch(e){s(e)}})},54224:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(84051),n=a(45227),o=a(96540),r=a(90213),i=a(46942),c=a.n(i),d=a(70809);const l=({className:e,children:t})=>o.createElement("div",{className:c()("guidance-carousel-item",e)},o.createElement("div",{className:"w-[42%] pl-[50px] pt-[5%] pb-[12%] h-full flex flex-col justify-center"},t)),u=({handleClose:e})=>{const t=(0,o.useRef)(null),a=a=>{t.current?.goTo(a),4===a&&e()};return o.createElement("div",null,o.createElement("div",{className:"guidance-bubble"}),o.createElement("div",{className:"absolute top-[10px] right-[10px] cursor-pointer text-[#A89E9E] z-10",onClick:e},o.createElement(d.US,{size:24})),o.createElement(r.A,{className:"guidance-carousel",ref:t},o.createElement(l,{className:"guidance-summary"},o.createElement("div",{className:"text-[45px] font-bold leading-[44px] mb-[20px]"},"Chat Summary"),o.createElement("div",{className:"text-[14px]"},"Message Summarization uses AI to extract key points from IM chats and provide regular summaries, helping users stay updated."),o.createElement("div",{className:"guidance-carousel-next",onClick:()=>a(1)},"Next")),o.createElement(l,{className:"guidance-translation"},o.createElement("div",{className:"text-[45px] font-bold leading-[44px] mb-[20px]"},"Translation & Grammar Check"),o.createElement("div",{className:"text-[14px]"},"Instant Translation: Real-time translation with auto language detection. Error Detection: Spots spelling, grammar, and structure issues."),o.createElement("div",{className:"guidance-carousel-next",onClick:()=>a(2)},"Next")),o.createElement(l,{className:"guidance-meeting"},o.createElement("div",{className:"text-[45px] font-bold leading-[44px] mb-[20px]"},"Meeting Scheduler"),o.createElement("div",{className:"text-[14px]"},"Automatically detects meeting chats, gathers details, and sends calendar invites—all within the conversation."),o.createElement("div",{className:"guidance-carousel-next",onClick:()=>a(3)},"Next")),o.createElement(l,{className:"guidance-actions"},o.createElement("div",{className:"text-[45px] font-bold leading-[44px] mb-[20px]"},"Action Items"),o.createElement("div",{className:"text-[14px]"},"AI picks out tasks and follow-ups from chats in real time—no manual notes needed."),o.createElement("div",{className:"guidance-carousel-next",onClick:()=>a(4)},"Next"))))},m=({handleClose:e})=>{const t=(0,n.P)({component:u,props:{handleClose:e}});return s.Ay.createElement("div",{ref:t})}},54680:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>me});var n=a(84051),o=a(13439),r=a(23174),i=a(89925),c=a(31481),d=a(90709),l=a(35104),u=a(60919),m=a(64520),h=a(56494),p=a(30708),g=a(96454),f=a(87357),y=a(50442),I=a(9716),A=a(31460),v=a(58443),b=a(4961),S=a(55429),w=a(68323),C=a(23459),E=a(31936),M=a(82117),x=a(37661),k=a(5912),P=a(39351),T=a(17712),F=a(59030),N=a(93809),B=a(47467),U=a(59410),R=a(72067),V=a(64489),J=a(55378),L=a(44589),O=a(62978),D=a(51083),G=a(54746),j=a(81524),q=a(42827),z=a(65614),_=a(17751),K=a(38678),H=a(47491),W=a(37378),$=a(29924),X=a(37143),Y=a(64493),Q=a(12933),Z=a(46222),ee=a(96530),te=a(22720),ae=a(57474),se=a(24680),ne=a(41036),oe=a(285),re=e([S,P,F,J,L,O,D,j,q,z,_,K,H,W,$,X,Y,Q,te,se,oe]);[S,P,F,J,L,O,D,j,q,z,_,K,H,W,$,X,Y,Q,te,se,oe]=re.then?(await re)():re;const ie=[{type:"media",key:"ProfileTabMedia"},{type:"documents",key:"ProfileTabFiles"},{type:"links",key:"ProfileTabLinks"},{type:"audio",key:"ProfileTabMusic"}],ce=1e3,de=500,le=({chatId:e,isActive:t,threadId:a,profileState:s,theme:u,monoforumChannel:m,isChannel:p,isBot:K,currentUserId:H,messagesById:re,foundIds:le,storyIds:me,pinnedStoryIds:he,archiveStoryIds:pe,storyByIds:ge,mediaSearchType:fe,hasCommonChatsTab:ye,hasStoriesTab:Ie,hasMembersTab:Ae,hasPreviewMediaTab:ve,hasGiftsTab:be,gifts:Se,botPreviewMedia:we,areMembersHidden:Ce,canAddMembers:Ee,canDeleteMembers:Me,commonChatIds:xe,members:ke,adminMembersById:Pe,usersById:Te,userStatusesById:Fe,chatsById:Ne,isRightColumnShown:Be,isRestricted:Ue,activeDownloads:Re,isChatProtected:Ve,nextProfileTab:Je,animationLevel:Le,shouldWarnAboutSvg:Oe,similarChannels:De,similarBots:Ge,isCurrentUserPremium:je,limitSimilarPeers:qe,isTopicInfo:ze,isSavedDialog:_e,forceScrollProfileTab:Ke,isSynced:He,onProfileStateChange:We})=>{const{setSharedMediaSearchType:$e,loadMoreMembers:Xe,loadCommonChats:Ye,openChat:Qe,searchSharedMediaMessages:Ze,openMediaViewer:et,openAudioPlayer:tt,focusMessage:at,setNewChatMembersDialogState:st,loadPeerProfileStories:nt,loadStoriesArchive:ot,openPremiumModal:rt,loadChannelRecommendations:it,loadBotRecommendations:ct,loadPreviewMedias:dt,loadPeerSavedGifts:lt,resetGiftProfileFilter:ut}=(0,o.ko)(),mt=(0,n.li)(),ht=(0,n.li)(),pt=(0,F.A)(),gt=(0,P.A)(),[ft,yt]=(0,n.J0)(),It=_e?String(a):e,At=It===H&&!_e,vt=(0,n.Kr)(()=>{const e=[];return At&&!_e&&e.push({type:"dialogs",key:"ProfileTabSavedDialogs"}),Ie&&e.push({type:"stories",key:"ProfileTabStories"}),Ie&&At&&e.push({type:"storiesArchive",key:"ProfileTabStoriesArchive"}),be&&e.push({type:"gifts",key:"ProfileTabGifts"}),Ae&&e.push({type:"members",key:p?"ProfileTabSubscribers":"ProfileTabMembers"}),ve&&e.push({type:"previewMedia",key:"ProfileTabBotPreview"}),e.push(...ie),ze||e.push({type:"voice",key:"ProfileTabVoice"}),ye&&e.push({type:"commonChats",key:"ProfileTabSharedGroups"}),p&&De?.length&&e.push({type:"similarChannels",key:"ProfileTabSimilarChannels"}),K&&Ge?.length&&e.push({type:"similarBots",key:"ProfileTabSimilarBots"}),e.map(e=>({type:e.type,title:gt(e.key)}))},[At,_e,Ie,be,Ae,ve,ze,ye,p,K,De?.length,Ge?.length,gt]),bt=(0,n.Kr)(()=>{if(!Je)return 0;const e=vt.findIndex(({type:e})=>e===Je);return-1===e?0:e},[Je,vt]),[St,wt,Ct]=(0,x.A)(!1),[Et,Mt]=(0,n.J0)(bt);(0,n.vJ)(()=>{if(!Je)return;const e=vt.findIndex(({type:e})=>e===Je);-1!==e&&Mt(e)},[Je,vt]);const xt=(0,n.hb)(e=>{wt(),Mt(e)},[]);(0,n.vJ)(()=>{ve&&!we&&dt({botId:e})},[e,we,ve]),(0,n.vJ)(()=>{p&&!De&&He&&it({chatId:e})},[e,p,De,He]),(0,n.vJ)(()=>{K&&!Ge&&He&&ct({userId:e})},[e,K,Ge,He]);const[kt,Pt]=(0,n.J0)(Se),{startViewTransition:Tt,shouldApplyVtn:Ft}=(0,w.Y)(),Nt=(0,n.Kr)(()=>kt?.map(e=>(0,l.p)(e)),[kt]),Bt=Et>vt.length-1?vt.length-1:Et,Ut=vt[Bt].type,Rt=(0,n.hb)(()=>{Ye({userId:e})},[e]),Vt=(0,n.hb)(({offsetId:t})=>{nt({peerId:e,offsetId:t})},[e]),Jt=(0,n.hb)(({offsetId:t})=>{ot({peerId:e,offsetId:t})},[e]),Lt=(0,n.hb)(()=>{lt({peerId:e})},[e]),Ot=(0,n.hb)(()=>{Xe({chatId:e})},[e,Xe]);(0,M.A)(([e])=>{if(!Se||!e)return void Pt(Se);const t=e.map(e=>(0,l.p)(e)),a=Se.map(e=>(0,l.p)(e));t.some((e,t)=>e!==a[t])?Tt(()=>{Pt(Se)}):Pt(Se)},[Se,Tt]);const[Dt,Gt,jt,qt]=(0,U.A)({loadMoreMembers:Ot,searchMessages:Ze,loadStories:Vt,loadStoriesArchive:Jt,loadMoreGifts:Lt,loadCommonChats:Rt,tabType:Ut,mediaSearchType:fe,groupChatMembers:ke,commonChatIds:xe,usersById:Te,userStatusesById:Fe,chatsById:Ne,chatMessages:re,foundIds:le,threadId:a,storyIds:me,giftIds:Nt,pinnedStoryIds:he,archiveStoryIds:pe,similarChannels:De,similarBots:Ge}),zt=At&&"dialogs"===Dt||Ie&&"stories"===Dt||"members"===Dt||!Ae&&"media"===Dt,_t=vt.findIndex(({type:e})=>e===Dt);(0,C.A)("members"===Dt?Gt:void 0);const Kt=(0,T.A)(()=>{Ct()}),{handleScroll:Ht}=(0,B.A)(mt,Dt,s,We,Ke,St,Kt),{applyTransitionFix:Wt,releaseTransitionFix:$t}=(0,R.A)(mt),[Xt,Yt]=(0,E.A)(),{observe:Qt}=(0,k.BL)({rootRef:mt,throttleMs:de}),Zt=(0,T.A)(()=>{$t(),Yt()}),ea=(0,T.A)(()=>{st({newChatMembersProgress:i.D7.InProgress})});(0,n.vJ)(()=>{$e({mediaType:Ut})},[$e,Ut,a]);const ta=(0,T.A)(e=>{et({chatId:It,threadId:r.l3,messageId:e,origin:i.TQ.SharedMedia})}),aa=(0,T.A)(e=>{et({standaloneMedia:we?.flatMap(e=>e?.content.photo||e?.content.video).filter(Boolean),origin:i.TQ.PreviewMedia,mediaIndex:e})}),sa=(0,T.A)(e=>{tt({chatId:It,messageId:e})}),na=(0,T.A)(e=>{Qe({id:e})}),oa=(0,T.A)(e=>{at({chatId:e.chatId,messageId:e.id})}),ra=(0,T.A)(()=>{yt(void 0)});(0,M.A)(([e])=>{if(void 0===e||0===Et||e===Ae)return;const t=Et+(Ae?1:-1);Mt(Math.min(t,vt.length-1))},[Ae,Et,vt]);const ia=(0,T.A)(()=>{ut({peerId:e})});let ca;(0,n.vJ)(()=>{if(ht.current&&g.TF)return(0,y.wJ)(ht.current,{selectorToPreventScroll:".Profile",onSwipe:(e,t)=>t===y.ez.Left?(Mt(Math.min(Bt+1,vt.length-1)),!0):t===y.ez.Right&&(Mt(Math.max(0,Bt-1)),!0)})},[Bt,vt.length]),zt?ca=Be?0:ce:Gt||we||(ca=c.jhd);const da=(0,N.A)([e,a,Dt,Bt],ca);const la=`.shared-media-transition > .Transition_slide-active.${Dt}-list > .scroll-item`;return n.Ay.createElement(Z.A,{ref:mt,className:"Profile custom-scroll",itemSelector:la,items:da?Gt:void 0,cacheBuster:Xt,sensitiveArea:c.ZhW,preloadBackwards:da?"members"===Dt?c.nnT:c.Um:0,noScrollRestoreOnTop:!0,noFastList:!0,onLoadMore:jt,onScroll:Ht},!qt&&!At&&ue(m?.id||It,Be&&da,_e,Boolean(m)),!Ue&&n.Ay.createElement("div",{className:"shared-media"},n.Ay.createElement(ne.Ay,{ref:ht,name:(0,A.P)("slideOptimized",Le,void 0,pt.isRtl),activeKey:_t,renderCount:vt.length,shouldRestoreHeight:!0,className:"shared-media-transition",onStart:Wt,onStop:Zt},function(){if("dialogs"===Dt)return n.Ay.createElement($.A,{className:"saved-dialogs",folderType:"saved",isActive:!0});const t=!Gt&&!we||!da||!re,a=zt&&!da,s=t&&!a;return n.Ay.createElement(ne.Ay,{activeKey:s?0:1,name:"fade"},function(t,a){if(t){const e=Boolean("members"===Dt&&Ce);return n.Ay.createElement("div",{className:"content empty-list"},!a&&!e&&n.Ay.createElement(ae.A,null),e&&n.Ay.createElement(q.A,{text:"You have no access to group members list."}))}const s=Gt&&!Gt?.length;if(s&&"gifts"===Dt)return n.Ay.createElement("div",{className:"nothing-found-gifts"},n.Ay.createElement(V.A,{size:160,tgsUrl:v.w.SearchingDuck,nonInteractive:!0,noLoop:!0}),n.Ay.createElement("div",{className:"description"},gt("GiftSearchEmpty")),n.Ay.createElement(ee.A,{className:"date",onClick:ia},gt("GiftSearchReset")));if(s){let e;switch(Dt){case"members":e=Ce?"You have no access to group members list.":"No members found";break;case"commonChats":e=pt("NoGroupsInCommon");break;case"documents":e=pt("lng_media_file_empty");break;case"links":e=pt("lng_media_link_empty");break;case"audio":e=pt("lng_media_song_empty");break;case"voice":e=pt("lng_media_audio_empty");break;case"stories":e=pt("StoryList.SavedEmptyState.Title");break;case"storiesArchive":e=pt("StoryList.ArchivedEmptyState.Title");break;default:e=pt("SharedMedia.EmptyTitle")}return n.Ay.createElement("div",{className:"content empty-list"},n.Ay.createElement(q.A,{text:e}))}return re?n.Ay.createElement("div",{className:`content ${Dt}-list`,dir:pt.isRtl&&"media"===Dt?"rtl":void 0,teactFastList:!0},"media"===Dt?Gt.map(e=>re[e]&&n.Ay.createElement(j.A,{key:e,message:re[e],isProtected:Ve||re[e].isProtected,observeIntersection:Qt,onClick:ta})):"stories"===Dt||"storiesArchive"===Dt?Gt.map((e,t)=>ge?.[e]&&n.Ay.createElement(X.A,{teactOrderKey:t,key:`${Dt}_${e}`,story:ge[e],isArchive:"storiesArchive"===Dt})):"documents"===Dt?Gt.map(e=>re[e]&&n.Ay.createElement(L.A,{key:e,document:(0,d.zC)(re[e]),withDate:!0,smaller:!0,className:"scroll-item",isDownloading:(0,d.$r)(Re,(0,d.zC)(re[e])),observeIntersection:Qt,onDateClick:oa,message:re[e],shouldWarnAboutSvg:Oe})):"links"===Dt?Gt.map(e=>re[e]&&n.Ay.createElement(W.A,{key:e,message:re[e],isProtected:Ve||re[e].isProtected,observeIntersection:Qt,onMessageClick:oa})):"audio"===Dt?Gt.map(e=>re[e]&&n.Ay.createElement(J.Ay,{key:e,theme:u,message:re[e],origin:i.d9.SharedMedia,date:re[e].date,className:"scroll-item",onPlay:sa,onDateClick:oa,canDownload:!Ve&&!re[e].isProtected,isDownloading:(0,d.$r)(Re,re[e].content.audio)})):"voice"===Dt?Gt.map(e=>{const t=(0,o.mS)(),a=re[e];if(!a)return;const s=(0,h.iS)(t,a);return re[e]&&n.Ay.createElement(J.Ay,{key:e,theme:u,message:a,senderTitle:(0,S.N)(pt,a,Ne,Te),origin:i.d9.SharedMedia,date:a.date,className:"scroll-item",onPlay:sa,onDateClick:oa,canDownload:!Ve&&!a.isProtected,isDownloading:(0,d.$r)(Re,s)})}):"members"===Dt?Gt.map((e,t)=>{return n.Ay.createElement(te.A,{key:e,teactOrderKey:t,className:"chat-item-clickable contact-list-item scroll-item small-icon",onClick:()=>na(e),contextActions:(a=e,a!==H&&Me?[{title:pt("lng_context_remove_from_group"),icon:"stop",handler:()=>{yt(a)}}]:void 0)},n.Ay.createElement(_.A,{userId:e,adminMember:Pe?.[e],forceShowSelf:!0,withStory:!0}));var a}):"commonChats"===Dt?Gt.map((e,t)=>n.Ay.createElement(te.A,{key:e,teactOrderKey:t,className:"chat-item-clickable scroll-item small-icon",onClick:()=>Qe({id:e})},n.Ay.createElement(D.A,{chatId:e}))):"previewMedia"===Dt?we.map((e,t)=>n.Ay.createElement(z.A,{key:e.date,media:e,isProtected:Ve,observeIntersection:Qt,onClick:aa,index:t})):"similarChannels"===Dt?n.Ay.createElement("div",{key:Dt},Gt.map((e,t)=>n.Ay.createElement(te.A,{key:e,teactOrderKey:t,className:(0,f.A)("chat-item-clickable search-result",!je&&t===De.length-1&&"blured"),onClick:()=>Qe({id:e})},n.Ay.createElement(D.A,{avatarSize:"large",chatId:e,withFullInfo:!0}))),!je&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(Y.A,{className:"show-more-channels",size:"smaller",onClick:()=>rt()},pt("UnlockSimilar"),n.Ay.createElement(G.A,{name:"unlock-badge"})),n.Ay.createElement("div",{className:"more-similar"},(0,b.A)(pt("MoreSimilarText",qe),["simple_markdown"])))):"similarBots"===Dt?n.Ay.createElement("div",{key:Dt},Gt.map((e,t)=>n.Ay.createElement(te.A,{key:e,teactOrderKey:t,className:(0,f.A)("chat-item-clickable search-result",!je&&t===Ge.length-1&&"blured"),onClick:()=>Qe({id:e})},(0,I.L8)(e)?n.Ay.createElement(_.A,{userId:e,avatarSize:"medium"}):n.Ay.createElement(D.A,{chatId:e,avatarSize:"medium"}))),!je&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(Y.A,{className:"show-more-bots",size:"smaller",onClick:()=>rt()},gt("UnlockMoreSimilarBots"),n.Ay.createElement(G.A,{name:"unlock-badge"})),n.Ay.createElement("div",{className:"more-similar"},(0,b.A)(gt("MoreSimilarBotsDescription",{count:qe},{withNodes:!0,withMarkdown:!0,pluralValue:qe}))))):"gifts"===Dt?kt?.map(t=>n.Ay.createElement(O.A,{peerId:e,key:(0,l.p)(t),style:Ft?`view-transition-name: vt${(0,l.p)(t)}`:void 0,gift:t,observeIntersection:Qt})):void 0):void 0}(t,a))}()),n.Ay.createElement(se.A,{activeTab:Bt,tabs:vt,onSwitchTab:xt})),Ee&&n.Ay.createElement(Q.A,{className:(0,f.A)(!t&&"hidden"),isShown:da,onClick:ea,ariaLabel:pt("lng_channel_add_users")},n.Ay.createElement(G.A,{name:"add-user-filled"})),Me&&n.Ay.createElement(oe.A,{isOpen:Boolean(ft),userId:ft,onClose:ra}))};function ue(e,t,a,s){return n.Ay.createElement("div",{className:"profile-info"},n.Ay.createElement(H.A,{peerId:e,canPlayVideo:t,isForMonoforum:s}),n.Ay.createElement(K.A,{chatOrUserId:e,isSavedDialog:a}))}const me=(0,n.ph)((0,o.EK)((e,{chatId:t,threadId:a,isMobile:s})=>{const n=(0,u.mBe)(e,t),o=(0,u.hds)(e,t),i=(0,u.AWZ)(e,t),c=(0,u.vGo)(e,t),l=(0,u.zeq)(e,t),{animationLevel:h,shouldWarnAboutSvg:g}=(0,p.l)(e),{currentType:f,resultsByType:y}=(0,u.BU_)(e)||{},{foundIds:I}=y&&f&&y[f]||{},A=Boolean(o?.isForum&&a&&a!==r.l3),{byId:v,statusesById:b}=e.users,{byId:S}=e.chats,w=(0,d.cG)(t,a,e.currentUserId),C=o&&(0,d.YE)(o),E=o&&(0,d.WX)(o),M=n&&(0,d.tv)(n),x=!A&&!w&&(C||E&&(0,d.SJ)(o))&&!o?.isMonoforum,k=i?.members,P=i?.adminMembersById,T=x&&o&&(o.isForbidden||i&&!i.canViewMembers),F=x&&o&&((0,d.ub)(o,"inviteUsers")||!E&&!(0,d.Sq)(o,"inviteUsers")||o.isCreator),N=x&&o&&((0,d.ub)(o,"banUsers")||o.isCreator),B=(0,u.yuw)(e),{similarChannelIds:U}=(0,u.dg4)(e,t)||{},{similarBotsIds:R}=(0,u.AOG)(e,t)||{},V=(0,u.g29)(e),J=n||o,L=c||i,O=n&&!n.isSelf&&!(0,d.tv)(n)&&!w&&Boolean(c?.commonChatsCount),D=(0,u.Ua4)(e,t),G=c?.botInfo?.hasPreviewMedia,j=e.users.previewMediaByBotId[t],q=J&&(n?.isSelf||!J.areStoriesHidden&&L?.hasPinnedStories)&&!w,z=q?(0,u._bp)(e,J.id):void 0,_=z?.profileIds,K=z?.pinnedIds,H=z?.byId,W=z?.archiveIds,$=Boolean(L?.starGiftCount)&&!w,X=(0,u.nTw)(e).savedGifts.giftsByPeerId[t],Y=(0,u.k2W)(e,t),Q=o&&(0,u._ls)(e,o.id);return{theme:(0,u.SJA)(e),isChannel:E,isBot:M,messagesById:l,foundIds:I,mediaSearchType:f,hasCommonChatsTab:O,hasStoriesTab:q,hasMembersTab:x,hasPreviewMediaTab:G,areMembersHidden:T,canAddMembers:F,canDeleteMembers:N,currentUserId:e.currentUserId,isRightColumnShown:(0,u.gjV)(e,s),isRestricted:Q,activeDownloads:B,usersById:v,userStatusesById:b,chatsById:S,storyIds:_,hasGiftsTab:$,gifts:X?.gifts,pinnedStoryIds:K,archiveStoryIds:W,storyByIds:H,isChatProtected:o?.isProtected,nextProfileTab:(0,u.nTw)(e).nextProfileTab,forceScrollProfileTab:(0,u.nTw)(e).forceScrollProfileTab,animationLevel:h,shouldWarnAboutSvg:g,similarChannels:U,similarBots:R,botPreviewMedia:j,isCurrentUserPremium:V,isTopicInfo:A,isSavedDialog:w,isSynced:e.isSynced,limitSimilarPeers:(0,m.B)(e,"recommendedChannels"),...x&&k&&{members:k,adminMembersById:P},...O&&n&&{commonChatIds:D?.ids},monoforumChannel:Y}})(le));s()}catch(he){s(he)}})},54917:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{h:()=>d});var n=a(49086),o=a(13439),r=a(86525),i=a(3544),c=e([n,i]);function d(e,t){const a=(0,o.mS)(),s=(0,i.Su)(t),c=s?`${s} `:"",d=(0,n.V)({message:t,shouldRenderAsHtml:!0})?.join(""),l=(0,r.ni)(a,t);return`${c}${(0,i.oL)(e,t,l,d,!0)}`}[n,i]=c.then?(await c)():c,s()}catch(l){s(l)}})},55088:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Calls,"RatePhoneCallModal",!t);return a?s.Ay.createElement(a,e):void 0}},56112:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(96540),n=a(46942),o=a.n(n),r=a(29356),i=a(89116);const c=[i.N.CustomizationPrompt,i.N.AddTopicPanel,i.N.ChatPicker],d=({icon:e,className:t,onClick:a})=>s.createElement("div",{className:o()("flex items-center justify-center cursor-pointer w-[2.75rem] h-[2.75rem] rounded-full text-[var(--color-text-secondary)] hover:bg-[var(--color-interactive-element-hover)]",t),onClick:a},e),l=e=>{const{drawerKey:t,onClose:a}=e,[n,o]=(0,s.useState)(""),{openDrawer:l,drawerParams:u}=(0,i.S)(),m=(0,s.useCallback)(()=>{u?.onBack?u.onBack():l(i.N.PersonalizeSettings,{activeKey:t===i.N.CustomizationPrompt?0:1})},[t,u,l]);return(0,s.useEffect)(()=>{switch(t){case i.N.PersonalizeSettings:o("Personalized settings");break;case i.N.OriginalMessages:o("Original Messages");break;case i.N.CustomizationPrompt:case i.N.AddTopicPanel:o("Add Topics");break;case i.N.ChatPicker:o("Select chat");break;default:o("")}},[m,t]),s.createElement("div",{className:"h-[56px] flex items-center relative py-[0.5rem] px-[0.8125rem] w-[var(--right-column-width)]"},t&&c.includes(t)?s.createElement(d,{icon:s.createElement(r.A,{name:"arrow-left",className:"text-[26px]"}),onClick:m}):s.createElement(d,{icon:s.createElement(r.A,{name:"close",className:"text-[26px]"}),onClick:a}),s.createElement("div",{className:"text-[1.25rem] font-[var(--font-weight-medium)] pl-[1.375rem]"},n))}},56437:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"DeleteMessageModal",!t);return a?s.Ay.createElement(a,e):void 0}},57988:(e,t,a)=>{var s=a(23174),n=a(89925),o=a(14487),r=a(87894),i=a(26129),c=a(13439),d=a(32989),l=a(60919),u=a(56494);(0,c.aJ)("openMediaViewer",(e,t,a)=>{const{chatId:n,threadId:r=s.l3,messageId:i,timestamp:c,mediaIndex:u,isAvatarView:m,isSponsoredMessage:h,origin:p,withDynamicLoading:g,standaloneMedia:f,tabId:y=(0,o.g0)()}=a,I=(0,l.nTw)(e,y);return(0,d.w)(e,{mediaViewer:{...I.mediaViewer,chatId:n,threadId:r,messageId:i,mediaIndex:u||0,isAvatarView:m,isSponsoredMessage:h,origin:p,standaloneMedia:f,isHidden:!1,withDynamicLoading:g,timestamp:c},forwardMessages:{},isShareMessageModalShown:!1},y)}),(0,c.aJ)("closeMediaViewer",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{},{volume:n,isMuted:r,playbackRate:i,isHidden:c}=(0,l.nTw)(e,s).mediaViewer;return(0,d.w)(e,{mediaViewer:{volume:n,isMuted:r,isHidden:c,playbackRate:i}},s)}),(0,c.aJ)("openMediaFromTimestamp",(e,t,a)=>{const{chatId:s,messageId:r,threadId:c,timestamp:d,tabId:m=(0,o.g0)()}=a,h=(0,l.O5q)(e,s,r);if(!h)return;const p=(0,i.Q)(h),g=(0,l.gMr)(e,h),f=(0,u.ly)(e,h),y=f?.duration;if(y){if(y<=d)return;return"video"===f.mediaType?void t.openMediaViewer({chatId:s,messageId:r,threadId:c,origin:n.TQ.Inline,timestamp:d,tabId:m}):void t.openAudioPlayer({chatId:s,messageId:r,threadId:c,origin:n.d9.Inline,timestamp:d,tabId:m})}const I=g?(0,u.ly)(e,g):void 0,A=I?.duration;!A||A<=d||("video"!==I.mediaType?t.openAudioPlayer({chatId:g.chatId,messageId:g.id,threadId:p?.replyToTopId,origin:n.d9.Inline,timestamp:d,tabId:m}):t.openMediaViewer({chatId:g.chatId,messageId:g.id,threadId:p?.replyToTopId,origin:n.TQ.Inline,timestamp:d,tabId:m}))}),(0,c.aJ)("updateLastPlaybackTimestamp",(e,t,a)=>{const{chatId:s,messageId:n,timestamp:o}=a,i=e.messages.playbackByChatId[s]?.byId||{};return o?{...e,messages:{...e.messages,playbackByChatId:{...e.messages.playbackByChatId,[s]:{byId:{...i,[n]:o}}}}}:{...e,messages:{...e.messages,playbackByChatId:{...e.messages.playbackByChatId,[s]:{byId:(0,r.cJ)(i,[n])}}}}}),(0,c.aJ)("setMediaViewerVolume",(e,t,a)=>{const{volume:s,tabId:n=(0,o.g0)()}=a;return(0,d.w)(e,{mediaViewer:{...(0,l.nTw)(e,n).mediaViewer,volume:s,isMuted:!1}},n)}),(0,c.aJ)("setMediaViewerPlaybackRate",(e,t,a)=>{const{playbackRate:s,tabId:n=(0,o.g0)()}=a;return e={...e,mediaViewer:{...e.mediaViewer,lastPlaybackRate:s}},(0,d.w)(e,{mediaViewer:{...(0,l.nTw)(e,n).mediaViewer,playbackRate:s}},n)}),(0,c.aJ)("setMediaViewerMuted",(e,t,a)=>{const{isMuted:s,tabId:n=(0,o.g0)()}=a;return(0,d.w)(e,{mediaViewer:{...(0,l.nTw)(e,n).mediaViewer,isMuted:s}},n)}),(0,c.aJ)("setMediaViewerHidden",(e,t,a)=>{const{isHidden:s,tabId:n=(0,o.g0)()}=a;return(0,d.w)(e,{mediaViewer:{...(0,l.nTw)(e,n).mediaViewer,isHidden:s}},n)})},58269:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>j});var n=a(84051),o=a(13439),r=a(31481),i=a(90709),c=a(70636),d=a(60919),l=a(56494),u=a(53827),m=a(96454),h=a(87357),p=a(74167),g=a(49642),f=a(4961),y=a(35749),I=a(43874),A=a(88792),v=a(10722),b=a(14),S=a(17712),w=a(40611),C=a(59030),E=a(34201),M=a(48885),x=a(54746),k=a(64493),P=a(22699),T=a(24433),F=a(82497),N=a(42452),B=e([c,p,w,C,k,P,T,F]);[c,p,w,C,k,P,T,F]=B.then?(await B)():B;const U={.5:.66,.75:.8,1:1,1.5:1.4,2:1.8},R=Object.keys(U).sort().map(Number),V=1,J=2,L=({message:e,mediaDuration:t,className:a,noUi:s,sender:d,chat:l,volume:f,playbackRate:T,isPlaybackRateActive:B,isMuted:L,isFullWidth:j,timestamp:q,onPaneStateChange:z})=>{const{setAudioPlayerVolume:_,setAudioPlayerPlaybackRate:K,setAudioPlayerMuted:H,focusMessage:W,closeAudioPlayer:$}=(0,o.ko)(),X=(0,C.A)(),{isMobile:Y}=(0,I.Ay)(),Q=(0,b.A)(e),{audio:Z,voice:ee,video:te}=Q?(0,i.r_)(Q):{},ae=Boolean(ee||te),se=ae||(Z?.duration||0)>r.CVm,ne=d?(0,c.F9)(X,d):void 0,oe=(0,y.A)(Q,"inline"),re=oe&&p.Ih(oe),ie=(0,w.A)(Q,d,l),{playPause:ce,stop:de,isPlaying:le,requestNextTrack:ue,requestPreviousTrack:me,isFirst:he,isLast:pe,setVolume:ge,toggleMuted:fe,setPlaybackRate:ye,setCurrentTime:Ie}=(0,A.A)(e&&(0,u.dj)(e),t||0,ae?"voice":"audio",re,void 0,ie,void 0,!0,void 0,void 0,e&&(0,i.Nb)(e),!0),Ae=Boolean(e),{ref:ve}=(0,E.A)({isOpen:Ae,shouldForceOpen:j}),{ref:be,shouldRender:Se}=(0,M.A)({isOpen:Ae,isDisabled:!j,ref:ve,onStateChange:z}),{isContextMenuOpen:we,handleBeforeContextMenu:Ce,handleContextMenu:Ee,handleContextMenuClose:Me,handleContextMenuHide:xe}=(0,v.A)(ve,!Se);(0,n.vJ)(()=>{q&&Ie(q)},[q,Ie]);const ke=(0,S.A)(()=>{const{chatId:e,id:t}=Q;W({chatId:e,messageId:t})}),Pe=(0,S.A)(()=>{de&&(le&&ce(),$(),(0,g.Eg)(),de())}),Te=(0,S.A)(e=>{ge&&(_({volume:e/100}),ge(e/100))}),Fe=(0,S.A)(()=>{m.TF&&!m.pz||fe&&(fe(),H({isMuted:!L}))}),Ne=(0,S.A)((e,t=!0)=>{if(!ye)return;const a=U[e],s=e!==V&&t;K({playbackRate:a,isPlaybackRateActive:s}),ye(s?a:V)}),Be=(0,S.A)(()=>{Me();const e=Number(Object.entries(U).find(([,e])=>e===T)?.[0])||V,t=!B;Ne(t&&e===V?J:e,t)}),Ue=(0,S.A)(()=>{const e=Object.entries(U).find(([,e])=>e===T)?.[0]||V,t=`${T===V?J:e}Х`;return n.Ay.createElement("div",{className:"playback-wrapper"},we&&n.Ay.createElement("div",{className:"playback-backdrop",onClick:Me}),n.Ay.createElement(k.A,{round:!0,className:(0,h.A)("playback-button",B&&"applied",we&&"on-top"),color:"translucent",size:"smaller",ariaLabel:"Playback Rate",ripple:!Y,onMouseEnter:Ee,onClick:Be,onMouseDown:Ce,onContextMenu:Ee},n.Ay.createElement("span",{className:(0,h.A)("playback-button-inner",4===t.length&&"small",5===t.length&&"tiny")},t)))}),Re=(0,n.Kr)(()=>0===f||L?"muted":f<.3?"volume-1":f<.6?"volume-2":"volume-3",[f,L]);if(!s&&Se)return n.Ay.createElement("div",{className:(0,h.A)("AudioPlayer",j?"full-width-player":"mini-player",a),dir:X.isRtl?"rtl":void 0,ref:be},n.Ay.createElement("div",{className:"AudioPlayer-content",onClick:ke},Z?O(Z):D(X("AttachAudio"),ne),n.Ay.createElement(N.A,null)),n.Ay.createElement(k.A,{round:!0,ripple:!Y,color:"translucent",size:"smaller",className:"player-button",disabled:he?.(),onClick:me,ariaLabel:"Previous track"},n.Ay.createElement(x.A,{name:"skip-previous"})),n.Ay.createElement(k.A,{round:!0,ripple:!Y,color:"translucent",size:"smaller",className:(0,h.A)("toggle-play","player-button",le?"pause":"play"),onClick:ce,ariaLabel:le?"Pause audio":"Play audio"},n.Ay.createElement(x.A,{name:"play"}),n.Ay.createElement(x.A,{name:"pause"})),n.Ay.createElement(k.A,{round:!0,ripple:!Y,color:"translucent",size:"smaller",className:"player-button",disabled:pe?.(),onClick:ue,ariaLabel:"Next track"},n.Ay.createElement(x.A,{name:"skip-next"})),n.Ay.createElement("div",{className:"volume-button-wrapper"},n.Ay.createElement(k.A,{round:!0,className:"player-button volume-button",color:"translucent",size:"smaller",ariaLabel:"Volume",onClick:Fe,ripple:!Y},n.Ay.createElement(x.A,{name:Re})),!m.pz&&n.Ay.createElement("div",{className:"volume-slider-wrapper"},n.Ay.createElement("div",{className:"volume-slider-spacer"}),n.Ay.createElement("div",{className:"volume-slider"},n.Ay.createElement(F.A,{bold:!0,value:L?0:100*f,onChange:Te})))),se&&n.Ay.createElement(P.A,{forceOpen:we,positionX:"right",positionY:"top",className:"playback-rate-menu",trigger:Ue,onClose:Me,onHide:xe,onMouseEnterBackdrop:Me},R.map(e=>G(e,T,Ne,B))),n.Ay.createElement(k.A,{round:!0,className:"player-close",color:"translucent",size:"smaller",onClick:Pe,ariaLabel:"Close player"},n.Ay.createElement(x.A,{name:"close"})))};function O(e){const{title:t,performer:a,fileName:s}=e;return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"title",dir:"auto"},(0,f.A)(t||s)),a&&n.Ay.createElement("div",{className:"subtitle",dir:"auto"},(0,f.A)(a)))}function D(e,t){return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"title",dir:"auto"},t&&(0,f.A)(t)),n.Ay.createElement("div",{className:"subtitle",dir:"auto"},e))}function G(e,t,a,s){const o=t===U[e]&&s||e===V&&!s;return n.Ay.createElement(T.A,{key:e,onClick:()=>a(e),icon:o?"check":void 0,customIcon:o?void 0:n.Ay.createElement(x.A,{name:"placeholder"})},e,"X")}const j=(0,o.EK)((e,{isHidden:t})=>{const{audioPlayer:a}=(0,d.nTw)(e),{chatId:s,messageId:n}=a,o=!t&&s&&n?(0,d.O5q)(e,s,n):void 0,r=o&&(0,d.Y7C)(e,o),i=o&&(0,d.hds)(e,o.chatId),{volume:c,playbackRate:u,isMuted:m,isPlaybackRateActive:h,timestamp:p}=(0,d.nTw)(e).audioPlayer;return{message:o,sender:r,chat:i,volume:c,playbackRate:u,isPlaybackRateActive:h,isMuted:m,timestamp:p,mediaDuration:o?(0,l.Y9)(e,o):void 0}})(L);s()}catch(q){s(q)}})},59405:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>v});var n=a(84051),o=a(13439),r=a(23174),i=a(60919),c=a(96454),d=a(95362),l=a(14235),u=a(74167),m=a(17712),h=a(56133),p=e([u]),g=p.then?(await p)():p;u=g[0];const f=1e3,y=new Set,I=new Set,A=({activeDownloads:e})=>{const{cancelMediaHashDownloads:t,showNotification:a}=(0,o.ko)(),s=(0,h.A)(f,!0),p=(0,m.A)(e=>{I.add(e),s(()=>{I.size&&(t({mediaHashes:Array.from(I)}),I.clear())})});(0,n.vJ)(()=>{Object.keys(e).length?Object.entries(e).forEach(([e,t])=>{if(y.has(e))return;y.add(e);const{size:s,filename:n,format:m}=t,h=u.Ih(e);if(h)return(0,d.A)(h,n),void p(e);if(s>c.kn&&!c.l5&&!c.Tz)return a({message:"Downloading files bigger than 2GB is not supported in your browser."}),void p(e);const g=()=>{(0,i.nTw)((0,o.mS)()).activeDownloads[e]||u.ch(g)};u.hd(e,m,!0,g,(0,l.A)()).then(t=>{if(m===r.qZ.DownloadUrl){const e=new URL(t,window.document.baseURI);e.searchParams.set("filename",encodeURIComponent(n));const s=window.open(e.toString());s?.addEventListener("beforeunload",()=>{a({message:"Download started. Please, do not close the app before it is finished."})})}else t&&(0,d.A)(t,n);p(e)})}):y.clear()},[e])},v=(0,n.ph)((0,o.EK)(e=>({activeDownloads:(0,i.nTw)(e).activeDownloads}))(A));s()}catch(e){s(e)}})},59410:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(84051),n=a(31481),o=a(90709),r=a(79582),i=a(96374),c=a(35297);function d({loadMoreMembers:e,loadCommonChats:t,searchMessages:a,loadStories:n,loadStoriesArchive:i,loadMoreGifts:c,tabType:d,mediaSearchType:m,groupChatMembers:h,commonChatIds:p,usersById:g,userStatusesById:f,chatsById:y,chatMessages:I,foundIds:A,threadId:v,storyIds:b,giftIds:S,pinnedStoryIds:w,archiveStoryIds:C,similarChannels:E,similarBots:M}){const x="members"!==d&&m?m:d,k=(0,s.Kr)(()=>{if(h&&g&&f)return(0,o.UB)(h.map(({userId:e})=>e),g,f)},[h,g,f]),P=(0,s.Kr)(()=>{if(p&&y)return(0,r.A)(p,!0)},[y,p]),[T,F,N]=l(e,k),[B,U,R]=u("media",x,a,I,A,v),[V,J,L]=u("documents",x,a,I,A,v),[O,D,G]=u("links",x,a,I,A,v),[j,q,z]=u("audio",x,a,I,A,v),[_,K,H]=u("voice",x,a,I,A,v),[W,$,X]=l(t,P),Y=(0,s.Kr)(()=>{if(!b?.length)return b;const e=new Set(w);return b.slice().sort((t,a)=>{const s=e.has(t),n=e.has(a);return s&&!n?-1:!s&&n?1:a-t})},[b,w]),[Q,Z,ee]=l(n,Y),[te,ae,se]=l(i,C);let ne,oe,re=!1;switch(x){case"members":ne=T,oe=F,re=N;break;case"commonChats":ne=W,oe=$,re=X;break;case"media":ne=B,oe=U,re=R;break;case"documents":ne=V,oe=J,re=L;break;case"links":ne=O,oe=D,re=G;break;case"audio":ne=j,oe=q,re=z;break;case"voice":ne=_,oe=K,re=H;break;case"stories":ne=Q,oe=Z,re=ee;break;case"storiesArchive":ne=te,oe=ae,re=se;break;case"similarChannels":ne=E;break;case"similarBots":ne=M;break;case"gifts":ne=S,oe=c;break;case"dialogs":re=!0}return[x,ne,oe,re]}function l(e,t){const[a,s]=(0,i.A)(e,t,void 0,n.nnT);return[a,s,!(!a||!t||a[0]===t[0])]}function u(e,t,a,r,d,l){const u=(0,s.li)();(0,c.A)(()=>{u.current=void 0},[l]),(0,c.A)(()=>{t===e&&r&&d&&(u.current=(0,o.lH)(r,d,e))},[r,d,t,e]);const[m,h]=(0,i.A)(a,u.current,void 0,"media"===e?n.Um:n.gXr);return[m,h,!(!m||!u.current||m[0]===u.current[0])]}},59876:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>y});var n=a(84051),o=a(13439),r=a(60919),i=a(14737),c=a(17712),d=a(48885),l=a(46402),u=a(15578),m=e([l]),h=m.then?(await m)():m;l=h[0];const p=16,g=5e3,f=({peerId:e,wasShown:t,botVerification:a,onPaneStateChange:s})=>{const r=Boolean(!t&&a),{markBotVerificationInfoShown:m}=(0,o.ko)(),{ref:h,shouldRender:f}=(0,d.A)({isOpen:r,onStateChange:s}),y=(0,c.A)(()=>{m({peerId:e})});if((0,i.A)(y,t?void 0:g),f&&a)return n.Ay.createElement("div",{ref:h,className:u.A.root},n.Ay.createElement("span",{className:u.A.icon},n.Ay.createElement(l.A,{documentId:a.iconId,size:p})),a.description)},y=(0,n.ph)((0,o.EK)((e,{peerId:t})=>{const a=(0,r.kBv)(e,t),s=a?.botVerification;return{botVerification:s,wasShown:e.settings.botVerificationShownPeerIds.includes(t)}})(f));s()}catch(e){s(e)}})},60688:(e,t,a)=>{a.d(t,{V:()=>n,w:()=>o});var s=a(96454);function n(e){s.cp?window.electron.setWindowTitle(e):document.title!==e&&(document.title=e)}const o=(0,a(37836).sg)(n,200,!1)},60732:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>b});var n=a(84051),o=a(13439),r=a(90709),i=a(70636),c=a(60919),d=a(87357),l=a(14),u=a(37661),m=a(17712),h=a(59030),p=a(48885),g=a(54746),f=a(64493),y=a(19806),I=a(94189),A=e([i,h,f,y,I]);[i,h,f,y,I]=A.then?(await A)():A;const v=({chatId:e,className:t,isAutoArchived:a,canReportSpam:s,canAddContact:c,canBlockContact:A,peer:v,currentUserId:b,onPaneStateChange:S})=>{const{openAddContactDialog:w,blockUser:C,reportSpam:E,deleteChat:M,leaveChannel:x,deleteChatUser:k,deleteHistory:P,toggleChatArchived:T,hidePeerSettingsBar:F}=(0,o.ko)(),N=(0,h.A)(),[B,U,R]=(0,u.A)(),[V,J]=(0,n.J0)(!0),[L,O]=(0,n.J0)(!0),D=(0,l.A)(v),G=D&&(0,i.vj)(D)?D:void 0,j=D&&(0,i.mO)(D)?D:void 0,q=G&&(0,r.yn)(G),z=(0,l.A)(c),_=(0,l.A)(A),K=(0,l.A)(s),H=(0,l.A)(a),W=(0,m.A)(()=>{w({userId:e}),H&&T({id:e})}),$=(0,m.A)(()=>{R(),C({userId:e}),K&&V&&E({chatId:e}),L&&M({chatId:e})}),X=(0,m.A)(()=>{F({peerId:e})}),Y=(0,m.A)(()=>{R(),E({chatId:e}),q?(k({chatId:e,userId:b}),P({chatId:e,shouldDeleteForAll:!1})):x({chatId:e})}),Q=Boolean((c||A||s)&&v);(0,n.vJ)(()=>{Q||R()},[Q]);const{ref:Z,shouldRender:ee}=(0,p.A)({isOpen:Q,onStateChange:S});if(ee)return n.Ay.createElement("div",{ref:Z,className:(0,d.A)("ChatReportPane",t),dir:N.isRtl?"rtl":void 0},z&&n.Ay.createElement(f.A,{isText:!0,fluid:!0,size:"tiny",className:"ChatReportPane--Button",onClick:W},N("lng_new_contact_add")),_&&n.Ay.createElement(f.A,{color:"danger",isText:!0,fluid:!0,size:"tiny",className:"ChatReportPane--Button",onClick:U},N("lng_new_contact_block")),K&&!_&&n.Ay.createElement(f.A,{color:"danger",isText:!0,fluid:!0,size:"tiny",className:"ChatReportPane--Button",onClick:U},N("lng_report_spam_and_leave")),n.Ay.createElement(f.A,{round:!0,ripple:!0,size:"smaller",color:"translucent",onClick:X,ariaLabel:N("Close")},n.Ay.createElement(g.A,{name:"close"})),n.Ay.createElement(I.A,{isOpen:B,onClose:R,title:N("BlockUserTitle",j?(0,r.u0)(j):(0,r.Js)(N,G)),text:j?N("UserInfo.BlockConfirmationTitle",(0,r.Yg)(j)):N("Chat.Confirm.ReportSpam.Channel"),confirmIsDestructive:!0,confirmLabel:N("Block"),confirmHandler:j?$:Y},j&&n.Ay.createElement(y.A,{className:"dialog-checkbox",label:N("DeleteThisChat"),checked:L,onCheck:O}),j&&s&&n.Ay.createElement(y.A,{className:"ChatReportPane--Checkbox dialog-checkbox",label:N("ReportChat"),checked:V,onCheck:J})))},b=(0,n.ph)((0,o.EK)((e,{chatId:t})=>({currentUserId:e.currentUserId,peer:(0,c.PVB)(e,t)}))(v));s()}catch(e){s(e)}})},61962:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"HN4dYXIk",star:"LLQBJODm",priceBadge:"haa6STaT",topIcon:"_TMVTkD4",hiddenGift:"xY4yqqYA",radialPattern:"_I9aOdGr",stickerWrapper:"NYuBBB9j"}},62978:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>F});var n=a(84051),o=a(13439),r=a(31481),i=a(90709),c=a(60919),d=a(96454),l=a(87357),u=a(48775),m=a(58968),h=a(14242),p=a(66833),g=a(10722),f=a(37661),y=a(39351),I=a(17712),A=a(80146),v=a(64493),b=a(71429),S=a(21849),w=a(54746),C=a(52647),E=a(25404),M=a(87049),x=a(61962),k=e([y,A,v,S,C,E]);[y,A,v,S,C,E]=k.then?(await k)():k;const P=90,T=({peerId:e,gift:t,style:a,fromPeer:s,currentUserId:i,hasAdminRights:c,collectibleEmojiStatuses:k,currentUserEmojiStatus:T,observeIntersection:F})=>{const{openGiftInfoModal:N}=(0,o.ko)(),B=(0,n.li)(),U=(0,n.li)(),R=(0,y.A)(),[V,J,L]=(0,f.A)(),O=e===i||c,D=(0,p.UC)(t.gift),G=t.gift,j="starGiftUnique"===G.type?G:void 0,q=(0,n.Kr)(()=>{if(j?.resellPrice)return j.resaleTonOnly?j.resellPrice.find(e=>e.currency===r.ykW):j.resellPrice.find(e=>e.currency===r.OUy)},[j]),z=j?.resellPrice?R("GiftRibbonSale"):t.isPinned&&j?R("GiftSavedNumber",{number:j.number}):D?R("ActionStarGiftLimitedRibbon",{total:(0,h.Vw)(R,D)}):void 0,_=j?.resellPrice?"green":"blue",{isContextMenuOpen:K,contextMenuAnchor:H,handleBeforeContextMenu:W,handleContextMenu:$,handleContextMenuClose:X,handleContextMenuHide:Y}=(0,g.A)(B),Q=(0,I.A)(()=>B.current),Z=(0,I.A)(()=>B.current.closest(".custom-scroll")),ee=(0,I.A)(()=>document.querySelector("#portals")?.querySelector(".saved-gift-context-menu .bubble")),te=(0,I.A)(()=>({withPortal:!0})),ae=(0,I.A)(()=>{N({peerId:e,gift:t})}),se=t.isNameHidden&&!s?m.I5:s,ne=(0,p.yQ)(t.gift),oe=(0,n.Kr)(()=>(0,p.uc)(t.gift),[t.gift]),{backdrop:re,pattern:ie}=oe||{},ce=(0,n.Kr)(()=>{if(!re||!ie)return;const e=[re.centerColor,re.edgeColor],t=re.patternColor;return n.Ay.createElement(C.A,{className:x.A.radialPattern,backgroundColors:e,patternColor:t,patternIcon:ie.sticker})},[re,ie]);if(ne)return n.Ay.createElement("div",{ref:B,className:(0,l.A)("interactive-gift scroll-item",x.A.root),style:a,onClick:ae,onContextMenu:$,onMouseDown:W,onMouseEnter:d.TF?void 0:J,onMouseLeave:d.TF?void 0:L},ce,!ce&&n.Ay.createElement(S.A,{className:x.A.topIcon,peer:se,size:"micro"}),t.isPinned&&n.Ay.createElement(w.A,{name:"pinned-message",className:x.A.topIcon}),n.Ay.createElement("div",{ref:U,className:x.A.stickerWrapper,style:`width: ${P}px; height: ${P}px`},ne&&n.Ay.createElement(A.A,{containerRef:U,sticker:ne,size:P,shouldLoop:V,shouldPreloadPreview:!0,observeIntersectionForPlaying:F,observeIntersectionForLoading:F})),t.isUnsaved&&n.Ay.createElement("div",{className:x.A.hiddenGift},n.Ay.createElement(w.A,{name:"eye-crossed-outline"})),q&&n.Ay.createElement(v.A,{className:x.A.priceBadge,nonInteractive:!0,size:"tiny",withSparkleEffect:!0,pill:!0,fluid:!0},"TON"===q.currency?(0,u.Ms)(R,q.amount,{shouldConvertFromNanos:!0,className:x.A.star}):(0,u.U2)(R,q.amount,{asFont:!0,className:x.A.star})),z&&n.Ay.createElement(M.A,{color:_,text:z}),void 0!==H&&n.Ay.createElement(b.A,{isOpen:K,anchor:H,className:"saved-gift-context-menu",autoClose:!0,withPortal:!0,getMenuElement:ee,getTriggerElement:Q,getRootElement:Z,getLayout:te,onClose:X,onCloseAnimationEnd:Y},n.Ay.createElement(E.A,{peerId:e,gift:t,canManage:O,collectibleEmojiStatuses:k,currentUserEmojiStatus:T})))},F=(0,n.ph)((0,o.EK)((e,{peerId:t,gift:a})=>{const s=a.fromId?(0,c.PVB)(e,a.fromId):void 0,n=(0,c.hds)(e,t),o=n&&(0,i.ub)(n,"postMessages"),r=e.currentUserId,d=r?(0,c.mBe)(e,r):void 0,l=d?.emojiStatus,u=e.collectibleEmojiStatuses?.statuses;return{fromPeer:s,hasAdminRights:o,currentUserId:r,currentUserEmojiStatus:l,collectibleEmojiStatuses:u}})(T));s()}catch(e){s(e)}})},63571:(e,t,a)=>{var s=a(13439),n=a(17872);(0,s.aJ)("apiUpdate",(e,t,a)=>{if("updateStickerSet"===a["@type"])return(0,n.v9P)(e,a.id,a.stickerSet)})},64025:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=(0,s.ph)(({isOpen:e})=>{const t=(0,o.A)(n.ar.Extra,"StoryViewer",!e);return t?s.Ay.createElement(t,null):void 0})},64238:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>R});var n=a(84051),o=a(13439),r=a(23174),i=a(31481),c=a(90709),d=a(70636),l=a(60919),u=a(87357),m=a(17663),h=a(17142),p=a(87894),g=a(48775),f=a(10289),y=a(54464),I=a(4262),A=a(83414),v=a(39351),b=a(59030),S=a(73767),w=a(97246),C=a(49401),E=a(92108),M=a(73131),x=a(84793),k=a(66999),P=a(46576),T=a(75604),F=a(50805),N=e([d,v,b,M,x,k,P,T]);[d,v,b,M,x,k,P,T]=N.then?(await N)():N;const B="unread-divider",U=({canShowAds:e,chatId:t,threadId:a,messageIds:s,messageGroups:N,getContainerHeight:U,isViewportNewest:R,isUnread:V,isComments:J,isEmptyThread:L,withUsers:O,isChannelChat:D,isChatMonoforum:G,noAvatars:j,containerRef:q,anchorIdRef:z,memoUnreadDividerBeforeIdRef:_,memoFirstUnreadIdRef:K,type:H,isReady:W,hasLinkedChat:$,isSchedule:X,shouldRenderAccountInfo:Y,nameChangeDate:Q,photoChangeDate:Z,noAppearanceAnimation:ee,isSavedDialog:te,onScrollDownToggle:ae,onNotchToggle:se,onIntersectPinnedMessage:ne,canPost:oe})=>{const{openHistoryCalendar:re}=(0,o.ko)(),ie=n.OV,ce=(0,A.A)(()=>W&&!ie(),[W,ie]),de=!te&&!X,{observeIntersectionForReading:le,observeIntersectionForLoading:ue,observeIntersectionForPlaying:me}=(0,w.A)(H,q,K,ne,t),{withHistoryTriggers:he,backwardsTriggerRef:pe,forwardsTriggerRef:ge,fabTriggerRef:fe}=(0,C.A)(H,q,s,U,R,V,ae,se,W),ye=(0,b.A)(),Ie=(0,v.A)(),Ae=n.Ay.createElement("div",{className:(0,u.A)(B,"local-action-message"),key:"unread-messages"},n.Ay.createElement("span",null,ye("UnreadMessages"))),ve=(e,t)=>{if(e.paidMessageStars){const a=t?.messages?.length||1,s=e.paidMessageStars*a;return n.Ay.createElement("div",{className:(0,u.A)("local-action-message"),key:`paid-messages-action-${e.id}`},n.Ay.createElement("span",null,e.isOutgoing?Ie("ActionPaidOneMessageOutgoing",{amount:(0,g.Kk)(Ie,s)}):(()=>{const t=(0,l.Y7C)((0,o.mS)(),e),a=t?(0,d.F9)(Ie,t):"";return Ie("ActionPaidOneMessageIncoming",{user:a,amount:(0,g.Kk)(Ie,s)})})()))}},be=e=>{if(e.suggestedPostInfo){const{price:t,scheduleDate:a}=e.suggestedPostInfo,s=(0,l.Y7C)((0,o.mS)(),e),r=s?(0,d.F9)(Ie,s):"",i=(0,I.Nm)(s?.id,r||Ie("ActionFallbackUser")),f="message"===e.replyInfo?.type&&e.replyInfo.replyToMsgId?(0,l.O5q)((0,o.mS)(),e.chatId,e.replyInfo.replyToMsgId):void 0,y=(0,c.Do)(e,f)?(0,c.EQ)(Ie,e,f,e.isOutgoing,i):e.isOutgoing?Ie("ActionSuggestedPostOutgoing",void 0,{withNodes:!0,withMarkdown:!0}):Ie("ActionSuggestedPostIncoming",{user:i},{withNodes:!0,withMarkdown:!0}),A=(0,p.oE)([[Ie("TitlePrice"),t?"TON"===t.currency?(0,g.QH)(Ie,(0,h.wD)(t.amount)):(0,g.Kk)(Ie,t.amount):Ie("SuggestMessageNoPrice")],[Ie("TitleTime"),a?(0,m.e0)(a,Ie,ye):Ie("SuggestMessageAnytime")]]);return n.Ay.createElement("div",{className:(0,u.A)("local-action-message"),key:`suggested-post-action-${e.id}`},n.Ay.createElement("span",{className:F.A.suggestedPostContainer},n.Ay.createElement("div",{className:F.A.suggestedPostTitle},y),Boolean(A.length)&&n.Ay.createElement(E.A,{className:F.A.suggestedPostInfo,data:A})))}},Se=ee?0:N.reduce((e,t)=>e+t.senderGroups.flat().length,0);let we=0;const Ce=(0,S.A)(s),Ee=Boolean(s&&Ce&&s[s.length-2]===Ce[Ce.length-1]),Me=N.map((e,t,s)=>{const o=function(e,t,s){return e.senderGroups.map((e,o,i)=>{if(1===e.length&&!(0,f.o)(e[0])&&(0,c._P)(e[0])&&"phoneCall"!==e[0].content.action?.type){const r=e[0],c=o===i.length-1&&t===s.length-1;return(0,p.oE)([r.id===_.current&&Ae,n.Ay.createElement(M.A,{key:r.id,message:r,threadId:a,observeIntersectionForBottom:le,observeIntersectionForLoading:ue,observeIntersectionForPlaying:me,memoFirstUnreadIdRef:K,appearanceOrder:Se-++we,isJustAdded:c&&Ee,isLastInList:c,getIsMessageListReady:ce,onIntersectPinnedMessage:ne})])}let d;const l=e.map((l,u)=>{const m=(0,f.o)(l)?l.mainMessage:l,h=(0,f.o)(l)?l:void 0,g=(0,c.Ie)(m),y=(0,f.o)(l),I=e[u+1];m.previousLocalId&&z.current===(0,c.GZ)(m.previousLocalId)&&(z.current=(0,c.GZ)(m.id));const A=!y&&m.groupedId?m.groupedId:void 0,v=I&&!(0,f.o)(I)?I.groupedId:void 0,b=m.id===a,S={isFirstInGroup:0===u,isLastInGroup:u===e.length-1,isFirstInDocumentGroup:Boolean(A&&A!==d),isLastInDocumentGroup:Boolean(A&&A!==v),isLastInList:u===e.length-1&&o===i.length-1&&t===s.length-1};d=A;const w=(0,c.sj)(m),C=(0,c.u7)(m)?`${m.date}_${w}`:w,E=!1===$||!D||Boolean(G);return(0,p.oE)([m.id===_.current&&Ae,m.paidMessageStars&&!O&&ve(m,h),m.suggestedPostInfo&&be(m),n.Ay.createElement(x.A,{key:C,message:m,observeIntersectionForBottom:le,observeIntersectionForLoading:ue,observeIntersectionForPlaying:me,album:h,noAvatars:j,withAvatar:S.isLastInGroup&&O&&!g&&(!b||!J),withSenderName:S.isFirstInGroup&&O&&!g,threadId:a,messageListType:H,noComments:E,noReplies:!E||a!==r.l3||"scheduled"===H,appearanceOrder:Se-++we,isJustAdded:S.isLastInList&&Ee,isFirstInGroup:S.isFirstInGroup,isLastInGroup:S.isLastInGroup,isFirstInDocumentGroup:S.isFirstInDocumentGroup,isLastInDocumentGroup:S.isLastInDocumentGroup,isLastInList:S.isLastInList,memoFirstUnreadIdRef:K,onIntersectPinnedMessage:ne,getIsMessageListReady:ce}),m.id===a&&n.Ay.createElement("div",{className:"local-action-message",key:"discussion-started"},n.Ay.createElement("span",null,ye(L?J?"NoComments":"NoReplies":"DiscussionStarted")))])}).flat();if(!O)return l;const u=e[e.length-1],m=(0,f.o)(u)?u.mainMessage:u,h=(0,c.sj)(m),g=Se-we,y=m.id===a,I=(0,c.Ie)(m),A=e[0],v=(0,f.o)(A)?A.mainMessage:A,b=(0,c.sj)(v),S=`${b}-${h}`,w=b===h?`message-group-${b}`:`message-group-${b}-${h}`,C=O&&!I&&(!y||!J);return n.Ay.createElement(k.A,{key:S,id:w,message:m,withAvatar:C,appearanceOrder:g,canPost:oe},l)})}(e,t,s);return n.Ay.createElement("div",{className:(0,u.A)("message-date-group",!(Q||Z)&&0===t&&"first-message-date-group"),key:e.datetime,onMouseDown:y.l,teactFastList:!0},n.Ay.createElement("div",{className:(0,u.A)("sticky-date",de&&"interactive"),key:"date-header",onMouseDown:y.l,onClick:de?()=>re({selectedAt:e.datetime}):void 0},n.Ay.createElement("span",{dir:"auto"},X&&e.originalDate===i.NkL&&ye("MessageScheduledUntilOnline"),X&&e.originalDate!==i.NkL&&ye("MessageScheduledOn",(0,m.F5)(ye,e.datetime,void 0,!0)),!X&&(0,m.F5)(ye,e.datetime))),o.flat())});return n.Ay.createElement("div",{className:"messages-container",teactFastList:!0},he&&n.Ay.createElement("div",{ref:pe,key:"backwards-trigger",className:"backwards-trigger"}),Y&&n.Ay.createElement(T.A,{key:`account_info_${t}`,chatId:t,hasMessages:!0}),Me.flat(),he&&n.Ay.createElement("div",{ref:ge,key:"forwards-trigger",className:"forwards-trigger"}),n.Ay.createElement("div",{ref:fe,key:"fab-trigger",className:"fab-trigger"}),e&&R&&n.Ay.createElement(P.A,{key:t,chatId:t,containerRef:q,observeIntersectionForLoading:ue,observeIntersectionForPlaying:me}))},R=(0,n.ph)(U);s()}catch(e){s(e)}})},64536:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"yMkfzjus",content:"__w9Ejd3",info:"wdU19Be7",avatar:"AQFE1t4V",title:"u2vIptvT",text:"SVG6BaX3",aboutAd:"SrgXYpPk"}},64719:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(96540),n=a(2543),o=a(87357);const r=({isShown:e,className:t,disabled:a,onClick:r,children:i})=>{const c=(0,n.debounce)(r,500),d=(0,o.A)("FloatingActionButton","w-[3.5rem] bg-[var(--color-primary)] h-[3.5rem] rounded-full flex items-center justify-center",e&&"revealed",t);return s.createElement("button",{className:d,disabled:a,onClick:e&&!a?c:void 0,tabIndex:-1},i)}},64968:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(23174),n=a(31481),o=a(14487),r=a(87894),i=a(60343),c=a(74167),d=a(33204),l=a(24021),u=a(90709),m=a(13439),h=a(17872),p=a(14865),g=a(32989),f=a(60919),y=e([c,l]);[c,l]=y.then?(await y)():y;const I=40;let A=0;(0,m.aJ)("loadAvailableReactions",async e=>{const t=await(0,l.px)("fetchAvailableReactions");t&&(t.forEach(e=>{e.aroundAnimation&&c.hd(`sticker${e.aroundAnimation.id}`,s.qZ.BlobUrl),e.centerIcon&&c.hd(`sticker${e.centerIcon.id}`,s.qZ.BlobUrl),e.appearAnimation&&c.hd(`sticker${e.appearAnimation.id}`,s.qZ.BlobUrl),e.selectAnimation&&c.hd((0,u.mr)(e.selectAnimation,"full"),s.qZ.BlobUrl)}),e=(0,m.mS)(),e={...e,reactions:{...e.reactions,availableReactions:t}},(0,m.UF)(e),(0,d.A)({action:"loadAvailableReactions",payload:void 0},n.npx))}),(0,m.aJ)("loadAvailableEffects",async e=>{const t=await(0,l.px)("fetchAvailableEffects");if(!t)return;const{effects:a,emojis:s,stickers:n}=t,o=[],i=(0,r.dU)(a,"id");for(const e of a)if(e.effectAnimationId){const t={type:"emoji",emoticon:e.emoticon};o.push(t)}e=(0,m.mS)(),e={...e,availableEffectById:i,stickers:{...e.stickers,effect:{stickers:n,emojis:s}},reactions:{...e.reactions,effectReactions:o}},(0,m.UF)(e)}),(0,m.aJ)("interactWithAnimatedEmoji",(e,t,a)=>{const{emoji:s,x:n,y:r,startSize:i,isReversed:c,tabId:d=(0,o.g0)()}=a,l={id:A++,animatedEffect:s,x:(0,p.cf)(e,n)+Math.random()*I-I/2,y:r+Math.random()*I-I/2,startSize:i,isReversed:c};return(0,g.w)(e,{activeEmojiInteractions:[...(0,f.nTw)(e,d).activeEmojiInteractions||[],l]},d)}),(0,m.aJ)("sendEmojiInteraction",(e,t,a)=>{const{messageId:s,chatId:n,emoji:o,interactions:r}=a;if("connectionStateReady"!==e.connectionState)return;const i=(0,f.hds)(e,n);i&&o&&!(0,f.nZ4)(e,n)&&(0,l.px)("sendEmojiInteraction",{chat:i,messageId:s,emoticon:o,timestamps:r})}),(0,m.aJ)("sendDefaultReaction",(e,t,a)=>{const{chatId:s,messageId:n,tabId:r=(0,o.g0)()}=a,i=(0,f.nTJ)(e,s),c=(0,f.O5q)(e,s,n);i&&c&&!(0,u.Nb)(c)&&t.toggleReaction({chatId:s,messageId:n,reaction:i,tabId:r})}),(0,m.aJ)("toggleReaction",async(e,t,a)=>{const{chatId:s,reaction:n,shouldAddToRecent:c,tabId:d=(0,o.g0)()}=a;let{messageId:h}=a;const g=(0,f.hds)(e,s);let y=(0,f.O5q)(e,s,h);if(!g||!y)return;const I=(0,f.nZ4)(e,s),A=Boolean(y.groupedId)&&!y.isInAlbum,v=A?(0,f.D_S)(e,s,y.groupedId)[0]:void 0;y=A&&(0,f.O5q)(e,s,v)||y,h=y?.id||h;const b=(0,u.uC)(y),S=b.some(e=>(0,u.a0)(e,n)),w=S?b.filter(e=>!(0,u.a0)(e,n)):[...b,n],C=(0,f.cO5)(e),[E,M]=(0,r.jB)(w,e=>"paid"===e.type),x=M.slice(-C),k=[...E,...x],P=(0,i.bj)(y);(0,f.xYJ)(e,"reactionEffects")&&(S?t.stopActiveReaction({containerId:P,reaction:n,tabId:d}):t.startActiveReaction({containerId:P,reaction:n,tabId:d})),e=(0,p.Y1)(e,y,k),(0,m.UF)(e);try{await(0,l.px)("sendReaction",{chat:g,messageId:h,reactions:x,shouldAddToRecent:c}),I&&t.loadSavedReactionTags()}catch(t){e=(0,m.mS)(),e=(0,p.Y1)(e,y,b),(0,m.UF)(e)}}),(0,m.aJ)("addLocalPaidReaction",(e,t,a)=>{const{chatId:s,messageId:n,count:r,shouldIgnoreDefaultPrivacy:c=!1,tabId:d=(0,o.g0)()}=a,l=e.settings.paidReactionPrivacy,p=c?a.isPrivate:"anonymous"===l?.type,g=c?a.peerId:"peer"===l?.type?l.peerId:void 0,y=(0,f.hds)(e,s),I=(0,f.O5q)(e,s,n);if(!y||!I)return;const A=I.reactions?.results||[],v=(0,u.Ny)(A,r,p,g);e=(0,h.r3y)(e,I.chatId,I.id,{reactions:{...A,results:v}}),(0,m.UF)(e);const b=(0,i.bj)(I);(0,f.xYJ)(e,"reactionEffects")&&t.startActiveReaction({containerId:b,reaction:{type:"paid"},tabId:d})}),(0,m.aJ)("sendPaidReaction",async(e,t,a)=>{const{chatId:s,messageId:n,forcedAmount:r,tabId:i=(0,o.g0)()}=a,c=(0,f.hds)(e,s),d=(0,f.O5q)(e,s,n);if(!c||!d)return;const u=d.reactions?.results?.find(e=>"paid"===e.reaction.type),m=r||u?.localAmount||0;if(m){t.resetLocalPaidReactions({chatId:s,messageId:n});try{await(0,l.px)("sendPaidReaction",{chat:c,messageId:n,count:m,isPrivate:u?.localIsPrivate,peerId:u?.localPeerId})}catch(e){"BALANCE_TOO_LOW"===e.message&&t.openStarsBalanceModal({originReaction:{chatId:s,messageId:n,amount:m},tabId:i})}}}),(0,m.aJ)("startActiveReaction",(e,t,a)=>{const{containerId:s,reaction:n,tabId:r=(0,o.g0)()}=a,i=(0,f.nTw)(e,r);if(!(0,f.xYJ)(e,"reactionEffects"))return;const c=i.activeReactions[s]||[];if(c.some(e=>(0,u.a0)(e,n)))return;const d=c.concat(n);return(0,g.w)(e,{activeReactions:{...i.activeReactions,[s]:d}},r)}),(0,m.aJ)("stopActiveReaction",(e,t,a)=>{const{containerId:s,reaction:n,tabId:i=(0,o.g0)()}=a,c=(0,f.nTw)(e,i),d=c.activeReactions[s]||[],l=n?d.filter(e=>!(0,u.a0)(e,n)):[],m=l.length?{...c.activeReactions,[s]:l}:(0,r.cJ)(c.activeReactions,[s]);return(0,g.w)(e,{activeReactions:m},i)}),(0,m.aJ)("setDefaultReaction",async(e,t,a)=>{const{reaction:s}=a;await(0,l.px)("setDefaultReaction",{reaction:s})&&((e=(0,m.mS)()).config?(e={...e,config:{...e.config,defaultReaction:s}},(0,m.UF)(e)):t.loadConfig())}),(0,m.aJ)("stopActiveEmojiInteraction",(e,t,a)=>{const{id:s,tabId:n=(0,o.g0)()}=a;return(0,g.w)(e,{activeEmojiInteractions:(0,f.nTw)(e,n).activeEmojiInteractions?.filter(e=>e.id!==s)},n)}),(0,m.aJ)("loadReactors",async(e,t,a)=>{if((0,f.trm)(e))return;const{chatId:s,messageId:n,reaction:o}=a,r=(0,f.hds)(e,s),i=(0,f.O5q)(e,s,n);if(!r||!i)return;const c=i.reactors?.nextOffset,d=await(0,l.px)("fetchMessageReactionsList",{reaction:o,chat:r,messageId:n,offset:c});d&&(e=(0,m.mS)(),e=(0,h.r3y)(e,s,n,{reactors:d}),(0,m.UF)(e))}),(0,m.aJ)("loadMessageReactions",(e,t,a)=>{if((0,f.trm)(e))return;const{ids:s,chatId:n}=a,o=(0,f.hds)(e,n);o&&"connectionStateReady"===e.connectionState&&(0,l.px)("fetchMessageReactions",{ids:s,chat:o})}),(0,m.aJ)("sendWatchingEmojiInteraction",(e,t,a)=>{const{chatId:s,emoticon:n,x:r,y:i,startSize:c,isReversed:d,id:u,tabId:m=(0,o.g0)()}=a,h=(0,f.hds)(e,s),y=(0,f.nTw)(e,m);if(h&&y.activeEmojiInteractions?.some(e=>e.id===u)&&!(0,f.nZ4)(e,s))return"connectionStateReady"===e.connectionState&&(0,l.px)("sendWatchingEmojiInteraction",{chat:h,emoticon:n}),(0,g.w)(e,{activeEmojiInteractions:y.activeEmojiInteractions.map(t=>t.id===u?{...t,x:(0,p.cf)(e,r),y:i,startSize:c,isReversed:d}:t)},m)}),(0,m.aJ)("fetchUnreadReactions",async(e,t,a)=>{const{chatId:s,offsetId:n}=a,o=(0,f.hds)(e,s);if(!o)return;const i=await(0,l.px)("fetchUnreadReactions",{chat:o,offsetId:n,addOffset:n?-1:void 0});if(!i||!i.messages.length)return e=(0,m.mS)(),e=(0,p.$n)(e,s,{unreadReactionsCount:0}),void(0,m.UF)(e);const{messages:c}=i,d=(0,r.dU)(c,"id"),u=Object.keys(d).map(Number);e=(0,m.mS)(),e=(0,h.o4A)(e,o.id,d),e=(0,p.$n)(e,s,{unreadReactions:(0,r.Am)([...o.unreadReactions||[],...u]).sort((e,t)=>t-e)}),(0,m.UF)(e)}),(0,m.aJ)("animateUnreadReaction",(e,t,a)=>{const{messageIds:s,tabId:n=(0,o.g0)()}=a,r=(0,f.meB)(e,n);if(!r)return;if(!r.unreadReactionsCount)return(0,p.$n)(e,r.id,{unreadReactions:[]});const c=Math.max(r.unreadReactionsCount-s.length,0),d=(r.unreadReactions||[]).filter(e=>!s.includes(e));e=(0,p.$n)(e,r.id,{unreadReactions:d,unreadReactionsCount:c}),(0,m.UF)(e),t.markMessagesRead({messageIds:s,shouldFetchUnreadReactions:!0,tabId:n}),(0,f.xYJ)(e,"reactionEffects")&&(e=(0,m.mS)(),s.forEach(a=>{const s=(0,f.O5q)(e,r.id,a);if(!s)return;const{reaction:n,isOwn:c,isUnread:d}=s.reactions?.recentReactions?.[0]??{};if(n&&d&&!c){const e=(0,i.bj)(s);t.startActiveReaction({containerId:e,reaction:n,tabId:(0,o.g0)()})}}))}),(0,m.aJ)("focusNextReaction",(e,t,a)=>{const{tabId:s=(0,o.g0)()}=a||{},n=(0,f.meB)(e,s);if(!n?.unreadReactions)return n?.unreadReactionsCount?(0,h.wix)(e,n.id,{unreadReactionsCount:0}):void 0;t.focusMessage({chatId:n.id,messageId:n.unreadReactions[0],tabId:s,scrollTargetPosition:"end"}),t.markMessagesRead({messageIds:[n.unreadReactions[0]],tabId:s})}),(0,m.aJ)("readAllReactions",(e,t,a)=>{const{chatId:n,threadId:o=s.l3}=a,r=(0,f.hds)(e,n);if(r)return(0,l.px)("readAllReactions",{chat:r,threadId:o===s.l3?void 0:o}),o===s.l3?(0,p.$n)(e,r.id,{unreadReactionsCount:void 0,unreadReactions:void 0}):void 0}),(0,m.aJ)("loadTopReactions",async e=>{const t=await(0,l.px)("fetchTopReactions",{hash:e.reactions.hash.topReactions});t&&(e=(0,m.mS)(),e={...e,reactions:{...e.reactions,topReactions:t.reactions,hash:{...e.reactions.hash,topReactions:t.hash}}},(0,m.UF)(e))}),(0,m.aJ)("loadRecentReactions",async e=>{const t=await(0,l.px)("fetchRecentReactions",{hash:e.reactions.hash.recentReactions});t&&(e=(0,m.mS)(),e={...e,reactions:{...e.reactions,recentReactions:t.reactions,hash:{...e.reactions.hash,recentReactions:t.hash}}},(0,m.UF)(e))}),(0,m.aJ)("clearRecentReactions",async e=>{await(0,l.px)("clearRecentReactions")&&(e=(0,m.mS)(),e={...e,reactions:{...e.reactions,recentReactions:[]}},(0,m.UF)(e))}),(0,m.aJ)("loadDefaultTagReactions",async e=>{const t=await(0,l.px)("fetchDefaultTagReactions",{hash:e.reactions.hash.defaultTags});t&&(e=(0,m.mS)(),e={...e,reactions:{...e.reactions,defaultTags:t.reactions,hash:{...e.reactions.hash,defaultTags:t.hash}}},(0,m.UF)(e))}),(0,m.aJ)("loadSavedReactionTags",async e=>{const{hash:t}=e.savedReactionTags||{},a=await(0,l.px)("fetchSavedReactionTags",{hash:t});if(!a)return;e=(0,m.mS)();const s=(0,r.pA)(a.tags,e=>[(0,u.Jj)(e.reaction),e]);e={...e,savedReactionTags:{hash:a.hash,byKey:s}},(0,m.UF)(e)}),(0,m.aJ)("editSavedReactionTag",async(e,t,a)=>{const{reaction:s,title:n}=a;if(!await(0,l.px)("updateSavedReactionTag",{reaction:s,title:n}))return;e=(0,m.mS)();const o=e.savedReactionTags?.byKey;if(!o)return;const r=(0,u.Jj)(s),i={...o[r],title:n};e={...e,savedReactionTags:{...e.savedReactionTags,byKey:{...o,[r]:i}}},(0,m.UF)(e)}),t()}catch(e){t(e)}})},65133:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(23174),n=a(31481),o=a(87894),r=a(60343),i=a(5560),c=a(90709),d=a(13439),l=a(17872),u=a(14865),m=a(32989),h=a(60919),p=e([i]),g=p.then?(await p)():p;i=g[0];const f=6e3,y=new Set(["boostLevel","isForum","isLinkedInDiscussion","fakeType","restrictionReasons","isJoinToSend","isJoinRequest","type"]);(0,d.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateChat":{const s=(0,h.hds)(e,a.id),{isForum:n,lastReadOutboxMessageId:r}=s||{};a.chat.lastReadOutboxMessageId&&r&&a.chat.lastReadOutboxMessageId<r&&(a={...a,chat:(0,o.cJ)(a.chat,["lastReadInboxMessageId"])}),e=(0,l.wix)(e,a.id,a.chat),s?.areStoriesHidden!==a.chat.areStoriesHidden&&(e=(0,l.VWO)(e,a.id,a.chat.areStoriesHidden||!1)),(0,d.UF)(e);const c=(0,h.hds)(e,a.id);if(a.noTopChatsRequest||(0,h.mJZ)(e,a.id)||c?.isNotJoined||t.loadTopChats(),a.chat.id&&(0,i.Kz)({chatId:a.chat.id,lastReadInboxMessageId:a.chat.lastReadInboxMessageId}),Object.values(e.byTabId).forEach(({id:s})=>{const{chatId:o}=(0,h.Xf0)(e,s)||{},r=a;o===r.id&&"isForum"in r.chat&&n!==r.chat.isForum&&(n&&t.closeForumPanel({tabId:s}),t.openChat({id:o,tabId:s}))}),s){const e=a.chat;Object.keys(e).filter(t=>s[t]!==e[t]).some(e=>y.has(e))&&t.invalidateFullInfo({peerId:a.id})}return}case"updateChatJoin":{const s=(0,h.P4G)(e,a.id),n=(0,h.hds)(e,a.id);if(e=(0,l.wix)(e,a.id,{isNotJoined:!1}),(0,d.UF)(e),n&&t.requestChatUpdate({chatId:n.id}),t.loadFullChat({chatId:a.id,force:!0}),!s)return;return e=(0,d.mS)(),e=(0,l.ec2)(e,s,[a.id]),void(0,d.UF)(e)}case"updateChatLeave":{e=(0,l.CX_)(e,a.id);const t=(0,h.hds)(e,a.id);if(t&&(0,c.WX)(t)){const s=(0,h.zeq)(e,a.id);if(s){const a=Object.keys(s).map(Number).filter(r.iL);e=(0,l.AH0)(e,t.id,a)}}return e}case"updateChatInbox":return(0,l.wix)(e,a.id,a.chat);case"updateChatTypingStatus":{const{id:t,threadId:n=s.l3,typingStatus:o}=a;return e=(0,l.eww)(e,t,n,"typingStatus",o),(0,d.UF)(e),void setTimeout(()=>{e=(0,d.mS)();const a=(0,h.C5H)(e,t,n,"typingStatus");o&&a&&o.timestamp===a.timestamp&&(e=(0,l.eww)(e,t,n,"typingStatus",void 0),(0,d.UF)(e))},f)}case"newMessage":{const{message:t}=a;if((t.senderId?t.senderId===e.currentUserId:t.isOutgoing)&&!t.isFromScheduled)return;const s=(0,r.iL)(t.id),o=(0,h.hds)(e,a.chatId);if(!o)return;const c=Boolean(a.message.id&&a.message.hasUnreadMention);if(!s||o.id===n.zv8){e=(0,l.wix)(e,a.chatId,{unreadCount:o.unreadCount?o.unreadCount+1:1}),c&&(e=(0,l.Wez)(e,a.chatId,o,[a.message.id],!0));const s=o.isForum?(0,h.nkm)(e,t):void 0;s&&(e=(0,l.TwA)(e,a.chatId,s.id,{unreadCount:s.unreadCount?s.unreadCount+1:1}))}return(0,d.UF)(e),void(0,i.Oq)({chat:o,message:t})}case"updateCommonBoxMessages":case"updateChannelMessages":{const{ids:t,messageUpdate:s}=a;return t.forEach(t=>{const n="channelId"in a?a.channelId:(0,h.Egn)(e,t),o=(0,h.hds)(e,n);s.reactions&&o?.unreadReactionsCount&&!(0,c.pU)(e,s.reactions)&&(e=(0,u.$n)(e,n,{unreadReactionsCount:Math.max(o.unreadReactionsCount-1,0)||void 0,unreadReactions:o.unreadReactions?.filter(e=>e!==t)})),!s.hasUnreadMention&&o?.unreadMentionsCount&&(e=(0,l.pWt)(e,n,o,[t],!0))}),e}case"updateChatFullInfo":return(0,l.ltr)(e,a.id,a.fullInfo);case"updatePinnedChatIds":{const{ids:s,folderId:o}=a,r=o===n._E9?"archived":"active";return s?{...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,[r]:s.length?s:void 0}}}:(t.loadPinnedDialogs({listType:r}),e)}case"updatePinnedSavedDialogIds":{const{ids:t}=a;return{...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,saved:t.length?t:void 0}}}}case"updateChatPinned":{const{id:t,isPinned:s}=a,o=(0,h.P4G)(e,t);if(!o)return;const{[o]:r}=e.chats.orderedPinnedIds;let i=r||[];if(s){if(!i.includes(t)){if("active"===o&&i.length>=n.FZw){const t=e.chats.listIds.active;i=i.filter(e=>t&&t.includes(e))}i=[t,...i]}}else i=i.filter(e=>e!==t);return{...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,[o]:i.length?i:void 0}}}}case"updateSavedDialogPinned":{const{id:t,isPinned:s}=a,{saved:n}=e.chats.orderedPinnedIds;let o=n||[];return s?o.includes(t)||(o=[t,...o]):o=o.filter(e=>e!==t),{...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,saved:o.length?o:void 0}}}}case"updateChatListType":{const{id:t,folderId:s}=a;return(0,l.KrP)(e,t,s)}case"updateChatFolder":{const{id:t,folder:s}=a,{byId:n,orderedIds:r}=e.chatFolders,i=void 0===s;Object.values(e.byTabId).forEach(({id:a})=>{const s=(0,h.nTw)(e,a);Object.values(n)[s.activeChatFolder-1]?.id===t&&(e=(0,m.w)(e,{activeChatFolder:0},a))});const c=i?(0,o.cJ)(n,[t]):{...n,[t]:s},d=i?r?.filter(e=>e!==t):r?.includes(t)?r:[...r||[],t];return{...e,chatFolders:{...e.chatFolders,byId:c,orderedIds:d,invites:(0,o.cJ)(e.chatFolders.invites,[t])}}}case"updateChatFoldersOrder":{const{orderedIds:t}=a;return{...e,chatFolders:{...e.chatFolders,orderedIds:t}}}case"updateRecommendedChatFolders":{const{folders:t}=a;return{...e,chatFolders:{...e.chatFolders,recommended:t}}}case"updateChatMembers":{const t=(0,h.AWZ)(e,a.id),{replacedMembers:s,addedMember:n,deletedMemberId:r}=a;if(!t)return;let i=!1,c=t?.members?[...t.members]:[];if(s)c=s,i=!0;else if(n)c.length&&c.some(e=>e.userId===n.userId)||(c.push(n),i=!0);else if(c.length&&r){const e=c.findIndex(e=>e.userId===r);e>-1&&(c.slice(e,1),i=!0)}if(i){const t=c.filter(({isOwner:e,isAdmin:t})=>e||t);return e=(0,l.wix)(e,a.id,{membersCount:c.length}),e=(0,l.ltr)(e,a.id,{members:c,adminMembersById:(0,o.dU)(t,"userId")})}return}case"draftMessage":{const{chatId:t,threadId:n,draft:o}=a;if(!e.chats.byId[t])return;return e=(0,l.eww)(e,t,n||s.l3,"draft",o),e=(0,l.wix)(e,t,{draftDate:o?.date})}case"updatePendingJoinRequests":{const{chatId:s,requestsPending:n,recentRequesterIds:o}=a;if(!e.chats.byId[s])return;return e=(0,l.ltr)(e,s,{requestsPending:n,recentRequesterIds:o}),(0,d.UF)(e),void t.loadChatJoinRequests({chatId:s})}case"updatePinnedTopic":{const{chatId:t,topicId:s,isPinned:n}=a;if(!e.chats.byId[t])return;return e=(0,l.TwA)(e,t,s,{isPinned:n}),void(0,d.UF)(e)}case"updatePinnedTopicsOrder":{const{chatId:t,order:s}=a;if(!e.chats.byId[t])return;return e=(0,l.mPd)(e,t,s),void(0,d.UF)(e)}case"updateTopic":{const{chatId:s,topicId:n}=a,o=(0,h.hds)(e,s);if(!o?.isForum)return;return void t.loadTopicById({chatId:s,topicId:n})}case"updateTopics":{const{chatId:s}=a,n=(0,h.hds)(e,s);if(!n?.isForum)return;return void t.loadTopics({chatId:s,force:!0})}case"updateViewForumAsMessages":{const{chatId:t,isEnabled:s}=a,n=(0,h.hds)(e,t);if(!n?.isForum)return;e=(0,l.wix)(e,t,{isForumAsMessages:s}),(0,d.UF)(e);break}case"updateNewProfilePhoto":{const{peerId:s,photo:n}=a;e=(0,l.wix)(e,s,{avatarPhotoId:n.id}),(0,d.UF)(e),t.loadMoreProfilePhotos({peerId:s,shouldInvalidateCache:!0});break}case"updateDeleteProfilePhoto":{const{peerId:s,photoId:n}=a,o=(0,h.PVB)(e,s);if(!o)return;n&&o.avatarPhotoId!==n?e=(0,l.sol)(e,s,n):(e=(0,l.wix)(e,s,{avatarPhotoId:void 0}),e=(0,l.Khb)(e,s,void 0)),(0,d.UF)(e),t.loadMoreProfilePhotos({peerId:s,shouldInvalidateCache:!0});break}}}),t()}catch(e){t(e)}})},65223:(e,t,a)=>{a.d(t,{X:()=>r,t:()=>c});const s=JSON.parse('{"v":"5.6.7","fr":25,"ip":0,"op":30,"w":1580,"h":1610,"nm":"脸 2","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[790,805,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[33.178,33.178],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.266666666667,0.258823529412,0.262745098039,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[195.288,56.899],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[158.423,158.423],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[33.178,33.178],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.266666666667,0.258823529412,0.262745098039,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[160.312,1.694],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[158.423,158.423],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[162.5,-5],[143,55],[202.5,57]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"rd","nm":"圆角 1","r":{"a":0,"k":5,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"st","c":{"a":0,"k":[0.266666666667,0.258823529412,0.262745098039,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":51,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":3,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[790,805,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,-47],[-2.88,-13.737],[-47,1.125]],"o":[[0,0],[0,47],[3.25,15.5],[-47,-95]],"v":[[-351,28],[-407,88],[-400.75,189.5],[-330.5,243.875]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.490196108351,0.501960784314,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"飞机","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0.774,"ix":10},"p":{"a":0,"k":[562.147,489.978,0],"ix":2},"a":{"a":0,"k":[-222,-316,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[12.085,10.296],[37.924,-15.068],[-21.986,0.782],[-6.451,-3.318],[1.366,-12.979],[-22.837,12.998]],"o":[[-14.836,-12.64],[-16.183,6.43],[30.049,-1.068],[18.317,9.423],[-1,9.5],[18.914,-10.765]],"v":[[-216.125,-314.75],[-439.5,-242.75],[-392,-212],[-278,-271],[-354,-197],[-257,-133.75]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[1.201,0.318],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.847058883368,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"左眼","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-26,"ix":10},"p":{"a":0,"k":[775,938,0],"ix":2},"a":{"a":0,"k":[1.3,143.924,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[95,87,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":10,"s":[95,87,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":15,"s":[95,19,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[95,87,100]},{"t":30,"s":[95,87,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[67.18,140.598],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"tr","p":{"a":0,"k":[-1.41,135.299],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"rd","nm":"圆角 1","r":{"a":0,"k":10,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.266666680574,0.258823543787,0.262745112181,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"线","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[596.5,640.25,0],"ix":2},"a":{"a":0,"k":[-193.5,-164.75,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[57.875,19.875]],"o":[[0,0],[-56.566,-19.425]],"v":[[-191.25,-164.75],[-254.125,-204.875]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.129411764706,0.878431432387,0.988235353956,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":37,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"白色","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[790,805,0],"ix":2},"a":{"a":0,"k":[101,99,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[34.035,-26.631],[0.035,-0.029],[69.04,-7.661],[-0.216,2.156],[1.098,7.48],[8.216,17.082],[-7.766,21.54],[-12.336,-1.11],[-11.81,5.686],[-6.808,10.251],[-11.712,-4.015],[-10.39,-21.61]],"o":[[0,0],[-1.456,1.326],[-2.156,0.24],[0.543,-5.523],[-15.902,-8.421],[-10.391,-21.605],[4.173,-11.665],[12.208,1.104],[11.863,-5.703],[6.832,-10.332],[21.681,7.381],[18.426,38.307]],"v":[[53.65,60.674],[53.598,60.721],[-48.753,98.028],[-52.528,94.306],[-52.405,71.38],[-89.783,32.74],[-92.799,-34.412],[-64.818,-52.435],[-28.095,-59.08],[0.067,-83.641],[31.613,-94.253],[82.139,-49.946]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[134.581,210.753],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[267.817,267.817],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"脸","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":9,"ix":10},"p":{"a":0,"k":[774,917,0],"ix":2},"a":{"a":0,"k":[-16,110,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[648.773,648.773],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[-24.66,105.316],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.29411764705882354,0.9686274509803922,0.7254901960784313,0.484,0.12549019607843137,0.8745098039215686,0.996078431372549,1,0.5333333333333333,0.4588235294117647,1],"ix":9}},"s":{"a":0,"k":[230,-247],"ix":5},"e":{"a":0,"k":[-202,380],"ix":6},"t":1,"nm":"渐变填充 1","mn":"ADBE Vector Graphic - G-Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"脸","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[1030,859,0],"to":[0,-48.833,0],"ti":[0,-4.333,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":15,"s":[1030,566,0],"to":[0,4.333,0],"ti":[0,-53.167,0]},{"t":30,"s":[1030,885,0]}],"ix":2},"a":{"a":0,"k":[790,805,0],"ix":1},"s":{"a":0,"k":[162.936,162.936,100],"ix":6}},"ao":0,"w":1580,"h":1610,"ip":0,"op":750,"st":0,"bm":0}],"markers":[]}'),n=JSON.parse('{"v":"5.6.7","fr":25,"ip":0,"op":54,"w":1580,"h":1610,"nm":"脸 2","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[790,805,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,-47],[-2.88,-13.737],[-47,1.125]],"o":[[0,0],[0,47],[3.25,15.5],[-47,-95]],"v":[[-351,28],[-407,88],[-400.75,189.5],[-330.5,243.875]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.490196108351,0.501960784314,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"飞机","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[7.58]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":16,"s":[76.58]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":22,"s":[179.58]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":33,"s":[241.58]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":40,"s":[342.757]},{"t":50,"s":[358.58]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[560.5,490.5,0],"to":[0,0,0],"ti":[-48,-74,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15.837,"s":[889.5,499.5,0],"to":[38,72,0],"ti":[71,-40,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":22.046,"s":[799.369,709.668,0],"to":[-108,64,0],"ti":[64,84,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":33.427,"s":[348.548,756.183,0],"to":[-64,-84,0],"ti":[-12,8,0]},{"t":50,"s":[560.5,484.5,0]}],"ix":2},"a":{"a":0,"k":[-222,-316,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[12.085,10.296],[37.924,-15.068],[-21.986,0.782],[-6.451,-3.318],[1.366,-12.979],[-22.837,12.998]],"o":[[-14.836,-12.64],[-16.183,6.43],[30.049,-1.068],[18.317,9.423],[-1,9.5],[18.914,-10.765]],"v":[[-216.125,-314.75],[-439.5,-242.75],[-392,-212],[-278,-271],[-354,-197],[-257,-133.75]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[1.201,0.318],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.847058883368,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"右眼","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-26,"ix":10},"p":{"a":0,"k":[965,845,0],"ix":2},"a":{"a":0,"k":[1.3,143.924,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[95,87,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":41,"s":[95,87,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":48,"s":[95,6,100]},{"t":54,"s":[95,87,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[67.18,140.598],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"tr","p":{"a":0,"k":[-1.41,135.299],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"rd","nm":"圆角 1","r":{"a":0,"k":10,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.266666680574,0.258823543787,0.262745112181,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"左眼","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-26,"ix":10},"p":{"a":0,"k":[775,938,0],"ix":2},"a":{"a":0,"k":[1.3,143.924,0],"ix":1},"s":{"a":0,"k":[95,87,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[67.18,140.598],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"tr","p":{"a":0,"k":[-1.41,135.299],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"rd","nm":"圆角 1","r":{"a":0,"k":10,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.266666680574,0.258823543787,0.262745112181,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"线","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[596.5,640.25,0],"ix":2},"a":{"a":0,"k":[-193.5,-164.75,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[57.875,19.875]],"o":[[0,0],[-56.566,-19.425]],"v":[[-191.25,-164.75],[-254.125,-204.875]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":10,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":35,"s":[0]},{"t":50,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.129411764706,0.878431432387,0.988235353956,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":37,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"白色","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[790,805,0],"ix":2},"a":{"a":0,"k":[101,99,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[34.035,-26.631],[0.035,-0.029],[69.04,-7.661],[-0.216,2.156],[1.098,7.48],[8.216,17.082],[-7.766,21.54],[-12.336,-1.11],[-11.81,5.686],[-6.808,10.251],[-11.712,-4.015],[-10.39,-21.61]],"o":[[0,0],[-1.456,1.326],[-2.156,0.24],[0.543,-5.523],[-15.902,-8.421],[-10.391,-21.605],[4.173,-11.665],[12.208,1.104],[11.863,-5.703],[6.832,-10.332],[21.681,7.381],[18.426,38.307]],"v":[[53.65,60.674],[53.598,60.721],[-48.753,98.028],[-52.528,94.306],[-52.405,71.38],[-89.783,32.74],[-92.799,-34.412],[-64.818,-52.435],[-28.095,-59.08],[0.067,-83.641],[31.613,-94.253],[82.139,-49.946]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[134.581,210.753],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[267.817,267.817],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"脸","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":9,"ix":10},"p":{"a":0,"k":[774,917,0],"ix":2},"a":{"a":0,"k":[-16,110,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[648.773,648.773],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[-24.66,105.316],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":1,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.29411764705882354,0.9686274509803922,0.7254901960784313,0.484,0.12549019607843137,0.8745098039215686,0.996078431372549,1,0.5333333333333333,0.4588235294117647,1],"ix":9}},"s":{"a":0,"k":[230,-247],"ix":5},"e":{"a":0,"k":[-202,380],"ix":6},"t":1,"nm":"渐变填充 1","mn":"ADBE Vector Graphic - G-Fill","hd":false}],"ip":0,"op":750,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"脸","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[1030,869,0],"ix":2},"a":{"a":0,"k":[790,805,0],"ix":1},"s":{"a":0,"k":[168.804,168.804,100],"ix":6}},"ao":0,"w":1580,"h":1610,"ip":0,"op":750,"st":0,"bm":0}],"markers":[]}'),o=new Blob([JSON.stringify(s)],{type:"application/json"}),r=URL.createObjectURL(o),i=new Blob([JSON.stringify(n)],{type:"application/json"}),c=URL.createObjectURL(i)},65614:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>y});var n=a(84051),o=a(87357),r=a(17663),i=a(83868),c=a(35749),d=a(2338),l=a(5912),u=a(17712),m=a(62587),h=a(83057),p=e([m]),g=p.then?(await p)():p;m=g[0];const f=({media:e,idPrefix:t="preview-media",isProtected:a,observeIntersection:s,onClick:p,index:g})=>{const f=(0,n.li)(),y=(0,l.Vz)(f,s),I=(0,d.A)(e),A=(0,c.A)(e,"preview"),v=(0,m.A)(A,!y),b=(0,h.A)(v),S=e.content.video,w=(0,u.A)(()=>{p(g)});return n.Ay.createElement("div",{ref:f,id:`${t}${g}`,className:"Media scroll-item",onClick:w},n.Ay.createElement("img",{src:I,className:"media-miniature",alt:"",draggable:!a,decoding:"async",onContextMenu:a?i.A:void 0}),n.Ay.createElement("img",{src:v,className:(0,o.A)("full-media","media-miniature",b),alt:"",draggable:!a,decoding:"async",onContextMenu:a?i.A:void 0}),S&&n.Ay.createElement("span",{className:"video-duration"},S.isGif?"GIF":(0,r.QO)(S.duration)),a&&n.Ay.createElement("span",{className:"protector"}))},y=(0,n.ph)(f);s()}catch(e){s(e)}})},65868:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(89925),n=a(31481),o=a(91368),r=a(70636),i=a(13439),c=a(17872),d=a(32989),l=a(60919),u=e([o,r]);[o,r]=u.then?(await u)():u,(0,i.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateEntities":{const{users:t,chats:s,threadInfos:n,polls:o,webPages:r}=a;t&&(e=(0,c.g18)(e,t)),s&&(e=(0,c.Nl5)(e,s)),n&&(e=(0,c.Ng8)(e,n)),o&&o.forEach(t=>{e=(0,c.J81)(e,t.id,t)}),r&&r.forEach(t=>{e="full"===t.webpageType?(0,c.Cfr)(e,t.id,t):(0,c.o7c)(e,t.id,t)}),(0,i.UF)(e);break}case"updatePeerBlocked":return a.isBlocked?(0,c.P6h)(e,a.id):a.isBlockedFromStories?e:(0,c.OW3)(e,a.id);case"updateResetContactList":e={...e,contactList:{userIds:[]}},(0,i.UF)(e);break;case"updateConfig":t.loadConfig();break;case"updateNewAuthorization":t.loadAuthorizations();break;case"updateFavoriteStickers":t.loadFavoriteStickers();break;case"updateRecentStickers":t.loadRecentStickers();break;case"updateRecentReactions":t.loadRecentReactions();break;case"updateRecentEmojiStatuses":t.loadRecentEmojiStatuses();break;case"updateSavedReactionTags":t.loadSavedReactionTags();break;case"updateMoveStickerSetToTop":{const s=a.isCustomEmoji?e.customEmojis.added.setIds:e.stickers.added.setIds;if(!s?.some(e=>e===a.id))return e;const n=[a.id,...s.filter(e=>e!==a.id)];t.reorderStickerSets({order:n,isCustomEmoji:a.isCustomEmoji});break}case"updateStickerSets":t.loadStickerSets();break;case"updateStickerSetsOrder":{const s=a.order.filter(t=>Boolean(e.stickers.setsById[t]));t.reorderStickerSets({order:s,isCustomEmoji:a.isCustomEmoji});break}case"updateSavedGifs":t.loadSavedGifs();break;case"updatePrivacy":e={...e,settings:{...e.settings,privacy:{...e.settings.privacy,[a.key]:a.rules}}},(0,i.UF)(e);break;case"updatePaymentVerificationNeeded":Object.values(e.byTabId).forEach(({id:t})=>{e=(0,c._te)(e,a.url,t),e=(0,c.lwH)(e,s.tn.ConfirmPayment,t)}),(0,i.UF)(e);break;case"updateWebViewResultSent":Object.values(e.byTabId).forEach(e=>{Object.entries(e.webApps.openedWebApps).forEach(([s,n])=>{n.queryId===a.queryId&&(t.resetDraftReplyInfo({tabId:e.id}),t.closeWebApp({key:s,tabId:e.id}))})});break;case"updateWebPage":{const{webPage:t}=a;e="full"===t.webpageType?(0,c.Cfr)(e,t.id,t):(0,c.o7c)(e,t.id,t),(0,i.UF)(e);break}case"updateStory":e=(0,c.K4v)(e,a.peerId,{[a.story.id]:a.story}),e=(0,c.Gzl)(e,{[a.peerId]:(0,l._bp)(e,a.peerId)}),(0,i.UF)(e);break;case"deleteStory":e=(0,c.ONz)(e,a.peerId,a.storyId),(0,i.UF)(e);break;case"updateReadStories":e=(0,c.Ahb)(e,a.peerId,a.lastReadId),(0,i.UF)(e);break;case"updateSentStoryReaction":{const{peerId:t,storyId:s,reaction:n}=a;if(!(0,l.Msb)(e,t,s))return e;e=(0,c.Xzz)(e,t,s,{sentReaction:n}),(0,i.UF)(e);break}case"updateStealthMode":e=(0,c.qsx)(e,a.stealthMode),(0,i.UF)(e);break;case"updateAttachMenuBots":t.loadAttachBots();break;case"updatePremiumFloodWait":t.processPremiumFloodWait({isUpload:a.isUpload});break;case"updatePaidReactionPrivacy":e={...e,settings:{...e.settings,paidReactionPrivacy:a.private}},(0,i.UF)(e);break;case"updateLangPackTooLong":(0,o.eg)(a.langCode);break;case"updateLangPack":(0,o.DV)(a.version,a.strings,a.keysToRemove);break;case"newMessage":{const s=a.message.content?.action;if(!a.message.isOutgoing&&a.message.chatId!==n.zv8)return;if("starGiftUnique"!==s?.type)return;const c=s.gift;Object.values(e.byTabId).forEach(({id:s})=>{const n=(0,l.nTw)(e,s);if(n.isWaitingForStarGiftUpgrade&&(t.openUniqueGiftBySlug({slug:c.slug,tabId:s}),t.showNotification({title:{key:"GiftUpgradedTitle"},message:{key:"GiftUpgradedDescription"},tabId:s}),t.requestConfetti({withStars:!0,tabId:s}),e=(0,d.w)(e,{isWaitingForStarGiftUpgrade:void 0},s)),n.isWaitingForStarGiftTransfer){const n=a.message.chatId,i=n?(0,l.PVB)(e,n):void 0;i&&(t.focusMessage({chatId:i.id,messageId:a.message.id,tabId:s}),t.showNotification({message:{key:"GiftTransferSuccessMessage",variables:{gift:{key:"GiftUnique",variables:{title:c.title,number:c.number}},peer:(0,r.F9)((0,o.Yw)(),i)}},tabId:s})),t.requestConfetti({withStars:!0,tabId:s}),e=(0,d.w)(e,{isWaitingForStarGiftTransfer:void 0},s)}}),(0,i.UF)(e)}}}),t()}catch(e){t(e)}})},66999:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>w});var n=a(84051),o=a(13439),r=a(31481),i=a(90709),c=a(70636),d=a(60919),l=a(87357),u=a(10722),m=a(37661),h=a(39351),p=a(17712),g=a(34201),f=a(21849),y=a(71429),I=a(24433),A=a(24683),v=a(73931),b=e([c,h,f,I,v]);[c,h,f,I,v]=b.then?(await b)():b;const S=({message:e,withAvatar:t,children:a,id:s,appearanceOrder:d,sender:f,canShowSender:b,originSender:S,isChatWithSelf:w,isRepliesChat:C,isAnonymousForwards:E,canPost:M})=>{const{openChat:x,updateInsertingPeerIdMention:k}=(0,o.ko)(),{forwardInfo:P}=e,T=b?f:void 0,F=(0,h.A)(),N=d<=0,[B,U]=(0,m.A)(N);(0,n.vJ)(()=>{N||setTimeout(U,d*r.zq7)},[d,U,N]);const R=P&&(w||C||E||!T)?S:T,V=R&&(0,c.mO)(R),J=(0,p.A)(()=>{R&&x({id:R.id})}),L=(0,p.A)(()=>{R&&document.querySelector(r.m$5)&&k({peerId:R.id})}),O=(0,p.A)(()=>{J()}),{ref:D,shouldRender:G}=(0,g.A)({isOpen:t&&B,noMountTransition:B,withShouldRender:!0}),{isContextMenuOpen:j,contextMenuAnchor:q,handleContextMenu:z,handleContextMenuClose:_,handleContextMenuHide:K}=(0,u.A)(D),H=(0,p.A)(()=>D.current),W=(0,p.A)(()=>document.querySelector(".Transition_slide-active > .MessageList")),$=(0,p.A)(()=>D?.current?.querySelector(`.${A.A.contextMenu} .bubble`)),X=(0,p.A)(()=>({withPortal:!0})),Y=M&&R&&(V||Boolean((0,i.Kl)(R))),Q=Boolean(q)&&(V||Y),Z=(0,l.A)("sender-group-container",A.A.root);return n.Ay.createElement("div",{id:s,className:Z},G&&n.Ay.createElement("div",{ref:D,className:A.A.avatarContainer},n.Ay.createElement(v.A,{handleAvatarClick:O,avatarPeer:R,forwardInfo:P}),Q&&n.Ay.createElement(y.A,{isOpen:j,anchor:q,getTriggerElement:H,getRootElement:W,getLayout:X,getMenuElement:$,className:A.A.contextMenu,onClose:_,onCloseAnimationEnd:K,withPortal:!0,autoClose:!0},n.Ay.createElement(n.Ay.Fragment,null,V&&n.Ay.createElement(I.A,{icon:"comments",onClick:J},F("SendMessage")),Y&&n.Ay.createElement(I.A,{icon:"mention",onClick:L},F("ContextMenuItemMention"))))),a)},w=(0,n.ph)((0,o.EK)((e,t)=>{const{message:a,withAvatar:s}=t,{chatId:n}=a,o=(0,d.nZ4)(e,n),r=(0,i.DX)(n),c=(0,i.Qe)(n),l=!o&&(0,i.zP)(a),u=s||l;return{sender:(0,d.Y7C)(e,a),canShowSender:u,originSender:(0,d.Szq)(e,a),isChatWithSelf:o,isRepliesChat:r,isAnonymousForwards:c}})(S));s()}catch(e){s(e)}})},67162:(e,t,a)=>{var s=a(14487),n=a(90709),o=a(13439),r=a(17872),i=a(25179),c=a(32989),d=a(60919),l=a(30708);(0,o.aJ)("openWebAppTab",(e,t,a)=>{const{webApp:n,tabId:r=(0,s.g0)()}=a;n&&(e=(0,o.mS)(),e=(0,i.eA)(e,n,!0,!0,r),(0,o.UF)(e))}),(0,o.aJ)("updateWebApp",(e,t,a)=>{const{key:n,update:o,tabId:r=(0,s.g0)()}=a;return(0,i.tO)(e,n,o,r)}),(0,o.aJ)("closeActiveWebApp",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return e=(0,i.UK)(e,n),(0,i._I)(e,n)?e:(0,i.Fb)(e,!1,n)}),(0,o.aJ)("openMoreAppsTab",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{},o=(0,d.nTw)(e,n);return(0,c.w)(e,{webApps:{...o.webApps,activeWebAppKey:void 0,isMoreAppsTabActive:!0}},n)}),(0,o.aJ)("closeMoreAppsTab",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{},o=(0,d.nTw)(e,n),r=o.webApps.openedWebApps,i=Object.keys(r),l=i.length;return(0,c.w)(e,{webApps:{...o.webApps,isMoreAppsTabActive:!1,activeWebAppKey:l?i[l-1]:void 0,isModalOpen:l>0}},n)}),(0,o.aJ)("closeWebApp",(e,t,a)=>{const{key:n,skipClosingConfirmation:o,tabId:r=(0,s.g0)()}=a||{};return e=(0,i.I5)(e,n,o,r),(0,i._I)(e,r)?e:(0,i.Fb)(e,!1,r)}),(0,o.aJ)("closeWebAppModal",(e,t,a)=>{const{shouldSkipConfirmation:n,tabId:o=(0,s.g0)()}=a||{};return n||(0,l.l)(e).shouldSkipWebAppCloseConfirmation||!(0,i.CH)(e,o)?(e=(0,i.Jh)(e,o),(0,i._I)(e,o)?e:(0,i.Fb)(e,!1,o)):(t.openWebAppsCloseConfirmationModal({tabId:o}),e)}),(0,o.aJ)("changeWebAppModalState",(e,t,a)=>{const{state:n,tabId:o=(0,s.g0)()}=a;return(0,i.ot)(e,n,o)}),(0,o.aJ)("updateMiniAppCachedPosition",(e,t,a)=>{const{position:s}=a;return(0,r.qoo)(e,{miniAppsCachedPosition:s})}),(0,o.aJ)("updateMiniAppCachedSize",(e,t,a)=>{const{size:s}=a;return(0,r.qoo)(e,{miniAppsCachedSize:s})}),(0,o.aJ)("setWebAppPaymentSlug",(e,t,a)=>{const{tabId:o=(0,s.g0)()}=a,r=(0,d.ES7)(e,o);if(!r?.url)return;const c=(0,n.rp)(r);return(0,i.tO)(e,c,{slug:a.slug},o)}),(0,o.aJ)("cancelBotTrustRequest",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.w)(e,{botTrustRequest:void 0},n)}),(0,o.aJ)("markBotTrusted",(e,t,a)=>{const{botId:n,isWriteAllowed:r,tabId:i=(0,s.g0)()}=a,{trustedBotIds:l}=e,u=new Set(l);u.add(n),e={...e,trustedBotIds:Array.from(u)};const m=(0,d.nTw)(e,i);if(m.botTrustRequest?.onConfirm){const{action:e,payload:a}=m.botTrustRequest.onConfirm;t[e]({...a,isWriteAllowed:r})}e=(0,c.w)(e,{botTrustRequest:void 0},i),(0,o.UF)(e)}),(0,o.aJ)("sendWebAppEvent",(e,t,a)=>{const{event:n,webAppKey:o,tabId:r=(0,s.g0)()}=a,i=(0,d.wtp)(e,o,r);if(!i)return e;const c=i.plannedEvents?[...i.plannedEvents,n]:[n];return t.updateWebApp({key:o,update:{plannedEvents:c},tabId:r}),e}),(0,o.aJ)("cancelAttachBotInstall",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.w)(e,{requestedAttachBotInstall:void 0},n)}),(0,o.aJ)("requestAttachBotInChat",(e,t,a)=>{const{bot:n,filter:r,startParam:i,tabId:l=(0,s.g0)()}=a,u=(0,d.Xf0)(e,l)?.chatId,m=n.attachMenuPeerTypes?.filter(e=>"self"!==e&&r.includes(e));m?.length?(e=(0,c.w)(e,{requestedAttachBotInChat:{bot:n,filter:m,startParam:i}},l),(0,o.UF)(e)):t.callAttachBot({chatId:u||n.id,bot:n,startParam:i,tabId:l})}),(0,o.aJ)("cancelAttachBotInChat",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.w)(e,{requestedAttachBotInChat:void 0},n)}),(0,o.aJ)("openEmojiStatusAccessModal",(e,t,a)=>{const{bot:n,webAppKey:r,tabId:i=(0,s.g0)()}=a;n&&r&&(e=(0,o.mS)(),e=(0,c.w)(e,{emojiStatusAccessModal:{bot:n,webAppKey:r}},i),(0,o.UF)(e))}),(0,o.aJ)("closeEmojiStatusAccessModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.w)(e,{emojiStatusAccessModal:void 0},n)}),(0,o.aJ)("openLocationAccessModal",(e,t,a)=>{const{bot:n,webAppKey:r,tabId:i=(0,s.g0)()}=a;n&&r&&(e=(0,o.mS)(),e=(0,c.w)(e,{locationAccessModal:{bot:n,webAppKey:r}},i),(0,o.UF)(e))}),(0,o.aJ)("closeLocationAccessModal",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{};return(0,c.w)(e,{locationAccessModal:void 0},n)})},67302:(e,t,a)=>{var s=a(14487),n=a(60343),o=a(13439),r=a(17872),i=a(32989),c=a(60919);(0,o.aJ)("processOpenChatOrThread",(e,t,a)=>{const{chatId:n,tabId:o=(0,s.g0)()}=a;return n?(0,i.w)(e,{reactionPicker:{chatId:n,messageId:void 0,position:void 0}},o):(0,i.w)(e,{reactionPicker:void 0},o)}),(0,o.aJ)("openMessageReactionPicker",(e,t,a)=>{const{chatId:n,messageId:o,position:r,tabId:c=(0,s.g0)()}=a;return(0,i.w)(e,{reactionPicker:{chatId:n,messageId:o,position:r}},c)}),(0,o.aJ)("openStoryReactionPicker",(e,t,a)=>{const{peerId:n,storyId:o,position:r,sendAsMessage:c,tabId:d=(0,s.g0)()}=a;return(0,i.w)(e,{reactionPicker:{storyPeerId:n,storyId:o,sendAsMessage:c,position:r}},d)}),(0,o.aJ)("openEffectPicker",(e,t,a)=>{const{position:n,chatId:o,tabId:r=(0,s.g0)()}=a;return(0,i.w)(e,{reactionPicker:{position:n,chatId:o,isForEffects:!0}},r)}),(0,o.aJ)("closeReactionPicker",(e,t,a)=>{const{tabId:n=(0,s.g0)()}=a||{},o=(0,c.nTw)(e,n);return(0,i.w)(e,{reactionPicker:{...o.reactionPicker,messageId:void 0,position:void 0,storyId:void 0,storyPeerId:void 0,isForEffects:void 0}},n)}),(0,o.aJ)("resetLocalPaidReactions",(e,t,a)=>{const{chatId:s,messageId:o}=a,i=(0,c.O5q)(e,s,o);if(!i)return;const{reactions:d}=i;if(!d)return;const l=d.results.map(e=>{if(e.localAmount){if(!e.count)return;return{...e,localAmount:void 0,localPreviousChosenOrder:void 0,chosenOrder:e.localPreviousChosenOrder}}return e}).filter(Boolean);return Object.values(e.byTabId).forEach(({id:e})=>{t.dismissNotification({localId:(0,n.bj)(i),tabId:e})}),(0,r.r3y)(e,s,o,{reactions:{...d,results:l}})})},67893:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"ChatLanguageModal",!t);return a?s.Ay.createElement(a,e):void 0}},67909:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(96540),n=a(31430),o=a(9626),r=a(8235);const i=({message:e})=>{const[t,a]=n.Ay.useNotification();return(0,s.useEffect)(()=>{e&&(e=>{const a=JSON.parse(e.content);a&&"object"==typeof a&&a.length>0&&a.forEach(e=>{t.open({style:{padding:"12px 20px"},message:s.createElement("div",{className:"flex flex-row gap-[12px]"},s.createElement("img",{className:"w-[52px] h-[52px] rounded-full",src:r,alt:""}),s.createElement("div",null,s.createElement("div",{className:"flex flex-row items-center gap-[8px] mb-[10px]"},s.createElement("img",{src:o,alt:"",className:"w-[26px] h-[26px]"}),s.createElement("span",{className:"text-[20px] text-[#FF543D] font-bold"},"Urgent Alert")),s.createElement("div",{className:"text-[18px] font-semibold line-clamp-2 overflow-hidden text-ellipsis"},e.content)))})})})(e)},[e]),s.createElement(s.Fragment,null,a,s.createElement("span",null))}},68547:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>y});var n=a(84051),o=a(76023),r=a(4961),i=a(59030),c=a(54746),d=a(38102),l=e([i,d]);[i,d]=l.then?(await l)():l;const u=3*o.$,m=({isChatWithSelf:e,type:t,isGroupChatJustCreated:a,topic:s})=>{const o=(0,i.A)();return"scheduled"===t?p(o):e?g(o):a?f(o):s?h(o,s):n.Ay.createElement("div",{className:"empty"},n.Ay.createElement("span",null,o("NoMessages")))};function h(e,t){return n.Ay.createElement("div",{className:"NoMessages"},n.Ay.createElement("div",{className:"wrapper"},n.Ay.createElement(d.A,{topic:t,size:u,className:"no-messages-icon topic-icon"}),n.Ay.createElement("h3",{className:"title"},e("Chat.EmptyTopicPlaceholder.Title")),n.Ay.createElement("p",{className:"description topic-description"},(0,r.A)(e("Chat.EmptyTopicPlaceholder.Text"),["br"]))))}function p(e){return n.Ay.createElement("div",{className:"empty"},n.Ay.createElement("span",null,e("ScheduledMessages.EmptyPlaceholder")))}function g(e){return n.Ay.createElement("div",{className:"NoMessages"},n.Ay.createElement("div",{className:"wrapper"},n.Ay.createElement(c.A,{name:"cloud-download",className:"no-messages-icon"}),n.Ay.createElement("h3",{className:"title"},e("Conversation.CloudStorageInfo.Title")),n.Ay.createElement("ul",{className:"description"},n.Ay.createElement("li",null,e("Conversation.ClousStorageInfo.Description1")),n.Ay.createElement("li",null,e("Conversation.ClousStorageInfo.Description2")),n.Ay.createElement("li",null,e("Conversation.ClousStorageInfo.Description3")),n.Ay.createElement("li",null,e("Conversation.ClousStorageInfo.Description4")))))}function f(e){return n.Ay.createElement("div",{className:"NoMessages"},n.Ay.createElement("div",{className:"wrapper",dir:e.isRtl?"rtl":void 0},n.Ay.createElement("h3",{className:"title"},e("EmptyGroupInfo.Title")),n.Ay.createElement("p",{className:"description"},e("EmptyGroupInfo.Subtitle")),n.Ay.createElement("ul",{className:"list-checkmarks"},n.Ay.createElement("li",null,e("EmptyGroupInfo.Line1")),n.Ay.createElement("li",null,e("EmptyGroupInfo.Line2")),n.Ay.createElement("li",null,e("EmptyGroupInfo.Line3")),n.Ay.createElement("li",null,e("EmptyGroupInfo.Line4")))))}const y=(0,n.ph)(m);s()}catch(I){s(I)}})},69745:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(14487),n=a(24021),o=a(13439),r=a(17872),i=a(60919),c=e([n]),d=c.then?(await c)():c;n=d[0],(0,o.aJ)("loadStatistics",async(e,t,a)=>{const{chatId:c,isGroup:d,tabId:l=(0,s.g0)()}=a,u=(0,i.hds)(e,c),m=(0,i.AWZ)(e,c);if(!u||!m)return;const h=await(0,n.px)(d?"fetchGroupStatistics":"fetchChannelStatistics",{chat:u,dcId:m.statisticsDcId});if(!h)return;const{stats:p}=h;if(e=(0,o.mS)(),e=(0,r.n8l)(e,c,p,l),(0,o.UF)(e),"channel"===p.type){const e=p.recentPosts.filter(e=>"message"===e.type),a=p.recentPosts.filter(e=>"story"===e.type);e.length>0&&t.loadMessagesById({chatId:c,messageIds:e.map(e=>e.msgId)}),a.length>0&&t.loadPeerStoriesByIds({peerId:c,storyIds:a.map(e=>e.storyId)})}}),(0,o.aJ)("loadChannelMonetizationStatistics",async(e,t,a)=>{const{peerId:c,tabId:d=(0,s.g0)()}=a,l=(0,i.PVB)(e,c),u=(0,i.AWZ)(e,c);if(!l)return;const m=u?.statisticsDcId,h=await(0,n.px)("fetchChannelMonetizationStatistics",{peer:l,dcId:m});h&&(e=(0,o.mS)(),e=(0,r.$ry)(e,h,d),(0,o.UF)(e))}),(0,o.aJ)("loadMessageStatistics",async(e,t,a)=>{const{chatId:c,messageId:d,tabId:l=(0,s.g0)()}=a,u=(0,i.hds)(e,c),m=(0,i.AWZ)(e,c);if(!u||!m)return;const h=m.statisticsDcId;let p=await(0,n.px)("fetchMessageStatistics",{chat:u,messageId:d,dcId:h});p||(p={}),e=(0,o.mS)();const{viewsCount:g,forwardsCount:f,reactions:y}=(0,i.zeq)(e,c)[d]||{};p.viewsCount=g,p.forwardsCount=f,p.reactionsCount=y?.results?y?.results.reduce((e,t)=>e+t.count,0):void 0,e=(0,r.gJI)(e,p,l),(0,o.UF)(e),t.loadMessagePublicForwards({chatId:c,messageId:d,tabId:l})}),(0,o.aJ)("loadMessagePublicForwards",async(e,t,a)=>{const{chatId:c,messageId:d,tabId:l=(0,s.g0)()}=a,u=(0,i.hds)(e,c),m=(0,i.AWZ)(e,c);if(!u||!m)return;const h=m.statisticsDcId,p=(0,i.nTw)(e,l).statistics.currentMessage||{};if(p?.publicForwards&&!p.nextOffset)return;const g=await(0,n.px)("fetchMessagePublicForwards",{chat:u,messageId:d,dcId:h,offset:p.nextOffset}),{forwards:f,nextOffset:y,count:I}=g||{};e=(0,o.mS)(),e=(0,r.gJI)(e,{...p,publicForwards:I||f?.length,publicForwardsData:(p.publicForwardsData||[]).concat(f||[]),nextOffset:y},l),(0,o.UF)(e)}),(0,o.aJ)("loadStatisticsAsyncGraph",async(e,t,a)=>{const{chatId:c,token:d,name:l,isPercentage:u,tabId:m=(0,s.g0)()}=a,h=(0,i.AWZ)(e,c);if(!h)return;const p=h.statisticsDcId,g=await(0,n.px)("fetchStatisticsAsyncGraph",{token:d,dcId:p,isPercentage:u});g&&(e=(0,o.mS)(),e=(0,r.RoI)(e,c,l,g,m),(0,o.UF)(e))}),(0,o.aJ)("loadStoryStatistics",async(e,t,a)=>{const{chatId:c,storyId:d,tabId:l=(0,s.g0)()}=a,u=(0,i.hds)(e,c),m=(0,i.AWZ)(e,c);if(!u||!m)return;const h=m.statisticsDcId;let p=await(0,n.px)("fetchStoryStatistics",{chat:u,storyId:d,dcId:h});p||(p={}),e=(0,o.mS)();const g=(0,i.Msb)(e,c,d),{forwardsCount:f=0,viewsCount:y=0,reactionsCount:I=0}=g&&"views"in g&&g.views?g.views:{};p.viewsCount=y,p.forwardsCount=f,p.reactionsCount=I,e=(0,o.mS)(),e=(0,r.KXe)(e,p,l),(0,o.UF)(e),t.loadStoryPublicForwards({chatId:c,storyId:d,tabId:l})}),(0,o.aJ)("loadStoryPublicForwards",async(e,t,a)=>{const{chatId:c,storyId:d,tabId:l=(0,s.g0)()}=a,u=(0,i.hds)(e,c),m=(0,i.AWZ)(e,c);if(!u||!m)return;const h=m.statisticsDcId,p=(0,i.nTw)(e,l).statistics.currentStory||{};if(p?.publicForwards&&!p.nextOffset)return;const{publicForwards:g,count:f,nextOffset:y}=await(0,n.px)("fetchStoryPublicForwards",{chat:u,storyId:d,dcId:h,offset:p.nextOffset})||{};e=(0,o.mS)(),e=(0,r.KXe)(e,{...p,publicForwards:f||g?.length,publicForwardsData:(p.publicForwardsData||[]).concat(g||[]),nextOffset:y},l),(0,o.UF)(e)}),(0,o.aJ)("processMonetizationRevenueWithdrawalUrl",async(e,t,a)=>{const{peerId:c,currentPassword:d,tabId:l=(0,s.g0)()}=a;e=(0,r.Zct)(e,{isLoading:!0},l),(0,o.UF)(e);const u=(0,i.PVB)(e,c);if(!u)return;const m=await(0,n.px)("fetchMonetizationRevenueWithdrawalUrl",{peer:u,currentPassword:d});m&&(e=(0,o.mS)(),e=(0,r.Zct)(e,{isLoading:!1,errorKey:"error"in m?m.messageKey:void 0},l),(0,o.UF)(e),"url"in m&&(t.openUrl({url:m.url,shouldSkipModal:!0,tabId:l,ignoreDeepLinks:!0}),t.closeMonetizationVerificationModal({tabId:l})))}),t()}catch(e){t(e)}})},70115:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>b});var n=a(84051),o=a(13439),r=a(70636),i=a(60919),c=a(48775),d=a(58443),l=a(4961),u=a(39351),m=a(17712),h=a(59030),p=a(64489),g=a(54746),f=a(85118),y=a(64493),I=a(50653),A=e([r,u,h,y]);function v({patternColor:e,peer:t,paidMessagesStars:a}){const s=(0,h.A)(),i=(0,u.A)(),{openPremiumModal:A,openStarsBalanceModal:v}=(0,o.ko)(),b=(0,m.A)(()=>A()),S=(0,m.A)(()=>{v({})});if(t)return n.Ay.createElement("div",{className:I.A.root},n.Ay.createElement("div",{className:I.A.inner},n.Ay.createElement("div",{className:I.A.iconsContainer},n.Ay.createElement(p.A,{tgsUrl:d.w.Unlock,size:54,color:e,className:I.A.animatedUnlock}),n.Ay.createElement(g.A,{name:"comments-sticker",className:I.A.commentsIcon})),n.Ay.createElement("span",{className:I.A.description},a?i((0,r.mO)(t)?"MessagesPlaceholderPaidUser":"MessagesPlaceholderPaidChannel",{peer:(0,r.F9)(i,t),amount:(0,c.U2)(i,a,{asFont:!0,className:I.A.starIcon,containerClassName:I.A.starIconContainer})},{withNodes:!0,withMarkdown:!0}):(0,l.A)(s("MessageLockedPremium",(0,r.F9)(i,t)),["simple_markdown"])),n.Ay.createElement(y.A,{color:"translucent-black",size:"default",pill:!0,onClick:a?S:b,className:I.A.button},a?n.Ay.createElement(n.Ay.Fragment,null,i("ButtonBuyStars"),n.Ay.createElement(f.A,{preset:"button"})):s("MessagePremiumUnlock"))))}[r,u,h,y]=A.then?(await A)():A;const b=(0,n.ph)((0,o.EK)((e,{peerId:t})=>{const a=(0,i.SJA)(e),{patternColor:s}=(0,i.Gyz)(e,a)||{};return{patternColor:s,peer:(0,i.PVB)(e,t)}})(v));s()}catch(S){s(S)}})},70787:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"AboutMonetizationModal",!t);return a?s.Ay.createElement(a,e):void 0}},71993:(e,t,a)=>{e.exports=a.p+"ai-chat-folder.7c79084d1b6bf14b125c.png"},72067:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(66644),o=a(17712);function r(e,t=".Transition.shared-media-transition"){return(0,s.vJ)(()=>{function a(){const a=e.current,s=a.querySelector(t),o=a.querySelector(".TabList");if(s&&o){const e=a.clientHeight-o.offsetHeight;(0,n.RK)(()=>{s.style.minHeight=`${e}px`})}}return a(),window.addEventListener("resize",a,!1),()=>{window.removeEventListener("resize",a,!1)}},[e,t]),{applyTransitionFix:(0,o.A)(()=>{(0,n.YS)(()=>{const t=e.current;if("hidden"===t.style.overflowY)return;const a=t.offsetWidth-t.clientWidth;(0,n.RK)(()=>{t.style.overflowY="hidden",t.style.paddingRight=`${a}px`})})}),releaseTransitionFix:(0,o.A)(()=>{const t=e.current;t.style.overflowY="scroll",t.style.paddingRight="0"})}}},72096:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(48544),n=a(42347),o=a(25834),r=a(11161),i=a(98157),c=a(79167),d=a(39441),l=a(93533),u=a(41790),m=a(50616),h=a(4056),p=a(26943),g=a(3334),f=a(46773),y=a(8125),I=a(64968),A=a(69745),v=a(36757),b=a(88742),S=(a(10197),a(67162),a(8328)),w=(a(51291),a(40257),a(73309),a(33777),a(19086),a(11117)),C=a(24692),E=(a(98475),a(12859)),M=(a(57988),a(30744),a(2059)),x=(a(67302),a(96391)),k=(a(14951),a(4990)),P=a(65133),T=a(34160),F=(a(23734),a(63571),a(65868)),N=(a(32165),a(76404),a(52771)),B=a(96307),U=e([s,n,o,r,i,c,d,l,u,m,h,p,g,f,y,I,A,v,b,S,w,C,E,M,x,k,P,T,F,N,B]);[s,n,o,r,i,c,d,l,u,m,h,p,g,f,y,I,A,v,b,S,w,C,E,M,x,k,P,T,F,N,B]=U.then?(await U)():U,t()}catch(e){t(e)}})},72420:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{requestedDraft:t}=e,a=(0,o.A)(n.ar.Extra,"DraftRecipientPicker",!t);return a?s.Ay.createElement(a,e):void 0}},73309:(e,t,a)=>{var s=a(14487),n=a(13439),o=a(32989);(0,n.aJ)("setStickerSearchQuery",(e,t,a)=>{const{query:n,tabId:r=(0,s.g0)()}=a;return(0,o.w)(e,{stickerSearch:{query:n,resultIds:void 0}},r)}),(0,n.aJ)("setGifSearchQuery",(e,t,a)=>{const{query:n,tabId:r=(0,s.g0)()}=a;return(0,o.w)(e,{gifSearch:{query:n,offset:void 0,results:void 0}},r)})},73931:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>p});var n=a(84051),o=a(13439),r=a(87357),i=a(37661),c=a(17712),d=a(21849),l=a(39021),u=a(66469),m=a(24683),h=e([d,u]);[d,u]=h.then?(await h)():h;const p=({avatarPeer:e,forwardInfo:t,handleAvatarClick:a})=>{const{openUserPortrait:s}=(0,o.ko)(),h=!e&&t?t.hiddenUserName:void 0,[p,g,f]=(0,i.A)(),[y,I]=(0,n.J0)(void 0),A=(0,n.li)(),v=(0,n.li)(),b=(0,n.li)(),S=(0,n.hb)(()=>b.current,[]),w=(0,n.hb)(()=>v.current,[]),C=(0,n.hb)(()=>b.current.closest(".custom-scroll, .no-scrollbar"),[]),E=(0,c.A)(()=>({withPortal:!0,shouldAvoidNegativePosition:!0})),M=(0,c.A)(()=>{g();const e=A.current;if(!e)return;const{x:t,y:a}=e.getBoundingClientRect();I({x:t,y:a})});return n.Ay.createElement("div",{className:"inline-block",ref:b},n.Ay.createElement(u.A,{round:!0,className:(0,r.A)("!p-0 !w-auto !h-auto"),color:"translucent",onActivate:M},n.Ay.createElement("div",{ref:A,className:"symbol-menu-trigger"}),n.Ay.createElement(d.A,{size:"small",className:m.A.senderAvatar,peer:e,text:h,onClick:e?a:void 0})),n.Ay.createElement(l.O,{isOpen:p,onClose:f,userId:e?.id,anchor:y,menuRef:v,getTriggerElement:S,getMenuElement:w,getRootElement:C,getLayout:E}))};s()}catch(e){s(e)}})},74863:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>m});var n=a(84051),o=a(13439),r=a(45227),i=a(95807),c=a(6936),d=(a(47778),e([c])),l=d.then?(await d)():d;c=l[0];const u=e=>{const{chatId:t}=e,[a,s]=(0,n.J0)(!1),[o,d]=(0,n.J0)({x:0,y:224}),l=(0,n.li)({x:0,y:0,startX:0,startY:0}),u=(0,n.li)(!1),m=(0,n.li)(!1),h=(0,n.li)(o);(0,n.vJ)(()=>{h.current=o},[o]),(0,n.vJ)(()=>{m.current=a},[a]);const p=(0,n.hb)(()=>{const e=localStorage.getItem("room-ai-position");if(e){const t=JSON.parse(e);d(t)}else d({x:-16,y:224})},[]),g=(0,n.hb)(e=>{localStorage.setItem("room-ai-position",JSON.stringify(e))},[]),f=(0,n.li)(null),y=(0,n.hb)(e=>{if(!a)return;u.current=!0;const t=e.clientX-l.current.x,s=e.clientY-l.current.y,n={x:l.current.startX+t,y:l.current.startY-s},o=62-window.innerWidth,r=window.innerHeight-62;n.x=Math.max(o,Math.min(0,n.x)),n.y=Math.max(0,Math.min(r,n.y)),d(n)},[a]),I=(0,n.hb)(()=>{f.current&&(clearTimeout(f.current),f.current=null),a&&u.current&&g(h.current),s(!1),setTimeout(()=>{u.current=!1},100)},[a,g]),A=(0,n.hb)(e=>{e.preventDefault(),e.stopPropagation(),u.current=!1,l.current={x:e.clientX,y:e.clientY,startX:o.x,startY:o.y},f.current=window.setTimeout(()=>{s(!0)},150)},[o]),v=(0,n.hb)(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]),b=(0,n.hb)(e=>{(u.current||a)&&(e.preventDefault(),e.stopPropagation())},[a]);(0,n.vJ)(()=>(document.addEventListener("mousemove",y),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",I)}),[a,y,I]),(0,n.vJ)(()=>{p()},[p]);const S=(0,r.P)({component:c.A,props:{chatId:t}});return n.Ay.createElement("div",{className:"room-ai-entry-wrapper",ref:S,"data-dragging":a,style:(0,i.A)(`right: ${-o.x}px; bottom: ${o.y}px; cursor: ${a?"grabbing":"grab"}; userSelect: none`),onMouseDown:A,onMouseLeave:v,onClick:b})},m=(0,n.ph)((0,o.EK)((e,{chatId:t})=>({chatId:t}))(u));s()}catch(e){s(e)}})},75170:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isActive:t}=e,a=(0,o.A)(n.ar.Extra,"MiddleSearch",!t,!0);return a?s.Ay.createElement(a,e):void 0}},75604:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>k});var n=a(84051),o=a(13439),r=a(90709),i=a(60919),c=a(87357),d=a(95807),l=a(17663),u=a(52491),m=a(64713),h=a(83868),p=a(4961),g=a(39351),f=a(17712),y=a(62587),I=a(59030),A=a(67693),v=a(54746),b=a(92108),S=a(96530),w=a(65843),C=a(55158),E=a(52132),M=e([g,y,I,A]);[g,y,I,A]=M.then?(await M)():M;const x=({chat:e,chatId:t,botInfo:a,isLoadingFullUser:s,phoneCodeList:M,commonChats:x,userFullInfo:k,hasMessages:P})=>{const{loadCommonChats:T,openChatWithInfo:F}=(0,o.ko)(),N=(0,I.A)(),B=(0,g.A)(),{phoneCountry:U,registrationMonth:R,nameChangeDate:V,photoChangeDate:J}=k?.settings||{};(0,n.vJ)(()=>{T({userId:t})},[t]);const L=(0,n.Kr)(()=>{if(M&&U)return(0,m.gH)(M,U)},[M,U]),O=(0,y.A)(a?.photo?(0,r.Fi)(a.photo):void 0),D=(0,y.A)(a?.gif?(0,r.sC)(a.gif,"full"):void 0),G=a?.photo?(0,r.Xn)(a.photo):a?.gif?(0,r.NZ)(a.gif):void 0,j=a&&!a.description&&!a.gif&&!a.photo,q=!L||!R,z=(0,r.Rl)(t),{width:_,height:K}=G||{},H=(0,f.A)(e=>{(0,h.A)(e),F({id:t,shouldReplaceHistory:!0,profileTab:"commonChats",forceScrollProfileTab:!0})}),W=V&&e?n.Ay.createElement("div",{className:"local-action-message",key:"security-name-message"},n.Ay.createElement("span",null,B("UserUpdatedName",{user:e.title,time:(0,l.vm)(B,V)},{withNodes:!0,withMarkdown:!0}))):void 0,$=J&&e?n.Ay.createElement("div",{className:"local-action-message",key:"security-photo-message"},n.Ay.createElement("span",null,B("UserUpdatedPhoto",{user:e.title,time:(0,l.vm)(B,J)},{withNodes:!0,withMarkdown:!0}))):void 0,X=(0,n.Kr)(()=>{const e=[];if(L&&e.push([N("PrivacyPhone"),n.Ay.createElement("span",{className:E.A.chatDescription},n.Ay.createElement("span",{className:E.A.country},(0,p.A)((0,u.D0)(L?.iso2))),L?.defaultName)]),R&&e.push([B("ContactInfoRegistration"),(0,l.BR)(B.code,R)]),k?.commonChatsCount){const t=(0,o.mS)(),a=x?.ids.slice(0,3).map(e=>(0,i.PVB)(t,e)).filter(Boolean);e.push([B("ChatNonContactUserGroups"),n.Ay.createElement(S.A,{className:E.A.link,onClick:H},n.Ay.createElement("span",{className:E.A.linkInfo},B("ChatGroups",{count:k.commonChatsCount},{pluralValue:k.commonChatsCount})),Boolean(a?.length)&&n.Ay.createElement(A.A,{size:"micro",peers:a}),n.Ay.createElement(v.A,{name:"next",className:E.A.icon}))])}return e},[B,N,L,R,x,k]);return n.Ay.createElement("div",{className:(0,c.A)(E.A.root,"empty")},s&&q&&n.Ay.createElement("span",null,N("Loading")),j&&q&&!s&&!P&&n.Ay.createElement("span",null,N("NoMessages")),a&&n.Ay.createElement("div",{className:(0,c.A)(E.A.chatInfo,E.A.botBackground),style:(0,d.A)(_?`width: ${_}px`:void 0)},O&&n.Ay.createElement("img",{className:E.A.media,src:O,width:_,height:K,alt:"Bot info"}),D&&n.Ay.createElement(w.A,{canPlay:!0,className:E.A.media,src:D,loop:!0,disablePictureInPicture:!0,muted:!0,playsInline:!0,style:(0,d.A)(Boolean(_)&&`width: ${_}px`,Boolean(K)&&`height: ${K}px`)}),G&&!O&&!D&&n.Ay.createElement(C.A,{className:E.A.media,width:_,height:K,forceAspectRatio:!0}),z&&n.Ay.createElement("div",{className:E.A.botInfoDescription},N("VerifyChatInfo")),!z&&a.description&&n.Ay.createElement("div",{className:E.A.botInfoDescription},n.Ay.createElement("p",{className:E.A.botInfoTitle},N("BotInfoTitle")),(0,p.A)(a.description,["br","emoji","links"]))),!q&&e&&n.Ay.createElement("div",{className:(0,c.A)(E.A.chatInfo,E.A.chatBackground)},n.Ay.createElement("h3",{className:E.A.chatInfoTitle},(0,p.A)((0,r.Js)(B,e))),n.Ay.createElement("p",{className:(0,c.A)(E.A.chatInfoSubtitle,E.A.textColor)},B("ChatNonContactUserSubtitle")),n.Ay.createElement(b.A,{keyClassName:E.A.textColor,data:X}),!e?.isVerified&&n.Ay.createElement("div",{className:(0,c.A)(E.A.chatNotVerified,E.A.textColor)},n.Ay.createElement(v.A,{name:"info-filled"}),n.Ay.createElement("p",{className:E.A.verifiedTitle},B("ContactInfoNotVerified")))),W,$)},k=(0,n.ph)((0,o.EK)((e,{chatId:t})=>{const{countryList:{phoneCodes:a}}=e,s=(0,i.hds)(e,t),n=(0,i.vGo)(e,t),o=(0,i.Ua4)(e,t);let r,c=!1;return(0,i.yps)(e,t)&&(n?r=n.botInfo:c=!0),{chat:s,userFullInfo:n,botInfo:r,isLoadingFullUser:c,phoneCodeList:a,commonChats:o}})(x));s()}catch(e){s(e)}})},76265:(e,t,a)=>{a.d(t,{A:()=>n});const s=/^\d+\.\d+(\.\d+)?$/;function n(e,t,a){const n=e.trim();return!!s.test(n)&&(a?1===n.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}):n!==t)}},76404:(e,t,a)=>{(0,a(13439).aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateTwoFaStateWaitCode":return{...e,twoFaSettings:{...e.twoFaSettings,isLoading:!1,waitingEmailCodeLength:a.length}};case"updateTwoFaError":return{...e,twoFaSettings:{...e.twoFaSettings,errorKey:a.messageKey}}}})},76786:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(84051);let n=function(e){return e[e.waitingForNetwork=0]="waitingForNetwork",e[e.syncing=1]="syncing",e[e.online=2]="online",e}({});function o(e,t,a,o,r,i){let c,d,l;return c=function(){const[e,t]=(0,s.J0)(window.navigator.onLine);return(0,s.vJ)(()=>{function e(){t(window.navigator.onLine)}return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("offline",e),window.removeEventListener("online",e)}},[]),e}()&&"connectionStateConnecting"!==t?a?n.syncing:n.online:n.waitingForNetwork,d=c===n.online||i?"none":o?"middleHeader":r?"minimized":"overlay",c===n.waitingForNetwork?l=e("WaitingForNetwork"):c===n.syncing&&(l=e("Updating")),"middleHeader"===d&&(l=l.toLowerCase().replace(/\.+$/,"")),{connectionStatus:c,connectionStatusPosition:d,connectionStatusText:l}}},76929:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"StatusPickerMenu",!t);return a?s.Ay.createElement(a,e):void 0}},77030:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(96540),n=a(48862),o=a(70809),r=a(89116);const i=()=>{const{openDrawer:e}=(0,r.S)(),t=(0,s.useCallback)(()=>{e(r.N.PersonalizeSettings),n.Hk.getGptSettings()},[e]);return s.createElement("div",{className:"cursor-pointer flex flex-row gap-[6px] items-center",onClick:t},s.createElement("span",{className:"text-[var(--color-text-secondary)]"},s.createElement(o.sY,null)),s.createElement("span",{className:"text-[16px] font-semibold"},"Personalize"))}},77121:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(13439),n=a(84051),o=a(77787);const r=(0,n.ph)(({folderType:e,tags:t,setActiveTag:a})=>"preset"!==e&&"ai"!==e||!t?.length?null:n.Ay.createElement("div",{className:"flex flex-row flex-wrap items-center gap-2 px-2 pt-3"},t.map(r=>n.Ay.createElement("div",{className:"bg-[var(--color-aichatfolders-tag-bg)] h-[27px] leading-[27px] text-[13px] font-[500] text-[var(--color-aichatfolders-tag-text)] rounded-[6px] px-2 relative"},r,n.Ay.createElement("div",{className:"absolute top-[-4px] right-[-4px] w-[12px] h-[12px] flex items-center justify-center bg-[var(--color-aichatfolders-tag-bg-active)] rounded-full cursor-pointer hover:opacity-80 border-[1px] border-[var(--color-aichatfolders-tag-border)]",onClick:()=>function(n){const r=t.filter(e=>e!==n);a(r);let i=(0,s.mS)();o.zs.general?.set("preset"===e?o.HM:o.al,r),i={...i,chatFolders:{...i.chatFolders,aiChatFolders:{...i.chatFolders.aiChatFolders,["preset"===e?"activePresetTag":"activeAITag"]:r}}},(0,s.UF)(i)}(r)},n.Ay.createElement(i,null)))))),i=()=>n.Ay.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:8,fill:"none",className:"scale-[0.8]"},n.Ay.createElement("path",{fill:"#fff",d:"M4 4.7 1.55 7.15a.474.474 0 0 1-.35.137.474.474 0 0 1-.35-.137.474.474 0 0 1-.138-.35c0-.142.046-.258.138-.35L3.3 4 .85 1.55a.474.474 0 0 1-.138-.35A.474.474 0 0 1 1.2.713c.143 0 .26.045.35.137L4 3.3 6.45.85A.474.474 0 0 1 6.8.712a.474.474 0 0 1 .487.487.474.474 0 0 1-.136.35L4.7 4l2.45 2.45a.474.474 0 0 1 .137.35.474.474 0 0 1-.137.35.474.474 0 0 1-.35.138.474.474 0 0 1-.35-.137L4 4.7Z"}))},77371:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=({isOpen:e})=>{const t=(0,o.A)(n.ar.Extra,"MediaViewer",!e);return t?s.Ay.createElement(t,null):void 0}},77548:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{i:()=>f});var n=a(96540),o=a(13439),r=a(31481),i=a(90709),c=a(70636),d=a(60919),l=a(49763),u=a(81885),m=a(40708),h=a(15972),p=a(29356),g=e([c,u,h]);[c,u,h]=g.then?(await g)():g;const f=e=>{const{title:t,ignoredIds:a,onIgnored:s,onUnIgnored:g}=e,f=n.useMemo(()=>((0,l.YA)(r.DSF)||[]).filter(e=>e!==m.bL),[]).filter(e=>!a.includes(e)),[y,I]=(0,n.useState)("summary"),A=(0,u.A)(),v=(0,o.mS)(),b=(e,t)=>{const a=(0,d.PVB)(v,e);if(!a)return;const o=a&&!(0,c.vj)(a)?a.isSelf:void 0,r="isCustomPeer"in a?a:void 0,l="id"in a?a:void 0,u=l&&(0,c.mO)(l),m=l&&(u?(0,i.Yg)(l):(0,i.Js)(A,l)),f=function(){if(!a)return;if((0,c.vj)(a))return[(0,i.sT)(A,a)];const e=(0,d.K0y)(v,a.id);return(0,i.CD)(A,a,e)}()||"",y=r?r?.title||A(r?.titleKey):o?A("SavedMessages"):m;return n.createElement("div",{className:"chat-picker-item flex-1 flex flex-row items-center gap-[12px] py-[10px] rounded-[12px]"},n.createElement(h.A,{peer:a,isSavedMessages:o,size:"medium"}),n.createElement("div",{className:"flex flex-col gap-[4px] justify-center flex-1 overflow-hidden"},n.createElement("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap font-medium"},y),n.createElement("div",{className:"text-[var(--color-text-secondary)] text-sm"},f)),t?n.createElement("div",{className:"chat-picker-item-btn text-white text-sm bg-[#5493F2] w-auto px-[5px] h-[26px] rounded-[6px] flex items-center justify-center",onClick:()=>g(e)},"Stop Ignoring"):n.createElement("div",{className:"chat-picker-item-btn text-white text-sm bg-[#FF5757] w-auto px-[5px] h-[26px] rounded-[6px] flex items-center justify-center",onClick:()=>s(e)},n.createElement(p.A,{name:"eye-crossed"}),"Ignore"))};return n.createElement("div",{className:"summary-rooms-tab mt-[20px]"},n.createElement("div",{className:"tabs-container"},n.createElement("button",{className:"font-medium text-base "+("summary"===y?"text-[var(--color-text)] active":"text-[var(--color-text-secondary)] "),onClick:()=>I("summary")},t),n.createElement("button",{className:"font-medium text-base "+("ignored"===y?"text-[var(--color-text)] active":"text-[var(--color-text-secondary)] "),onClick:()=>I("ignored")},"Ignored Chats")),"summary"===y?n.createElement("div",null,f.length>0&&n.createElement("div",{className:"mt-[16px] space-y-[8px]"},f.map(e=>b(e,!1)))):n.createElement("div",null,a.length>0&&n.createElement("div",{className:"mt-[16px] space-y-[8px]"},a.map(e=>b(e,!0)))))};s()}catch(e){s(e)}})},77642:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"SponsoredContextMenuContainer",!t);return a?s.Ay.createElement(a,e):void 0}},77973:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>O});var n=a(84051),o=a(94697),r=a(13439),i=a(31481),c=a(20714),d=a(60919),l=a(64520),u=a(30708),m=a(63495),h=a(96454),p=a(87357),g=a(95807),f=a(4029),y=a(19800),I=a(99256),A=a(96140),v=a(25624),b=a(71993),S=a(10454),w=a(14792),C=a(77787),E=a(74984),M=a(39351),x=a(17712),k=a(59030),P=a(72531),T=a(83594),F=a(24433),N=a(60859),B=a(57474),U=a(63152),R=a(629),V=a(18946),J=e([I,A,v,E,M,k,T,F,V]);[I,A,v,E,M,k,T,F,V]=J.then?(await J)():J;const L=({currentUserId:e,archiveSettings:t,animationLevel:a,theme:s,canInstall:d,attachBots:l,currentUser:u,accountsTotalLimit:J,aiChatFolders:L,onSelectArchived:O,onSelectContacts:D,onSelectSettings:G,onBotMenuOpened:j,onBotMenuClosed:q,onSelectAIKnowledge:z,onSelectAITranslate:_})=>{const{openChat:K,setSharedSettingOption:H,updatePerformanceSettings:W,openChatByUsername:$,openUrl:X,openChatWithInfo:Y}=(0,r.ko)(),Q=(0,k.A)(),Z=(0,M.A)(),ee=a!==i.dnp?a===i.zP3?"max":"mid":"min",te=!h.cp&&(window.location.hostname===i.mFn||i.W75),ae=(0,E.ic)()[i._E9]?.chatsCount||0,se=(0,n.Kr)(()=>Object.values(l).filter(e=>e.isForSideMenu),[l]),ne=((0,x.A)(()=>{Y({id:e,shouldReplaceHistory:!0,profileTab:"stories"})}),(0,x.A)(()=>{K({id:e,shouldReplaceHistory:!0})})),oe=(0,x.A)(e=>{e.stopPropagation(),H({theme:"light"===s?"dark":"light"}),H({shouldUseSystemTheme:!1})}),re=(0,x.A)(e=>{e.stopPropagation();let t=a+1;t>i.zP3&&(t=i.dnp);const s=t===i.dnp?c.PI:t===i.zP3?c.LH:c.tS;H({animationLevel:t,wasAnimationLevelSetManually:!0}),W(s)}),ie=(0,x.A)(()=>{window.open(i.qGQ,"_blank","noopener")}),ce=(0,x.A)(()=>{(0,y.Bt)("K")}),de=(0,x.A)(()=>{$({username:Q("Settings.TipsUsername")})}),le=(0,x.A)(()=>{X({url:i.ukY})}),[ue,me]=((0,x.A)(()=>{Y({id:e,shouldReplaceHistory:!0,profileTab:"stories"})}),(0,n.J0)(!1)),he=(0,x.A)(async e=>{if(ue)return;e.stopPropagation();const t=!L;t?(me(!0),H({aiChatFolders:t}),await v.x.applyChatFolder(),P.A.emit(P.E.UpdateAIChatFoldersApplying,{loading:!1}),C.zs.general?.set(C._9,!1),me(!1)):o.A.confirm({title:"Are you sure?",content:"This will hide all AI chat folders, but you can enable this feature again.",onOk:async()=>{me(!0),H({aiChatFolders:t}),await(0,A.MJ)(),(0,A.E8)(I.H.classify),me(!1)},onCancel:()=>{}})}),pe=(0,n.hb)(({loading:e,isApply:t})=>{if(t)me(e);else{const t=(0,r.mS)().chatFolders.nextAiChatFolders?.length;me(!t&&e)}},[]);return(0,n.vJ)(()=>(P.A.on(P.E.UpdateSettingAIChatFoldersLoading,pe),()=>{P.A.off(P.E.UpdateSettingAIChatFoldersLoading,pe)}),[pe]),n.Ay.createElement(n.Ay.Fragment,null,m.vM&&u&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(V.A,{currentUser:u,totalLimit:J,onSelectCurrent:G}),n.Ay.createElement(N.A,null)),n.Ay.createElement(F.A,{customIcon:n.Ay.createElement("img",{className:"icon",src:S,alt:"ai-knowledge",style:(0,g.A)("width: 24px;height: 24px;max-width: 24px;")}),onClick:z},Q("Quick Replies")),n.Ay.createElement(F.A,{customIcon:n.Ay.createElement("img",{className:"icon",src:w,alt:"ai-translate",style:(0,g.A)("width: 24px;height: 24px;max-width: 24px;")}),onClick:_},Q("AI Translate")),n.Ay.createElement(F.A,{customIcon:n.Ay.createElement("img",{className:"icon",src:b,alt:"ai-chat-folders",style:(0,g.A)("width: 24px;height: 24px;max-width: 24px; padding:3px;")}),onClick:he},n.Ay.createElement("span",{className:"menu-item-name capitalize"},Q("AI Chat Folders")),n.Ay.createElement("label",{className:(0,p.A)("Switcher no-animation",ue?"disabled":""),title:""},n.Ay.createElement("input",{type:"checkbox",id:"aiChatFolders",checked:!0===L,disabled:!0}),n.Ay.createElement("span",{className:"widget"})),ue&&n.Ay.createElement(B.A,{className:"w-[18px] h-[18px] ml-2",color:"dark"===s?"white":"black"})),n.Ay.createElement(F.A,{icon:"saved-messages",onClick:ne},Q("SavedMessages")),t.isHidden&&n.Ay.createElement(F.A,{icon:"archive",onClick:O},n.Ay.createElement("span",{className:"menu-item-name"},Q("ArchivedChats")),ae>0&&n.Ay.createElement("div",{className:"right-badge"},ae)),n.Ay.createElement(F.A,{icon:"group",onClick:D},Q("Contacts")),se.map(e=>n.Ay.createElement(T.A,{bot:e,theme:s,isInSideMenu:!0,canShowNew:!0,onMenuOpened:j,onMenuClosed:q})),n.Ay.createElement(F.A,{icon:"settings",onClick:G},Q("Settings")),n.Ay.createElement(F.A,{icon:"darkmode",onClick:oe},n.Ay.createElement("span",{className:"menu-item-name"},Q("lng_menu_night_mode")),n.Ay.createElement(U.A,{id:"darkmode",label:Q("dark"===s?"lng_settings_disable_night_theme":"lng_settings_enable_night_theme"),checked:"dark"===s,noAnimation:!0})),n.Ay.createElement(F.A,{icon:"animations",onClick:re},n.Ay.createElement("span",{className:"menu-item-name capitalize"},Q("Appearance.Animations").toLowerCase()),n.Ay.createElement(R.A,{value:ee})),n.Ay.createElement(F.A,{icon:"help",onClick:de},Q("TelegramFeatures")),n.Ay.createElement(F.A,{icon:"bug",onClick:le},Z("MenuReportBug")),i.Cmz&&n.Ay.createElement(F.A,{icon:"permissions",onClick:ie},Z("MenuBetaChangelog")),te&&n.Ay.createElement(F.A,{icon:"K",isCharIcon:!0,href:`${i.qJR}k`,onClick:ce},Z("MenuSwitchToK")),d&&n.Ay.createElement(F.A,{icon:"install",onClick:(0,f.S)()},Z("MenuInstallApp")))},O=(0,n.ph)((0,r.EK)(e=>{const t=(0,d.nTw)(e),{currentUserId:a,archiveSettings:s}=e,{animationLevel:n,aiChatFolders:o}=(0,u.l)(e),r=e.attachMenu.bots;return{currentUserId:a,currentUser:(0,d.mBe)(e,a),theme:(0,d.SJA)(e),animationLevel:n,canInstall:Boolean(t.canInstall),archiveSettings:s,attachBots:r,accountsTotalLimit:(0,l.B)(e,"moreAccounts"),aiChatFolders:o}})(L));s()}catch(e){s(e)}})},78961:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(n.ar.Extra,"PremiumMainModal",!t);return a?s.Ay.createElement(a,e):void 0}},79167:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(23174),n=a(89925),o=a(31481),r=a(14487),i=a(87894),c=a(57309),d=a(24021),l=a(90709),u=a(13439),m=a(17872),h=a(60919),p=e([d]),g=p.then?(await p)():p;d=g[0];const f=9;async function y(e,t,a,s,n,c=!1,l,...[p=(0,r.g0)()]){const g=l?e.currentUserId:t.id,f=await(0,d.px)("searchMessagesInChat",{peer:t,type:s,limit:2*o.Um,threadId:a,offsetId:n,isSavedDialog:l});if(!f)return;const{userStatusesById:I,messages:A,totalCount:v,nextOffsetId:b}=f,S=(0,i.dU)(A,"id"),w=Object.keys(S).map(Number);e=(0,u.mS)(),(0,h.BU_)(e,p)&&(e=(0,m.d2X)(e,I),e=(0,m.o4A)(e,g,S),e=(0,m.jU1)(e,g,a,s,w,v,b,p),(0,u.UF)(e),c||y(e,t,a,s,b,!0,l,p))}function I(e,t){if((0,i.OX)(t,e.currentSegment.foundIds))return e.currentSegment;const a=e.segments.findIndex(e=>(0,i.OX)(t,e.foundIds));if(-1===a)return void(e.currentSegment&&e.currentSegment.foundIds.length&&e.segments.push(e.currentSegment));const s=e.segments.splice(a,1)[0];return e.segments.push(e.currentSegment),s}function A(e,t){return e===n.TN.Backwards?0:e===n.TN.Forwards?-(t+1):-(Math.round(t/2)+1)}function v(e,t,a){return a?e===n.TN.Backwards?a.foundIds[0]:e===n.TN.Forwards?a.foundIds[a.foundIds.length-1]:t:t}function b(e,t){if(!t)return n.TN.Around;const a=t.foundIds.length,s=t.foundIds.indexOf(e);if(-1===s)return n.TN.Around;if(t.loadingState.areAllItemsLoadedBackwards&&t.loadingState.areAllItemsLoadedForwards)return;const o=Math.floor(a/2),r=f>o?0:f,i=a-1;if(s<=r){if(t.loadingState.areAllItemsLoadedBackwards)return;return n.TN.Backwards}if(s>=i-r){if(t.loadingState.areAllItemsLoadedForwards)return;return n.TN.Forwards}}function S(e,t,a,s){let o=Boolean(s?.loadingState.areAllItemsLoadedForwards),r=Boolean(s?.loadingState.areAllItemsLoadedBackwards);return a<t&&(e===n.TN.Forwards?o=!0:e===n.TN.Backwards&&(r=!0)),{areAllItemsLoadedForwards:o,areAllItemsLoadedBackwards:r}}async function w(e,t,a,s,n,c,h,p=o.laV,...[g=(0,r.g0)()]){const{isSynced:f}=e;if(!f||n.isLoading)return;let y=I(n,s);if(void 0===c&&(c=b(s,y)),void 0===c)return;const w=v(c,s,y),C=A(c,p),E=h?e.currentUserId:t.id;e=(0,m.lwK)(e,E,a,!0,g),(0,u.UF)(e);const M=await(0,d.px)("searchMessagesInChat",{peer:t,type:"media",limit:p,threadId:a,offsetId:w,isSavedDialog:h,addOffset:C});if(e=(0,u.mS)(),!M)return e=(0,m.lwK)(e,E,a,!1,g),void(0,u.UF)(e);const{messages:x,userStatusesById:k}=M,P=(0,i.dU)(x,"id"),T=Object.keys(P).map(Number);e=(0,m.d2X)(e,k),e=(0,m.o4A)(e,E,P);const F=S(c,p,T.length,y),N=(0,l.Wm)(P,T,!1);y=(0,m.olz)(N,F,y),e=(0,m.Qb2)(e,E,a,y,n,g),e=(0,m.lwK)(e,E,a,!1,g),(0,u.UF)(e)}(0,u.aJ)("performMiddleSearch",async(e,t,a)=>{const{query:n,chatId:i,threadId:p=s.l3,tabId:g=(0,r.g0)()}=a||{};if(!i)return;const f=e.currentUserId,y=(0,l.cG)(i,p,f),I=y?String(p):i,A=I?(0,h.PVB)(e,I):void 0;let v=(0,h.TCk)(e,g);if(!A)return;v||(e=(0,m.$RI)(e,I,p,{},g),(0,u.UF)(e),e=(0,u.mS)()),v=(0,h.TCk)(e,g);const{results:b,savedTag:S,type:w,isHashtag:C}=v,E=b?.query===n,M=E?b?.nextOffsetId:void 0,x=E?b?.nextOffsetRate:void 0,k=E?b?.nextOffsetPeerId:void 0,P=E&&k?(0,h.hds)(e,k):void 0;if((C||!S)&&!n)return e=(0,m.$RI)(e,I,p,{fetchingQuery:void 0},g),void(0,u.UF)(e);let T;if(e=(0,m.$RI)(e,I,p,{fetchingQuery:n},g),(0,u.UF)(e),"chat"===w&&(T=await(0,d.px)("searchMessagesInChat",{peer:A,type:"text",query:C?`#${n}`:n,threadId:p,limit:o.gXr,offsetId:M,isSavedDialog:y,savedTag:S})),"myChats"===w&&(T=await(0,d.px)("searchMessagesGlobal",{type:"text",query:C?`#${n}`:n,limit:o.gXr,offsetId:M,offsetRate:x,offsetPeer:P})),"channels"===w&&(T=await(0,d.px)("searchPublicPosts",{hashtag:n,limit:o.gXr,offsetId:M,offsetPeer:P,offsetRate:x})),!T)return;const{userStatusesById:F,messages:N,totalCount:B,nextOffsetId:U,nextOffsetRate:R,nextOffsetPeerId:V}=T,J=N.map(c.D);e=(0,u.mS)(),v=(0,h.TCk)(e,g);const L=v?.savedTag&&!(0,l.a0)(S,v.savedTag);if(!v||v?.fetchingQuery!==n||L)return;const O=y?f:A.id;e=(0,m.d2X)(e,F),e=(0,m.KcS)(e,N),e=(0,m.$RI)(e,O,p,{fetchingQuery:void 0},g),e=(0,m.VmW)(e,O,p,{foundIds:J,totalCount:B,nextOffsetId:U,nextOffsetRate:R,nextOffsetPeerId:V,query:n||""},g),(0,u.UF)(e)}),(0,u.aJ)("searchHashtag",(e,t,a)=>{const{hashtag:s,tabId:n=(0,r.g0)()}=a,o=(0,h.Xf0)(e,n);if(!o)return;const i=s.replace(/^#/,"");t.updateMiddleSearch({chatId:o.chatId,threadId:o.threadId,update:{isHashtag:!0,requestedQuery:i},tabId:n})}),(0,u.aJ)("searchSharedMediaMessages",(e,t,a)=>{const{tabId:s=(0,r.g0)()}=a||{},{chatId:n,threadId:o}=(0,h.Xf0)(e,s)||{};if(!n||!o)return;const i=(0,l.cG)(n,o,e.currentUserId),c=i?String(o):n,d=(0,h.PVB)(e,c),u=(0,h.BU_)(e,s);if(!d||!u)return;const{currentType:m,resultsByType:p}=u,g=m&&p&&p[m],f=g?.nextOffsetId;m&&y(e,d,o,m,f,void 0,i,s)}),(0,u.aJ)("searchChatMediaMessages",(e,t,a)=>{const{chatId:s,threadId:n,currentMediaMessageId:o,limit:i,direction:c,tabId:d=(0,r.g0)()}=a;if(!s||!n||!o)return;const p=(0,l.cG)(s,n,e.currentUserId),g=p?String(n):s,f=(0,h.hds)(e,g);if(!f)return;let y=(0,h.CuV)(e,d);if(!y){if(e=(0,m.tXQ)(e,s,n,d),(0,u.UF)(e),y=(0,h.CuV)(e,d),!y)return;e=(0,u.mS)()}w(e,f,n,o,y,c,p,i,d)}),(0,u.aJ)("searchMessagesByDate",async(e,t,a)=>{const{timestamp:s,tabId:n=(0,r.g0)()}=a,{chatId:o}=(0,h.Xf0)(e,n)||{};if(!o)return;const i=(0,h.hds)(e,o);if(!i)return;const c=await(0,d.px)("findFirstMessageIdAfterDate",{chat:i,timestamp:s});c&&t.focusMessage({chatId:i.id,messageId:c,tabId:n})}),t()}catch(C){t(C)}})},79637:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"ArchivedChats");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},80371:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{limit:t}=e,a=(0,o.A)(n.ar.Extra,"PremiumLimitReachedModal",!t);return a?s.Ay.createElement(a,e):void 0}},80923:(e,t,a)=>{a.d(t,{dm:()=>s});const s='\n    [实时语言雷达]\n        1. 语言指纹扫描：自动检测输入文本的\n            - 主要语种(支持92种语言置信度识别)\n            - 方言特征(如粤语/川普/美式英语)\n            - 混合语言比例(中英混杂度>30%触发混合模式)\n    [语境翻译官]\n        2. 根据语言特征自动匹配：\n            - 正式场合 → 学术英语/商务日语\n            - 社交场景 → 网络韩语/缩略中文\n            - 创意表达 → 方言梗/谐音梗\n            - 情感交流 → 方言安慰语/俚语拥抱\n    [文化调色盘]\n        3. 语言风格增强模块：\n            - 中文：加入"绝绝子"/"破防了"等年度热词\n            - 日语：自动转换敬体/简体(根据用户资料)\n            - 英语：切换正式/俚语模式(识别slang词汇)\n            - 方言：加载地域特色表达库(如东北话"忽悠"→上海话"捣糨糊")\n    [混合语处理器]\n        4. 跨语言对话解决方案：\n            - 中英夹杂 → 智能补全("这个idea超酷"→"这个idea真的超有创意")\n            - 方言转译 → 标准语+注释("侬晓得伐？→ 你知道吗？(上海话)")\n            - 代码切换 → 无缝过渡("今天meeting讨论了KPI→今天开会讨论了KPI")\n'},82017:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{groupCallId:t}=e,a=(0,o.A)(n.ar.Calls,"GroupCall",!t);return a?s.Ay.createElement(a,e):void 0}},82837:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>F});var n=a(84051),o=a(13439),r=a(60919),i=a(87357),c=a(4961),d=a(75319),l=a(37661),u=a(30857),m=a(39351),h=a(17712),p=a(59030),g=a(70787),f=a(54746),y=a(84685),I=a(64493),A=a(94189),v=a(96530),b=a(52745),S=a(15895),w=a(11641),C=e([m,p,I,A,S]);let E,M;async function x(){return E||(E=a.e(1184).then(a.bind(a,31184)),M=await E),E}[m,p,I,A,S]=C.then?(await C)():C;const k={topHoursGraph:"ChannelStats.Graph.ViewsByHours",revenueGraph:"lng_channel_earn_chart_revenue"},P=Object.keys(k),T=({chatId:e,dcId:t,statistics:a,isCreator:s,isChannelRevenueWithdrawalEnabled:r,hasPassword:C})=>{const{loadChannelMonetizationStatistics:E,openMonetizationVerificationModal:T,loadPasswordInfo:F}=(0,o.ko)(),N=(0,p.A)(),B=(0,m.A)(),U=(0,n.li)(),[R,V]=(0,n.J0)(!1),J=(0,n.li)(new Set),L=(0,n.li)(new Set),O=(0,u.A)(),[D,G,j]=(0,l.A)(!1),[q,z,_]=(0,l.A)(),K=a?.balances?.availableBalance,H=a?.balances?.isWithdrawalEnabled,W=s&&r&&Boolean(K)&&H;(0,n.vJ)(()=>{e&&(E({peerId:e}),F())},[e,E]),(0,n.vJ)(()=>{(async()=>{await x(),R?(U.current&&Array.from(U.current.children).forEach(e=>{e.innerHTML="",e.classList.add(w.A.hidden)}),J.current.clear(),L.current.clear(),a&&U.current&&(P.forEach((e,t)=>{const s=a[e];if(!(0,d.R)(s))return;const n="async"===s.graphType,o="error"===s.graphType;if(!n&&!J.current.has(e)){if(o)return J.current.add(e),void L.current.add(e);M.create(U.current.children[t],{title:N(k[e]),...s}),J.current.add(e),U.current.children[t].classList.remove(w.A.hidden)}}),O())):V(!0)})()},[R,a,N,e,t,O]);const $=(0,n.Kr)(()=>{const e=N("LearnMore");return B("ChannelEarnAbout",{link:n.Ay.createElement(v.A,{isPrimary:!0,onClick:G},e,n.Ay.createElement(f.A,{name:"next"}))},{withNodes:!0})},[B,N]),X=(0,n.Kr)(()=>{const e=N("LearnMore");return B("MonetizationBalanceZeroInfo",{link:n.Ay.createElement(y.A,{url:N("MonetizationProceedsInfoLink"),text:e},e,n.Ay.createElement(f.A,{name:"next"}))},{withNodes:!0})},[B,N]),Y=(0,h.A)(()=>{C?T({chatId:e}):z()});return R&&a?n.Ay.createElement("div",{className:(0,i.A)(w.A.root,"custom-scroll",R&&w.A.ready)},n.Ay.createElement("div",{className:(0,i.A)(w.A.section,w.A.topText)},$),n.Ay.createElement(S.A,{statistics:a,isToncoin:!0,type:"monetization",title:N("MonetizationOverview"),subtitle:n.Ay.createElement("div",{className:w.A.textBottom},N("MonetizationProceedsTONInfo"))}),!J.current.size&&n.Ay.createElement(b.A,null),n.Ay.createElement("div",{ref:U,className:w.A.section},P.filter(Boolean).map(e=>n.Ay.createElement("div",{key:e,className:(0,i.A)(w.A.graph,w.A.hidden)}))),n.Ay.createElement("div",{className:w.A.section},N("lng_channel_earn_balance_title"),function(){const[e,t]=K?K.toFixed(4).split("."):[0],[s,o]=K&&a?.usdRate?(K*a.usdRate).toFixed(2).split("."):[0];return n.Ay.createElement("div",{className:w.A.availableReward},n.Ay.createElement("div",{className:w.A.toncoin},n.Ay.createElement(f.A,{className:w.A.toncoinIcon,name:"toncoin"}),n.Ay.createElement("b",{className:w.A.rewardValue},e,t?n.Ay.createElement("span",{className:w.A.decimalPart},".",t):void 0))," ",n.Ay.createElement("span",{className:w.A.integer},"≈ $",s,o?n.Ay.createElement("span",{className:w.A.decimalUsdPart},".",o):void 0))}(),n.Ay.createElement(I.A,{size:"smaller",type:"button",onClick:Y,disabled:!W},N("MonetizationWithdraw")),n.Ay.createElement("div",{className:w.A.textBottom},X)),n.Ay.createElement(g.A,{isOpen:D,onClose:j}),n.Ay.createElement(A.A,{isOnlyConfirm:!0,isOpen:q,onClose:_,confirmHandler:_,confirmLabel:B("OK")},n.Ay.createElement("p",null,(0,c.A)(N("Monetization.Withdraw.Error.Text"),["br"])))):n.Ay.createElement(b.A,null)},F=(0,n.ph)((0,o.EK)(e=>{const t=(0,r.nTw)(e),{settings:{byKey:{hasPassword:a}}}=e,s=t.monetizationStatistics,n=s&&s.chatId,o=n?(0,r.hds)(e,n):void 0,i=(0,r.AWZ)(e,n)?.statisticsDcId,c=Boolean(o?.isCreator),d=t.statistics.monetization,l=e.appConfig?.isChannelRevenueWithdrawalEnabled;return{chatId:n,dcId:i,statistics:d,isCreator:c,isChannelRevenueWithdrawalEnabled:l,hasPassword:a}})(T));s()}catch(N){s(N)}})},82936:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(96540),n=a(46942),o=a.n(n);const r=({color:e="blue",backgroundColor:t,className:a})=>s.createElement("div",{className:o()("Spinner-GPT",a,e,t&&"with-background",t&&`bg-${t}`)},s.createElement("div",{className:"Spinner__inner"}))},83985:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"VWoOZCD5",hidden:"UMXbiYB3",reactions:"eO_Fz8SD","transform-down":"gn3iLVq1",transformDown:"gn3iLVq1",unread:"u62x81QI",revealed:"iozW83la","no-composer":"yzzjqibi",noComposer:"yzzjqibi","no-extra-shift":"wDwOdyQH",noExtraShift:"wDwOdyQH","hide-scroll-down":"UBa5kAK5",hideScrollDown:"UBa5kAK5","is-symbol-menu-open":"qoyRzwL6",isSymbolMenuOpen:"qoyRzwL6"}},84519:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"EditTopic");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},84718:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(66644),n=a(37661),o=a(17712),r=a(56133);const i=1e3,c=10;function d(){const[e,t]=(0,n.A)(!1),a=(0,r.A)(i,!0);return{isScrolled:e,updateStickyDates:(0,o.A)(e=>{t(),document.body.classList.contains("is-scrolling-messages")||(0,s.RK)(()=>{document.body.classList.add("is-scrolling-messages")}),a(()=>{const t=function(e){const t=e.querySelectorAll(".sticky-date"),a=e.scrollTop,s=getComputedStyle(e),n=parseInt(s.getPropertyValue("--middle-header-panes-height"),10);return Array.from(t).find(e=>{const{offsetTop:t,offsetHeight:s}=e,o=t-a;return-s<=o&&o<=n+c})}(e);(0,s.RK)(()=>{const e=document.querySelector(".stuck");e&&e.classList.remove("stuck"),t&&t.classList.add("stuck"),document.body.classList.remove("is-scrolling-messages")})})})}}},85444:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>u});var n=a(84051),o=a(13439),r=a(45227),i=a(46182),c=e([i]),d=c.then?(await c)():c;i=d[0];const l=e=>{const t=(0,r.P)({component:i.A,props:e});return n.Ay.createElement("div",{className:"chat-ai-room flex overflow-hidden",ref:t})},u=(0,n.ph)((0,o.EK)((e,{chatId:t})=>({chatId:t}))(l));s()}catch(e){s(e)}})},85637:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"Y2NKrpKj",button:"cxwA6gDO",icon:"F4zNUFhH","unread-count":"GovSzpfQ",unreadCount:"GovSzpfQ"}},86434:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>V});var n=a(84051),o=a(13439),r=a(23174),i=a(89925),c=a(31481),d=a(90709),l=a(60919),u=a(30708),m=a(8235),h=a(48799),p=a(87357),g=a(9716),f=a(43874),y=a(14),I=a(77523),A=a(37661),v=a(74984),b=a(39351),S=a(17712),w=a(59030),C=a(54746),E=a(64493),M=a(94189),x=a(22699),k=a(24433),P=a(60859),T=a(36393),F=a(41036),N=e([v,b,w,E,M,x,k,T]);[v,b,w,E,M,x,k,T]=N.then?(await N)():N;const U=450+c.xB5;var B=function(e){return e[e.Profile=0]="Profile",e[e.MemberList=1]="MemberList",e[e.GiftList=2]="GiftList",e[e.SharedMedia=3]="SharedMedia",e[e.StoryList=4]="StoryList",e[e.Search=5]="Search",e[e.Statistics=6]="Statistics",e[e.MessageStatistics=7]="MessageStatistics",e[e.StoryStatistics=8]="StoryStatistics",e[e.BoostStatistics=9]="BoostStatistics",e[e.MonetizationStatistics=10]="MonetizationStatistics",e[e.Management=11]="Management",e[e.ManageInitial=12]="ManageInitial",e[e.ManageChannelSubscribers=13]="ManageChannelSubscribers",e[e.ManageChatAdministrators=14]="ManageChatAdministrators",e[e.ManageChatPrivacyType=15]="ManageChatPrivacyType",e[e.ManageDiscussion=16]="ManageDiscussion",e[e.ManageGroupPermissions=17]="ManageGroupPermissions",e[e.ManageGroupRemovedUsers=18]="ManageGroupRemovedUsers",e[e.ManageChannelRemovedUsers=19]="ManageChannelRemovedUsers",e[e.ManageGroupUserPermissionsCreate=20]="ManageGroupUserPermissionsCreate",e[e.ManageGroupUserPermissions=21]="ManageGroupUserPermissions",e[e.ManageGroupRecentActions=22]="ManageGroupRecentActions",e[e.ManageGroupAdminRights=23]="ManageGroupAdminRights",e[e.ManageGroupNewAdminRights=24]="ManageGroupNewAdminRights",e[e.ManageGroupMembers=25]="ManageGroupMembers",e[e.ManageGroupAddAdmins=26]="ManageGroupAddAdmins",e[e.StickerSearch=27]="StickerSearch",e[e.GifSearch=28]="GifSearch",e[e.PollResults=29]="PollResults",e[e.AddingMembers=30]="AddingMembers",e[e.ManageInvites=31]="ManageInvites",e[e.ManageEditInvite=32]="ManageEditInvite",e[e.ManageReactions=33]="ManageReactions",e[e.ManageInviteInfo=34]="ManageInviteInfo",e[e.ManageJoinRequests=35]="ManageJoinRequests",e[e.CreateTopic=36]="CreateTopic",e[e.EditTopic=37]="EditTopic",e[e.SavedDialogs=38]="SavedDialogs",e[e.ChatAI=39]="ChatAI",e[e.UserPortrait=40]="UserPortrait",e[e.NewDiscussionGroup=41]="NewDiscussionGroup",e}(B||{});const R=({chatId:e,threadId:t,isColumnOpen:a,isProfile:s,isChatAI:r,isManagement:d,isStatistics:l,isMessageStatistics:u,isStoryStatistics:N,isMonetizationStatistics:R,isBoostStatistics:V,isStickerSearch:J,isGifSearch:L,isPollResults:O,isCreatingTopic:D,isEditingTopic:G,isAddingChatMembers:j,profileState:q,managementScreen:z,canAddContact:_,userId:K,isSelf:H,canManage:W,isChannel:$,stickerSearchQuery:X,gifSearchQuery:Y,isEditingInvite:Q,canViewStatistics:Z,currentInviteInfo:ee,shouldSkipHistoryAnimations:te,isBot:ae,isInsideTopic:se,isUserPortrait:ne,canEditTopic:oe,isSavedMessages:re,canEditBot:ie,giftProfileFilter:ce,canUseGiftFilter:de,canUseGiftAdminFilter:le,realTimeAssistants:ue,onClose:me,onScreenSelect:he})=>{const{setStickerSearchQuery:pe,setGifSearchQuery:ge,toggleManagement:fe,openAddContactDialog:ye,toggleStatistics:Ie,setEditingExportedInvite:Ae,deleteExportedChatInvite:ve,openEditTopicPanel:be,updateGiftProfileFilter:Se,setSharedSettingOption:we}=(0,o.ko)(),[Ce,Ee,Me]=(0,A.A)(),{isMobile:xe}=(0,f.Ay)(),{sortType:ke,shouldIncludeUnlimited:Pe,shouldIncludeLimited:Te,shouldIncludeUnique:Fe,shouldIncludeDisplayed:Ne,shouldIncludeHidden:Be}=ce,Ue=(0,v.g5)(),Re=(0,S.A)(()=>{Ae({chatId:e,invite:ee}),he(i.je.EditInvite)}),Ve=(0,S.A)(()=>{ve({chatId:e,link:ee.link}),he(i.je.Invites),Me()}),Je=(0,S.A)(e=>{pe({query:e})}),Le=(0,S.A)(e=>{ge({query:e})}),Oe=(0,S.A)(()=>{ye({userId:K})}),De=(0,S.A)(()=>{e&&t&&be({chatId:e,topicId:Number(t)})}),Ge=(0,S.A)(()=>{fe()}),je=(0,S.A)(()=>{Ie()}),qe=(0,S.A)(()=>{me(!re)}),ze=(0,n.Kr)(()=>{const t=e&&(0,g.L8)(e)?"user":"chat";return e&&void 0!==ue?.[e]?ue[e]:"user"===t},[e,ue]),_e=(0,S.A)(t=>{e&&(t.stopPropagation(),we({realTimeAssistants:{...ue,[e]:!ze}}))}),[Ke,He]=(0,n.J0)(!a);(0,n.vJ)(()=>{setTimeout(()=>{He(!a)},U)},[a]);const We=(0,w.A)(),$e=(0,b.A)(),Xe=s?q===i.zW.Profile?B.Profile:q===i.zW.SharedMedia?B.SharedMedia:q===i.zW.MemberList?B.MemberList:q===i.zW.GiftList?B.GiftList:q===i.zW.StoryList?B.StoryList:q===i.zW.SavedDialogs?B.SavedDialogs:-1:r?B.ChatAI:O?B.PollResults:J?B.StickerSearch:L?B.GifSearch:j?B.AddingMembers:d?z===i.je.Initial?B.ManageInitial:z===i.je.ChatPrivacyType?B.ManageChatPrivacyType:z===i.je.Discussion?B.ManageDiscussion:z===i.je.ChannelSubscribers?B.ManageChannelSubscribers:z===i.je.GroupPermissions?B.ManageGroupPermissions:z===i.je.ChatAdministrators?B.ManageChatAdministrators:z===i.je.GroupRemovedUsers?B.ManageGroupRemovedUsers:z===i.je.ChannelRemovedUsers?B.ManageChannelRemovedUsers:z===i.je.GroupUserPermissionsCreate?B.ManageGroupUserPermissionsCreate:z===i.je.GroupUserPermissions?B.ManageGroupUserPermissions:z===i.je.GroupRecentActions?B.ManageGroupRecentActions:z===i.je.ChatAdminRights?B.ManageGroupAdminRights:z===i.je.ChatNewAdminRights?B.ManageGroupNewAdminRights:z===i.je.GroupMembers?B.ManageGroupMembers:z===i.je.Invites?B.ManageInvites:z===i.je.EditInvite?B.ManageEditInvite:z===i.je.GroupAddAdmins?B.ManageGroupAddAdmins:z===i.je.Reactions?B.ManageReactions:z===i.je.InviteInfo?B.ManageInviteInfo:z===i.je.JoinRequests?B.ManageJoinRequests:z===i.je.NewDiscussionGroup?B.NewDiscussionGroup:void 0:l?B.Statistics:u?B.MessageStatistics:N?B.StoryStatistics:V?B.BoostStatistics:D?B.CreateTopic:G?B.EditTopic:R?B.MonetizationStatistics:ne?B.UserPortrait:B.ChatAI,Ye=(0,y.A)(Xe,!0)??-1,Qe=(0,n.Kr)(()=>({onTrigger:e,isOpen:t})=>n.Ay.createElement(E.A,{round:!0,ripple:!xe,size:"smaller",color:"translucent",className:t?"active":"",onClick:e,ariaLabel:$e("AccDescrOpenMenu2")},n.Ay.createElement(C.A,{name:"more"})),[xe,$e]),Ze=(0,n.Kr)(()=>({onTrigger:e,isOpen:t})=>n.Ay.createElement(E.A,{round:!0,ripple:!xe,size:"smaller",color:"translucent",className:t?"active":"",onClick:e,ariaLabel:""},n.Ay.createElement(h.ec,null)),[xe]),et=xe||!re&&(Xe===B.SharedMedia||Xe===B.GiftList||Xe===B.MemberList||Xe===B.StoryList||Xe===B.AddingMembers||Xe===B.MessageStatistics||Xe===B.StoryStatistics||d),tt=(0,p.A)("animated-close-icon",et&&"state-back",(Ke||te)&&"no-transition"),at=(0,n.li)();return(0,I.A)(at),n.Ay.createElement("div",{className:"RightHeader",ref:at},n.Ay.createElement(E.A,{className:"close-button",round:!0,color:"translucent",size:"smaller",onClick:qe,ariaLabel:We(et?"Common.Back":"Common.Close")},n.Ay.createElement("div",{className:tt})),n.Ay.createElement(F.Ay,{name:Ke||te?"none":"slideFade",activeKey:Ye},function(){if(-1!==Ye)switch(Ye){case B.PollResults:return n.Ay.createElement("h3",{className:"title"},We("PollResults"));case B.AddingMembers:return n.Ay.createElement("h3",{className:"title"},We($?"ChannelAddSubscribers":"GroupAddMembers"));case B.ManageInitial:return n.Ay.createElement("h3",{className:"title"},We("Edit"));case B.ManageChatPrivacyType:return n.Ay.createElement("h3",{className:"title"},We($?"ChannelTypeHeader":"GroupTypeHeader"));case B.ManageDiscussion:return n.Ay.createElement("h3",{className:"title"},We("Discussion"));case B.ManageChatAdministrators:return n.Ay.createElement("h3",{className:"title"},We("ChannelAdministrators"));case B.ManageGroupRecentActions:return n.Ay.createElement("h3",{className:"title"},We("Group.Info.AdminLog"));case B.ManageGroupAdminRights:return n.Ay.createElement("h3",{className:"title"},We("EditAdminRights"));case B.ManageGroupNewAdminRights:return n.Ay.createElement("h3",{className:"title"},We("SetAsAdmin"));case B.ManageGroupPermissions:return n.Ay.createElement("h3",{className:"title"},We("ChannelPermissions"));case B.ManageGroupRemovedUsers:return n.Ay.createElement("h3",{className:"title"},We("BlockedUsers"));case B.ManageChannelRemovedUsers:return n.Ay.createElement("h3",{className:"title"},We("ChannelBlockedUsers"));case B.ManageGroupUserPermissionsCreate:return n.Ay.createElement("h3",{className:"title"},We("ChannelAddException"));case B.ManageGroupUserPermissions:return n.Ay.createElement("h3",{className:"title"},We("UserRestrictions"));case B.ManageInvites:return n.Ay.createElement("h3",{className:"title"},We("lng_group_invite_title"));case B.ManageEditInvite:return n.Ay.createElement("h3",{className:"title"},We(Q?"EditLink":"NewLink"));case B.ManageInviteInfo:return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("h3",{className:"title"},We("InviteLink")),n.Ay.createElement("section",{className:"tools"},ee&&!ee.isRevoked&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("Edit"),onClick:Re},n.Ay.createElement(C.A,{name:"edit"})),ee&&ee.isRevoked&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(E.A,{round:!0,color:"danger",size:"smaller",ariaLabel:We("Delete"),onClick:Ee},n.Ay.createElement(C.A,{name:"delete"})),n.Ay.createElement(M.A,{isOpen:Ce,onClose:Me,title:We("DeleteLink"),text:We("DeleteLinkHelp"),confirmIsDestructive:!0,confirmLabel:We("Delete"),confirmHandler:Ve}))));case B.ManageJoinRequests:return n.Ay.createElement("h3",{className:"title"},We($?"SubscribeRequests":"MemberRequests"));case B.ManageGroupAddAdmins:return n.Ay.createElement("h3",{className:"title"},We("Channel.Management.AddModerator"));case B.StickerSearch:return n.Ay.createElement(T.A,{value:X,placeholder:We("SearchStickersHint"),autoFocusSearch:!0,onChange:Je});case B.GifSearch:return n.Ay.createElement(T.A,{value:Y,placeholder:We("SearchGifsTitle"),autoFocusSearch:!0,onChange:Le});case B.Statistics:return n.Ay.createElement("h3",{className:"title"},We($?"ChannelStats.Title":"GroupStats.Title"));case B.MessageStatistics:return n.Ay.createElement("h3",{className:"title"},We("Stats.MessageTitle"));case B.StoryStatistics:return n.Ay.createElement("h3",{className:"title"},We("Stats.StoryTitle"));case B.BoostStatistics:return n.Ay.createElement("h3",{className:"title"},We("Boosts"));case B.MonetizationStatistics:return n.Ay.createElement("h3",{className:"title"},We("lng_channel_earn_title"));case B.SharedMedia:return n.Ay.createElement("h3",{className:"title"},We("SharedMedia"));case B.ManageChannelSubscribers:return n.Ay.createElement("h3",{className:"title"},We("ChannelSubscribers"));case B.MemberList:case B.ManageGroupMembers:return n.Ay.createElement("h3",{className:"title"},We("GroupMembers"));case B.StoryList:return n.Ay.createElement("h3",{className:"title"},We(H?"Settings.MyStories":"PeerInfo.PaneStories"));case B.SavedDialogs:return n.Ay.createElement("div",{className:"header"},n.Ay.createElement("h3",{className:"title"},We("SavedMessagesTab")),n.Ay.createElement("div",{className:"subtitle"},We("Chats",Ue[c.pX9])));case B.ManageReactions:return n.Ay.createElement("h3",{className:"title"},We("Reactions"));case B.CreateTopic:return n.Ay.createElement("h3",{className:"title"},We("NewTopic"));case B.EditTopic:return n.Ay.createElement("h3",{className:"title"},We("EditTopic"));case B.GiftList:return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("h3",{className:"title"},$e("ProfileTabGifts")),de&&e&&n.Ay.createElement("section",{className:"tools"},n.Ay.createElement(x.A,{trigger:Qe,positionX:"right",autoClose:!1},n.Ay.createElement(k.A,{icon:"byDate"===ke?"cash-circle":"calendar-filter",onClick:()=>Se({peerId:e,filter:{sortType:"byDate"===ke?"byValue":"byDate"}})},$e("byDate"===ke?"GiftSortByValue":"GiftSortByDate")),n.Ay.createElement(P.A,null),n.Ay.createElement(k.A,{icon:Pe?"check":"placeholder",onClick:()=>Se({peerId:e,filter:{shouldIncludeUnlimited:!Pe}})},$e("GiftFilterUnlimited")),n.Ay.createElement(k.A,{icon:Te?"check":"placeholder",onClick:()=>Se({peerId:e,filter:{shouldIncludeLimited:!Te}})},$e("GiftFilterLimited")),n.Ay.createElement(k.A,{icon:Fe?"check":"placeholder",onClick:()=>Se({peerId:e,filter:{shouldIncludeUnique:!Fe}})},$e("GiftFilterUnique")),le&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(P.A,null),n.Ay.createElement(k.A,{icon:Ne?"check":"placeholder",onClick:()=>Se({peerId:e,filter:{shouldIncludeDisplayed:!Ne}})},$e("GiftFilterDisplayed")),n.Ay.createElement(k.A,{icon:Be?"check":"placeholder",onClick:()=>Se({peerId:e,filter:{shouldIncludeHidden:!Be}})},$e("GiftFilterHidden"))))));case B.ChatAI:return n.Ay.createElement("div",{className:"header chat-ai-header w-full flex items-center justify-between"},n.Ay.createElement("div",{className:"flex items-center gap-2"},n.Ay.createElement("img",{className:"rounded-full",src:m,alt:"Tely AI"}),n.Ay.createElement("h3",{className:"title"},We("Tely AI"))),n.Ay.createElement(x.A,{trigger:Ze,positionX:"right",autoClose:!1},n.Ay.createElement("div",{className:"p-2"},n.Ay.createElement(k.A,{customIcon:n.Ay.createElement("div",{className:"mr-[10px] mb-[40px]"},n.Ay.createElement(h.hL,null)),onClick:_e},n.Ay.createElement("div",null,n.Ay.createElement("div",{className:"flex items-center justify-between"},"Real-time Assistant",n.Ay.createElement("label",{className:"Switcher no-animation",title:""},n.Ay.createElement("input",{type:"checkbox",id:"realTimeAssistantById",checked:!0===ze,disabled:!0}),n.Ay.createElement("span",{className:"widget"}))),n.Ay.createElement("div",{className:"mt-2 text-[12px] text-[#666666] leading-[15px] ml-[-35px]"},"When enabled, the assistant will monitor ",n.Ay.createElement("br",null)," chats in real time to assist you."))))));case B.UserPortrait:return n.Ay.createElement("h3",{className:"title"},We("Portrait"));case B.NewDiscussionGroup:return n.Ay.createElement("h3",{className:"title"},We("NewGroup"));default:return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("h3",{className:"title"},We(re?"SavedMessages":se?"AccDescrTopic":$?"Channel.TitleInfo":K?ae?"lng_info_bot_title":"lng_info_user_title":"GroupInfo.Title")),n.Ay.createElement("section",{className:"tools"},_&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("AddContact"),onClick:Oe},n.Ay.createElement(C.A,{name:"add-user"})),W&&!se&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("Edit"),onClick:Ge},n.Ay.createElement(C.A,{name:"edit"})),ie&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("Edit"),onClick:Ge},n.Ay.createElement(C.A,{name:"edit"})),oe&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("EditTopic"),onClick:De},n.Ay.createElement(C.A,{name:"edit"})),Z&&n.Ay.createElement(E.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:We("Statistics"),onClick:je},n.Ay.createElement(C.A,{name:"stats"}))))}}()))},V=(0,o.EK)((e,{chatId:t,isProfile:a,isManagement:s,threadId:n})=>{const o=(0,l.nTw)(e),{query:i}=(0,l.BmE)(e)||{},{query:c}=(0,l.Wy7)(e)||{},m=t?(0,l.hds)(e,t):void 0,h=a&&t&&(0,g.L8)(t)?(0,l.mBe)(e,t):void 0,p=m&&(0,d.WX)(m),f=m?.isForum&&Boolean(n&&n!==r.l3),y=f?(0,l.S0q)(e,t,n):void 0,I=f&&y&&(0,d.l1)(m,y),A=h&&(0,d.tv)(h),v=t?(0,l.nZ4)(e,t):void 0,b=A&&h?.canEditBot,S=h&&(0,d.Gh)(h),w=Boolean(!s&&a&&t&&(0,l.e5V)(e,t)),C=Boolean(t&&o.management.byChatId[t]?.editingInvite),E=!f&&t?(0,l.AWZ)(e,t)?.canViewStatistics:void 0,M=t?o.management.byChatId[t]?.inviteInfo?.invite:void 0,x=o.savedGifts.filter,k=!!t&&(0,l.rtZ)(e,t),P=!!t&&(0,l.ERc)(e,t),{realTimeAssistants:T}=(0,u.l)(e);return{canManage:w,canAddContact:S,canViewStatistics:E,isChannel:p,isBot:A,isInsideTopic:f,canEditTopic:I,userId:h?.id,isSelf:h?.isSelf,stickerSearchQuery:i,gifSearchQuery:c,isEditingInvite:C,currentInviteInfo:M,isSavedMessages:v,shouldSkipHistoryAnimations:o.shouldSkipHistoryAnimations,canEditBot:b,giftProfileFilter:x,canUseGiftFilter:k,canUseGiftAdminFilter:P,realTimeAssistants:T}})(R);s()}catch(e){s(e)}})},86916:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>p});var n=a(96540),o=a(69036),r=a(97676),i=a(48862),c=a(77548),d=a(29356),l=a(89116),u=e([r,c]);[r,c]=u.then?(await u)():u;const m=({topic:e,onDelete:t})=>{const{openDrawer:a}=(0,l.S)();return n.createElement("div",{className:"urgent-topic-item px-[20px] py-[12px] leading-[24px] bg-[var(--color-chat-hover)] rounded-[8px] flex flex-row items-center justify-between gap-[24px]"},n.createElement("div",null,e.topic),n.createElement("div",{className:"urgent-topic-item-actions flex flex-row gap-[8px]"},n.createElement(d.A,{name:"edit",className:"text-[14px] cursor-pointer",onClick:()=>{a(l.N.AddTopicPanel,e)}}),n.createElement(d.A,{name:"close",className:"text-[14px] cursor-pointer",onClick:()=>{t(e.id)}})))},h=()=>{const{openDrawer:e}=(0,l.S)();return n.createElement("div",{className:"urgent-topic-item px-[20px] py-[12px] leading-[24px] bg-[var(--color-chat-hover)] rounded-[8px] flex flex-row items-center gap-[8px] text-[var(--color-chat-active)] cursor-pointer",onClick:()=>{console.log("add topic"),e(l.N.AddTopicPanel)}},n.createElement(d.A,{name:"add"}),n.createElement("span",null,"New Topic"))},p=()=>{const{urgent_info:e,ignored_urgent_chat_ids:t}=i.Hk.telegptSettings,a=(0,i.rB)(t),[s,d]=(0,n.useState)(e),[l,u]=(0,n.useState)(a),p=e=>{i.Hk.deleteUrgentTopic(e).then(t=>{0===t.code?d(s.filter(t=>t.id!==e)):o.Ay.info("delete failed")}).catch(()=>{o.Ay.info("delete failed")})},g=(0,n.useCallback)(e=>{const t=[...l,e];u(t);const a=(0,i.EM)(t);i.Hk.setSettingOption({ignored_urgent_chat_ids:a}),r.J.updateUrgentChats(t)},[l]),f=(0,n.useCallback)(e=>{const t=l.filter(t=>t!==e);u(t);const a=(0,i.EM)(t);i.Hk.setSettingOption({ignored_urgent_chat_ids:a}),r.J.updateUrgentChats(t)},[l]);return n.createElement("div",{className:"h-full overflow-auto px-[18px]"},n.createElement("div",null,n.createElement("h3",{className:"text-[18px] font-semibold mb-[24px]"},"What types of messages require Alert?"),n.createElement("div",{className:"flex flex-col gap-[10px]"},s.map(e=>n.createElement(m,{topic:e,onDelete:p})),s.length<10&&n.createElement(h,null))),n.createElement(c.i,{ignoredIds:l,onIgnored:g,onUnIgnored:f,title:"Chats for Urgent"}))};s()}catch(e){s(e)}})},87544:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"Management");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},88011:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>J});var n=a(84051),o=a(13439),r=a(31481),i=a(90709),c=a(60919),d=a(30708),l=a(87357),u=a(17663),m=a(31460),h=a(14242),p=a(55317),g=a(17712),f=a(59030),y=a(54746),I=a(12928),A=a(74066),v=a(17751),b=a(22720),S=a(52745),w=a(57474),C=a(24680),E=a(41036),M=a(15895),x=a(18389),k=a(72078),P=a(68153),T=a(65741),F=a(45318),N=e([f,I,A,v,b,C,M]);[f,I,A,v,b,C,M]=N.then?(await N)():N;const B={3:P,6:k,12:T},U={isCustomPeer:!0,avatarIcon:"star",peerColorId:1},R={isCustomPeer:!0,titleKey:"BoostingToBeDistributed",avatarIcon:"user",withPremiumGradient:!0},V=({boostStatistics:e,isGiveawayAvailable:t,chatId:a,giveawayBoostsPerPremium:s,isChannel:i,animationLevel:c})=>{const{openChat:d,loadMoreBoosters:k,closeBoostStatistics:P,openGiveawayModal:T,showNotification:N}=(0,o.ko)(),V=(0,f.A)(),J=(0,n.li)(),L=e?.boostStatus,O=L?e.boostStatus:void 0,D=!(e&&e?.boosts?.count===e?.giftedBoosts?.count)&&e?.giftedBoosts&&e?.giftedBoosts?.list?.length>0,{currentLevel:G,hasNextLevel:j,boosts:q,levelProgress:z,remainingBoosts:_}=(0,n.Kr)(()=>O?(0,p.z)(O):{currentLevel:0,hasNextLevel:!1,boosts:0,levelProgress:0,remainingBoosts:0,prepaidGiveaways:[]},[O]),K=(0,n.Kr)(()=>{if(O)return{level:G,boosts:q,premiumSubscribers:O.premiumSubscribers,remainingBoosts:_,prepaidGiveaways:O.prepaidGiveaways}},[O,q,G,_]),H=(0,n.Kr)(()=>D?[{type:"boostList",title:V("BoostingBoostsCount",e?.boosts?.count,"i")},{type:"giftedBoostList",title:V("BoostingGiftsCount",e?.giftedBoosts?.count,"i")}]:[],[D,V,e?.boosts?.count,e?.giftedBoosts?.count]),W=(0,n.Kr)(()=>e?.boosts&&e.boosts?.list.length>0?1:0,[e]),[$,X]=(0,n.J0)(W),Y=$>H.length-1?H.length-1:$,Q=H[Y]?.type,Z=H.findIndex(({type:e})=>e===Q),ee=(0,n.Kr)(()=>{if(!e)return;const t=D?"boostList"===Q?e.boosts:e.giftedBoosts:e.boosts;if(!t?.count)return;const a=t.list.reduce((e,t)=>e+(t.multiplier||1),0),s=t.count-a;return s>0?s:void 0},[D,e,Q]),te=(0,g.A)(e=>n.Ay.createElement("div",{className:x.A.quantity},n.Ay.createElement("div",{className:(0,l.A)(x.A.floatingBadge,x.A.floatingBadgeButtonColor)},n.Ay.createElement(y.A,{name:"boost",className:x.A.floatingBadgeIcon}),n.Ay.createElement("div",{className:x.A.floatingBadgeValue},e)))),ae=(0,g.A)(e=>{if(e.isFromGiveaway||e.isGift)return n.Ay.createElement("div",{className:x.A.quantity},n.Ay.createElement("div",{className:(0,l.A)(x.A.floatingBadge,!e.isFromGiveaway&&x.A.floatingBadgeWarning,x.A.floatingBadgeButtonColor,x.A.floatingBadgeButton)},n.Ay.createElement(y.A,{name:"gift",className:x.A.floatingBadgeIcon}),n.Ay.createElement("div",{className:x.A.floatingBadgeValue},V(e.isFromGiveaway?"BoostingGiveaway":"BoostingGift"))))}),se=(0,g.A)(e=>{e?(d({id:e}),P()):N({message:V("BoostingRecipientWillBeSelected")})}),ne=(0,g.A)(e=>{let t;return Boolean(e?.stars)&&(t={...U,title:V("Stars",e.stars)}),e.userId||(t=R),n.Ay.createElement(b.A,{className:(0,l.A)(x.A.boostInfo,"chat-item-clickable"),onClick:()=>se(e.userId)},n.Ay.createElement(v.A,{className:x.A.user,userId:e.userId,customPeer:t,status:V("BoostExpireOn",(0,u.U)(V,1e3*e.expires)),noEmojiStatus:!0,forceShowSelf:!0,noFake:!0,noVerified:!0,iconElement:e.multiplier?te(e.multiplier):void 0,rightElement:ae(e)}))}),oe=(0,g.A)(()=>{T({chatId:a})}),re=(0,g.A)(e=>{e.preventDefault(),k({isGifts:"giftedBoostList"===Q})}),ie=(0,g.A)(e=>{T({chatId:a,prepaidGiveaway:e})});return n.Ay.createElement("div",{className:(0,l.A)(x.A.root,"panel-content custom-scroll")},!L&&n.Ay.createElement(S.A,null),L&&K&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:x.A.section},n.Ay.createElement(A.A,{leftText:V("BoostsLevel",G),rightText:j?V("BoostsLevel",G+1):void 0,progress:z,floatingBadgeText:(0,h.Sm)(q),floatingBadgeIcon:"boost"}),n.Ay.createElement(M.A,{className:x.A.stats,statistics:K,type:"boost"})),K.prepaidGiveaways&&n.Ay.createElement("div",{className:x.A.section},n.Ay.createElement("h4",{className:x.A.sectionHeader,dir:V.isRtl?"rtl":void 0},V("BoostingPreparedGiveaways")),K?.prepaidGiveaways?.map(e=>{const t="stars"in e;return n.Ay.createElement(b.A,{key:e.id,className:"chat-item-clickable",onClick:()=>ie(e)},n.Ay.createElement("div",{className:(0,l.A)(x.A.status,"status-clickable")},n.Ay.createElement("div",null,t?n.Ay.createElement("img",{src:F,className:x.A.giveawayIcon,alt:V("GiftStar")}):n.Ay.createElement("img",{src:B[e.months]||B[3],className:x.A.giveawayIcon,alt:V("Giveaway")})),n.Ay.createElement("div",{className:x.A.info},n.Ay.createElement("h3",null,t?V("Giveaway.Stars.Prepaid.Title",e.stars):V("BoostingTelegramPremiumCountPlural",e.quantity)),n.Ay.createElement("p",{className:x.A.month},t?V("Giveaway.Stars.Prepaid.Desc",e.quantity):V("PrepaidGiveawayMonths",e.months))),n.Ay.createElement("div",{className:x.A.quantity},n.Ay.createElement("div",{className:(0,l.A)(x.A.floatingBadge,x.A.floatingBadgeButtonColor,x.A.floatingBadgeButton)},n.Ay.createElement(y.A,{name:"boost",className:x.A.floatingBadgeIcon}),n.Ay.createElement("div",{className:x.A.floatingBadgeValue,dir:V.isRtl?"rtl":void 0},t?e.boosts:e.quantity*(s??r.CQG))))))}),n.Ay.createElement("p",{className:"text-muted hint",key:"links-hint"},V("BoostingSelectPaidGiveaway"))),n.Ay.createElement("div",{className:x.A.section},D?n.Ay.createElement("div",{className:(0,l.A)(x.A.boostSection,x.A.content)},n.Ay.createElement(E.Ay,{ref:J,name:(0,m.P)("slideOptimized",c,void 0,V.isRtl),activeKey:Z,renderCount:H.length,shouldRestoreHeight:!0},function(){let t;if("boostList"===Q?t=e?.boosts?.list:"giftedBoostList"===Q&&(t=e?.giftedBoosts?.list),!t||t?.length)return n.Ay.createElement("div",{className:x.A.section},t?.map(e=>ne(e)))}()),n.Ay.createElement(C.A,{activeTab:Y,tabs:H,onSwitchTab:X})):n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("h4",{className:x.A.sectionHeader,dir:V.isRtl?"rtl":void 0},V("BoostingBoostsCount",e?.boosts?.count)),!e?.boosts?.list?.length&&n.Ay.createElement("div",{className:x.A.noResults},V(i?"NoBoostersHint":"NoBoostersGroupHint")),e?.boosts?.list?.map(e=>ne(e))),Boolean(ee)&&n.Ay.createElement(b.A,{key:"load-more",className:x.A.showMore,disabled:e?.isLoadingBoosters,onClick:re},e?.isLoadingBoosters?n.Ay.createElement(w.A,{className:x.A.loadMoreSpinner}):n.Ay.createElement(y.A,{name:"down",className:x.A.down}),V("ShowVotes",ee,"i"))),n.Ay.createElement(I.A,{className:x.A.section,link:O.boostUrl,withShare:!0,title:V("LinkForBoosting")}),t&&n.Ay.createElement("div",{className:x.A.section},n.Ay.createElement(b.A,{key:"load-more",icon:"gift",onClick:oe,className:x.A.giveawayButton},V("BoostingGetBoostsViaGifts")),n.Ay.createElement("p",{className:"text-muted hint",key:"links-hint"},V(i?"BoostingGetMoreBoosts":"BoostingGetMoreBoostsGroup")))))},J=(0,n.ph)((0,o.EK)(e=>{const t=(0,c.nTw)(e).boostStatistics,a=(0,c.hc)(e),s=t&&t.chatId,n=s?(0,c.hds)(e,s):void 0,o=n&&(0,i.WX)(n),r=e.appConfig?.giveawayBoostsPerPremium,{animationLevel:l}=(0,d.l)(e);return{boostStatistics:t,isGiveawayAvailable:a,chatId:s,giveawayBoostsPerPremium:r,isChannel:o,animationLevel:l}})(V));s()}catch(e){s(e)}})},88979:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>S});var n=a(84051),o=a(13439),r=a(70934),i=a(58443),c=a(14737),d=a(37661),l=a(59030),u=a(50680),m=a(64489),h=a(15535),p=a(64493),g=a(94189),f=a(96530),y=a(96271),I=a(89704),A=e([l,h,p,g]);[l,h,p,g]=A.then?(await A)():A;const v=160,b=({isLocked:e,passcodeSettings:t})=>{const{unlockScreen:a,signOut:s,logInvalidUnlockAttempt:A,resetInvalidUnlockAttempts:b}=(0,o.ko)(),{invalidAttemptsCount:S,timeoutUntil:w,isLoading:C}=t,E=(0,l.A)(),[M,x]=(0,n.J0)(""),[k,P]=(0,n.J0)(!1),[T,F,N]=(0,d.A)(!1),{shouldRender:B}=(0,u.A)(e);(0,c.A)(b,w?w-Date.now():void 0);const U=(0,n.hb)(()=>{x("")},[]),R=(0,n.hb)(e=>{void 0===w?(x(""),(0,r.UQ)(e).then(a,e=>{e instanceof r.Mv&&s({forceInitApi:!0}),A(),x(E("lng_passcode_wrong"))})):x(E("FloodWait"))},[E,w]);(0,n.vJ)(()=>{void 0!==w?x(E("FloodWait")):0===S&&x("")},[w,E,S]);const V=(0,n.hb)(()=>{N(),s({forceInitApi:!0})},[N,s]);if(B)return n.Ay.createElement("div",{className:y.A.container},n.Ay.createElement("div",{className:y.A.wrapper,dir:E.isRtl?"rtl":void 0},n.Ay.createElement(m.A,{tgsUrl:i.w.Lock,previewUrl:I,size:v,className:y.A.icon}),n.Ay.createElement(h.A,{key:"password-form",shouldShowSubmit:!0,shouldDisablePasswordManager:!0,isLoading:C,error:M,placeholder:E("Passcode.EnterPasscodePlaceholder"),submitLabel:E("Next"),clearError:U,isPasswordVisible:k,noRipple:!0,onChangePasswordVisibility:P,onSubmit:R}),n.Ay.createElement("div",{className:y.A.help},n.Ay.createElement("p",null,n.Ay.createElement(f.A,{onClick:F},"Log out")," ","if you don't remember your passcode."),n.Ay.createElement("p",null,n.Ay.createElement(p.A,{color:"translucent",size:"tiny",isText:!0,onClick:F},E("AccountSettings.Logout"))))),n.Ay.createElement(g.A,{isOpen:T,onClose:N,text:E("lng_sure_logout"),confirmLabel:E("AccountSettings.Logout"),confirmHandler:V,confirmIsDestructive:!0}))},S=(0,n.ph)((0,o.EK)(e=>({passcodeSettings:e.passcode}))(b));s()}catch(e){s(e)}})},89040:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>h});var n=a(84051),o=a(13439),r=a(87357),i=a(59030),c=a(54746),d=a(64493),l=a(71429),u=a(24433),m=e([i,d,u]);[i,d,u]=m.then?(await m)():m;const h=({isShown:e,onNewPrivateChat:t,onNewChannel:a,onNewGroup:s,isAccountFrozen:m})=>{const[h,p]=(0,n.J0)(!1),{openFrozenAccountModal:g}=(0,o.ko)();(0,n.vJ)(()=>{e||p(!1)},[e]);const f=(0,i.A)(),y=(0,r.A)("NewChatButton",e&&"revealed",h&&"menu-is-open"),I=(0,n.hb)(()=>{m?g():p(!h)},[h,m]),A=(0,n.hb)(()=>{p(!1)},[]),v=(0,n.Kr)(()=>n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(u.A,{icon:"channel",onClick:a},f("NewChannel")),n.Ay.createElement(u.A,{icon:"group",onClick:s},f("NewGroup")),n.Ay.createElement(u.A,{icon:"user",onClick:t},f("NewMessageTitle"))),[f,a,s,t]);return n.Ay.createElement("div",{className:y,dir:f.isRtl?"rtl":void 0},n.Ay.createElement(d.A,{round:!0,color:"primary",className:h?"active":"",onClick:I,ariaLabel:f(h?"Close":"NewMessageTitle"),tabIndex:-1},n.Ay.createElement(c.A,{name:"new-chat-filled"}),n.Ay.createElement(c.A,{name:"close"})),n.Ay.createElement(l.A,{isOpen:h,positionX:f.isRtl?"left":"right",positionY:"bottom",autoClose:!0,onClose:A},v))};s()}catch(e){s(e)}})},89092:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>v});var n=a(96540),o=a(69036),r=a(46942),i=a.n(r),c=a(2543),d=a(13439),l=a(48862),u=a(77548),m=a(64719),h=a(29356),p=a(82936),g=a(89116),f=e([u]),y=f.then?(await f)():f;u=y[0];const I=({template:e,selectedTemp:t,handleSelect:a,onDelete:s})=>{const{openDrawer:o}=(0,g.S)(),r=(0,d.mS)(),{currentUserId:c}=r;return n.createElement("div",{className:i()("urgent-topic-item px-[20px] py-[12px] leading-[24px] bg-[var(--color-chat-hover)] rounded-[8px] flex flex-row items-center justify-between gap-[24px]",{"!bg-[var(--color-chat-active)] text-white":t.includes(e.id)}),onClick:()=>a(e.id)},n.createElement("div",null,e.topic),t.includes(e.id)&&n.createElement(h.A,{className:"urgent-topic-item-check",name:"check"}),e.user_id===c&&n.createElement("div",{className:"urgent-topic-item-actions flex flex-row gap-[8px]"},n.createElement(h.A,{name:"edit",className:"text-[14px] cursor-pointer",onClick:t=>{t.preventDefault(),t.stopPropagation(),o(g.N.CustomizationPrompt,e)}}),n.createElement(h.A,{name:"close",className:"text-[14px] cursor-pointer",onClick:t=>{t.preventDefault(),t.stopPropagation(),s(e.id)}})))},A=()=>{const{openDrawer:e}=(0,g.S)();return n.createElement("div",{className:"urgent-topic-item px-[20px] py-[12px] leading-[24px] bg-[var(--color-chat-hover)] rounded-[8px] flex flex-row items-center gap-[8px] text-[var(--color-chat-active)] cursor-pointer",onClick:()=>{e(g.N.CustomizationPrompt)}},n.createElement(h.A,{name:"add"}),n.createElement("span",null,"New Topic"))},v=()=>{const{curious_info:e,ignored_summary_chat_ids:t,curious_id:a}=l.Hk.telegptSettings,s=(0,l.rB)(t),[r,i]=(0,n.useState)(e),[d,g]=(0,n.useState)(a),[f,y]=(0,n.useState)(a),[v,b]=(0,n.useState)(s),[S,w]=(0,n.useState)(!1),C=(0,n.useMemo)(()=>!(0,c.isEqual)(f,d),[d,f]),E=(0,n.useCallback)(e=>{let t=[];if(f.includes(e))t=f.filter(t=>t!==e);else{if(f.length>=3)return void o.Ay.info("You can only select up to three topics.");t=[...f,e]}y(t)},[f]),M=(0,n.useCallback)(()=>{w(!0),l.Hk.setSettingOption({curious_id:f},()=>{w(!1),g(f)})},[f]),x=(0,n.useCallback)(e=>{if(f.includes(e)){const t=f.filter(t=>t!==e);y(t),g(t),l.Hk.setSettingOption({curious_id:t})}l.Hk.deleteSummarizeTemplate(e).then(t=>{if(0===t.code){const t=r.filter(t=>t.id!==e);i(t)}else o.Ay.info("delete failed")}).catch(()=>{o.Ay.info("delete failed")})},[f,r]),k=(0,n.useCallback)(e=>{const t=[...new Set([...v,e])];b(t);const a=(0,l.EM)(t);l.Hk.setSettingOption({ignored_summary_chat_ids:a})},[v]),P=(0,n.useCallback)(e=>{const t=v.filter(t=>t!==e);b(t);const a=(0,l.EM)(t);l.Hk.setSettingOption({ignored_summary_chat_ids:a})},[v]);return n.createElement("div",{className:"h-full overflow-hidden relative"},n.createElement("div",{className:"h-full flex flex-col px-[18px] overflow-auto"},n.createElement("h3",{className:"text-[18px] font-semibold text-[var(--color-text) mb-[24px]"},"Topic Preferences"),n.createElement("div",{className:"flex flex-col gap-[10px]"},r.map(e=>n.createElement(I,{template:e,onDelete:x,selectedTemp:f,handleSelect:E})),r.length<10&&n.createElement(A,null)),n.createElement(u.i,{ignoredIds:v,onIgnored:k,onUnIgnored:P,title:"Chats for Summary"})),n.createElement(m.A,{isShown:C,onClick:M},S?n.createElement(p.A,{color:"white"}):n.createElement(h.A,{name:"check",className:"text-white text-[1.5rem]"})))};s()}catch(e){s(e)}})},89967:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"osdROIcA",wrapper:"c3NtU3JZ",explainer:"WIbO6rja",title:"n2KO1cAv",description:"MVSedxKc",sticker:"qsfxNv7L"}},90452:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>S});var n=a(84051),o=a(13439),r=a(31481),i=a(60919),c=a(80140),d=a(14737),l=a(43874),u=a(82117),m=a(37661),h=a(46402),p=a(9267),g=a(41259),f=a(64493),y=a(76929),I=e([h,g,f]);[h,g,f]=I.then?(await I)():I;const A=1500,v=24,b=({emojiStatus:e,collectibleStatuses:t,isAccountFrozen:a})=>{const{setEmojiStatus:s,loadCurrentUser:i,openFrozenAccountModal:I}=(0,o.ko)(),b=(0,n.li)(),[S,w,C]=(0,m.A)(!1),[E,M,x]=(0,m.A)(!1),[k,P,T]=(0,m.A)(!1),{isMobile:F}=(0,l.Ay)(),N=e?.until?1e3*(e.until-(0,c.Fm)()):void 0;(0,d.A)(i,N),(0,u.A)(([t])=>{S&&e&&e.documentId!==t?.documentId&&(M(),C())},[e,S,M,C]);const B=(0,n.hb)(e=>{const a=t?.find(t=>"collectibleId"in t&&t.documentId===e.id);w(),s({emojiStatus:a||{type:"regular",documentId:e.id}})},[w,s,t]);(0,d.A)(x,E?A:void 0);const U=(0,n.hb)(()=>{a?I():P()},[P,a]);return n.Ay.createElement("div",{className:"StatusButton extra-spacing"},Boolean(E&&e)&&n.Ay.createElement(g.A,{reaction:e,isLottie:!0,className:"emoji-status-effect"}),n.Ay.createElement(f.A,{round:!0,ref:b,ripple:!F,size:"smaller",color:"translucent",className:"emoji-status",onClick:U},e?n.Ay.createElement(h.A,{key:e.documentId,documentId:e.documentId,size:v,loopLimit:r.J$1,withSparkles:"collectible"===e?.type}):n.Ay.createElement(p.A,null)),n.Ay.createElement(y.A,{statusButtonRef:b,isOpen:k,onEmojiStatusSelect:B,onClose:T}))},S=(0,n.ph)((0,o.EK)(e=>{const{currentUserId:t}=e,a=t?(0,i.mBe)(e,t):void 0,s=e.collectibleEmojiStatuses?.statuses,n=(0,i.trm)(e);return{emojiStatus:a?.emojiStatus,collectibleStatuses:s,isAccountFrozen:n}})(b));s()}catch(e){s(e)}})},92237:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(96540),n=a(66644),o=a(87357);const r=({ref:e,id:t,className:a,value:r,label:i,error:c,success:d,disabled:l,readOnly:u,placeholder:m,autoComplete:h,inputMode:p,maxLength:g,maxLengthIndicator:f,tabIndex:y,onChange:I,onInput:A,onKeyPress:v,onKeyDown:b,onBlur:S,onPaste:w,noReplaceNewlines:C})=>{let E=(0,s.useRef)(void 0);e&&(E=e);const M=c||d||i,x=(0,o.A)("input-group",r&&"touched",c?"error":d&&"success",l&&"disabled",u&&"disabled",M&&"with-label",a),k=(0,s.useCallback)(e=>{(0,n.RK)(()=>{e.style.height="0",(0,n.gm)(()=>{const t=e.scrollHeight;return()=>{e.style.height=`${t}px`}})})},[]);(0,s.useLayoutEffect)(()=>{const e=E.current;e&&k(e)},[k]);const P=(0,s.useCallback)(e=>{const t=e.currentTarget;if(!C){const e=t.selectionEnd;t.value=t.value.replace(/\n/g," "),t.selectionEnd=e}k(t),I?.(e)},[C,I,k]);return s.createElement("div",{className:x},s.createElement("textarea",{ref:E,className:"form-control",id:t,dir:"auto",value:r||"",tabIndex:y,placeholder:m,maxLength:g,autoComplete:h,inputMode:p,disabled:l,readOnly:u,onChange:P,onInput:A,onKeyPress:v,onKeyDown:b,onBlur:S,onPaste:w,"aria-label":M}),M&&s.createElement("label",{htmlFor:t},M),f&&s.createElement("div",{className:"max-length-indicator"},f))},i=(0,s.memo)(r)},92297:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=({isOpen:e})=>{const t=(0,o.A)(n.ar.Extra,"Dialogs",!e);return t?s.Ay.createElement(t,null):void 0}},92955:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>B});var n=a(84051),o=a(13439),r=a(89925),i=a(60919),c=a(96454),d=a(11778),l=a(55994),u=a(40183),m=a(43411),h=a(30708),p=a(31460),g=a(37836),f=a(31880),y=a(2178),I=a(17712),A=a(29886),v=a(41257),b=a(35297),S=a(41036),w=a(79637),C=a(33354),E=a(97623),M=a(37103),x=e([C]),k=x.then?(await x)():x;C=k[0];var P=function(e){return e[e.Main=0]="Main",e[e.Settings=1]="Settings",e[e.Archived=2]="Archived",e[e.NewGroup=3]="NewGroup",e[e.NewChannel=4]="NewChannel",e[e.AIKnowledge=5]="AIKnowledge",e[e.AITranslate=6]="AITranslate",e}(P||{});const T=Object.keys(P).length/2,F=250;function N({ref:e,contentKey:t,settingsScreen:a,searchQuery:s,searchDate:i,isFirstChatFolderActive:h,animationLevel:x,shouldSkipHistoryAnimations:k,currentUserId:N,hasPasscode:B,nextFoldersAction:U,isChatOpen:R,isAppUpdateAvailable:V,isElectronUpdateAvailable:J,isForumPanelOpen:L,forumPanelChatId:O,isClosingSearch:D,archiveSettings:G,isArchivedStoryRibbonShown:j,isAccountFrozen:q}){const{setGlobalSearchQuery:z,setGlobalSearchClosing:_,setGlobalSearchChatId:K,resetChatCreation:H,setGlobalSearchDate:W,loadPasswordInfo:$,clearTwoFaError:X,openChat:Y,openLeftColumnContent:Q,openSettingsScreen:Z}=(0,o.ko)(),[ee,te]=(0,n.J0)(""),[ae,se]=(0,f.A)(),ne=(0,n.Kr)(()=>(0,g.sg)(e=>{z({query:e})},200,!1,!0),[z]),[oe,re]=(0,n.J0)(0);let ie=P.Main;switch(t){case r.Bn.Archived:ie=P.Archived;break;case r.Bn.Settings:ie=P.Settings;break;case r.Bn.NewChannelStep1:case r.Bn.NewChannelStep2:ie=P.NewChannel;break;case r.Bn.NewGroupStep1:case r.Bn.NewGroupStep2:ie=P.NewGroup;break;case r.Bn.AIKonwledge:ie=P.AIKnowledge;break;case r.Bn.AITranslate:ie=P.AITranslate}const ce=(0,I.A)(e=>{function s(){Q({contentKey:void 0}),Z({screen:void 0}),te(""),_({isClosing:!0}),H(),setTimeout(()=>{z({query:""}),W({date:void 0}),K({id:void 0}),_({isClosing:!1}),re(Date.now())},F)}if(!0!==e)if(t!==r.Bn.NewGroupStep2)if(t!==r.Bn.NewChannelStep2){if(t===r.Bn.NewGroupStep1){const e=document.getElementById("new-group-picker-search");e&&e.blur()}if(t===r.Bn.Settings)switch(a){case r.VS.EditProfile:case r.VS.Folders:case r.VS.General:case r.VS.Notifications:case r.VS.DataStorage:case r.VS.Privacy:case r.VS.Performance:case r.VS.ActiveSessions:case r.VS.Language:case r.VS.Stickers:case r.VS.Experimental:return void Z({screen:r.VS.Main});case r.VS.GeneralChatBackground:return void Z({screen:r.VS.General});case r.VS.GeneralChatBackgroundColor:return void Z({screen:r.VS.GeneralChatBackground});case r.VS.PrivacyPhoneNumber:case r.VS.PrivacyAddByPhone:case r.VS.PrivacyLastSeen:case r.VS.PrivacyProfilePhoto:case r.VS.PrivacyBio:case r.VS.PrivacyBirthday:case r.VS.PrivacyGifts:case r.VS.PrivacyPhoneCall:case r.VS.PrivacyPhoneP2P:case r.VS.PrivacyForwarding:case r.VS.PrivacyGroupChats:case r.VS.PrivacyVoiceMessages:case r.VS.PrivacyMessages:case r.VS.PrivacyBlockedUsers:case r.VS.ActiveWebsites:case r.VS.TwoFaDisabled:case r.VS.TwoFaEnabled:case r.VS.TwoFaCongratulations:case r.VS.PasscodeDisabled:case r.VS.PasscodeEnabled:case r.VS.PasscodeCongratulations:return void Z({screen:r.VS.Privacy});case r.VS.PasscodeNewPasscode:return void Z({screen:B?r.VS.PasscodeEnabled:r.VS.PasscodeDisabled});case r.VS.PasscodeChangePasscodeCurrent:case r.VS.PasscodeTurnOff:return void Z({screen:r.VS.PasscodeEnabled});case r.VS.PasscodeNewPasscodeConfirm:return void Z({screen:r.VS.PasscodeNewPasscode});case r.VS.PasscodeChangePasscodeNew:return void Z({screen:r.VS.PasscodeChangePasscodeCurrent});case r.VS.PasscodeChangePasscodeConfirm:return void Z({screen:r.VS.PasscodeChangePasscodeNew});case r.VS.PrivacyPhoneNumberAllowedContacts:case r.VS.PrivacyPhoneNumberDeniedContacts:return void Z({screen:r.VS.PrivacyPhoneNumber});case r.VS.PrivacyLastSeenAllowedContacts:case r.VS.PrivacyLastSeenDeniedContacts:return void Z({screen:r.VS.PrivacyLastSeen});case r.VS.PrivacyProfilePhotoAllowedContacts:case r.VS.PrivacyProfilePhotoDeniedContacts:return void Z({screen:r.VS.PrivacyProfilePhoto});case r.VS.PrivacyBioAllowedContacts:case r.VS.PrivacyBioDeniedContacts:return void Z({screen:r.VS.PrivacyBio});case r.VS.PrivacyBirthdayAllowedContacts:case r.VS.PrivacyBirthdayDeniedContacts:return void Z({screen:r.VS.PrivacyBirthday});case r.VS.PrivacyGiftsAllowedContacts:case r.VS.PrivacyGiftsDeniedContacts:return void Z({screen:r.VS.PrivacyGifts});case r.VS.PrivacyPhoneCallAllowedContacts:case r.VS.PrivacyPhoneCallDeniedContacts:return void Z({screen:r.VS.PrivacyPhoneCall});case r.VS.PrivacyPhoneP2PAllowedContacts:case r.VS.PrivacyPhoneP2PDeniedContacts:return void Z({screen:r.VS.PrivacyPhoneP2P});case r.VS.PrivacyBioAllowedContacts:case r.VS.PrivacyBioDeniedContacts:return void Z({screen:r.VS.PrivacyBio});case r.VS.PrivacyBirthdayAllowedContacts:case r.VS.PrivacyBirthdayDeniedContacts:return void Z({screen:r.VS.PrivacyBirthday});case r.VS.PrivacyGiftsAllowedContacts:case r.VS.PrivacyGiftsDeniedContacts:return void Z({screen:r.VS.PrivacyGifts});case r.VS.PrivacyPhoneCallAllowedContacts:case r.VS.PrivacyPhoneCallDeniedContacts:return void Z({screen:r.VS.PrivacyPhoneCall});case r.VS.PrivacyPhoneP2PAllowedContacts:case r.VS.PrivacyPhoneP2PDeniedContacts:return void Z({screen:r.VS.PrivacyPhoneP2P});case r.VS.PrivacyForwardingAllowedContacts:case r.VS.PrivacyForwardingDeniedContacts:return void Z({screen:r.VS.PrivacyForwarding});case r.VS.PrivacyVoiceMessagesAllowedContacts:case r.VS.PrivacyVoiceMessagesDeniedContacts:case r.VS.PrivacyVoiceMessagesAllowedContacts:case r.VS.PrivacyVoiceMessagesDeniedContacts:return void Z({screen:r.VS.PrivacyVoiceMessages});case r.VS.PrivacyGroupChatsAllowedContacts:case r.VS.PrivacyGroupChatsDeniedContacts:return void Z({screen:r.VS.PrivacyGroupChats});case r.VS.TwoFaNewPassword:return void Z({screen:r.VS.TwoFaDisabled});case r.VS.TwoFaNewPasswordConfirm:return void Z({screen:r.VS.TwoFaNewPassword});case r.VS.TwoFaNewPasswordHint:return void Z({screen:r.VS.TwoFaNewPasswordConfirm});case r.VS.TwoFaNewPasswordEmail:return void Z({screen:r.VS.TwoFaNewPasswordHint});case r.VS.TwoFaNewPasswordEmailCode:return void Z({screen:r.VS.TwoFaNewPasswordEmail});case r.VS.TwoFaChangePasswordCurrent:case r.VS.TwoFaTurnOff:case r.VS.TwoFaRecoveryEmailCurrentPassword:return void Z({screen:r.VS.TwoFaEnabled});case r.VS.TwoFaChangePasswordNew:return void Z({screen:r.VS.TwoFaChangePasswordCurrent});case r.VS.TwoFaChangePasswordConfirm:return void Z({screen:r.VS.TwoFaChangePasswordNew});case r.VS.TwoFaChangePasswordHint:return void Z({screen:r.VS.TwoFaChangePasswordConfirm});case r.VS.TwoFaRecoveryEmail:return void Z({screen:r.VS.TwoFaRecoveryEmailCurrentPassword});case r.VS.TwoFaRecoveryEmailCode:return void Z({screen:r.VS.TwoFaRecoveryEmail});case r.VS.FoldersCreateFolder:case r.VS.FoldersEditFolder:return void Z({screen:r.VS.Folders});case r.VS.FoldersShare:return void Z({screen:r.VS.FoldersEditFolder});case r.VS.FoldersIncludedChatsFromChatList:case r.VS.FoldersExcludedChatsFromChatList:return void Z({screen:r.VS.FoldersEditFolderFromChatList});case r.VS.FoldersEditFolderFromChatList:case r.VS.FoldersEditFolderInvites:return Q({contentKey:r.Bn.ChatList}),void Z({screen:r.VS.Main});case r.VS.QuickReaction:case r.VS.CustomEmoji:return void Z({screen:r.VS.Stickers});case r.VS.DoNotTranslate:return void Z({screen:r.VS.Language});case r.VS.PrivacyNoPaidMessages:return void Z({screen:r.VS.PrivacyMessages})}t===r.Bn.ChatList&&h?Q({contentKey:r.Bn.GlobalSearch}):s()}else Q({contentKey:r.Bn.NewChannelStep1});else Q({contentKey:r.Bn.NewGroupStep1});else s()}),de=(0,I.A)(e=>{t!==r.Bn.Contacts?(Q({contentKey:r.Bn.GlobalSearch}),e!==s&&ne(e)):te(e)}),le=(0,I.A)(()=>{Q({contentKey:r.Bn.GlobalSearch}),z({query:""}),K({id:O})});(0,n.vJ)(()=>{const e=t===r.Bn.Archived,a=t===r.Bn.ChatList,s=!R&&!L;return e&&s||!a&&!e||h&&s?(0,d.A)(()=>{ce()}):void 0},[h,t,ce,R,L]);const ue=(0,I.A)(e=>{t!==r.Bn.GlobalSearch&&(e.preventDefault(),Q({contentKey:r.Bn.GlobalSearch}))}),me=(0,I.A)(e=>{e.preventDefault(),Y({id:N,shouldReplaceHistory:!0})}),he=(0,I.A)(e=>{e.preventDefault(),Q({contentKey:r.Bn.Archived})}),pe=(0,I.A)(e=>{e.preventDefault(),Q({contentKey:r.Bn.Settings})});(0,y.v)((0,n.Kr)(()=>({"Mod+Shift+F":ue,...!c.$M&&{"Mod+Shift+S":me},...c.lE&&{"Mod+0":me,"Mod+9":he},...c.MP&&c.lE&&{"Mod+,":pe}}),[])),(0,n.vJ)(()=>{X(),a===r.VS.Privacy&&$()},[X,$,a]),(0,b.A)(()=>{U&&se(U)},[se,U]);const ge=(0,v.i)((0,A.A)(ie===P.Settings?a:-1));function fe(e){switch(ie){case P.Archived:return n.Ay.createElement(w.A,{isActive:e,onReset:ce,onTopicSearch:le,foldersDispatch:se,isForumPanelOpen:L,archiveSettings:G,isStoryRibbonShown:j});case P.Settings:return n.Ay.createElement(M.A,{isActive:e,currentScreen:a,foldersState:ae,foldersDispatch:se,animationLevel:x,shouldSkipTransition:k,onReset:ce});case P.NewChannel:return n.Ay.createElement(E.A,{key:oe,isActive:e,isChannel:!0,content:t,animationLevel:x,onReset:ce});case P.NewGroup:return n.Ay.createElement(E.A,{key:oe,isActive:e,content:t,animationLevel:x,onReset:ce});case P.AIKnowledge:return n.Ay.createElement(u.A,{onReset:ce});case P.AITranslate:return n.Ay.createElement(m.A,{onReset:ce});default:return n.Ay.createElement(C.A,{content:t,isClosingSearch:D,searchQuery:s,searchDate:i,contactsFilter:ee,foldersDispatch:se,onSearchQuery:de,onReset:ce,shouldSkipTransition:k,isForumPanelOpen:L,onTopicSearch:le,isAccountFrozen:q})}}return(0,n.vJ)(()=>{if(c.TF)return(0,l.P)(e.current,{excludedClosestSelector:".ProfileInfo, .color-picker, .hue-picker",selectorToPreventScroll:"#Settings .custom-scroll",onSwipeRightStart:ce,onCancel:()=>{Q({contentKey:r.Bn.Settings}),Z({screen:ge.current})}})},[ge,e]),n.Ay.createElement(S.Ay,{ref:e,name:(0,p.P)("layers",x,k),renderCount:T,activeKey:ie,shouldCleanup:!0,cleanupExceptionKey:P.Main,shouldWrap:!0,wrapExceptionKey:P.Main,id:"LeftColumn",withSwipeControl:!0},fe)}const B=(0,n.ph)((0,o.EK)(e=>{const t=(0,i.nTw)(e),{globalSearch:{query:a,minDate:s},shouldSkipHistoryAnimations:n,activeChatFolder:o,leftColumn:r,nextFoldersAction:c,storyViewer:{isArchivedRibbonShown:d}}=t,{currentUserId:l,passcode:{hasPasscode:u},isAppUpdateAvailable:m,isElectronUpdateAvailable:p,archiveSettings:g}=e,{animationLevel:f}=(0,h.l)(e),y=(0,i.meB)(e),I=Boolean(y?.id),A=(0,i.clw)(e),v=t.forumPanelChatId,b=(0,i.trm)(e);return{searchQuery:a,searchDate:s,isFirstChatFolderActive:0===o,animationLevel:f,shouldSkipHistoryAnimations:n,currentUserId:l,hasPasscode:u,nextFoldersAction:c,isChatOpen:I,isAppUpdateAvailable:m,isElectronUpdateAvailable:p,isForumPanelOpen:A,forumPanelChatId:v,isClosingSearch:t.globalSearch.isClosing,archiveSettings:g,isArchivedStoryRibbonShown:d,isAccountFrozen:b,contentKey:r.contentKey,settingsScreen:r.settingsScreen}})(N));s()}catch(U){s(U)}})},93456:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>l});var n=a(84051),o=a(54224),r=a(17712),i=a(8410),c=e([i]),d=c.then?(await c)():c;i=d[0];const l=()=>{const e="true"===localStorage.getItem("telegpt-guidance"),[t,a]=(0,n.J0)(!e),s=(0,r.A)(()=>{localStorage.setItem("telegpt-guidance","true"),a(!1)});if(t)return n.Ay.createElement(i.A,{isOpen:!0,noBackdropClose:!0,onClose:s,className:"guidance-modal"},n.Ay.createElement(o.A,{handleClose:s}))};s()}catch(e){s(e)}})},93533:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(37932),n=a(23174),o=a(31481),r=a(49763),i=a(87894),c=a(24021),d=a(90709),l=a(13439),u=a(17872),m=a(32989),h=a(60919),p=e([c]),g=p.then?(await p)():p;c=g[0];const f=15e3;let y,I;async function A(e,t){let a=!1;e=(0,l.mS)();let s=!1;const r=Object.keys(e.messages.byChatId).reduce((t,a)=>(t[a]=Object.keys(e.messages.byChatId[a].threadsById).reduce((t,s)=>(t[Number(s)]=(0,i.Oy)({draft:(0,h.GA4)(e,a,Number(s)),editingId:(0,h.Ys6)(e,a,Number(s)),editingDraft:(0,h.U0A)(e,a,Number(s))}),t),{}),t),{}),p=Object.entries(e.chats.lastMessageIds.all||{}).map(([t,a])=>(0,h.O5q)(e,t,Number(a))).filter(Boolean),g=Object.values(e.chats.lastMessageIds.saved||{}).map(t=>(0,h.O5q)(e,e.currentUserId,Number(t))).filter(Boolean);for(const{id:r}of Object.values(e.byTabId)){e=(0,l.mS)();const{chatId:p,threadId:g}=(0,h.Xf0)(e,r)||{},f=g||n.l3,y=p&&g?(0,h.Vw0)(e,p,g):void 0,I=p?e.chats.byId[p]:void 0;if(p&&I){const[t,g]=await Promise.all([v(e,p,f),f===n.l3||(0,d.cG)(I.id,f,e.currentUserId)?void 0:(0,c.px)("fetchDiscussionMessage",{chat:I,messageId:Number(f)})]);e=(0,l.mS)();const{chatId:A}=(0,h.Xf0)(e,r)||{};if(t&&A===p){const r=(0,h.zeq)(e,p),c=p===o.zv8?e.serviceNotifications.filter(({isDeleted:e})=>!e).map(({message:e})=>e):[],d=(0,h.pSx)(e,p),l=d?Object.values(d).map(({lastMessageId:e})=>r[e]).filter(Boolean):[],I=t.messages.map(({id:e})=>e),A=(0,i.Up)(e.messages.byChatId[p].threadsById,I),v=((!t.messages.length||t.messages.some(({id:e})=>e===g?.firstMessageId))&&g?.topMessages||[]).concat(t.messages,c),b=v.concat(l),S=(0,i.dU)(b,"id"),w=(0,i.Am)(v.map(({id:e})=>e));s||(e={...e,messages:{...e.messages,byChatId:{}}},Object.values(e.byTabId).forEach(({id:t})=>{e=(0,m.w)(e,{tabThreads:{}},t)}),s=!0),e=(0,u.o4A)(e,p,S),e=(0,u.d4w)(e,p,f,w),Object.entries(A).forEach(([t,a])=>{a?.threadInfo&&(e=(0,u.eAk)(e,p,t,a.threadInfo))}),y&&!y.isCommentsInfo&&f!==n.l3&&(e=(0,u.eAk)(e,p,f,{...(0,i.Up)(y,["fromChannelId","fromMessageId"])})),Object.values(e.byTabId).forEach(({id:t})=>{const{chatId:a,threadId:s}=(0,h.Xf0)(e,t)||{};a===p&&s===f&&(e=(0,u.s3Z)(e,p,f,w,t))}),e=(0,u.h7P)(e,(0,i.dU)(t.chats,"id")),e=(0,u.CKT)(e,(0,i.dU)(t.users,"id")),a=!0}}(0,l.UF)(e),I?.isForum&&(t.loadTopics({chatId:p,force:!0}),g&&g!==n.l3&&t.loadTopicById({chatId:p,topicId:Number(g),shouldCloseChatOnError:!0}))}e=(0,l.mS)(),a||(e={...e,messages:{...e.messages,byChatId:{}}},Object.values(e.byTabId).forEach(({id:t})=>{e=(0,m.w)(e,{tabThreads:{}},t)})),Object.keys(r).forEach(t=>{const a=r[t];Object.keys(a).forEach(a=>{e=(0,u.e49)(e,t,Number(a),r[t][Number(a)])})}),e=(0,u.KcS)(e,p),e=(0,u.KcS)(e,g),(0,l.UF)(e),Object.values(e.byTabId).forEach(({id:a})=>{const{chatId:s,messageId:n}=(0,h.nTw)(e,a).audioPlayer;s&&n&&!(0,h.O5q)(e,s,n)&&t.closeAudioPlayer({tabId:a})})}function v(e,t,a){const s=e.currentUserId,n=(0,d.cG)(t,a,s),r=n?String(a):t,i=(0,h.hds)(e,r);return(0,c.px)("fetchMessages",{chat:i,threadId:a,offsetId:n?void 0:i.lastReadInboxMessageId,addOffset:-(Math.round(o.yo2/2)+1),limit:o.yo2,isSavedDialog:n})}(0,l.aJ)("sync",(e,t)=>{o.Oig&&console.log(">>> START SYNC"),y&&clearTimeout(y),e=(0,l.mS)(),e={...e,isSyncing:!0},(0,l.UF)(e),y=window.setTimeout(()=>{e=(0,l.mS)(),e={...e,isSyncing:!1},(0,l.UF)(e),y=void 0},f);const{loadAllChats:a,preloadTopChatMessages:s}=t;(0,r.Ts)(),a({listType:"active",whenFirstBatchDone:async()=>{await A(e,t),e=(0,l.mS)(),e={...e,isSyncing:!1,isSynced:!0,isFetchingDifference:!1},(0,l.UF)(e),o.Oig&&console.log(">>> FINISH SYNC"),a({listType:"archived"}),s()}})}),(0,s.DW)(e=>{const{connectionState:t,authState:a,isSynced:s}=e,{isMasterTab:n}=(0,h.nTw)(e);!n||s||I?.connectionState===t&&I?.authState===a||"connectionStateReady"===t&&"authorizationStateReady"===a&&(0,l.ko)().sync(),I=e}),t()}catch(b){t(b)}})},94518:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=({isOpen:e})=>{const t=(0,o.A)(n.ar.Extra,"Notifications",!e);return t?s.Ay.createElement(t,null):void 0}},95165:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(84051),n=a(80089),o=a(80464);const r=e=>{const{requestedAttachBotInChat:t}=e,a=(0,o.A)(n.ar.Extra,"AttachBotRecipientPicker",!t);return a?s.Ay.createElement(a,e):void 0}},96271:(e,t,a)=>{a.d(t,{A:()=>s});const s={container:"bdKGCai4",wrapper:"BIi4Pl4Z",icon:"JwlsF2tF",help:"VlXFyC_a"}},96307:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(17142),n=a(6e4),o=a(13439),r=a(17872),i=a(32989),c=a(60919),d=e([n]),l=d.then?(await d)():d;n=l[0],(0,o.aJ)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updatePaymentStateCompleted":{const{paymentState:r,tabId:i}=a,d=r.form,{invoice:l}=d,{totalAmount:u,currency:m}=l,h=r.inputInvoice;if("stars"===h?.type)t.closeStarsBalanceModal({tabId:i}),t.showNotification({message:n.yE("StarsAcquiredInfo",h.stars),title:n.yE("StarsAcquired"),icon:"star",tabId:i}),t.requestConfetti({withStars:!0,tabId:i});else if("giftcode"===h?.type){const a=(0,c.nTw)(e,i).giftModal;a&&h?.userIds[0]===a.forPeerId&&(t.showNotification({message:{key:"GiftSent"},tabId:i}),t.requestConfetti({withStars:!0,tabId:i}),t.closeGiftModal({tabId:i}))}else t.showNotification({tabId:i,message:n.yE("PaymentInfoHint",[(0,s.Ad)(u,m,n.Yw().code),d.title])});(0,o.UF)(e);break}case"updateStarPaymentStateCompleted":{const{paymentState:s,tabId:o}=a,{inputInvoice:r,subscriptionInfo:d,form:l}=s;if("chatInviteSubscription"===r?.type&&d){const e=d.subscriptionPricing.amount;t.showNotification({tabId:o,title:n.yE("StarsSubscriptionCompleted"),message:n.yE("StarsSubscriptionCompletedText",[e,d.title],void 0,e),icon:"star"})}if(l?.invoice.subscriptionPeriod){const e=l.invoice.totalAmount;t.showNotification({tabId:o,title:n.yE("StarsSubscriptionCompleted"),message:n.yE("StarsSubscriptionCompletedText",[e,l.title],void 0,e),icon:"star"})}if("giftcode"===r?.type){if(!r.userIds)return;const a=(0,c.nTw)(e,o).giftModal;a&&r.userIds[0]===a.forPeerId&&(t.showNotification({message:{key:"StarsGiftCompleted"},tabId:o}),t.requestConfetti({withStars:!0,tabId:o}),t.closeGiftModal({tabId:o}))}if("premiumGiftStars"===r?.type){const a=(0,c.nTw)(e,o).giftModal;a&&r.userId===a.forPeerId&&(t.showNotification({message:{key:"StarsGiftCompleted"},tabId:o}),t.requestConfetti({withStars:!0,tabId:o}),t.closeGiftModal({tabId:o}))}if("starsgift"===r?.type){if(!r.userId)return;const t=(0,c.nTw)(e,o).starsGiftModal;t?.isOpen&&r.userId===t.forUserId&&(e=(0,i.w)(e,{starsGiftModal:{...t,isCompleted:!0}},o))}if("stargift"===r?.type){if(!r.peerId)return;const a=(0,c.nTw)(e,o).giftModal;a&&r.peerId===a.forPeerId&&(t.showNotification({message:{key:"StarsGiftCompleted"},tabId:o}),t.requestConfetti({withStars:!0,tabId:o}),t.closeGiftModal({tabId:o}))}if("stargiftResale"===r?.type){const a=(0,c.nTw)(e,o).giftInfoModal;a&&(t.showNotification({message:{key:"StarsGiftBought"},tabId:o}),a.peerId&&t.reloadPeerSavedGifts({peerId:a.peerId}),t.reloadPeerSavedGifts({peerId:r.peerId}),t.requestConfetti({withStars:!0,tabId:o}),t.closeGiftInfoModal({tabId:o}))}break}case"updateStarsBalance":e=(0,r.L_F)(e,a.balance),(0,o.UF)(e),t.loadStarStatus()}}),t()}catch(e){t(e)}})},96391:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(85982),n=a(14487),o=a(87894),r=a(6e4),i=a(24021),c=a(13439),d=a(17872),l=a(32989),u=a(60919),m=a(42347),h=a(25834),p=e([r,i,m,h]);[r,i,m,h]=p.then?(await p)():p,(0,c.aJ)("openStoryViewer",async(e,t,a)=>{const{peerId:s,storyId:o,isSinglePeer:r,isSingleStory:m,isPrivate:h,isArchive:p,origin:g,tabId:f=(0,n.g0)()}=a,y=(0,u.PVB)(e,s);if(!y)return;const I=(0,u.nTw)(e,f),A=(0,u._bp)(e,s);if(o&&(!A||!A.byId[o])){const t=await(0,i.px)("fetchPeerStoriesByIds",{peer:y,ids:[o]});if(!t)return;e=(0,c.mS)(),e=(0,d.K4v)(e,s,t.stories)}const v=I.storyViewer.storyList||(0,u.R3Q)(e,s,o,m,r,h,p);e=(0,l.w)(e,{storyViewer:{...I.storyViewer,peerId:s,storyId:o||(0,u._$$)(e,s)||(0,u.dNJ)(e,s),isSinglePeer:r,isPrivate:h,isArchive:p,isSingleStory:m,viewModal:void 0,origin:g,storyList:v}},f),(0,c.UF)(e)}),(0,c.aJ)("openStoryViewerByUsername",async(e,t,a)=>{const{username:s,storyId:o,origin:r,tabId:i=(0,n.g0)()}=a,c=await(0,m.A$)(e,s);c&&t.openStoryViewer({peerId:c.id,storyId:o,isSinglePeer:!0,isSingleStory:!0,origin:r,tabId:i})}),(0,c.aJ)("closeStoryViewer",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},{isMuted:o,isRibbonShown:r,isArchivedRibbonShown:i,storyId:c}=(0,u.nTw)(e,s).storyViewer;return c?e=(0,l.w)(e,{storyViewer:{isMuted:o,isRibbonShown:r,isArchivedRibbonShown:i,lastViewedByPeerId:void 0,storyList:void 0}},s):e}),(0,c.aJ)("setStoryViewerMuted",(e,t,a)=>{const{isMuted:s,tabId:o=(0,n.g0)()}=a;return(0,l.w)(e,{storyViewer:{...(0,u.nTw)(e,o).storyViewer,isMuted:s}},o)}),(0,c.aJ)("toggleStoryRibbon",(e,t,a)=>{const{isShown:s,isArchived:o,tabId:r=(0,n.g0)()}=a,i=e.stories.orderedPeerIds[o?"archived":"active"];return i?.length?(0,l.w)(e,{storyViewer:{...(0,u.nTw)(e,r).storyViewer,[o?"isArchivedRibbonShown":"isRibbonShown"]:s}},r):e}),(0,c.aJ)("openPreviousStory",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.nTw)(e,s),{peerId:r,storyId:i,isSinglePeer:c,isSingleStory:d,storyList:m}=o.storyViewer;if(d||!m)return void t.closeStoryViewer({tabId:s});if(!r||!i)return;const h=(0,u.PVB)(e,r);if(!(0,u._bp)(e,r)||!h)return;const{peerIds:p,storyIdsByPeerId:g}=m,f=(g[r]??[]).indexOf(i);let y,I;if(f>0)y=f-1,I=r;else{const e=p.indexOf(r)-1;if(c||e<0)return;I=p[e],y=(g?.[I]?.length||1)-1}const A=g?.[I]?.[y];return A?(0,l.w)(e,{storyViewer:{...o.storyViewer,peerId:I,storyId:A}},s):void 0}),(0,c.aJ)("openNextStory",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.nTw)(e,s),{peerId:r,storyId:i,isSinglePeer:c,isSingleStory:d,storyList:m}=o.storyViewer;if(d||!m)return void t.closeStoryViewer({tabId:s});if(!r||!i)return;const h=(0,u.PVB)(e,r);if(!(0,u._bp)(e,r)||!h)return;const{peerIds:p,storyIdsByPeerId:g}=m,f=g[r]??[],y=f.indexOf(i);let I,A;if(y<f.length-1)I=y+1,A=r;else{const e=p.indexOf(r)+1;if(c||e>p.length-1)return void t.closeStoryViewer({tabId:s});A=p[e],I=0}const v=g?.[A]?.[I];return v?(0,l.w)(e,{storyViewer:{...o.storyViewer,peerId:A,storyId:v}},s):void 0}),(0,c.aJ)("openStoryViewModal",(e,t,a)=>{const{storyId:s,tabId:o=(0,n.g0)()}=a,r=(0,u.nTw)(e,o);return(0,l.w)(e,{storyViewer:{...r.storyViewer,viewModal:{storyId:s,nextOffset:"",isLoading:!0}}},o)}),(0,c.aJ)("closeStoryViewModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},r=(0,u.nTw)(e,s);return(0,l.w)(e,{storyViewer:(0,o.cJ)(r.storyViewer,["viewModal"])},s)}),(0,c.aJ)("copyStoryLink",async(e,t,a)=>{const{peerId:o,storyId:c,tabId:d=(0,n.g0)()}=a,l=(0,u.PVB)(e,o);if(!l)return;const m=await(0,i.px)("fetchStoryLink",{peer:l,storyId:c});m&&((0,s.eM)(m),t.showNotification({message:r.yE("LinkCopied"),tabId:d}))}),(0,c.aJ)("sendMessage",async(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a,{storyId:o,peerId:i}=(0,u.V9I)(e,s);if(!Boolean(o&&i))return;if(void 0===await(0,h.g)(e,i))return;const{gif:c,sticker:d,isReaction:l}=a;let m;m=c?"Story.Tooltip.GifSent":d?"Story.Tooltip.StickerSent":l?"Story.Tooltip.ReactionSent":"Story.Tooltip.MessageSent",t.showNotification({message:r.yE(m),actionText:r.yE("Story.ToastViewInChat"),action:[{action:"closeStoryViewer",payload:void 0},{action:"openChat",payload:{id:i}}],tabId:s})}),(0,c.aJ)("openStoryPrivacyEditor",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.nTw)(e,s);return(0,l.w)(e,{storyViewer:{...o.storyViewer,isPrivacyModalOpen:!0}},s)}),(0,c.aJ)("closeStoryPrivacyEditor",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,u.nTw)(e,s);return(0,l.w)(e,{storyViewer:{...o.storyViewer,isPrivacyModalOpen:!1}},s)}),(0,c.aJ)("toggleStealthModal",(e,t,a)=>{const{isOpen:s,tabId:o=(0,n.g0)()}=a||{},r=(0,u.nTw)(e,o);return(0,l.w)(e,{storyViewer:{...r.storyViewer,isStealthModalOpen:s}},o)}),(0,c.aJ)("clearStoryViews",(e,t,a)=>{const{isLoading:s,tabId:o=(0,n.g0)()}=a||{},r=(0,u.nTw)(e,o);return r.storyViewer.viewModal?(0,l.w)(e,{storyViewer:{...r.storyViewer,viewModal:{...r.storyViewer.viewModal,views:void 0,isLoading:s,nextOffset:""}}},o):e}),(0,c.aJ)("updateStoryView",(e,t,a)=>{const{userId:s,isUserBlocked:o,areStoriesBlocked:r,tabId:i=(0,n.g0)()}=a,c=(0,u.nTw)(e,i),{viewModal:d}=c.storyViewer;if(!d?.storyId)return;const m=d?.views?.map(e=>e.peerId===s?{...e,isUserBlocked:o||void 0,areStoriesBlocked:r||void 0}:e);return(0,l.w)(e,{storyViewer:{...c.storyViewer,viewModal:{...d,views:m}}},i)}),(0,c.aJ)("closeBoostModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,l.w)(e,{boostModal:void 0},s)}),(0,c.aJ)("closeBoostStatistics",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,l.w)(e,{boostStatistics:void 0},s)}),t()}catch(e){t(e)}})},96785:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(84051),n=a(13439),o=a(60919),r=a(66414),i=a(26072);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},c.apply(null,arguments)}const d=(0,s.ph)((0,n.EK)(e=>({messageLists:(0,o.nTw)(e).messageLists}))(({messageLists:e})=>{const{openChat:t}=(0,n.ko)(),a=()=>{t({id:void 0},{forceSyncOnIOs:!0})},o=({chatId:e,type:t,threadId:s})=>{(0,i.A)({isActive:!0,hash:(0,r.az)(e,t,s),onBack:a})};return s.Ay.createElement("div",null,e?.map((e,t)=>s.Ay.createElement(o,c({key:`${e.chatId}_${e.threadId}_${e.type}_${t}`},e))))}))},97095:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>y});var n=a(84051),o=a(13439),r=a(23174),i=a(60919),c=a(81954),d=a(87357),l=a(17712),u=a(20125),m=a(83985),h=e([u]),p=h.then?(await h)():h;u=p[0];const g=20,f=({withScrollDown:e,canPost:t,messageListType:a,chatId:s,threadId:r,unreadCount:i,unreadReactions:h,unreadMentions:p,reactionsCount:f,mentionsCount:y,withExtraShift:I})=>{const{focusNextReply:A,focusNextReaction:v,focusNextMention:b,fetchUnreadReactions:S,readAllMentions:w,readAllReactions:C,fetchUnreadMentions:E}=(0,o.ko)(),M=(0,n.li)(),x=Boolean(f),k=Boolean(y),P=(0,l.A)(()=>{s&&C({chatId:s,threadId:r})}),T=(0,l.A)(()=>{s&&w({chatId:s,threadId:r})});(0,n.vJ)(()=>{x&&s&&!h?.length&&S({chatId:s})},[s,S,x,h?.length]),(0,n.vJ)(()=>{x&&s&&S({chatId:s})},[s,S,x]),(0,n.vJ)(()=>{k&&s&&!p?.length&&E({chatId:s})},[s,E,k,p?.length]),(0,n.vJ)(()=>{k&&s&&E({chatId:s})},[s,E,k]);const F=(0,l.A)(()=>{if(e)if("thread"===a)A();else{const e=M.current.parentElement.querySelector(".Transition_slide-active > .MessageList"),t=e.querySelectorAll(".message-list-item"),a=t[t.length-1];if(!a)return;(0,c.Ay)({container:e,element:a,position:"end",margin:g})}}),N=(0,d.A)(m.A.root,(e||Boolean(f)||Boolean(y))&&m.A.revealed,(Boolean(f)||Boolean(y))&&!e&&m.A.hideScrollDown,!t&&m.A.noComposer,!I&&m.A.noExtraShift);return n.Ay.createElement("div",{ref:M,className:N},n.Ay.createElement(u.A,{icon:"heart-outline",ariaLabelLang:"AccDescrReactionMentionDown",onClick:v,onReadAll:P,unreadCount:f,className:(0,d.A)(m.A.reactions,!x&&m.A.hidden,!k&&m.A.transformDown)}),n.Ay.createElement(u.A,{icon:"mention",ariaLabelLang:"AccDescrMentionDown",onClick:b,onReadAll:T,unreadCount:y,className:!k&&m.A.hidden}),n.Ay.createElement(u.A,{icon:"arrow-down",ariaLabelLang:"AccDescrPageDown",onClick:F,unreadCount:i,className:m.A.unread}))},y=(0,n.ph)((0,o.EK)(e=>{const t=(0,i.Xf0)(e);if(!t)return{};const{chatId:a,threadId:s,type:n}=t,o=(0,i.hds)(e,a),c=Boolean((0,i.TCk)(e)),d=o&&s===r.l3&&"thread"===n&&!c;return{messageListType:n,chatId:a,threadId:s,reactionsCount:d?o.unreadReactionsCount:void 0,unreadReactions:d?o.unreadReactions:void 0,unreadMentions:d?o.unreadMentions:void 0,mentionsCount:d?o.unreadMentionsCount:void 0,unreadCount:d?o.unreadCount:void 0}})(f));s()}catch(e){s(e)}})},97246:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(13439),n=a(96454),o=a(43874),r=a(5912),i=a(61157);const c=150,d=n.Ni?1e3:350;function l(e,t,a,n,l){const{markMessageListRead:u,markMentionsRead:m,animateUnreadReaction:h,scheduleForViewsIncrement:p}=(0,s.ko)(),{isMobile:g}=(0,o.Ay)(),f=g?300:500,{observe:y,freeze:I,unfreeze:A}=(0,r.BL)({rootRef:t,throttleMs:c},t=>{if("thread"!==e||(0,i.g1)())return;let s=0;const o=[],r=[],c=[],d=[],g=[];t.forEach(e=>{const{isIntersecting:t,target:a}=e,{dataset:n}=a,i=Number(n.lastMessageId||n.messageId),l="true"===n.shouldUpdateViews,u=n.albumMainId?Number(n.albumMainId):void 0;t?(i>s&&(s=i),n.hasUnreadMention&&o.push(i),n.hasUnreadReaction&&r.push(i),n.isPinned&&c.push(u||i),l&&g.push(u||i)):n.isPinned&&d.push(u||i)}),a.current&&s>=a.current&&u({maxId:s}),o.length&&m({chatId:l,messageIds:o}),r.length&&h({messageIds:r}),(c.length||d.length)&&n({viewportPinnedIdsToAdd:c,viewportPinnedIdsToRemove:d}),g.length&&p({chatId:l,ids:g})});(0,i.Ay)(I,A);const{observe:v}=(0,r.BL)({rootRef:t,throttleMs:d,margin:f}),{observe:b}=(0,r.BL)({rootRef:t,throttleMs:d});return{observeIntersectionForReading:y,observeIntersectionForLoading:v,observeIntersectionForPlaying:b}}},97623:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=e=>{const t=(0,o.A)(n.ar.Extra,"NewChat");return t?s.Ay.createElement(t,e):s.Ay.createElement(r.A,null)}},97688:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(84051),n=a(80089),o=a(80464),r=a(52745);const i=()=>{const e=(0,o.A)(n.ar.Extra,"StickerSearch");return e?s.Ay.createElement(e,null):s.Ay.createElement(r.A,null)}},98074:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(96540),n=a(87357);const o=({ref:e,id:t,className:a,value:o,label:r,error:i,success:c,disabled:d,readOnly:l,placeholder:u,autoComplete:m,type:h="text",inputMode:p,maxLength:g,tabIndex:f,teactExperimentControlled:y,onChange:I,onInput:A,onKeyPress:v,onKeyDown:b,onBlur:S,onPaste:w})=>{const C=i||c||r,E=(0,n.A)("input-group",o&&"touched",i?"error":c&&"success",d&&"disabled",l&&"disabled",C&&"with-label",a);return s.createElement("div",{className:E},s.createElement("input",{ref:e,className:"form-control",id:t,dir:"auto",type:h,value:o||"",tabIndex:f,placeholder:u,maxLength:g,autoComplete:m,inputMode:p,disabled:d,readOnly:l,onChange:I,onInput:A,onKeyPress:v,onKeyDown:b,onBlur:S,onPaste:w,"aria-label":C,teactExperimentControlled:y}),C&&s.createElement("label",{htmlFor:t},C))},r=(0,s.memo)(o)},98157:(e,t,a)=>{a.a(e,async(e,t)=>{try{var s=a(31481),n=a(17663),o=a(46275),r=a(9716),i=a(14487),c=a(37836),d=a(24021),l=a(62214),u=a(70636),m=a(13439),h=a(17872),p=a(60919),g=e([d,u]);[d,u]=g.then?(await g)():g;const f=(0,c.nF)(e=>e(),500,!1);async function y(e,t){const{query:a="",type:n,context:r,offsetRate:c,offsetId:l,offsetPeer:g,peer:f,maxDate:y,minDate:v,shouldResetResultsByType:b,tabId:S=(0,i.g0)()}=t;let w,C;if(f){const e=(0,d.px)("searchMessagesInChat",{peer:f,query:a,type:n,limit:s.wAs,offsetId:l,minDate:v,maxDate:y}),t=(0,u.vj)(f)&&f.isForum?(0,d.px)("fetchTopics",{chat:f,query:a,limit:s.mH$}):void 0,[o,r]=await Promise.all([e,t]);if(o){const{messages:e,totalCount:t,nextOffsetId:a}=o,{topics:s,count:n}=r||{};w={topics:s,totalTopicsCount:n,messages:e,totalCount:t,nextOffsetId:a}}}else if(w=await(0,d.px)("searchMessagesGlobal",{query:a,offsetRate:c,offsetId:l,offsetPeer:g,limit:s.wAs,type:n,context:r,maxDate:y,minDate:v}),(0,o.zq)(a)){const t=(0,o.vG)(a);"publicMessageLink"===t?.type?C=await I(e,t):"privateMessageLink"===t?.type&&(C=await A(e,t))}e=(0,m.mS)(),b&&(e=(0,h.b8O)(e,{resultsByType:{...((0,p.nTw)(e,S).globalSearch||{}).resultsByType,[n]:void 0}},S));const E=(0,p.xT4)(e,S);if(!w||""!==a&&a!==E)return e=(0,h.RgT)(e,{messages:!1},S),void(0,m.UF)(e);C&&(w.totalCount=w.messages.unshift(C));const{messages:M,userStatusesById:x,totalCount:k,nextOffsetRate:P,nextOffsetId:T,nextOffsetPeerId:F}=w;x&&(e=(0,h.d2X)(e,x)),M.length&&(e=(0,h.KcS)(e,M)),e=(0,h.HyB)(e,M,k,n,P,T,F,S),w.topics&&(e=(0,h.mIA)(e,f.id,w.totalTopicsCount,w.topics));const N=w.topics?.map(({id:e})=>e).sort((e,t)=>t-e);e=(0,h.b8O)(e,{foundTopicIds:N},S),(0,m.UF)(e)}async function I(e,t){const{username:a,messageId:s}=t,n=(0,p.qn$)(e,a);if(n)return v(e,n,s);const{chat:o}=await(0,d.px)("getChatByUsername",a)??{};return o?v(e,o,s):void 0}function A(e,t){const{channelId:a,messageId:s}=t,n=(0,r.QE)(a),o=(0,p.hds)(e,n);if(o)return v(e,o,s)}async function v(e,t,a){if(!(0,l.YE)(t)&&!(0,l.WX)(t))return;const s=(0,p.O5q)(e,t.id,a);if(s)return s;const n=await(0,d.px)("fetchMessage",{chat:t,messageId:a});return"MESSAGE_DELETED"===n?void 0:n?.message}(0,m.aJ)("setGlobalSearchQuery",(e,t,a)=>{const{query:s,tabId:n=(0,i.g0)()}=a,{chatId:o}=(0,p.nTw)(e,n).globalSearch;s&&!o&&f(async()=>{const[t,a]=await Promise.all([(0,d.px)("searchChats",{query:s}),(0,d.px)("fetchSponsoredPeer",{query:s})]);e=(0,m.mS)();const o=(0,p.xT4)(e,n);if(!t||!o||s!==o)return e=(0,h.RgT)(e,{chats:!1},n),void(0,m.UF)(e);const{accountResultIds:r,globalResultIds:i}=t;e=(0,h.RgT)(e,{chats:!1},n),e=(0,h.b8O)(e,{localResults:{peerIds:r},globalResults:{...(0,p.nTw)(e,n).globalSearch.globalResults,peerIds:i},sponsoredPeer:a},n),(0,m.UF)(e)})}),(0,m.aJ)("setGlobalSearchDate",(e,t,a)=>{const{date:s,tabId:o=(0,i.g0)()}=a,r=s?(0,n.TI)(s):s;e=(0,h.b8O)(e,{minDate:s,maxDate:r,query:"",resultsByType:{...(0,p.nTw)(e,o).globalSearch.resultsByType,text:{totalCount:void 0,foundIds:[],nextOffsetId:0}}},o),(0,m.UF)(e),t.searchMessagesGlobal({type:"text",tabId:o})}),(0,m.aJ)("searchMessagesGlobal",(e,t,a)=>{const{type:s,context:n,shouldResetResultsByType:o,shouldCheckFetchingMessagesStatus:r,tabId:c=(0,i.g0)()}=a;r&&(e=(0,h.RgT)(e,{messages:!0},c),(0,m.UF)(e),e=(0,m.mS)());const{query:d,resultsByType:l,chatId:u}=(0,p.nTw)(e,c).globalSearch,{totalCount:g,foundIds:f,nextOffsetId:I,nextOffsetPeerId:A,nextOffsetRate:v}=!o&&l?.[s]||{};if(void 0!==g&&(!g||f&&f.length>=g))return;const b=u?(0,p.PVB)(e,u):void 0;y(e,{query:d,type:s,context:n,shouldResetResultsByType:o,offsetRate:v,offsetId:I,offsetPeer:A?(0,p.PVB)(e,A):void 0,peer:b,tabId:c})}),(0,m.aJ)("searchPopularBotApps",async(e,t,a)=>{const{tabId:s=(0,i.g0)()}=a||{},n=(0,p.nTw)(e,s).globalSearch.popularBotApps,o=n?.nextOffset;if(n?.peerIds&&!o)return;e=(0,h.RgT)(e,{botApps:!0},s),(0,m.UF)(e);const r=await(0,d.px)("fetchPopularAppBots",{offset:o});if(e=(0,m.mS)(),!r)return e=(0,h.RgT)(e,{botApps:!1},s),void(0,m.UF)(e);e=(0,h.b8O)(e,{popularBotApps:{peerIds:[...n?.peerIds||[],...r.peerIds],nextOffset:r.nextOffset}},s),e=(0,h.RgT)(e,{botApps:!1},s),(0,m.UF)(e)}),(0,m.aJ)("checkSearchPostsFlood",async(e,t,a)=>{const{query:s,tabId:n=(0,i.g0)()}=a,o=await(0,d.px)("checkSearchPostsFlood",s);e=(0,m.mS)(),o&&(e=(0,h.b8O)(e,{searchFlood:o},n),(0,m.UF)(e))}),t()}catch(b){t(b)}})},98475:(e,t,a)=>{var s=a(31481),n=a(14487),o=a(13439),r=a(17872),i=a(32989),c=a(60919);(0,o.aJ)("closePaymentModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{},o=(0,c.nTw)(e,s).payment.status||"cancelled",i=(0,c.nTw)(e,s).starsBalanceModal;return t.processOriginStarsPayment({originData:i,status:o,tabId:s}),e=(0,r.GSI)(e,s),(0,r._$X)(e,{status:o},s)}),(0,o.aJ)("resetPaymentStatus",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return e=(0,r._$X)(e,{status:void 0},s),(0,r.nv6)(e,{status:void 0},s)}),(0,o.aJ)("addPaymentError",(e,t,a)=>{const{error:s,tabId:o=(0,n.g0)()}=a;return(0,i.w)(e,{payment:{...(0,c.nTw)(e,o).payment,status:"failed",error:s}},o)}),(0,o.aJ)("closeGiveawayModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,i.w)(e,{giveawayModal:void 0},s)}),(0,o.aJ)("closeGiftCodeModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,i.w)(e,{giftCodeModal:void 0},s)}),(0,o.aJ)("updateGiftProfileFilter",(e,t,a)=>{const{filter:s,peerId:r,tabId:d=(0,n.g0)()}=a||{},l=(0,c.nTw)(e,d),u=l.savedGifts.filter;let m={...u,...s};m.shouldIncludeUnlimited||m.shouldIncludeLimited||m.shouldIncludeUnique||(m={...u,shouldIncludeUnlimited:!0,shouldIncludeLimited:!0,shouldIncludeUnique:!0,...s}),m.shouldIncludeDisplayed||m.shouldIncludeHidden||(m={...u,shouldIncludeDisplayed:!0,shouldIncludeHidden:!0,...s}),e=(0,i.w)(e,{savedGifts:{...l.savedGifts,giftsByPeerId:{[r]:l.savedGifts.giftsByPeerId[r]},filter:m}},d),(0,o.UF)(e),t.loadPeerSavedGifts({peerId:r,shouldRefresh:!0,tabId:l.id})}),(0,o.aJ)("resetGiftProfileFilter",(e,t,a)=>{const{peerId:r,tabId:d=(0,n.g0)()}=a||{},l=(0,c.nTw)(e,d);e=(0,i.w)(e,{savedGifts:{...l.savedGifts,giftsByPeerId:{[r]:l.savedGifts.giftsByPeerId[r]},filter:{...s.tBS}}},d),(0,o.UF)(e),t.loadPeerSavedGifts({peerId:r,shouldRefresh:!0,tabId:l.id})}),(0,o.aJ)("openPaymentMessageConfirmDialogOpen",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,i.w)(e,{isPaymentMessageConfirmDialogOpen:!0},s)}),(0,o.aJ)("closePaymentMessageConfirmDialogOpen",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,i.w)(e,{isPaymentMessageConfirmDialogOpen:!1},s)}),(0,o.aJ)("openPriceConfirmModal",(e,t,a)=>{const{originalAmount:s,newAmount:o,currency:r,directInfo:c,tabId:d=(0,n.g0)()}=a;return(0,i.w)(e,{priceConfirmModal:{originalAmount:s,newAmount:o,currency:r,directInfo:c}},d)}),(0,o.aJ)("closePriceConfirmModal",(e,t,a)=>{const{tabId:s=(0,n.g0)()}=a||{};return(0,i.w)(e,{priceConfirmModal:void 0},s)})},99964:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{LockScreen:()=>r.A,Main:()=>o.A});var n=a(31481),o=a(12233),r=a(88979),i=e([o,r]);[o,r]=i.then?(await i)():i,n.Oig&&console.log(">>> FINISH LOAD MAIN BUNDLE"),s()}catch(e){s(e)}})}}]);
//# sourceMappingURL=7768.554a87057f005ec678fd.js.map