(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[4376],{1671:()=>{},7971:(e,t,n)=>{"use strict";n.d(t,{Ah:()=>E,Al:()=>v,ER:()=>b,LW:()=>f,WE:()=>h,_b:()=>y,aT:()=>S,mu:()=>A,tg:()=>g,ur:()=>p});var a=n(25279),o=n(72531),i=n(65894),s=n(81120),r=(n(96140),n(90709)),c=n(58554),l=n(69036),d=n(30020),m=n(13439);n(29807),d.GlobalWorkerOptions.workerSrc="pdf.worker.min.js";const u=n(47595);async function h(e,t=!1){if(!e.isMentioned||!e.content?.text?.text)return;let n={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-reply-mention"}],content:JSON.stringify({messageId:e.id,content:e.content.text?.text,isAuto:t,status:"loading"})};await w(n),(0,s.Rx)({message:e.content.text?.text,language:R()}).then(a=>{a.text?(n={...n,content:JSON.stringify({messageId:e.id,content:e.content.text?.text,replys:a.text,isAuto:t,status:"success"})},w(n)):T(n,e,t)}).catch(a=>{console.log("error",a),T(n,e,t)})}async function g(e,t=!1){const n=e.content?.photo;if(!n)return;const o=(0,r.VO)(n,"download");if(!o)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await w(i),await C({mimeType:"image/jpeg",mediaHash:o,message:e,newMessage:i,isAuto:t})}async function p(e,t=!1){const n=e.content?.webPage,o=n?n?.url:e.content?.text?.text;if(!o||""===o)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await w(i),(0,s.U$)({url:o,text:e.content?.text?.text||"",language:R()}).then(n=>{n?.text?(i={...i,content:JSON.stringify({message:e,summaryInfo:n?.text,isAuto:t,status:"success"})},w(i)):T(i,e,t)}).catch(n=>{console.log("error",n),T(i,e,t)})}async function A(e,t=!1){const n=e.content?.document;if(!n)return;const o=(0,r.VO)(n,"download");if(!o)return;if(b(n.mimeType)&&t)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};if(await w(i),b(n.mimeType))return void C({mimeType:n.mimeType,mediaHash:o,message:e,newMessage:i,isAuto:t});if(l=n.mimeType,["video/mp4"].indexOf(l)>=0)return void await I({mediaHash:o,mimeType:n?.mimeType,filename:n?.fileName,size:n?.size,newMessage:i,message:e,isAuto:t});var l;await c.hd(o,0);const m=c.Ih(o);if(!m)return;const h=await fetch(m),g=await h.blob(),p=await g.arrayBuffer();let A="";switch(n.mimeType){case"text/plain":A=(new TextDecoder).decode(p);break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":A=(await u.extractRawText({arrayBuffer:p})).value;break;case"application/pdf":const n=await d.getDocument({data:p}).promise;let a="";for(let e=1;e<=n.numPages;e++){const t=await n.getPage(e);a+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}A=a;break;default:return void await T(i,e,t)}""!==A?(0,s.OJ)({content:A,language:R()}).then(n=>{n?.text?(i={...i,content:JSON.stringify({message:e,summaryInfo:n?.text,isAuto:t,status:"success"})},w(i)):T(i,e,t)}).catch(n=>{console.log("error",n),T(i,e,t)}):await T(i,e,t)}async function y(e,t=!1){const n=e.content?.voice;if(!n)return;const o=(0,r.VO)(n,"download");if(!o)return;const i=Math.floor(4194304);if(e.content.audio?.size&&e.content.audio?.size*(4/3)>i)return void l.Ay.info("File size exceeds limit (4 MB)");let s={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await w(s),await I({mediaHash:o,mimeType:"audio/ogg",filename:n?.id+".ogg",size:n?.size,newMessage:s,message:e,isAuto:t})}async function f(e,t=!1){const n=e.content?.audio;if(!n)return;const o=(0,r.VO)(n,"download");if(!o)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await w(i),await I({mediaHash:o,mimeType:n?.mimeType,filename:n?.fileName,size:n?.size,newMessage:i,message:e,isAuto:t})}async function v(e,t=!1){const n=e.content?.video;if(!n)return;const o=(0,r.VO)(n,"download");if(!o)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await w(i),"video/mp4"===n?.mimeType?await I({mediaHash:o,mimeType:n?.mimeType,filename:n?.fileName,size:n?.size,newMessage:i,message:e,isAuto:t}):await T(i,e,t)}async function w(e){await(i.zs.message?.storeMessage(e)),await o.A.emit(o.E.AddRoomAIMessage,e)}async function I({mediaHash:e,mimeType:t,filename:n,size:a,newMessage:o,message:i,isAuto:r}){try{if(a&&a>4718592)return l.Ay.info("File size exceeds limit (4.5 MB)"),o={...o,content:JSON.stringify({message:i,errorMsg:"File size exceeds limit (4.5 MB)",isAuto:r,status:"error"})},void await w(o);await c.hd(e,0);const d=c.Ih(e);if(!d)return void T(o,i,r);const m=await fetch(d),u=await m.blob(),h=new FormData;h.append("file",u,n||"audio.ogg"),h.append("language",R()),t&&h.append("mimeType",t);const g=await(0,s.DF)(h);g?.text?w(o={...o,content:JSON.stringify({message:i,summaryInfo:g?.text,isAuto:r,status:"success"})}):T(o,i,r)}catch(e){console.log("error",e),T(o,i,r)}}async function C({mimeType:e,mediaHash:t,message:n,newMessage:a,isAuto:o}){await c.hd(t,0);const i=c.Ih(t);if(!i)return void T(a,n,o);const r=await fetch(i),l=await r.blob(),d=new FileReader;d.onloadend=function(){const t=d.result?.toString().split(",")[1]||"";(0,s.IT)({image:`data:${e};base64,`+t,language:R()}).then(e=>{e?.text?w(a={...a,content:JSON.stringify({message:n,summaryInfo:JSON.stringify({text:e?.text}),isAuto:o,status:"success"})}):T(a,n,o)}).catch(e=>{console.log("error",e),T(a,n,o)})},d.readAsDataURL(l)}function S(e){const{photo:t,document:n,webPage:a,voice:o,audio:i,text:s,video:r}=e?.content,c=E(s?.text),l=s?.text&&""!==s.text.trim();return t||n||a&&!l||o||i||c||r}function E(e){return"string"==typeof e&&/^https?:\/\/[\w\-._~:/?#[\]@!$&'()*+,;=%]+$/i.test(e)}function b(e){return e.startsWith("image/")}async function T(e,t,n){e={...e,content:JSON.stringify({message:t,isAuto:n,status:"error"})},await w(e)}function R(){const e=(0,m.mS)(),{autoTranslateLanguage:t="en"}=e.settings.byKey;return new Intl.DisplayNames([t],{type:"language"}).of(t)||"en"}},8235:(e,t,n)=>{"use strict";e.exports=n.p+"serena.c14574d5234fc479f8e8.png"},10187:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(84051),o=n(13439),i=n(70636),s=n(29807),r=n(87357),c=n(35049),l=n(59030),d=n(21849),m=n(34431),u=n(54746);const h=(0,a.ph)((0,o.EK)((e,{peerId:t,forceShowSelf:n})=>{if(!t)return{};const a=(0,s.PVB)(e,t),o=(0,s.mBe)(e,t);return{peer:a,isSavedMessages:!n&&o&&o.isSelf}})(({icon:e,title:t,isMinimized:n,canClose:o,isCloseNonDestructive:s,clickArg:h,peer:g,mockPeer:p,customPeer:A,className:y,isSavedMessages:f,withPeerColors:v,withEmojiStatus:w,onClick:I,itemClassName:C})=>{const S=(0,l.A)(),E=p||g,b=A||E,T=E&&(0,i.vj)(E)?E:void 0;let R,N,x;e&&t?(R=a.Ay.createElement("div",{className:"NtoGLT22"},a.Ay.createElement(u.A,{name:e,style:"f91Ad80i"})),N=t):b&&(R=a.Ay.createElement(d.A,{className:"La8BQ9yr",peer:b,size:"small",isSavedMessages:f}),x=(0,i.F9)(S,b)||t,N=t||a.Ay.createElement(m.A,{peer:b,isSavedMessages:f,withEmojiStatus:w}));const M=(0,r.A)("_Lq6_4e5",(T?.isForum||A?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",o&&"uvvgSFUJ",s&&"fAk5yEeV",!I&&"P8r3OoaX",v&&(0,c.y)(A||g),y);return a.Ay.createElement("div",{className:M,onClick:()=>I?.(h),title:n?x:void 0,dir:S.isRtl?"rtl":void 0},R,!n&&a.Ay.createElement("div",{className:(0,r.A)("XPVuH29G",C),dir:"auto"},N),o&&a.Ay.createElement("div",{className:"xVPG2UTy"},a.Ay.createElement(u.A,{name:"close"})))}))},10858:(e,t,n)=>{"use strict";n.d(t,{A:()=>v,b:()=>A});var a=n(96285),o=n(13439),i=n(72531),s=n(90709),r=n(29807),c=n(22199),l=n(62718),d=n(65894),m=n(95815),u=n(81120),h=n(85325),g=n(80395);function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n){const a=new Date(e),o=new Date(t),i=new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric"}),s=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!1}),r=e=>s.format(e).toLowerCase().replace(" ",""),c=i.format(a),l=r(a),d=r(o),m=Intl.DateTimeFormat().resolvedOptions().timeZone;return n?`${c}, ${l}-${d} ${m}`:`${c}, ${l}-${d}`}function y(e,t=30,n=3){const o=a.c9.utc(),i=o.plus({days:3}),s=e.map(e=>a.IX.fromDateTimes(a.c9.fromISO(e.start),a.c9.fromISO(e.end))),r=[];let c=o,l=!1;for(;c<i&&!l;){const e=c.set({hour:9,minute:0,second:0,millisecond:0}),i=c.set({hour:18,minute:0,second:0,millisecond:0});let d=e;for(;d.plus({minutes:t})<=i;){const e=d.plus({minutes:t}),i=a.IX.fromDateTimes(d,e);if(!s.some(e=>e.overlaps(i))&&!(e<o)&&(r.push({start:d.toISO(),end:e.toISO()}),r.length>=n)){l=!0;break}d=d.plus({minutes:t})}c=c.plus({days:1}).startOf("day")}return r}class f{constructor({chatId:e,email:t=[],date:n=[],hasConfirmed:a=!1}){p(this,"chatId",void 0),p(this,"hasConfirmed",void 0),p(this,"email",void 0),p(this,"date",void 0),p(this,"timeout",void 0),p(this,"handlerRef",void 0),this.chatId=e,this.email=t,this.date=n,this.hasConfirmed=a,this.handlerRef=({message:e})=>this.handlerImMessage({message:e})}static create(e){const t=f.instances.get(e.chatId);if(t)return t;{const t=new f(e);return f.instances.set(e.chatId,t),t}}static get(e){return f.instances.get(e)}start(e){i.A.on(i.E.NewTextMessage,this.handlerRef),this.timeout=setTimeout(()=>{this.cleanup(),console.log("已超过五分钟未完成输入，工作流已结束。")},3e5),this.handler(e)}cleanup(){i.A.off(i.E.NewTextMessage,this.handlerRef),clearTimeout(this.timeout),f.instances.delete(this.chatId)}handlerImMessage({message:e}){e&&(0,s.XR)(e)&&!e.isOutgoing&&this.handler({chatId:e.chatId,text:(0,s.r_)(e).text?.text||""})}async handler(e){const{text:t,chatId:n}=e||{};var a;if(!n||n===this.chatId)if(this.email.length&&this.date.length&&this.hasConfirmed)this.handleGoogleAuthCheck();else try{if(t&&n===this.chatId){if(!this.date.length){const e=(0,c.t4)(t)?.[0];if(e){const t=await async function(e){return function(e,t){const n=[];for(const a of e){const e=new Date(a.start),o=new Date(a.end);let i=!1;for(const n of t){const t=new Date(n.start);if(e<new Date(n.end)&&o>t){i=!0;break}}i||n.push({start:e.toISOString(),end:o.toISOString()})}return n}(await(0,u.t0)({calendlyUrl:e}),await(0,h.TT)())}(e);0===t.length&&console.log("No available time slots found for the provided Calendly link."),this.date=t.slice(0,3)}}const e=await(a=t,new Promise((e,t)=>{(0,u.xd)(a,Intl.DateTimeFormat().resolvedOptions().timeZone).then(t=>{let n=[],a=null;t&&t.length>0?(t.forEach(e=>{"parseTime"===e.toolName?a=e.result:"extractEmail"===e.toolName&&(n=e.result||[])}),e({date:a,email:n})):e({})}).catch(e=>{t(e)})}));if(e.email&&e.email.length>0&&(this.email=e.email),!this.date.length&&e.date){const t={start:e.date,end:new Date(new Date(e.date).getTime()+18e5).toISOString()},{isAvailable:n,suggestions:a}=await async function(e){const t=await(0,h.TT)(),n=new Date(e.start).getTime(),a=new Date(e.end).getTime();for(const e of t){const o=new Date(e.start).getTime();if(n<new Date(e.end).getTime()&&o<a)return{isAvailable:!1,suggestions:y(t)}}return{isAvailable:!0}}(t);if(!n)return this.sendMessage("The time you provided is not available. Could you please suggest another time?"),await new Promise(e=>{setTimeout(e,1e3)}),void this.sendMessage(`Here are some available time slots you can choose from: \n ${a.map((e,t)=>`${t+1}.${A(e.start,e.end,!0)}`).join("\n")}`);this.date=[t],this.hasConfirmed=!0}}if(this.date.length>0&&!this.hasConfirmed){const e=(0,l.gz)({chatId:this.chatId,date:this.date,email:this.email});d.zs?.message?.storeMessage((0,m.Jr)(this.chatId,[e])[0]),this.cleanup();const t=(0,o.mS)(),n=(0,r.meB)(t);return void(n&&n.id===this.chatId&&(i.A.emit(i.E.AddRoomAIMessage,e),(0,o.ko)().openChatAIWithInfo({chatId:this.chatId})))}if(!this.email.length&&!this.date.length)return void this.sendMessage("Could you tell me what time would be good for you to have the meeting? Also, could I get your email address?");if(!this.email.length)return void this.sendMessage("Could you please share your email address?");if(!this.date.length)return void this.sendMessage("Could you tell me what time would be good for you to have the meeting?");this.email.length&&this.date.length&&this.handleGoogleAuthCheck()}catch(e){console.log(e),this.cleanup()}}handleGoogleAuthCheck(){this.cleanup();const e=(0,g.IM)();e&&(0,g.G6)(e)?this.handleCreateGoogleMeet(e.accessToken):(0,h.wG)({onOk:e=>{this.handleCreateGoogleMeet(e)}})}handleCreateGoogleMeet(e){this.sendMessage("I'll send you the meeting invitation later.");const t=this.date[0];(0,h.FG)({startDate:new Date(t.start),endDate:new Date(t.end),selectedTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,emails:this.email,googleToken:e}).then(e=>{if(console.log("createMeetResponse",e),e){const t=`Event details \n📝 Title\n${e.summary}\n👥 Guests\n${e.attendees.map(e=>e.email).join("\\n")}\n📅 Time\n${A(e.start.dateTime,e.end.dateTime)}\n${e.start.timeZone}\n🔗 Meeting link\n${e.hangoutLink}\n            `;this.sendMessage(t)}})}sendMessage(e){(0,o.ko)().sendMessage({messageList:{chatId:this.chatId,threadId:"-1",type:"thread"},text:e})}}p(f,"instances",new Map);const v=f},11241:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var a=n(84051),o=n(13439),i=n(90709),s=n(29807),r=n(87357),c=n(43336),l=n(76023),d=n(37661),m=n(5912),u=n(17712),h=n(62587),g=n(50680),p=n(47483),A=n(18104),y=n(87412),f=n(83594),v=n(17794),w=n(93879);const I=1.5*l.$,C=6.5*l.$,S=l.$,E=(0,a.ph)((0,o.EK)((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:a}=e,{activeReactions:o}=(0,s.nTw)(e),i=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:o?.[t],availableReactions:a.availableReactions,genericEffects:n,withEffects:i}})(({containerId:e,reaction:t,className:n,size:s=I,effectSize:l=C,activeReactions:E,availableReactions:b,genericEffects:T,withEffects:R,withEffectOnly:N,shouldPause:x,shouldLoop:M,loopLimit:k,observeIntersection:P})=>{const{stopActiveReaction:D}=(0,o.ko)(),O=(0,a.li)(null),L="custom"===t.type,F=(0,a.Kr)(()=>b?.find(e=>(0,i.a0)(e.reaction,t)),[b,t]),B=F?.centerIcon?.id,{customEmoji:$}=(0,p.A)(L?t.documentId:void 0),_=(0,a.Kr)(()=>{if(!L)return F?.aroundAnimation?.id;if(!$)return;const e=b?.find(e=>e.reaction.emoticon===$.emoji)?.aroundAnimation?.id;return e},[F,b,$,L]),K=(0,a.Kr)(()=>{if(_)return _;if(!T?.stickers)return;const{stickers:e}=T;return e[Math.floor(Math.random()*e.length)].id},[_,T]),U=(0,m.Vz)(O,P),z=B&&(0,i.aL)(B),j=K&&(0,i.aL)(K),J=(0,h.A)(z),G=(0,h.A)(j),H=(0,a.Kr)(()=>E?.find(e=>(0,i.a0)(e,t)),[E,t]),q=Boolean(R&&H&&(L||J)&&G),V=U&&(q&&!N||M),{shouldRender:W,transitionClassNames:Z}=(0,g.A)(q,void 0,!0,"slow"),{shouldRender:Y,transitionClassNames:X}=(0,g.A)(V,void 0,!0,"slow"),Q=(0,u.A)(()=>{D({containerId:e,reaction:t})}),[ee,te,ne]=(0,d.A)(),ae=!(L||V&&ee),{shouldRender:oe,transitionClassNames:ie}=(0,g.A)(ae,void 0,!0),se=(0,r.A)(w.A.root,W&&w.A.animating,N&&w.A.withEffectOnly,n);return a.Ay.createElement("div",{className:se,ref:O},!N&&oe&&a.Ay.createElement(v.A,{className:ie,reaction:t,availableReactions:b,size:s,observeIntersection:P}),!N&&L&&a.Ay.createElement(y.A,{documentId:t.documentId,className:w.A.customEmoji,size:s,noPlay:x,noVideoOnMobile:!0,loopLimit:k,observeIntersectionForPlaying:P,forceAlways:!0}),Y&&!L&&a.Ay.createElement(A.A,{key:`${B}-${s}`,className:(0,r.A)(w.A.animatedIcon,X),size:(0,c.Ki)(1.9*s),tgsUrl:J,play:U&&!x,noLoop:!M,onLoad:te,onEnded:ne,forceAlways:!0}),W&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(A.A,{key:`${K}-${l}`,className:(0,r.A)(w.A.effect,Z),size:l,tgsUrl:G,play:U,noLoop:!0,onEnded:Q,forceAlways:!0}),L&&!_&&U&&a.Ay.createElement(f.A,{reaction:t,className:Z,particleSize:Math.max(.5*s,S),onEnded:Q})))}))},14622:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(84051),o=n(13439),i=n(81954),s=n(17712),r=n(93545),c=n(672);const l=function(e,t=!1){const{focusLastMessage:n}=(0,o.ko)(),l=(0,a.li)(0),d=(0,s.A)(e=>{const t=l.current,o=e.contentRect.height;if(l.current=o,(0,i.o8)()||!t||o<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,a.VK)(400);const r=o-t,{offsetHeight:c,scrollHeight:d,scrollTop:m}=s;Math.round(d-m-c)-r<=5&&n()}),m=(0,c.A)(d,[d],300,!1);(0,r.A)(e,m,!t)}},14737:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(84051),o=n(17712);const i=function(e,t){const n=(0,o.A)(e);(0,a.vJ)(()=>{if("number"!=typeof t)return;const e=setTimeout(()=>n(),t);return()=>clearTimeout(e)},[t])}},15365:()=>{},15535:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(84051),o=n(31481),i=n(66644),s=n(96454),r=n(87357),c=n(83868),l=n(14737),d=n(43874),m=n(59030),u=n(64493),h=n(54746);const g=(0,a.ph)(({isLoading:e=!1,isPasswordVisible:t,error:n,hint:g,placeholder:p="Password",submitLabel:A="Next",description:y,shouldShowSubmit:f,shouldResetValue:v,shouldDisablePasswordManager:w=!1,noRipple:I=!1,clearError:C,onChangePasswordVisibility:S,onInputChange:E,onSubmit:b})=>{const T=(0,a.li)(null),R=(0,m.A)(),{isMobile:N}=(0,d.Ay)(),[x,M]=(0,a.J0)(""),[k,P]=(0,a.J0)(!1),D=N?550:400;return(0,a.vJ)(()=>{v&&M("")},[v]),(0,l.A)(()=>{s.TF||T.current.focus()},D),(0,a.vJ)(()=>{n&&(0,i.RK)(()=>{T.current.focus(),T.current.select()})},[n]),a.Ay.createElement("form",{action:"",onSubmit:b?function(t){t.preventDefault(),e||k&&b(x)}:c.A,autoComplete:"off"},a.Ay.createElement("div",{className:(0,r.A)("input-group password-input",x&&"touched",n&&"error"),dir:R.isRtl?"rtl":void 0},w&&a.Ay.createElement("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),a.Ay.createElement("input",{ref:T,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:x||"",autoComplete:w?"one-time-code":"current-password",onChange:function(e){n&&C();const{target:t}=e;M(t.value),P(t.value.length>=o.AGC),E&&E(t.value)},maxLength:256,dir:"auto"}),a.Ay.createElement("label",null,n||g||p),a.Ay.createElement("div",{className:"div-button toggle-password",onClick:function(){S(!t)},role:"button",tabIndex:0,title:"Toggle password visibility","aria-label":"Toggle password visibility"},a.Ay.createElement(h.A,{name:t?"eye":"eye-crossed"}))),y&&a.Ay.createElement("p",{className:"description"},y),b&&(k||f)&&a.Ay.createElement(u.A,{size:"smaller",type:"submit",ripple:!I,isLoading:e,disabled:!k},A))})},16460:(e,t,n)=>{"use strict";function a(e,t){let n=0,a=0,o=e;for(;o&&o!==t&&!o.contains(t);)n+=o.offsetTop,a+=o.offsetLeft,o=o.offsetParent;return{top:n,left:a}}n.d(t,{A:()=>a})},17794:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(84051),o=n(90709),i=n(87357),s=n(62587),r=n(83057),c=n(87412),l=n(54746),d=n(61911);const m=(0,a.ph)(({reaction:e,availableReactions:t,className:n,size:m,withIconHeart:u,observeIntersection:h})=>{const g=(0,a.Kr)(()=>t?.find(t=>(0,o.a0)(t.reaction,e)),[t,e]),p=g?.staticIcon?.id,A=p?`document${p}`:void 0,y=(0,s.A)(A),f=(0,r.A)(y),v="emoji"===e.type&&"🦄"===e.emoticon,w=u&&"emoji"===e.type&&"❤"===e.emoticon;return"custom"===e.type?a.Ay.createElement(c.A,{documentId:e.documentId,className:(0,i.A)("ReactionStaticEmoji",n),size:m,observeIntersectionForPlaying:h}):w?a.Ay.createElement(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${m}px; width: ${m}px`}):a.Ay.createElement("img",{className:(0,i.A)("ReactionStaticEmoji",v&&"with-unicorn-fix",f,n),style:m?`width: ${m}px; height: ${m}px`:void 0,src:y||d,alt:g?.title,draggable:!1})})},20333:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(84051),o=n(87357),i=n(95807),s=n(59030),r=n(93545),c=n(54746);const l="_b5HgBXr",d="P6mch4bB",m=(0,a.ph)(({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:m,progress:u,isPrimary:h,className:g})=>{const p=(0,s.A)(),A=(0,a.li)(null),y=(0,a.li)(null),[f,v]=(0,a.J0)(0),[w,I]=(0,a.J0)(0),C=()=>{if(A.current&&y.current&&void 0!==u){const e=A.current.offsetWidth,t=y.current.offsetWidth,n=e/2,a=t-e/2,o=u*t,i=Math.max(n,Math.min(o,a));let s;v(i/t),s=o<n?u*t/(2*n):o>a?.5+(u-a/t)/(1-a/t)*.4:.5,I(s)}};(0,a.vJ)(C,[u]),(0,r.A)(y,C);const S=Boolean(m||n),E=Boolean(u)&&u>.99;return a.Ay.createElement("div",{ref:y,className:(0,o.A)("nY2ggBsF",S&&"RYtVQAjM",h&&"Zi0w7QJ3",g),style:(0,i.A)(void 0!==u&&`--progress: ${u}`,void 0!==w&&`--tail-position: ${w}`,`--shift-x: ${f}`)},S&&a.Ay.createElement("div",{className:"dhigNjAq"},a.Ay.createElement("div",{className:"cOpfCGPh"},a.Ay.createElement("div",{className:"uNwBLNOy",ref:A},m&&a.Ay.createElement(c.A,{name:m,className:"MJ7MTmxi"}),n&&a.Ay.createElement("div",{className:"MwzZt3Qo",dir:p.isRtl?"rtl":void 0},n)),a.Ay.createElement("div",{className:"qRwO7SZm"},a.Ay.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},a.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"#7E85FF"}))))),a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,e)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,t)),a.Ay.createElement("div",{className:(0,o.A)("sZZV0yoe",E&&"m8ie8IxL")},a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,e)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,t))))})},24531:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(84051),o=n(31481),i=n(17663),s=n(80140),r=n(17712),c=n(59030),l=n(80089),d=n(80464);const m=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?a.Ay.createElement(n,e):void 0},u=(e,t,n)=>{const l=(0,c.A)(),[d,u]=(0,a.J0)(),h=(0,r.A)((e,t=!1)=>{const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());d?.(n),u(void 0)}),g=(0,r.A)(()=>{h(new Date(1e3*o.NkL),!0)}),p=(0,r.A)(()=>{u(void 0),t?.()}),A=(0,r.A)(e=>{u(()=>e)}),y=n?new Date(1e3*n):new Date;y.setSeconds(0),y.setMilliseconds(0);const f=new Date;return f.setFullYear(f.getFullYear()+1),[A,a.Ay.createElement(m,{isOpen:Boolean(d),withTimePicker:!0,selectedAt:y.getTime(),maxAt:(0,i.CS)(f),isFutureMode:!0,secondButtonLabel:e?l("Schedule.SendWhenOnline"):void 0,onClose:p,onSubmit:h,onSecondButtonClick:e?g:void 0})]}},25352:()=>{},26875:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(84051),o=n(87357),i=n(59030),s=n(21849);const r=(0,a.ph)(({peers:e,size:t,className:n,limit:r=3,badgeText:c})=>{const l=(0,i.A)(),d="number"==typeof t?t:s.R[t],m=(0,a.Kr)(()=>c||(!e?.length||e.length<=r?void 0:"+"+(e.length-r)),[c,e,r]);return a.Ay.createElement("div",{className:(0,o.A)(n,"kXs18Nmi"),style:`--_size: ${d}px;`,dir:l.isRtl?"rtl":"ltr"},e?.slice(0,r).map(e=>a.Ay.createElement(s.A,{size:t,peer:e,className:"XND8fhC1"})),m&&a.Ay.createElement("div",{className:"SHyAyGFO"},m))})},26959:()=>{},27860:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(84051),o=n(66644),i=n(87357),s=n(45470),r=n(17712),c=n(50680);const l=(0,a.ph)(({isVisible:e,withAnimation:t,thumbDataUri:n,className:l,width:d,height:m})=>{const u=(0,a.li)(null),{shouldRender:h,transitionClassNames:g}=(0,c.A)(e,void 0,!0,!t&&void 0,void 0,500),p=(0,s.A)(n,!h,void 0,25,d,m),A=(0,r.A)(e=>{if(!u.current)return;const t=u.current,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,s=a-n.width/2,r=i-n.height/2;(0,o.RK)(()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${r}px`)})});if(h)return a.Ay.createElement("div",{className:(0,i.A)("qF2WgYVg",g,l,t&&"pNM3cgkY"),ref:u,onClick:t?A:void 0},a.Ay.createElement("canvas",{ref:p,className:"eULqS2yR",width:d,height:m}),a.Ay.createElement("div",{className:"XBor45hE"}))})},29886:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(84051);function o(e){const t=(0,a.li)(),n=(0,a.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},31722:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},36838:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(84051);const o=(e,t,n=!1)=>{(0,a.vJ)(()=>{if(t)return;const a=e.current;function o(e){e.deltaX||(a.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return a.addEventListener("wheel",o,{passive:!n}),()=>{a.removeEventListener("wheel",o)}},[e,t,n])}},40558:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(84051),o=n(66644),i=n(90709),s=n(87357),r=n(95807),c=n(87679),l=n(17712),d=n(62587),m=n(93545),u=n(38691);const h=(0,a.ph)(({backgroundColors:e,patternColor:t,patternIcon:n,clearBottomSector:h,className:g})=>{const p=(0,a.li)(null),A=(0,a.li)(null),[y,f]=(0,a.Ul)({width:0,height:0}),v=(0,u.A)(),[w,I]=(0,a.J0)(),C=n&&(0,i.Mw)(n,"preview"),S=(0,d.A)(C);(0,a.vJ)(()=>{S&&(0,c.NN)(S).then(I)},[S]);const E=(0,a.Kr)(()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),a=t/3,o=.05+(.4-.05)*a,i=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+i;if(h&&s>.45*Math.PI&&s<.55*Math.PI)continue;const r=.5+1.71*o*Math.cos(s),c=.5+o*Math.sin(s),l=1.4-a*Math.random();e.push({x:r,y:c,sizeFactor:l})}}return e},[h]);(0,m.A)(p,e=>{f({width:e.contentRect.width,height:e.contentRect.height})}),(0,a.vJ)(()=>{const e=p.current;e&&f({width:e.clientWidth,height:e.clientHeight})},[f]);const b=(0,l.A)(()=>{const e=A.current;if(!e||!w)return;const n=e.getContext("2d"),{width:a,height:o}=e;if(!a||!o)return;n.save(),E.forEach(({x:e,y:t,sizeFactor:i})=>{const s=(a-Math.max(a,250*v))/2,r=e*Math.max(a,250*v)+s,c=t*Math.max(o,250*v)+s,l=20*v*i*(s?.8:1);n.drawImage(w,r-l/2,c-l/2,l,l)}),n.restore(),t&&(n.save(),n.fillStyle=t,n.globalCompositeOperation="source-atop",n.fillRect(0,0,a,o),n.restore());const i=n.createRadialGradient(a/2,o/2,0,a/2,o/2,a/2);i.addColorStop(0,"#FFFFFF77"),i.addColorStop(1,"#FFFFFF"),n.save(),n.globalCompositeOperation="destination-out",n.fillStyle=i,n.fillRect(0,0,a,o),n.restore()});return(0,a.vJ)(()=>{b()},[w]),(0,a.vJ)(()=>{const{width:e,height:t}=y(),n=A.current;if(!e||!t)return;const a=Math.max(e,t);(0,o.RK)(()=>{n.width=a*v,n.height=a*v,b()})},[y,v]),a.Ay.createElement("div",{ref:p,className:(0,s.A)("Af3tYFMg",g),style:(0,r.A)(`--_bg-1: ${e[0]}`,`--_bg-2: ${e[1]||e[0]}`)},a.Ay.createElement("canvas",{className:"GbpiDSS_",ref:A}))})},41512:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var a=n(43503);function o(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=a.A.get();return t.top<=n&&t.top+t.height>=0}},43581:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var a=n(84051),o=n(13439),i=n(90709),s=n(29807),r=n(87357),c=n(60343),l=n(15283),d=n(17712),m=n(59030),u=n(14242),h=n(76023),g=n(63527),p=n(10722),A=n(82117),y=n(39351),f=n(29886),v=n(21511),w=n(68292),I=n(26875),C=n(96454),S=n(78376),E=n(5912),b=n(4438),T=n(9267),R=n(93879);const N=1.5*h.$,x=6.5*h.$,M=C.pz||C.Ni?2:5,k=C.pz||C.Ni?2:3,P=(0,a.ph)((0,o.EK)((e,{containerId:t})=>{const{activeReactions:n}=(0,s.nTw)(e),a=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:a}})(({containerId:e,reaction:t,className:n,size:s=N,effectSize:c=x,activeReactions:l,localAmount:m,withEffects:u,observeIntersection:h})=>{const{stopActiveReaction:g}=(0,o.ko)(),p=(0,a.li)(null),y=(0,a.li)(null),[f,w]=(0,a.J0)([]),I=(0,E.Vz)(p,h),C=(0,a.Kr)(()=>l?.find(e=>(0,i.a0)(e,t)),[l,t]),P=Boolean(u&&C),D=f.length<M;(0,A.A)(([e])=>{P?!m||m<=(e||0)||D&&w(e=>[...e,Date.now()]):w([])},[m,D,P]);const{shouldRender:O}=(0,v.A)({ref:y,noMountTransition:!0,isOpen:P,className:"slow",withShouldRender:!0}),L=(0,d.A)(()=>{const n=f.slice(1);w(n),n.length||g({containerId:e,reaction:t})}),F=(0,r.A)(R.A.root,O&&R.A.animating,n);return a.Ay.createElement("div",{className:F,ref:p,teactFastList:!0},a.Ay.createElement(T.A,{key:"icon",type:"gold",size:"adaptive",style:`width: ${s}px; height: ${s}px`}),O&&f.map(e=>a.Ay.createElement(b.A,{key:e,ref:y,className:R.A.effect,size:c,tgsUrl:S.w.StarReactionEffect,play:I,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:k,onEnded:L})))}));var D=n(11241),O=n(85118),L=n(64493),F=n(69988);const B=1.25*h.$;function $(e){return e.stars}const _=(0,a.ph)(({reaction:e,containerId:t,isOwnMessage:n,recentReactors:s,className:c,chosenClassName:l,chatId:m,messageId:h,isOutside:C,observeIntersection:S,onClick:E,onPaidClick:b})=>{const{openStarsBalanceModal:T,resetLocalPaidReactions:R,openPaidReactionModal:N,requestWave:x}=(0,o.ko)(),M=(0,a.li)(null),k=(0,a.li)(null),_=(0,a.li)(),K=(0,y.A)(),U="paid"===e.reaction.type,z=(0,g.A)($),j=Boolean(z),J=(0,d.A)((e=1)=>{b?.(e)}),G=(0,d.A)(t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void J();E?.(e.reaction)}),{isContextMenuOpen:H,handleBeforeContextMenu:q,handleContextMenu:V,handleContextMenuClose:W,handleContextMenuHide:Z}=(0,p.A)(M,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,a.vJ)(()=>{H&&(N({chatId:m,messageId:h}),W(),Z())},[W,Z,H,m,h]),(0,A.A)(([t])=>{const n=e.localAmount,a=M.current;if(!n||!a||n===t?.localAmount)return;if(j&&n>z.balance.amount)return T({originReaction:{chatId:m,messageId:h,amount:n}}),void R({chatId:m,messageId:h});if(e.localAmount){const{left:e,top:t}=a.getBoundingClientRect(),n=e+a.offsetWidth/2,o=t+a.offsetHeight/2;x({startX:n,startY:o})}const o=Number(getComputedStyle(a).scale)||1;_.current?.cancel(),_.current=a.animate([{scale:o},{scale:Math.min(1.2*o,3),offset:.2},{scale:1}],{duration:500*o,easing:"ease-out"})},[e,z?.balance,j,m,h]);const Y=(0,f.A)(e.localAmount),{shouldRender:X}=(0,v.A)({isOpen:Boolean(e.localAmount),ref:k,className:"slow",withShouldRender:!0});return a.Ay.createElement(L.A,{className:(0,r.A)(F.A.root,n&&F.A.own,U&&F.A.paid,C&&F.A.outside,(0,i.eu)(e)&&F.A.chosen,(0,i.eu)(e)&&l,c),size:"tiny",ref:M,onMouseDown:q,onContextMenu:V,onClick:G},"paid"===e.reaction.type?a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(O.A,{preset:"button"}),a.Ay.createElement(P,{className:F.A.animatedEmoji,containerId:t,reaction:e.reaction,size:B,localAmount:e.localAmount,observeIntersection:S}),X&&a.Ay.createElement(w.A,{ref:k,text:`+${(0,u.Vw)(K,e.localAmount||Y)}`,className:F.A.paidCounter})):a.Ay.createElement(D.A,{className:F.A.animatedEmoji,containerId:t,reaction:e.reaction,size:B,observeIntersection:S}),s?.length?a.Ay.createElement(I.A,{size:"mini",peers:s}):a.Ay.createElement(w.A,{text:(0,u.Vw)(K,e.count+(e.localAmount||0)),className:F.A.counter}))});var K=n(92915);const U=(0,a.ph)(({message:e,threadId:t,isOutside:n,maxWidth:u,metaChildren:h,observeIntersection:g,noRecentReactors:p,isCurrentUserPremium:A,tags:y,isAccountFrozen:f})=>{const{toggleReaction:v,addLocalPaidReaction:w,updateMiddleSearch:I,performMiddleSearch:C,openPremiumModal:S,resetLocalPaidReactions:E,showNotification:b,openFrozenAccountModal:T}=(0,o.ko)(),R=(0,m.A)(),{results:N,areTags:x,recentReactions:M}=e.reactions,k=Boolean(e.areReactionsPossible&&e.reactions),P=(0,a.Kr)(()=>N.reduce((e,t)=>e+t.count,0),[N]),D=(0,a.Kr)(()=>{const e=(0,o.mS)();return M?.reduce((t,n)=>{const{reaction:a,peerId:o}=n,r=(0,i.Jj)(a),c=(0,s.PVB)(e,o);if(!c)return t;const l=t[r]||[];return l.push(c),t[r]=l,t},{})},[M]),O=(0,a.Kr)(()=>{const t=(0,c.bj)(e);return N.map(e=>{const n=(0,i.Jj)(e.reaction),a=D?.[n],o=P>3||p,s=x?y?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:o?void 0:a,isChosen:(0,i.eu)(e),tag:s}})},[e,p,D,N,x,y,P]),L=(0,d.A)(n=>{if(!f)return x?A?(I({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void C({chatId:e.chatId,threadId:t})):void S({initialSection:"saved_tags"}):void v({chatId:e.chatId,messageId:e.id,reaction:n});T()}),F=(0,a.Kr)(()=>N.find(e=>"paid"===e.reaction.type)?.localAmount||0,[N]),B=(0,d.A)(t=>{f?T():w({chatId:e.chatId,messageId:e.id,count:t})});(0,a.vJ)(()=>{F&&b({localId:(0,c.bj)(e),title:R("StarsSentTitle"),message:R("StarsSentText",F),actionText:R("StarsSentUndo"),cacheBreaker:F.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})},[R,e,F]);const $=(0,d.A)(t=>{f?T():v({chatId:e.chatId,messageId:e.id,reaction:t})});return(0,l.A)(()=>()=>{E({chatId:e.chatId,messageId:e.id})}),a.Ay.createElement("div",{className:(0,r.A)("Reactions",n&&"is-outside",k&&"is-service"),style:u?`max-width: ${u}px`:void 0,dir:R.isRtl?"rtl":"ltr"},O.map(({reaction:t,recentReactors:o,messageKey:i,reactionKey:s,isChosen:r,tag:c})=>x?a.Ay.createElement(K.A,{key:s,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,isChosen:r,reaction:t.reaction,tag:c,withContextMenu:A,onClick:L,onRemove:$,observeIntersection:g}):a.Ay.createElement(_,{key:s,chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,recentReactors:o,isOutside:n,reaction:t,onClick:L,onPaidClick:B,observeIntersection:g})),h)})},45470:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(84051),o=n(32610),i=n(66644),s=n(96454),r=n(35297);const c=2,l=2;function d(e,t=!1,n,d=c,m,u){const h=(0,a.li)(null),g=(0,a.li)();return(0,r.A)(()=>{t||(g.current=!1)},[e,t]),(0,a.vJ)(()=>{const a=h.current;if(!e||!a||t||g.current)return;g.current=!0;const r=new Image,c=()=>{const e=m||r.width,t=u||r.height,n=a.getContext("2d",{alpha:!1});(0,i.RK)(()=>{a.width=e,a.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(r,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,o.A)(n,0,0,e,t,d,l)})};r.onload=()=>{n?(0,i.YS)(c):c()},r.src=e},[e,t,u,m,d,n]),h}},45780:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(84051),o=n(96454),i=n(87357),s=n(17712),r=n(59030),c=n(42452);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:m,inactive:u,ripple:h,className:g,titleClassName:p,subtitleClassName:A,style:y,onClick:f,onDisabledClick:v})=>{const w=(0,r.A)(),I=!u&&!m,C=(0,s.A)(()=>{u||(m?v?.():f?.())});return a.Ay.createElement("div",{className:(0,i.A)("OHkx_W75",t&&"neXqB2_A",m&&"tvZeVJPh",I&&"VUSwo4t5",n&&"dMT9byM6",g),onClick:C,style:y,dir:w.isRtl?"rtl":void 0,role:I?"button":void 0,tabIndex:I?0:void 0},!m&&!u&&h&&a.Ay.createElement(c.A,null),l&&a.Ay.createElement("div",{className:(0,i.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm")},l),n&&a.Ay.createElement("div",{className:"dnAaRPCo"},n),a.Ay.createElement("div",{className:(0,i.A)("JSSC0N8V",p)},e),t&&a.Ay.createElement("div",{className:(0,i.A)("OYmzCSp2",A)},t),!l&&o.pz&&a.Ay.createElement("div",{className:"P53DrbWA"}))}},49086:(e,t,n)=>{"use strict";n.d(t,{C:()=>u,V:()=>m});var a=n(13439),o=n(23174),i=n(90709),s=n(3544),r=n(60343),c=n(58849),l=n(4961),d=n(18501);function m({message:e,highlight:t,emojiSize:n,asPreview:a,truncateLength:o,isProtected:s,forcePlayback:l,shouldRenderAsHtml:m,isForMediaViewer:u,threadId:h,maxTimestamp:g}){const{text:p,entities:A}=e.content.text||{};if(!p){const t=(0,i.P5)(e)?.text;return t?[(0,c.A)(t,o)]:void 0}const y=(0,r.bj)(e);return(0,d.fd)({text:(0,c.A)(p,o),entities:A,highlight:t,emojiSize:n,shouldRenderAsHtml:m,containerId:`${u?"mv-":""}${y}`,asPreview:a,isProtected:s,forcePlayback:l,messageId:"id"in e?e.id:void 0,chatId:e.chatId,threadId:h,maxTimestamp:g})}function u(e,t,n=!1,r,d=s.vs){const{entities:u}=t.content.text||{},h=(0,a.mS)(),g=(0,i.ni)(h,t),p=u?.some(e=>e.type===o.C7.Spoiler),A=u?.some(e=>e.type===o.C7.CustomEmoji);if(!p&&!A){const a=(0,c.A)((0,s.dS)(e,t,g,n),d);return r?(0,l.A)(a,["emoji","highlight"],{highlight:r}):(0,l.A)(a)}const y=!n&&(0,s.Su)(t),f=y?`${y} `:"",v=m({message:t,highlight:r,asPreview:!0,truncateLength:d}),w=(0,s.oL)(e,t,g,v);return[...(0,l.A)(f),...Array.isArray(w)?w:[w]].filter(Boolean)}},49746:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(84051),o=n(13439);function i(e,t,n,i,s){const{loadMessage:r}=(0,o.ko)();(0,a.vJ)(()=>{s||t&&!n&&r({chatId:e,messageId:t,replyOriginForId:i})},[s,e,n,t,i])}},54960:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var a=n(84051),o=n(13439),i=n(31481),s=n(66644),r=n(90709),c=n(70636),l=n(29807),d=n(87357),m=n(87894),u=n(79824),h=n(96374),g=n(17712),p=n(59030),A=n(19806),y=n(46222),f=n(40664),v=n(52745),w=n(24956),I=n(21849),C=n(34431),S=n(54746),E=n(10187),b=n(45780),T=n(31722);const R="PeerPickerItem",N=(0,a.ph)(({className:e,categories:t,itemIds:n,categoryPlaceholderKey:N,filterValue:x,filterPlaceholder:M,notFoundText:k,searchInputId:P,itemClassName:D,isLoading:O,noScrollRestore:L,isSearchable:F,lockedUnselectedSubtitle:B,forceShowSelf:$,isViewOnly:_,itemInputType:K,withStatus:U,withPeerTypes:z,withPeerUsernames:j,withDefaultPadding:J,onFilterChange:G,onDisabledClick:H,onLoadMore:q,...V})=>{const W=(0,p.A)(),Z=V.allowMultiple,Y=Z?V.lockedSelectedIds:void 0,X=Z?V.lockedUnselectedIds:void 0,Q=(0,a.Kr)(()=>Z?V.selectedCategories:V.selectedCategory?[V.selectedCategory]:u.p,[Z,V.selectedCategory,V.selectedCategories]),ee=(0,a.Kr)(()=>Z?V.selectedIds:V.selectedId?[V.selectedId]:u.p,[Z,V.selectedId,V.selectedIds]),te=(0,a.li)(null),ne=ee.length>10;(0,a.vJ)(()=>{if(!F)return;const e=window.setTimeout(()=>{(0,s.YS)(()=>{te.current?.focus()})},500);return()=>{window.clearTimeout(e)}},[F]);const ae=(0,a.Kr)(()=>new Set(Y),[Y]),oe=(0,a.Kr)(()=>new Set(X),[X]),ie=(0,a.Kr)(()=>ee.filter(e=>!ae.has(e)),[ae,ee]),se=(0,a.Kr)(()=>t?(0,m.dU)(t,"type"):{},[t]),re=(0,a.Kr)(()=>{if(x)return n;const e=[],t=[],a=[];return n.forEach(n=>{ae.has(n)?e.push(n):oe.has(n)?a.push(n):t.push(n)}),e.concat(t,a)},[x,n,ae,oe]),ce=(0,g.A)(e=>{if(ae.has(e))H?.(e,!0);else if(oe.has(e))H?.(e,!1);else{if(Z&&se[e]){const t=se[e].type,n=Q?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void V.onSelectedCategoriesChange?.(n)}if(Z){const t=ee.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void V.onSelectedIdsChange?.(t)}se[e]?V.onSelectedCategoryChange?.(se[e].type):V.onSelectedIdChange?.(e)}}),le=(0,g.A)(e=>{const{value:t}=e.currentTarget;G?.(t)}),[de,me]=(0,h.A)(q,re,Boolean(x)),ue=(0,a.hb)((e,t)=>{const n=(0,o.mS)(),s=t?se[e]:void 0,m=t?void 0:(0,l.PVB)(n,e),u=m||s;if(!u)return i.Oig?a.Ay.createElement("div",{key:e},"No peer or category with ID ",e):void 0;const h=m&&!(0,c.vj)(m)?m.isSelf&&!$:void 0,g=oe.has(e),p=ae.has(e),y=g||p,f=s?Q?.includes(s.type):ee.includes(e),[v,E]=function(){if(g)return[B];if(m){if(j){const e=m.usernames?.[0]?.username;if(e)return[`@${e}`]}if(U){if((0,c.vj)(m))return[(0,r.sT)(W,m)];const e=(0,l.K0y)(n,m.id);return[(0,r.CD)(W,m,e),(0,d.A)((0,r.PF)(m,e,!0)&&T.A.onlineStatus)]}if(z){const e=(0,c.cy)(m);return e&&[W(e)]}}}()||[];return a.Ay.createElement(b.A,{key:e,className:(0,d.A)(R,D),title:a.Ay.createElement(C.A,{peer:u}),avatarElement:a.Ay.createElement(I.A,{peer:m||s,isSavedMessages:h,size:"medium"}),subtitle:v,subtitleClassName:E,disabled:y,inactive:_,ripple:!0,inputElement:y?a.Ay.createElement(S.A,{name:"lock-badge"}):"radio"===K?a.Ay.createElement(w.A,{checked:f,disabled:y,onlyInput:!0}):"checkbox"===K?a.Ay.createElement(A.A,{checked:f,disabled:y,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>ce(e),onDisabledClick:H&&(()=>H(e,p))})},[se,$,_,D,K,W,ae,oe,B,H,Q,ee,z,U,j]),he=(0,a.Kr)(()=>{if(t?.length)return a.Ay.createElement("div",{key:"categories"},N&&a.Ay.createElement("div",{className:T.A.pickerCategoryTitle},W(N)),t?.map(e=>ue(e.type,!0)),a.Ay.createElement("div",{className:T.A.pickerCategoryTitle},W("FilterChats")))},[t,N,W,ue]);return a.Ay.createElement("div",{className:(0,d.A)(T.A.container,e)},F&&a.Ay.createElement("div",{className:(0,d.A)(T.A.header,"custom-scroll"),dir:W.isRtl?"rtl":void 0},Q?.map(e=>a.Ay.createElement(E.A,{className:T.A.peerChip,customPeer:se[e],onClick:ce,clickArg:e,canClose:!0})),Y?.map((e,t)=>a.Ay.createElement(E.A,{className:T.A.peerChip,peerId:e,isMinimized:ne&&t<ee.length-5,forceShowSelf:$,onClick:ce,clickArg:e})),ie.map((e,t)=>a.Ay.createElement(E.A,{className:T.A.peerChip,peerId:e,isMinimized:ne&&t+(Y?.length||0)<ee.length-5,canClose:!0,onClick:ce,clickArg:e})),a.Ay.createElement(f.A,{id:P,ref:te,value:x,onChange:le,placeholder:M||W("SelectChat")})),de?.length?a.Ay.createElement(y.A,{className:(0,d.A)(T.A.pickerList,J&&T.A.padded,"custom-scroll"),items:de,itemSelector:`.${R}`,beforeChildren:he,onLoadMore:me,noScrollRestore:L},de.map(e=>ue(e))):O||!de||de.length?a.Ay.createElement(v.A,null):a.Ay.createElement("p",{className:T.A.noResults},k||"Sorry, nothing found."))})},56133:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(16581);function o(e,t,n,o=[]){return(0,a.A)(e=>{e()},o,e,t,n)}},57446:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(13439),o=n(66644),i=n(29807),s=n(19822);const r=300,c=new Map;function l(e,t,n=r){(0,i.PKK)((0,a.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:m,scrollWidth:u,dataset:{scrollId:h}}=e;let g=t-d;if(g<0){const e=-d*(l?-1:1);g=Math.max(g,e)}else if(g>0){const e=u-(d+m);g=Math.min(g,e)}if(0===g)return Promise.resolve();h&&c.has(h)&&c.get(h)();const p=d+g;return new Promise(t=>{(0,o.RK)(()=>{if(0===n)return e.scrollLeft=p,void t();let a=!1;const i=Math.random().toString();e.dataset.scrollId=i,c.set(i,()=>{a=!0}),e.style.scrollSnapType="none";const r=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,c.delete(i)}(0,s.i0)(()=>{if(a)return l(),!1;const o=Math.min((Date.now()-r)/n,1),i=g*(1-function(e){return 1-(1-e)**3.5}(o));return e.scrollLeft=Math.round(p-i),o>=1&&(l(),t()),o<1},o.RK)})})}},58968:(e,t,n)=>{"use strict";n.d(t,{I5:()=>s,LS:()=>i,V2:()=>o,lw:()=>a});const a={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},o=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],i=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},60195:()=>{},62718:(e,t,n)=>{"use strict";n.d(t,{DY:()=>g,Ej:()=>h,He:()=>d,O4:()=>f,R2:()=>p,dL:()=>y,gz:()=>A,s2:()=>m,wi:()=>u});var a=n(25279),o=n(13439),i=n(23174),s=n(29807),r=n(81120),c=n(68144),l=n(80395);const d=e=>({role:"assistant",id:(0,a.A)(),createdAt:new Date,content:e,annotations:[{type:"room-ai-description"}]}),m=()=>({role:"assistant",id:(0,a.A)(),createdAt:new Date,content:"Please login first",annotations:[{type:"google-auth"}]}),u=()=>({role:"assistant",id:(0,a.A)(),createdAt:new Date,content:"",annotations:[{type:"google-event-insert"}]}),h=(e,t)=>{const n=(0,l.IM)();n&&(0,l.G6)(n)?e(u()):e(m()),t?.()},g=async(e,t,n)=>{const l=(0,o.mS)(),{autoTranslateLanguage:d="en"}=l.settings.byKey,m=(0,s.hds)(l,e),u=(0,s.ZZX)(l,e,"all")||0;if(m){const e=await(0,c.Np)({chat:m,offsetId:u,addOffset:-1,sliceSize:20,threadId:i.l3,maxCount:20}),o=(0,c.iZ)(e);if(!o.length){n?.();const e={timestamp:(new Date).getTime(),content:"No significant topics or valid data detected. We will continue monitoring.",id:(0,a.A)(),createdAt:new Date,role:"assistant"};return void t(e)}const s={summaryTime:(new Date).getTime(),messageCount:o.length,userIds:Array.from(new Set(o.map(e=>e.senderId)))};(0,r.oi)({messages:o,language:new Intl.DisplayNames([d],{type:"language"}).of(d)}).then(e=>{const o={...e.data,summaryInfo:s},i={timestamp:(new Date).getTime(),content:JSON.stringify(o),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-summary"}]};t(i),n?.()}).catch(e=>{console.log(e),n?.();const o={timestamp:(new Date).getTime(),content:"Summarization failed. Try again later.",id:(0,a.A)(),createdAt:new Date,role:"assistant"};t(o)})}},p=async(e,t,n)=>{const l=(0,o.mS)(),{autoTranslateLanguage:d}=l.settings.byKey,m=(0,s.hds)(l,e),u=(0,s.ZZX)(l,e)||0;if(m){const e=(await(0,c.Np)({chat:m,offsetId:u,addOffset:-1,sliceSize:20,threadId:i.l3,maxCount:20})).map(e=>{if(e.content.text?.text){const t=e.senderId?(0,s.mBe)(l,e.senderId):void 0;return{senderId:e?.senderId||e?.chatId,senderName:t?`${t.firstName||""} ${t.lastName||""}`:"",date:e.date,messageId:Math.floor(e.id),content:e.content.text?.text??""}}return null}).filter(Boolean);if(!e.length)return;const o={summaryTime:(new Date).getTime(),messageCount:e.length,userIds:Array.from(new Set(e.map(e=>e.senderId)))};(0,r.lF)({messages:e,language:d}).then(e=>{const i={...e.data,summaryInfo:o},s={timestamp:(new Date).getTime(),content:JSON.stringify(i),id:(0,a.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-actions"}]};t(s),n?.()}).catch(e=>{console.log(e),n?.()})}},A=({chatId:e,date:t,email:n})=>({role:"assistant",id:(0,a.A)(),createdAt:new Date,content:JSON.stringify({chatId:e,date:t,email:n}),annotations:[{type:"google-meet-time-confirm"}]}),y=e=>({role:"assistant",id:(0,a.A)(),createdAt:new Date,content:JSON.stringify({...e,isConfirmed:!1}),annotations:[{type:"google-meet-mention"}]}),f=e=>{const t=(0,o.mS)().users.byId;let n=null;return Object.values(t).forEach(t=>{t.firstName?.toLowerCase()!==e?.toLowerCase()&&t.lastName?.toLowerCase()!==e?.toLowerCase()&&`${t.firstName} ${t.lastName}`?.toLowerCase()!==e?.toLowerCase()||(n=t.id)}),{role:"assistant",id:(0,a.A)(),createdAt:new Date,content:n??"",annotations:[{type:"user-portrait"}]}}},64489:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(84051),o=n(87357),i=n(95807),s=n(37661),r=n(17712),c=n(83057),l=n(4438);const d="lM2usrZU";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(null,arguments)}const u=new Set,h=(0,a.ph)(function(e){const{previewUrl:t,thumbDataUri:n,className:h,...g}=e,[p,,A]=(0,s.A)(Boolean(n)),y=(0,c.A)(p),[f,v,w]=(0,s.A)(u.has(t)),I=(0,c.A)(f),[C,S]=(0,s.A)(!1),E=(0,r.A)(()=>{v(),u.add(t)}),b=(0,r.A)(()=>{A(),w(),setTimeout(S,300)}),{size:T}=e;return a.Ay.createElement("div",{className:(0,o.A)(h,"xCi2f0YH"),style:(0,i.A)(void 0!==T&&`width: ${T}px; height: ${T}px;`)},n&&!C&&a.Ay.createElement("img",{src:n,className:(0,o.A)(d,y),draggable:!1}),t&&!C&&a.Ay.createElement("img",{src:t,className:(0,o.A)(d,I),draggable:!1,onLoad:E}),a.Ay.createElement(l.A,m({},g,{onLoad:b})))})},65632:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(84051),o=n(13439),i=n(31481),s=n(74824),r=n(87679);const c=(e,t)=>{const{setThemeSettings:n}=(0,o.ko)(),[c,l]=(0,a.J0)(t);return(0,a.vJ)(()=>{t&&(t.startsWith("#")?l(t):s.fetch(i.nfi,e,s.Type.Blob).then(e=>{const t=URL.createObjectURL(e);(0,r.NN)(t).then(()=>{l(`url(${t})`)})}).catch(()=>{n({theme:e,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?i.MkD:i.be8})}))},[t,e]),t?c:void 0}},66833:(e,t,n)=>{"use strict";function a(e){return"starGift"===e.type?e.sticker:e.attributes.find(e=>"model"===e.type)?.sticker}function o(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function i(e){if("starGiftUnique"===e.type)return function(e){const t=e.find(e=>"model"===e.type),n=e.find(e=>"backdrop"===e.type),a=e.find(e=>"pattern"===e.type);return{model:t,originalDetails:e.find(e=>"originalDetails"===e.type),pattern:a,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>o,uc:()=>i,yQ:()=>a})},68292:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(84051),o=n(13439),i=n(29807),s=n(87357),r=n(37836),c=n(30857),l=n(39351),d=n(73767);let m=0;const u=(0,r.Fe)(()=>{m=0}),h=(0,a.ph)(({text:e,className:t,isDisabled:n,ref:r})=>{const{isRtl:h}=(0,l.A)(),g=(0,d.A)(e),p=(0,c.A)(),A=!(!(!n&&(0,i.PKK)((0,o.mS)())&&void 0!==g&&g!==e)||m>=10||(0===m&&u(),m++,0)),y=(0,a.Kr)(()=>A?function(e,t){const n=[],o=e.length,i=t?.length??0;for(let s=0;s<=o;s++){const r=o-s,c=i-s;t&&c>=0&&e[r]!==t[c]?n.unshift(a.Ay.createElement("div",{className:"IYTzbS8o"},a.Ay.createElement("div",{className:"Jw1oQFdk"},e[r]??""),a.Ay.createElement("div",{className:"TZfEz3sc"},t[c]),a.Ay.createElement("div",{className:"Y9ied8_t"},e[r]??""))):n.unshift(a.Ay.createElement("span",null,e[r]??""))}return n}(e,g):e,[A,g,e]);return(0,a.vJ)(()=>{if(!A)return;const e=window.setTimeout(()=>{p()},200);return()=>{window.clearTimeout(e)}},[A,e]),a.Ay.createElement("span",{ref:r,className:(0,s.A)(t,!n&&"tgKbsVmz"),dir:h?"rtl":void 0},y)})},69988:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}},73104:(e,t,n)=>{"use strict";let a,o;n.d(t,{M6:()=>c,v5:()=>l});const i={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!a||!a.contains(e.target)||a.scrollTop<=0&&t<=0||a.scrollTop>=a.scrollHeight-a.offsetHeight&&t>=0){if(o&&e.target.closest(o))return;e.preventDefault()}};function r(e){i[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const a=t.getAttribute("type");return!!a&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(a.toLowerCase())>-1}(e.target)&&e.preventDefault()}function c(e,t){return a=e,o=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=r,l}function l(){a=void 0,o=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},74984:(e,t,n)=>{"use strict";n.d(t,{Jm:()=>h,Rh:()=>d,g5:()=>u,ic:()=>m});var a=n(84051),o=n(31481),i=n(49763),s=n(51217),r=n(96140),c=n(40708),l=n(30857);function d(e){const t=(0,l.A)();if((0,a.vJ)(()=>(0,i.Yw)(e,t),[e,t]),e===o.j7l)return(0,i.Xq)()[o.DSF];if(e===o.LFk)return(0,s.od)((0,i.YA)(o.DSF)?.filter(e=>!(0,r.uw)(e)));if(e===o.Sab)return(0,s.Ho)((0,i.YA)(o.DSF)?.filter(e=>!(0,r.uw)(e)));if(e===o.DSF){const t=(0,i.YA)(e);return t&&t?.indexOf(c.bL)<0?t?.unshift(c.bL):t?.sort((e,t)=>e===c.bL?-1:t===c.bL?1:0),t}return(0,i.YA)(e)}function m(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.P1)(e),[e]),(0,i.PZ)()}function u(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.BU)(e),[e]),(0,i.jn)()}function h(){const e=(0,l.A)();return(0,a.vJ)(()=>(0,i.dk)(e),[e]),(0,i.Xq)()}},76283:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var a=n(84051),o=n(13439),i=n(90709),s=n(87357),r=n(17712),c=n(59030),l=n(54746),d=n(64493),m=n(96530),u=n(78376),h=n(76023),g=n(10722),p=n(4438),A=n(87412);const y="uGUjDZKl",f="M62HGuIV",v="WMpEr5XQ",w=2*h.$,I=(0,a.ph)(({reaction:e,chosen:t,isReady:n,noAppearAnimation:o,style:i,isLocked:c,onToggleReaction:d,onSendPaidReaction:m,onShowPaidReactionModal:h})=>{const I=(0,a.li)(null),C=(0,r.A)(()=>{"paid"!==e.type?d(e):m?.()}),{isContextMenuOpen:S,handleBeforeContextMenu:E,handleContextMenu:b,handleContextMenuClose:T,handleContextMenuHide:R}=(0,g.A)(I,"paid"!==e.type,void 0,void 0,void 0,!0);return(0,a.vJ)(()=>{S&&(h?.(),T(),R())},[T,h,R,S]),a.Ay.createElement("div",{className:(0,s.A)(y,"oc1hpMwv",t&&"paid"!==e.type&&f,!o&&n&&"sx6RTuAU",o&&"kqcWe4tf"),ref:I,style:i,onClick:C,onMouseDown:E,onContextMenu:b},"paid"===e.type?a.Ay.createElement(p.A,{tgsUrl:u.w.StarReaction,size:w,noLoop:!1}):a.Ay.createElement(A.A,{documentId:e.documentId,size:w}),c&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))});var C=n(37661),S=n(62587),E=n(18104);const b=2*h.$,T=(0,a.ph)(({reaction:e,isReady:t,noAppearAnimation:n,chosen:o,isLocked:i,onToggleReaction:r})=>{const c=(0,S.A)(`sticker${e.appearAnimation?.id}`,!t||n),d=(0,S.A)(`document${e.selectAnimation?.id}`,!t||n),m=(0,S.A)(`document${e.staticIcon?.id}`,!n),[u,h]=(0,C.A)(),[g,,p]=(0,C.A)(!0),[A,w,I]=(0,C.A)();return a.Ay.createElement("div",{className:(0,s.A)(y,o&&f),onClick:function(){r(e.reaction)},onMouseEnter:t&&!g?w:void 0},n&&a.Ay.createElement("img",{className:"MZ2tH980",src:m,alt:e.reaction.emoticon,draggable:!1}),!u&&!n&&a.Ay.createElement(E.A,{key:e.appearAnimation?.id,tgsUrl:c,play:g,noLoop:!0,size:b,onEnded:p,forceAlways:!0}),!g&&!n&&a.Ay.createElement(E.A,{key:e.selectAnimation?.id,tgsUrl:d,play:A,noLoop:!0,size:b,onLoad:h,onEnded:I,forceAlways:!0}),i&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))}),R=(0,s.x)("ReactionSelector"),N=(0,a.ph)(({allAvailableReactions:e,topReactions:t,defaultTagReactions:n,enabledReactions:u,currentReactions:h,reactionsLimit:g,isPrivate:p,isReady:A,canPlayAnimatedEmojis:y,className:f,isCurrentUserPremium:v,isInSavedMessages:w,isInStoryViewer:C,isForEffects:S,effectReactions:E,isWithPaidReaction:b,onClose:N,onToggleReaction:x,onSendPaidReaction:M,onShowPaidReactionModal:k,onShowMore:P})=>{const{openPremiumModal:D}=(0,o.ko)(),O=(0,a.li)(null),L=(0,c.A)(),F=w&&!v&&!C,B=Boolean(g&&h&&h.length>=g),$=(0,a.Kr)(()=>{const a=B?h?.map(e=>e.reaction):S?E:w?n:"some"===u?.type?u.allowed:e?.map(e=>e.reaction),o=a?.map(t=>{const n="custom"===t.type,a=e?.find(e=>(0,i.a0)(e.reaction,t));return S?a:(n||a)&&!a?.isInactive&&(p||B||u&&(0,i.A3)(t,u))?n?t:a:void 0}).filter(Boolean)||[],s=(0,i.fu)(o,t);return b&&s.unshift({type:"paid"}),s},[e,h,n,u,w,p,t,S,E,B,b]),_=(0,a.Kr)(()=>8===$.length?$:$.slice(0,7),[$]),K=_.length<$.length,U=(0,a.Kr)(()=>{const e=h?.filter(({chosenOrder:e})=>void 0!==e)||[];return new Set(e.map(({reaction:e})=>_.findIndex(t=>t&&(0,i.a0)("reaction"in t?t.reaction:t,e))))},[h,_]),z=(0,r.A)(()=>{const e=O.current?.getBoundingClientRect()||{x:0,y:0};P({x:e.x,y:e.y})}),j=(0,r.A)(()=>{N?.(),D({initialSection:"saved_tags"})}),J=(0,a.Kr)(()=>{if(w){if(!v){const e=L("lng_subscribe_tag_about").split("{link}");return a.Ay.createElement("span",null,e[0],a.Ay.createElement(m.A,{isPrimary:!0,onClick:j},L("lng_subscribe_tag_link")),e[1])}return L("SavedTagReactionsHint2")}return C?L("StoryReactionsHint"):S?L("AddEffectMessageHint"):void 0},[v,w,C,L,S]);if(_.length)return a.Ay.createElement("div",{className:(0,s.A)(R("&"),f),ref:O},a.Ay.createElement("div",{className:R("bubble-small",L.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:R("items-wrapper")},a.Ay.createElement("div",{className:R("bubble-big",L.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:R("items")},J&&a.Ay.createElement("div",{className:R("hint")},J),a.Ay.createElement("div",{className:R("reactions"),dir:L.isRtl?"rtl":void 0},_.map((e,t)=>"reaction"in e?a.Ay.createElement(T,{key:(0,i.Jj)(e.reaction),isReady:A,onToggleReaction:x,reaction:e,noAppearAnimation:!y,chosen:U.has(t),isLocked:F}):a.Ay.createElement(I,{key:(0,i.Jj)(e),isReady:A,onToggleReaction:x,onSendPaidReaction:M,onShowPaidReactionModal:k,reaction:e,noAppearAnimation:!y,chosen:U.has(t),isLocked:F,style:`--_animation-delay: ${20*(7-t)}ms`})),K&&a.Ay.createElement(d.A,{color:"translucent",className:R("show-more"),onClick:z},a.Ay.createElement(l.A,{name:"down"}))))))})},79519:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(84051),o=n(61433),i=n(31481),s=n(66644),r=n(81954);const c=500,l=i.nxZ,d=20;function m({elementRef:e,chatId:t,isFocused:n,focusDirection:i,noFocusHighlight:m,isResizingContainer:u,isJustAdded:h,isQuote:g,scrollTargetPosition:p}){const A=(0,a.li)(!h);(0,a.Nf)(()=>{const t=A.current;if(A.current=!1,n&&e.current){const n=e.current.closest(".MessageList"),a=m,h=p||a?"end":"centerOrTop",A=()=>{const t=void 0!==i?a?c:l:void 0,m=(0,r.Ay)({container:n,element:e.current,position:h,margin:d,maxDistance:t,forceDirection:i,forceNormalContainerHeight:u,shouldReturnMutationFn:!0});if(g){const t=e.current.querySelector(".is-quote");t&&(0,s.RK)(()=>{(0,o.YM)(t,"animate")})}return m};t?(0,s.gm)(A):(0,s.YS)(()=>{(0,s.RK)(A())})}},[e,t,n,i,m,u,g,p])}},79577:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(84051),o=n(23174),i=n(90709),s=n(62587),r=n(64489);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(null,arguments)}const l=(0,a.ph)(function(e){const{sticker:t,noLoad:n,forcePreview:l,...d}=e,m=t?.thumbnail?.dataUri,u=t&&(0,i.Mw)(t,"full"),h=(0,s.A)(t?(0,i.Mw)(t,"preview"):void 0,n&&!l,o.qZ.BlobUrl),g=(0,s.A)(u,n);return a.Ay.createElement(r.A,c({tgsUrl:g,previewUrl:h,thumbDataUri:m},d))})},79582:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(13439),o=n(29807),i=n(87894);const s=3e9,r=3e8;function c(e,t=!1,n,c){const l=(0,a.mS)();return(0,i.My)(e,e=>{if(e===c)return 1/0;const a=(0,o.hds)(l,e);if(!a)return 0;let i=0;const d=(0,o.yHC)(l,e);return d&&(i+=d.date),t&&a.isVerified&&(i+=s),n&&n.includes(e)&&(i=Date.now()+r+(n.length-n.indexOf(e))),i},"desc")}},80395:(e,t,n)=>{"use strict";n.d(t,{G6:()=>s,IM:()=>i,UA:()=>o});const a="google_auth_state";function o(e){localStorage.setItem(a,JSON.stringify(e))}function i(){const e=localStorage.getItem(a);return e?JSON.parse(e):null}function s(e){return!!(e&&e.accessToken&&e.expiresAt)&&Date.now()<e.expiresAt-6e4}},80539:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,g4:()=>l,qh:()=>s});var a=n(23174),o=n(31481),i=n(96454);const s={B:a.C7.Bold,STRONG:a.C7.Bold,I:a.C7.Italic,EM:a.C7.Italic,INS:a.C7.Underline,U:a.C7.Underline,S:a.C7.Strike,STRIKE:a.C7.Strike,DEL:a.C7.Strike,CODE:a.C7.Code,PRE:a.C7.Pre,BLOCKQUOTE:a.C7.Blockquote},r=3;function c(e,t=!1,n=!1){const c=document.createElement("div");c.innerHTML=n?e:function(e){let t=e.slice(0);return t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=t.replace(/^`{3}(.*?)[\n\r](.*?[\n\r]?)`{3}/gms,'<pre data-language="$1">$2</pre>'),t=t.replace(/^`{3}[\n\r]?(.*?)[\n\r]?`{3}/gms,"<pre>$1</pre>"),t=t.replace(/[`]{3}([^`]+)[`]{3}/g,"<pre>$1</pre>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[`]{1}([^`\n]+)[`]{1}(?![^<]*<\/(code|pre)>)/g,"<code>$2</code>"),i.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">'),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[*]{2}([^*\n]+)[*]{2}(?![^<]*<\/(code|pre)>)/g,"<b>$2</b>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[_]{2}([^_\n]+)[_]{2}(?![^<]*<\/(code|pre)>)/g,"<i>$2</i>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[~]{2}([^~\n]+)[~]{2}(?![^<]*<\/(code|pre)>)/g,"<s>$2</s>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[|]{2}([^|\n]+)[|]{2}(?![^<]*<\/(code|pre)>)/g,`<span data-entity-type="${a.C7.Spoiler}">$2</span>`),t}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${o.kNZ}+?)\\)`,"g"),(e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`)}(e):e),l(c);const d=c.innerText.trim().replace(/\u200b+/g,"");let m=-c.innerText.indexOf(d[0]),u=0;const h=[];function g(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const o=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(s[e.nodeName])return s[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===a.C7.MentionName?a.C7.MentionName:t.dataset.entityType===a.C7.Url?a.C7.Url:t.href.startsWith("mailto:")?a.C7.Email:t.href.startsWith("tel:")?a.C7.Phone:t.href!==t.textContent?a.C7.TextUrl:a.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?a.C7.CustomEmoji:void 0}(e);if(!o||!e.textContent)return{index:n,entity:void 0};const i=t.indexOf(e.textContent,n),r=i>=0?i:n,c=t.substring(0,r).length,{length:l}=t.substring(r,r+e.textContent.length);if(o===a.C7.TextUrl)return{index:r,entity:{type:o,offset:c,length:l,url:e.href}};if(o===a.C7.MentionName)return{index:r,entity:{type:o,offset:c,length:l,userId:e.dataset.userId}};if(o===a.C7.Pre)return{index:r,entity:{type:o,offset:c,length:l,language:e.dataset.language}};if(o===a.C7.CustomEmoji)return{index:r,entity:{type:o,offset:c,length:l,documentId:e.dataset.documentId}};if(o===a.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:r,entity:void 0}:{index:r,entity:{type:o,offset:c,length:l,timestamp:t}}}return{index:r,entity:{type:o,offset:c,length:l}}}(e,d,m);if(n)m=t,h.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;m+=e.textContent.length}e.hasChildNodes()&&u<=r&&(u+=1,Array.from(e.childNodes).forEach(g))}return Array.from(c.childNodes).forEach(e=>{u=1,g(e)}),{text:d,entities:h.length?h:void 0}}function l(e){e.querySelectorAll("img").forEach(e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")})}},81686:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(31481);const o=1;function i(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,a.zPk);if(!t||0===t.childElementCount)return;const i=Array.from(t.children).reduce((e,t)=>t.nodeType===o&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce((e,t)=>e.concat(Number(t.dataset.messageId)),e):t.nodeType===o&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e,[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||i.pop(),i}function s(e,t){return!(e.nodeType!==o||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},81949:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(84051),o=n(87357);const i=({children:e,className:t,onClick:n,onMouseDown:i})=>a.Ay.createElement("div",{className:(0,o.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n,onMouseDown:i},e)},81954:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,H$:()=>v,_v:()=>A,o8:()=>f});var a=n(84051),o=n(13439),i=n(89925),s=n(31481),r=n(66644),c=n(29807),l=n(96454),d=n(16460),m=n(19822);let u,h,g=!1;function p(e){u=e;const t=y(e);if(e.shouldReturnMutationFn)return t;(0,r.RK)(t)}function A(){g&&((0,m.vk)(),(0,r.YS)(()=>{(0,r.RK)(y(u))}))}function y(e){const{container:t,element:n,position:p,margin:A=0,maxDistance:y=s.nxZ,forceDirection:f,forceNormalContainerHeight:v}=e;let C=e.forceDuration;f!==i.CC.Static&&(0,c.PKK)((0,o.mS)())||(C=0);const{offsetHeight:S}=n,{scrollTop:E,offsetHeight:b,scrollHeight:T}=t,R=(0,d.A)(n,t).top,N=v&&t.dataset.normalHeight?Number(t.dataset.normalHeight):b;let x;switch(p){case"start":x=R-A+(l.Ni?1:0);break;case"end":x=R+S+A-N;break;case"nearest":case"center":case"centerOrTop":x=S<N?R+S/2-N/2:R-A}const M=function(e,t,n=s.nxZ,a){const{scrollTop:o}=e;if(void 0===a){const e=t-o;if(e<-n)return o+(e+n);if(e>n)return o+(e-n)}else{if(a===i.CC.Up)return t+n;if(a===i.CC.Down)return Math.max(0,t-n)}return o}(t,x,y,f);let k=x-M;if(k<0){const e=-M;k=Math.max(k,e)}else if(k>0){const e=T-(M+N);k=Math.min(k,e)}const P=Math.abs(k);return()=>{if(P<1)return void(E!==M&&(t.scrollTop=M));const e=M+k;if(0===C)return void(t.scrollTop=e);const n=P<=s.s8T?w:I,o=C||s.SKD+P/s.nxZ*(s.OzO-s.SKD),i=Date.now();g=!0;const c=h;h=(0,a.VK)(void 0,!0),c?.(),(0,m.S0)(()=>{const a=Math.min((Date.now()-i)/o,1),s=k*(1-n(a)),r=Math.round(e-s);return t.scrollTop=r,g=a<1&&r!==e,g||(u=void 0,h?.(),h=void 0),g},r.RK)}}function f(){return g}function v(){h(),h=void 0}function w(e){return 1-(1-e)**3.5}function I(e){return 1-(1-e)**6}},83594:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(84051),o=n(90709),i=n(96454),s=n(87357),r=n(95807),c=n(62587),l=n(87412);const d="PZAuNVZH",m=(0,a.ph)(({reaction:e,isLottie:t,className:n,particleSize:m,onEnded:u})=>{const h=(0,o.aL)(e.documentId,!0),g=(0,c.A)(t?void 0:h),p=(0,a.Kr)(()=>i.ol?Array.from({length:7}).map(()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(m)):[],[m]);if(g||t)return a.Ay.createElement("div",{className:(0,s.A)("aInga6VW",n),style:(0,r.A)(Boolean(m)&&`--particle-size: ${m}px`)},p.map((n,o)=>{const i=`--offset-path: path('${n}');`;return t?a.Ay.createElement(l.A,{documentId:e.documentId,className:d,style:i,withSharedAnimation:!0,size:m,onAnimationEnd:0===o?u:void 0}):a.Ay.createElement("img",{src:g,alt:"",className:d,style:i,draggable:!1,onAnimationEnd:0===o?u:void 0})}))})},85325:(e,t,n)=>{"use strict";n.d(t,{FG:()=>u,TT:()=>h,XL:()=>d,wG:()=>m});var a=n(94697),o=n(69036),i=n(96454),s=n(80395);const r="545055439232-l17p8a5fs7b5377726doqt2cpd9qfta4.apps.googleusercontent.com",c="AIzaSyAc7yi96E4qjF16-n40wDm-Wz0MPZnLLs8",l=["openid","profile","email","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/calendar.events","https://www.googleapis.com/auth/calendar.readonly","https://www.googleapis.com/auth/calendar.events.freebusy","https://www.googleapis.com/auth/calendar.freebusy"];async function d(){return window.google?.accounts?.oauth2||await new Promise((e,t)=>{if(window.google?.accounts?.oauth2)return void e();const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.async=!0,n.defer=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load Google SDK")),document.head.appendChild(n)}),new Promise((e,t)=>{window.google.accounts.oauth2.initTokenClient({client_id:r,scope:l.join(" "),prompt:"consent",ux_mode:"popup",callback:n=>{n?.error&&t(n.error);const a={isLoggedIn:!0,accessToken:n.access_token,idToken:n.id_token,grantedScopes:n.scope,expiresAt:Date.now()+1e3*n.expires_in};(0,s.UA)(a),e(a)}}).requestAccessToken()})}const m=e=>{a.A.confirm({title:"Google authorization",content:"This service requires access to your Google Calendar.",okText:"Confirm",cancelText:"Cancel",onOk:()=>{i.cp?(console.log("window.electron",window.electron),console.log("googleLogin in preload:",window.electron?.googleLogin),window.electron.googleLogin().then(t=>{const n={isLoggedIn:!0,accessToken:t.access_token,idToken:t.id_token,grantedScopes:t.scope,expiresAt:t.expiry_date};(0,s.UA)(n),e.onOk?.(t.access_token)}).catch(e=>{console.error("Google login failed:",e),o.Ay.info("Google login failed")})):d().then(t=>{e.onOk?.(t.accessToken)}).catch(e=>{console.error("Google login failed:",e),o.Ay.info("Google login failed")})},onCancel:e?.onCancel})},u=({title:e="Meeting Invitation",startDate:t,endDate:n,selectedTimezone:a=Intl.DateTimeFormat().resolvedOptions().timeZone,emails:o=[],googleToken:i})=>new Promise((s,r)=>{const l=o.map(e=>({email:e})),d={summary:e,start:{dateTime:new Date(t),timeZone:a},end:{dateTime:new Date(n),timeZone:a},attendees:l,reminders:{useDefault:!1,overrides:[{method:"email",minutes:30},{method:"popup",minutes:10}]},conferenceData:{createRequest:{requestId:`test-${Date.now()}`,conferenceSolutionKey:{type:"hangoutsMeet"}}}};fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?conferenceDataVersion=1&alt=json&key=${c}`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:JSON.stringify(d)}).then(e=>e.json()).then(e=>{s(e)}).catch(e=>{r(e)})}),h=()=>{const e=(0,s.IM)();return new Promise((t,n)=>{const a={timeMin:(new Date).toISOString(),timeMax:new Date(Date.now()+2592e5).toISOString(),items:[{id:"primary"}]};fetch(`https://www.googleapis.com/calendar/v3/freeBusy?key=${c}`,{method:"POST",headers:{Authorization:`Bearer ${e?.accessToken}`},body:JSON.stringify(a)}).then(e=>e.json()).then(e=>{t(e?.calendars.primary.busy||[])}).catch(e=>{n(e)})})}},86046:(e,t,n)=>{"use strict";n.d(t,{D5:()=>m,HT:()=>s,M6:()=>d,Pc:()=>r,ZF:()=>l,hk:()=>c,j6:()=>u,jA:()=>i});var a=n(5930),o=n(29807);function i(e,t){if("slug"===t.type)return t;if("stargift"===t.type){const{peerId:n,shouldHideName:a,giftId:i,message:s,shouldUpgrade:r}=t,c=(0,o.PVB)(e,n);if(!c)return;return{type:"stargift",peer:c,shouldHideName:a,giftId:i,message:s,shouldUpgrade:r}}if("starsgift"===t.type){const{userId:n,stars:a,amount:i,currency:s}=t,r=(0,o.mBe)(e,n);if(!r)return;return{type:"stars",purpose:{type:"starsgift",user:r,stars:a,amount:i,currency:s}}}if("stars"===t.type){const{stars:e,amount:n,currency:a}=t;return{type:"stars",purpose:{type:"stars",stars:e,amount:n,currency:a}}}if("chatInviteSubscription"===t.type){const{hash:e}=t;return{type:"chatInviteSubscription",hash:e}}if("message"===t.type){const n=(0,o.hds)(e,t.chatId);if(!n)return;return{type:"message",chat:n,messageId:t.messageId}}if("premiumGiftStars"===t.type){const{months:n,userId:a,message:i}=t,s=(0,o.mBe)(e,a);if(!s)return;return{type:"premiumGiftStars",months:n,message:i,user:s}}if("giftcode"===t.type){const{userIds:n,boostChannelId:a,amount:i,currency:s,option:r,message:c}=t;return{type:"giveaway",option:r,purpose:{type:"giftcode",amount:i,currency:s,users:n.map(t=>(0,o.mBe)(e,t)).filter(Boolean),boostChannel:a?(0,o.hds)(e,a):void 0,message:c}}}if("starsgiveaway"===t.type){const{chatId:n,additionalChannelIds:a,amount:i,currency:s,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:m,stars:u,users:h}=t,g=(0,o.hds)(e,n);if(!g)return;const p=a?.map(t=>(0,o.hds)(e,t)).filter(Boolean);return{type:"starsgiveaway",purpose:{type:"starsgiveaway",amount:i,currency:s,chat:g,additionalChannels:p,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:m,stars:u,users:h}}}if("giveaway"===t.type){const{chatId:n,additionalChannelIds:a,amount:i,currency:s,option:r,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:m,prizeDescription:u}=t,h=(0,o.hds)(e,n);if(!h)return;const g=a?.map(t=>(0,o.hds)(e,t)).filter(Boolean);return{type:"giveaway",option:r,purpose:{type:"giveaway",amount:i,currency:s,chat:h,additionalChannels:g,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:m,prizeDescription:u}}}if("stargiftUpgrade"===t.type){const{inputSavedGift:n,shouldKeepOriginalDetails:a}=t,o=s(e,n);if(!o)return;return{type:"stargiftUpgrade",inputSavedGift:o,shouldKeepOriginalDetails:a}}if("stargiftTransfer"===t.type){const{inputSavedGift:n,recipientId:a}=t,i=s(e,n),r=(0,o.PVB)(e,a);if(!i||!r)return;return{type:"stargiftTransfer",inputSavedGift:i,recipient:r}}}function s(e,t){if("user"===t.type)return t;if("chat"===t.type){const n=(0,o.hds)(e,t.chatId);if(!n)return;return{type:"chat",chat:n,savedId:t.savedId}}}function r(e){return"appStore"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.AppleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.AppleTopUp.Subtitle",peerColorId:5}:"playMarket"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.GoogleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.GoogleTopUp.Subtitle",peerColorId:3}:"fragment"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.FragmentTopUp.Title",subtitleKey:"Stars.Intro.Transaction.FragmentTopUp.Subtitle",customPeerAvatarColor:"#000000"}:"premiumBot"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Title",subtitleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Subtitle",peerColorId:1,withPremiumGradient:!0}:"ads"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramAds.Title",subtitleKey:"Stars.Intro.Transaction.TelegramAds.Subtitle",peerColorId:2}:"api"===e.type?{avatarIcon:"bots",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramBotApi.Title",subtitleKey:"Stars.Intro.Transaction.TelegramBotApi.Subtitle",peerColorId:4}:{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.Unsupported.Title",subtitleKey:"Stars.Intro.Transaction.Unsupported.Title",peerColorId:0}}function c(e,t){const n=t.amount+t.nanos/1e9;return n<0?`- ${e.number(Math.abs(n))}`:`+ ${e.number(n)}`}function l(e,t){return e.number(t.amount+t.nanos/1e9)}function d(e){const{action:t}=e.content;if("giftStars"!==t?.type)return;const{transactionId:n,stars:a}=t;return{id:n,stars:{amount:a,nanos:0},peer:{type:"peer",id:e.isOutgoing?e.chatId:e.senderId||e.chatId},date:e.date,isGift:!0,isMyGift:e.isOutgoing||void 0}}function m(e){const{action:t}=e.content;if("prizeStars"!==t?.type)return;const{transactionId:n,stars:a,boostPeerId:o}=t;return{id:n,stars:{amount:a,nanos:0},peer:{type:"peer",id:o},date:e.date,giveawayPostId:e.id}}function u(e,t){return(0,a.A)(e,t)}},92358:(e,t,n)=>{"use strict";e.exports=n.p+"ai-search-tab.16944474031c27b005e3.png"},92915:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var a=n(84051),o=n(13439),i=n(87357),s=n(76023),r=n(10722),c=n(37661),l=n(17712),d=n(59030),m=n(11241),u=n(64493),h=n(40664),g=n(8410);const p=(0,a.ph)(({isOpen:e,title:t,subtitle:n,placeholder:o,submitText:i,maxLength:s,initialValue:r="",onClose:c,onSubmit:m})=>{const p=(0,d.A)(),[A,y]=(0,a.J0)(r),f=(0,l.A)(e=>{y(e.target.value)}),v=(0,l.A)(()=>{m(A)});return a.Ay.createElement(g.A,{className:"narrow",title:t,isOpen:e,onClose:c,isSlim:!0},Boolean(n)&&a.Ay.createElement("div",{className:"cGrbcqD_"},n),a.Ay.createElement(h.A,{placeholder:o,value:A,onChange:f,maxLength:s,teactExperimentControlled:!0}),a.Ay.createElement("div",{className:"dialog-buttons mt-2"},a.Ay.createElement(u.A,{className:"confirm-dialog-button",onClick:v},i||p("Save")),a.Ay.createElement(u.A,{className:"confirm-dialog-button",isText:!0,onClick:c},p("Cancel"))))});var A=n(71429),y=n(24433),f=n(69988);const v=1.25*s.$,w=(0,a.ph)(({reaction:e,tag:t,containerId:n,isChosen:s,isOwnMessage:h,className:g,chosenClassName:w,withCount:I,isDisabled:C,withContextMenu:S,observeIntersection:E,onClick:b,onRemove:T})=>{const{editSavedReactionTag:R}=(0,o.ko)(),N=(0,a.li)(null),x=(0,a.li)(null),M=(0,d.A)(),[k,P,D]=(0,c.A)(),{title:O,count:L}=t||{},F=Boolean(O||I&&L),B=(0,l.A)(()=>{b?.(e)}),$=(0,l.A)(()=>{T?.(e)}),_=(0,l.A)(t=>{R({reaction:e,title:t}),D()}),{isContextMenuOpen:K,contextMenuAnchor:U,handleBeforeContextMenu:z,handleContextMenu:j,handleContextMenuClose:J,handleContextMenuHide:G}=(0,r.A)(N,!S,void 0,void 0,void 0,!0),H=(0,l.A)(()=>N.current),q=(0,l.A)(()=>document.body),V=(0,l.A)(()=>x.current),W=(0,l.A)(()=>({withPortal:!0,shouldAvoidNegativePosition:!0}));if(!I||0!==L)return a.Ay.createElement(u.A,{className:(0,i.A)(f.A.root,f.A.tag,h&&f.A.own,s&&f.A.chosen,s&&w,C&&f.A.disabled,g),size:"tiny",onClick:B,onMouseDown:z,onContextMenu:j,ref:N},a.Ay.createElement(m.A,{className:f.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:v,observeIntersection:E}),F&&a.Ay.createElement("span",{className:f.A.tagText},O&&a.Ay.createElement("span",null,O),I&&a.Ay.createElement("span",null,L)),a.Ay.createElement("svg",{className:f.A.tail,width:"15",height:"30",viewBox:"0 0 15 30"},a.Ay.createElement("path",{className:f.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})),S&&a.Ay.createElement(p,{isOpen:k,maxLength:15,title:M(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:M("SavedTagLabelTagText"),placeholder:M("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:D,onSubmit:_}),S&&U&&a.Ay.createElement(A.A,{ref:x,isOpen:K,anchor:U,getTriggerElement:H,getRootElement:q,getMenuElement:V,getLayout:W,autoClose:!0,withPortal:!0,onClose:J,onCloseAnimationEnd:G},a.Ay.createElement(y.A,{icon:"tag-filter",onClick:B},M("SavedTagFilterByTag")),a.Ay.createElement(y.A,{icon:"tag-name",onClick:P},M(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")),a.Ay.createElement(y.A,{icon:"tag-crossed",destructive:!0,onClick:$},M("SavedTagRemoveTag"))))})},93879:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},98196:()=>{},99515:(e,t,n)=>{"use strict";n.d(t,{A:()=>se});var a=n(84051),o=n(13439),i=n(23174),s=n(31481),r=n(90709),c=n(29807),l=n(87357),d=n(85982),m=n(7971),u=n(81120),h=n(85325),g=n(80395),p=n(10858),A=n(60160),y=n(80539);const f=document.createElement("div"),v=new Set([i.C7.Bold,i.C7.Italic,i.C7.Underline,i.C7.Strike,i.C7.Spoiler,i.C7.CustomEmoji]);function w(e){const t=function(e){const t=e.cloneContents();f.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let a=e.commonAncestorContainer.parentElement;for(;a&&!a.classList.contains("text-content");){const e=a.tagName.toLowerCase(),n=a.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,a=a.parentElement}return t}(e,f.innerHTML);return f.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter(e=>v.has(e.type));return{...e,entities:t.length?t:void 0}}((0,y.Ay)(t,!1,!0))}var I=n(37661),C=n(17712),S=n(59030),E=n(24531),b=n(21511),T=n(72531),R=n(80089),N=n(80464);const x=e=>{const{isOpen:t}=e,n=(0,N.A)(R.ar.Extra,"PinMessageModal",!t);return n?a.Ay.createElement(n,e):void 0};var M=n(94189),k=n(73104),P=n(8235),D=n(48799),O=n(76023),L=n(4961),F=n(17965),B=n.n(F),$=n(3544),_=n(96454),K=n(81686),U=n(58554),z=n(49086);function j(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var J=n(43874),G=n(26875),H=n(71429),q=n(24433),V=n(60859),W=n(55158),Z=n(17663);const Y="C3LVl_JT",X="cd1ZZeSy",Q=(0,a.ph)(function({message:e}){const t=(0,S.A)(),{editDate:n}=e,o=!n;return a.Ay.createElement(q.A,{icon:"clock-edit",className:Y},o?a.Ay.createElement(W.A,{className:X}):Boolean(n)&&t("Chat.PrivateMessageEditTimestamp.Date",(0,Z.U)(t,1e3*n)))});var ee=n(76283),te=n(41036);const ne=(0,a.ph)(function({message:e,shouldRenderShowWhen:t,canLoadReadDate:n,closeContextMenu:i}){const{openPrivacySettingsNoticeModal:s}=(0,o.ko)(),r=(0,S.A)(),{readDate:c}=e,l=n&&!c&&!t;return a.Ay.createElement(q.A,{icon:"message-read",className:Y},a.Ay.createElement(te.Ay,{name:"fade",activeKey:l?1:2,className:"mg4sBQ9n"},l?a.Ay.createElement(W.A,{className:X}):a.Ay.createElement(a.Ay.Fragment,null,Boolean(c)&&r("PmReadAt",(0,Z.U)(r,1e3*c)),!c&&t&&a.Ay.createElement("div",null,r("PmRead"),a.Ay.createElement("span",{className:"bmxij_dk",onClick:()=>{i(),s({chatId:e.chatId,isReadDate:!0})}},r("PmReadShowWhen"))))))}),ae=(0,a.ph)(({isReactionPickerOpen:e,availableReactions:t,topReactions:n,defaultTagReactions:s,isOpen:u,message:h,poll:g,story:p,isPrivate:A,isCurrentUserPremium:y,enabledReactions:f,isWithPaidReaction:v,reactionsLimit:w,anchor:E,targetHref:b,canSendNow:T,canReschedule:R,canBuyPremium:N,canReply:x,canSmartReply:M,canScheduleMeeting:F,canQuote:Z,canEdit:Y,noReplies:X,canPin:te,canUnpin:ae,canDelete:oe,canForward:ie,canReport:se,canFaveSticker:re,canUnfaveSticker:ce,canCopy:le,canCopyLink:de,canSelect:me,canDownload:ue,canSaveGif:he,canRevote:ge,canClosePoll:pe,canTranslate:Ae,canShowOriginal:ye,canSelectLanguage:fe,isDownloading:ve,repliesThreadInfo:we,canShowSeenBy:Ie,canShowReactionsCount:Ce,canShowReactionList:Se,seenByRecentPeers:Ee,hasCustomEmoji:be,customEmojiSets:Te,canPlayAnimatedEmojis:Re,isInSavedMessages:Ne,shouldRenderShowWhen:xe,canLoadReadDate:Me,onReply:ke,onSmartReply:Pe,onScheduleMeet:De,onOpenThread:Oe,onEdit:Le,onPin:Fe,onUnpin:Be,onForward:$e,onDelete:_e,onFaveSticker:Ke,onReport:Ue,onUnfaveSticker:ze,onSelect:je,onSend:Je,onReschedule:Ge,onClose:He,onCloseAnimationEnd:qe,onCopyLink:Ve,onCopyNumber:We,onDownload:Ze,onSaveGif:Ye,onCancelVote:Xe,onClosePoll:Qe,onShowSeenBy:et,onShowReactors:tt,onToggleReaction:nt,onSendPaidReaction:at,onShowPaidReactionModal:ot,onCopyMessages:it,onReactionPickerOpen:st,onTranslate:rt,onShowOriginal:ct,onSelectLanguage:lt,onSummarize:dt,userFullName:mt,canGift:ut})=>{const{showNotification:ht,openStickerSet:gt,openCustomEmojiSets:pt,loadStickers:At,openGiftModal:yt}=(0,o.ko)(),ft=(0,a.li)(null),vt=(0,a.li)(null),wt=(0,S.A)(),It=!A&&!f,Ct=h.areReactionsPossible,St=Se&&!It||Ct,Et="isEdited"in h&&h.isEdited,bt=h.seenByDates,Tt="giftPremium"===h.content.action?.type,Rt="giftCode"===h.content.action?.type,Nt="starGift"===h.content.action?.type,xt="starGiftUnique"===h.content.action?.type,Mt=(0,r.L8)(h.chatId)&&ut&&(Tt||Rt||Nt||xt),kt=(0,m.aT)(h),Pt=kt||F||M,[Dt,Ot]=(0,I.A)(),[Lt,Ft,Bt]=(0,I.A)(),{isMobile:$t,isDesktop:_t}=(0,J.Ay)(),Kt=(0,a.Kr)(()=>bt?Object.keys(bt).length:0,[bt]),Ut=(0,C.A)(()=>{ht({message:wt("Share.Link.Copied")}),He()}),zt=(0,C.A)(()=>{yt({forUserId:h.chatId}),He()});(0,a.vJ)(()=>{u&&Dt&&!e&&He()},[He,u,e,Dt]),(0,a.vJ)(()=>{Te?.length&&Te.map(e=>At({stickerSetInfo:{id:e.id,accessHash:e.accessHash}}))},[Te,pt]);const jt=(0,C.A)(()=>{Te&&(1===Te.length?gt({stickerSetInfo:{shortName:Te[0].shortName}}):pt({setIds:Te.map(e=>e.id)}),He())}),Jt=function(e,t,n,a,s,l,m,u){const h=[],g=(0,r.P5)(e),p=(0,r.yl)(e)||((0,r.QC)(e)?void 0:(0,r.dc)(e)),A=(0,r.Qm)(e),y=p?(0,r.rI)(p,"full"):void 0,f=a&&p&&(y||(0,r.KG)(p))&&d.WO&&!_.Yw,v=window.getSelection();if(f&&h.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(y?U.hd(y,i.qZ.BlobUrl):p.blobUrl).then(d.qp),s?.()}}),a&&n)h.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,d.eM)(n),s?.()}});else if(a&&g){const n=Boolean(v?.anchorNode?.parentNode&&v.anchorNode.parentNode.closest(".Message .content-inner")&&""!==v.toString().replace(/(?:\r\n|\r|\n)/g,"")&&function(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,a=n?.closest(".Message.message-list-item");return(0,r.GZ)(e.id)===a?.id}(e)),a=(0,o.mS)(),{id:i,chatId:l}=e,u=(0,c.RnX)(a,l),{autoTranslateLanguage:g}=a.settings.byKey,p=g&&i?u?.byLangCode[g]?.[i]:void 0,{isPending:A,text:y}=p||{};y&&!A?h.push({label:j(n),icon:"copy",handler:()=>{n?document.execCommand("copy"):B()(y.text),s?.()}}):h.push({label:j(n),icon:"copy",handler:()=>{const a=(0,K.A)();if(a?.length&&m)m(a);else if(n)document.execCommand("copy");else{const n=(0,z.V)({message:e,shouldRenderAsHtml:!0});n&&(0,d.A)(n.join(""),(0,$.Gn)(e,t))}s?.()}})}return l&&h.push({label:"lng_context_copy_message_link",icon:"link",handler:l}),A&&u&&h.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{u(),s?.()}}),h}(h,(0,r.FE)({poll:g,story:p}),b,le,Ut,de?Ve:void 0,it,We),Gt=(0,C.A)(()=>document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id="${h.id}"]`)),Ht=(0,C.A)(()=>document.querySelector(".Transition_slide-active > .MessageList")),qt=(0,C.A)(()=>document.querySelector(".MessageContextMenu .bubble")),Vt=(0,C.A)(()=>{const e=$t&&document.querySelector(".AudioPlayer-content")?.offsetHeight||0,t=document.getElementById("MiddleColumn"),n=getComputedStyle(t),a=parseFloat(n.getPropertyValue("--middle-header-panes-height"))||0;return{extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,extraMarginTop:a+e,shouldAvoidNegativePosition:!_t,menuElMinWidth:St&&$t?19.25*O.$:void 0}});(0,a.vJ)(()=>{u?setTimeout(()=>{Ft()},200):Bt()},[u,Ft,Bt]),(0,a.vJ)(()=>(0,k.M6)(vt.current,".ReactionPicker"),[u]);const Wt=(0,C.A)(e=>{st(e),Ot()});return a.Ay.createElement(H.A,{ref:ft,isOpen:u,anchor:E,getTriggerElement:Gt,getRootElement:Ht,getMenuElement:qt,getLayout:Vt,withMaxHeight:!0,className:(0,l.A)("MessageContextMenu","fluid",St&&"with-reactions"),onClose:He,onCloseAnimationEnd:qe},St&&a.Ay.createElement(ee.A,{enabledReactions:f,topReactions:n,allAvailableReactions:t,defaultTagReactions:s,currentReactions:h.reactions?.results,reactionsLimit:w,onToggleReaction:nt,onSendPaidReaction:at,onShowPaidReactionModal:ot,isWithPaidReaction:v,isPrivate:A,isReady:Lt,canBuyPremium:N,isCurrentUserPremium:y,isInSavedMessages:Ne,canPlayAnimatedEmojis:Re,onShowMore:Wt,onClose:He,className:(0,l.A)(Dt&&"ReactionSelector-hidden")}),a.Ay.createElement("div",{ref:vt,className:(0,l.A)("MessageContextMenu_items scrollable-content custom-scroll",Dt&&"MessageContextMenu_items-hidden"),dir:wt.isRtl?"rtl":void 0},Mt&&a.Ay.createElement(q.A,{icon:"gift",onClick:zt},h?.isOutgoing?wt("SendAnotherGift"):wt("Conversation.ContextMenuSendGiftTo",mt)),T&&a.Ay.createElement(q.A,{icon:"send-outline",onClick:Je},wt("MessageScheduleSend")),R&&a.Ay.createElement(q.A,{icon:"schedule",onClick:Ge},wt("MessageScheduleEditTime")),Pt&&a.Ay.createElement(q.A,{customIcon:a.Ay.createElement("img",{src:P,className:"w-[20px] h-[20px] mr-[1.25rem] ml-[0.5rem]",alt:""}),submenu:a.Ay.createElement(a.Ay.Fragment,null,F&&a.Ay.createElement(q.A,{customIcon:a.Ay.createElement("div",{className:"mr-[1.25rem]"},a.Ay.createElement(D.Nn,null)),onClick:De},wt("Schedule Meeting")),kt&&a.Ay.createElement(q.A,{customIcon:a.Ay.createElement("div",{className:"mr-[1.25rem]"},a.Ay.createElement(D.hD,null)),onClick:dt},wt("Summarize")),M&&a.Ay.createElement(q.A,{customIcon:a.Ay.createElement("div",{className:"mr-[1.25rem]"},a.Ay.createElement(D.o9,null)),onClick:Pe},wt("AI Reply")))},wt("SerenaAI")),x&&a.Ay.createElement(q.A,{icon:"reply",onClick:ke},wt(Z?"lng_context_quote_and_reply":"Reply")),!X&&Boolean(we?.messagesCount)&&a.Ay.createElement(q.A,{icon:"replies",onClick:Oe},wt("Conversation.ContextViewReplies",we.messagesCount,"i")),Y&&a.Ay.createElement(q.A,{icon:"edit",onClick:Le},wt("Edit")),re&&a.Ay.createElement(q.A,{icon:"favorite",onClick:Ke},wt("AddToFavorites")),ce&&a.Ay.createElement(q.A,{icon:"favorite",onClick:ze},wt("Stickers.RemoveFromFavorites")),Ae&&a.Ay.createElement(q.A,{icon:"language",onClick:rt},wt("TranslateMessage")),ye&&a.Ay.createElement(q.A,{icon:"language",onClick:ct},wt("ShowOriginalButton")),fe&&a.Ay.createElement(q.A,{icon:"web",onClick:lt},wt("lng_settings_change_lang")),Jt.map(e=>a.Ay.createElement(q.A,{key:e.label,icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0},wt(e.label))),te&&a.Ay.createElement(q.A,{icon:"pin",onClick:Fe},wt("DialogPin")),ae&&a.Ay.createElement(q.A,{icon:"unpin",onClick:Be},wt("DialogUnpin")),he&&a.Ay.createElement(q.A,{icon:"gifs",onClick:Ye},wt("lng_context_save_gif")),ge&&a.Ay.createElement(q.A,{icon:"revote",onClick:Xe},wt("lng_polls_retract")),pe&&a.Ay.createElement(q.A,{icon:"stop",onClick:Qe},wt("lng_polls_stop")),ue&&a.Ay.createElement(q.A,{icon:"download",onClick:Ze},wt(ve?"lng_context_cancel_download":"lng_media_download")),ie&&a.Ay.createElement(q.A,{icon:"forward",onClick:$e},wt("Forward")),me&&a.Ay.createElement(q.A,{icon:"select",onClick:je},wt("Common.Select")),se&&a.Ay.createElement(q.A,{icon:"flag",onClick:Ue},wt("lng_context_report_msg")),oe&&a.Ay.createElement(q.A,{destructive:!0,icon:"delete",onClick:_e},wt("Delete")),be&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(V.A,{size:"thick"}),!Te&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(W.A,{inline:!0,className:"menu-loading-row"}),a.Ay.createElement(W.A,{inline:!0,className:"menu-loading-row"})),Te&&1===Te.length&&a.Ay.createElement(q.A,{withWrap:!0,onClick:jt,className:"menu-custom-emoji-sets"},(0,L.A)(wt("MessageContainsEmojiPack",Te[0].title),["simple_markdown","emoji"])),Te&&Te.length>1&&a.Ay.createElement(q.A,{withWrap:!0,onClick:jt,className:"menu-custom-emoji-sets"},(0,L.A)(wt("MessageContainsEmojiPacks",Te.length),["simple_markdown"]))),(Ie||Ce)&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(V.A,{size:be?"thin":"thick"}),a.Ay.createElement(q.A,{icon:Ce?"heart-outline":"group",onClick:Ce?tt:et,disabled:!Ce&&!Kt},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label-wrapper"},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label",dir:wt.isRtl?"rtl":void 0},Ce&&h.reactors?.count?Ie&&Kt?wt("Chat.OutgoingContextMixedReactionCount",[h.reactors.count,Kt]):wt("Chat.ContextReactionCount",h.reactors.count,"i"):1===Kt&&Ee?(0,L.A)((0,r.L8)(Ee[0].id)?(0,r.Yg)(Ee[0]):Ee[0].title):Kt?wt("Conversation.ContextMenuSeen",Kt,"i"):wt("Conversation.ContextMenuNoViews"))),a.Ay.createElement(G.A,{className:"avatars",size:"micro",peers:Ee}))),(Me||xe||Et)&&a.Ay.createElement(V.A,{size:be?"thin":"thick"}),(Me||xe)&&a.Ay.createElement(ne,{canLoadReadDate:Me,shouldRenderShowWhen:xe,message:h,closeContextMenu:He}),Et&&a.Ay.createElement(Q,{message:h})))}),oe=window.getSelection(),ie=-1,se=(0,a.ph)((0,o.EK)((e,{message:t,messageListType:n,detectedLanguage:a})=>{const{threadId:o}=(0,c.Xf0)(e)||{},{defaultTags:i,topReactions:l,availableReactions:d}=e.reactions,m=(0,c.yuw)(e),u=(0,c.hds)(e,t.chatId),h=u&&(0,r.L8)(u.id),g=h?void 0:(0,c.AWZ)(e,t.chatId),p=(0,c.mBe)(e,t.chatId),A=p&&(0,r.Yg)(p),{seenByExpiresAt:y,seenByMaxChatMembers:f,maxUniqueReactions:v,readDateExpiresAt:w}=e.appConfig||{},I=g?.reactionsLimit||v,{noOptions:C,canReplyGlobally:S,canPin:E,canUnpin:b,canDelete:T,canReport:R,canEdit:N,canFaveSticker:x,canUnfaveSticker:M,canCopy:k,canCopyLink:P,canSelect:D,canDownload:O,canSaveGif:L,canRevote:F,canClosePoll:B}=o&&(0,c.WAX)(e,t,o)||{},$=(0,c.R4s)(e,t),_=h?(0,c.K0y)(e,u.id):void 0,K=(0,r.Ie)(t),U=u&&(0,c.yps)(e,u.id),z=Boolean(U),j=(0,c.Jbz)(e,t),J=Boolean(h&&K&&!z&&!j&&w&&t.date>Date.now()/1e3-w&&!_?.isReadDateRestricted&&"scheduled"!==n),G=Boolean(J&&h&&(0,c.K0y)(e,u.id)?.isReadDateRestrictedByMe),H="pinned"===n,q="scheduled"===n,V=u&&(0,r.WX)(u),W=o&&(0,c.Vw0)(e,t.chatId,o),Z=Boolean(W&&!W?.isCommentsInfo&&W?.fromChannelId),Y=o?(0,c.S0q)(e,t.chatId,o):void 0,X=u&&!(0,r.Sq)(u,"sendPlain",g),Q=!(!u||!o)&&(0,r.__)(u,Y,Z,g)&&X,ee=(0,r.Nb)(t),te=(0,r.G5)(t),ne=Boolean(!ee&&u&&!j&&f&&y&&(0,r.YE)(u)&&K&&!q&&u.membersCount&&u.membersCount<=f&&t.date>Date.now()/1e3-y),ae=(0,r._P)(t),oe=!ee&&!V&&!q&&!ae&&!h&&t.reactions&&!(0,r.G)(t.reactions)&&t.reactions.canSeeList,ie=(0,c.ynf)(e,t),se=Boolean(t.content.contact),re=(0,c.g29)(e),ce=(0,c.S1W)(e,t),le=ce?.map(t=>(0,c.ycM)(e,t)),de=le?.every(Boolean)?le:void 0,me=(0,c.Rny)(e,t.chatId,t.id),ue=me?Boolean((0,c.a_$)(e,t.chatId,me)[t.id]?.text):void 0,he=!ue&&(0,c.S86)(e,t,a),ge=(0,c.qZq)(e,t.chatId),pe=(0,c.nZ4)(e,t.chatId),Ae=(0,c.zcZ)(e,t),ye=t.content.storyData,fe=ye?(0,c.Msb)(e,ye.peerId,ye.id):void 0,ve=(0,c.X2D)(e,t.chatId),we=(0,r.XR)(t);return{threadId:o,chat:u,availableReactions:d,topReactions:l,defaultTagReactions:i,noOptions:C,canReport:R,canSendNow:q,canReschedule:q,canReply:!H&&!q&&S,canSmartReply:!H&&!q&&S&&X&&we,canScheduleMeeting:!K&&we,canPin:!q&&E,canUnpin:!q&&b,canDelete:T,canEdit:!H&&N,canForward:!q&&$,canFaveSticker:!q&&x,canUnfaveSticker:!q&&M,canCopy:se||!ie&&k,canCopyLink:!q&&P,canSelect:D,canDownload:!ie&&O,canSaveGif:!ie&&L,canRevote:F,canClosePoll:!q&&B,activeDownloads:m,canShowSeenBy:ne,canLoadReadDate:J,shouldRenderShowWhen:G,enabledReactions:u?.isForbidden?void 0:g?.enabledReactions,reactionsLimit:I,isPrivate:h,isCurrentUserPremium:re,hasFullInfo:Boolean(g),canShowReactionsCount:oe,canShowReactionList:!(ee||ae||q||u?.id===s.zv8||te),canBuyPremium:!re&&!(0,c.n_C)(e),customEmojiSetsInfo:ce,customEmojiSets:de,canScheduleUntilOnline:(0,c.RBq)(e,t.chatId),canTranslate:he,canShowOriginal:ue&&!ge,canSelectLanguage:ue&&!ge,isMessageTranslated:ue,canPlayAnimatedEmojis:(0,c.BWX)(e),isReactionPickerOpen:(0,c.Ani)(e),isInSavedMessages:pe,isChannel:V,canReplyInChat:Q,isWithPaidReaction:g?.isPaidReactionAvailable,poll:Ae,story:fe,userFullName:A,canGift:ve}})(({threadId:e,availableReactions:t,topReactions:n,defaultTagReactions:c,isOpen:y,messageListType:f,message:v,customEmojiSetsInfo:R,customEmojiSets:N,album:k,poll:P,story:D,anchor:O,targetHref:L,noOptions:F,canSendNow:B,hasFullInfo:$,canReschedule:_,canReply:K,canSmartReply:U,canScheduleMeeting:z,canPin:j,repliesThreadInfo:J,canUnpin:G,canDelete:H,canShowReactionsCount:q,chat:V,canReport:W,canShowReactionList:Z,canEdit:Y,enabledReactions:X,reactionsLimit:Q,isPrivate:ee,isCurrentUserPremium:te,canForward:ne,canBuyPremium:se,canFaveSticker:re,canUnfaveSticker:ce,canCopy:le,canCopyLink:de,canSelect:me,canDownload:ue,canSaveGif:he,canRevote:ge,canClosePoll:pe,canPlayAnimatedEmojis:Ae,canLoadReadDate:ye,shouldRenderShowWhen:fe,activeDownloads:ve,noReplies:we,canShowSeenBy:Ie,canScheduleUntilOnline:Ce,canTranslate:Se,isMessageTranslated:Ee,canShowOriginal:be,canSelectLanguage:Te,isReactionPickerOpen:Re,isInSavedMessages:Ne,canReplyInChat:xe,isWithPaidReaction:Me,userFullName:ke,canGift:Pe,className:De,onClose:Oe,onCloseAnimationEnd:Le})=>{const{openThread:Fe,updateDraftReplyInfo:Be,setEditingId:$e,pinMessage:_e,openForwardMenu:Ke,openReplyMenu:Ue,faveSticker:ze,unfaveSticker:je,toggleMessageSelection:Je,sendScheduledMessages:Ge,rescheduleMessage:He,downloadMedia:qe,cancelMediaDownload:Ve,loadSeenBy:We,openSeenByModal:Ze,openReactorListModal:Ye,loadFullChat:Xe,loadReactors:Qe,copyMessagesByIds:et,saveGif:tt,loadStickers:nt,cancelPollVote:at,closePoll:ot,toggleReaction:it,requestMessageTranslation:st,showOriginalMessage:rt,openChatLanguageModal:ct,openMessageReactionPicker:lt,openPremiumModal:dt,loadOutboxReadDate:mt,copyMessageLink:ut,openDeleteMessageModal:ht,addLocalPaidReaction:gt,openPaidReactionModal:pt,reportMessages:At,openChatAIWithInfo:yt}=(0,o.ko)(),ft=(0,S.A)(),{ref:vt}=(0,b.A)({isOpen:y,onCloseAnimationEnd:Le,className:!1}),[wt,It]=(0,a.J0)(!0),[Ct,St]=(0,a.J0)(!1),[Et,bt,Tt]=(0,I.A)(),[Rt,Nt]=(0,a.J0)(ie),[xt,Mt]=(0,E.A)(Ce,Oe,v.date),kt=void 0===R||Boolean(R.length);(0,a.vJ)(()=>{Ie&&y&&We({chatId:v.chatId,messageId:v.id})},[We,y,v.chatId,v.id,Ie]),(0,a.vJ)(()=>{ye&&y&&mt({chatId:v.chatId,messageId:v.id})},[ye,y,v.chatId,v.id,v.readDate]),(0,a.vJ)(()=>{q&&y&&Qe({chatId:v.chatId,messageId:v.id})},[q,y,Qe,v.chatId,v.id]),(0,a.vJ)(()=>{R?.length&&N?.length!==R.length&&R.forEach(e=>{nt({stickerSetInfo:e})})},[R,N,nt]),(0,a.vJ)(()=>{$||ee||!y||Xe({chatId:v.chatId})},[$,y,ee,Xe,v.chatId]);const Pt=(0,a.Kr)(()=>{const e=(0,o.mS)().chats.byId,t=(0,o.mS)().users.byId;if(v.reactions?.recentReactions?.length){const n=new Set(v.reactions?.recentReactions?.map(({peerId:n})=>t[n]||e[n]));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(v.seenByDates)return Object.keys(v.seenByDates).slice(0,s.dqH).map(n=>t[n]||e[n]).filter(Boolean)},[v.reactions?.recentReactions,v.seenByDates]),Dt=(0,a.Kr)(()=>{if(k)return k.messages.some(e=>{const t=(0,r.ed)(e);return!!t&&(0,r.$r)(ve,t)});const e=(0,r.ed)(v);return!!e&&(0,r.$r)(ve,e)},[ve,k,v]),Ot=K&&oe?.rangeCount?oe.getRangeAt(0):void 0;(0,a.vJ)(()=>{if(Ee)return void Nt(ie);if(!Ot||Ot.collapsed||!Boolean(v.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(Ot))return void Nt(ie);const e=w(Ot),t=v.content.text.text.replace(/\u00A0/g," ");e.text.trim().length>0&&t.includes(e.text)?Nt(Ot.startOffset):Nt(ie)},[Ot,Ot?.collapsed,Ot?.startOffset,Ot?.endOffset,Ee,v.content.text]);const Lt=(0,C.A)(()=>{It(!1),Oe()}),Ft=(0,C.A)(()=>{It(!1),Lt();const e=k?.messages?k.messages.map(({id:e})=>e):[v.id];ht({chatId:v.chatId,messageIds:e,isSchedule:"scheduled"===f})}),Bt=(0,C.A)(()=>{St(!1),Oe()}),$t=(0,C.A)(()=>{const e=Rt!==ie&&Ot?w(Ot):void 0;xe?Be({replyToMsgId:v.id,quoteText:e,quoteOffset:Rt,replyToPeerId:void 0}):Ue({fromChatId:v.chatId,messageId:v.id,quoteText:e,quoteOffset:Rt}),Lt()}),_t=(0,C.A)(async()=>{if(Lt(),v.content.text?.text){Be({replyToMsgId:v.id,replyToPeerId:void 0,quoteText:void 0,quoteOffset:void 0});const e=(await A.Xt.similaritySearch({query:v.content.text?.text})).similarItems[0];e&&e.score>.8?T.A.emit("update-input-text",e.metadata.answer):(T.A.emit("update-input-spiner",!0),(0,u.g4)({data:{messages:[{role:"system",content:"你是一个多语种智能助手。接收用户消息后，自动识别其使用的语言，并用相同的语言进行自然、得体的回复。你应该理解消息的语境，确保回复简洁、友好且符合语言习惯。",id:"1"},{role:"user",content:`请回复下面的消息: ${v.content.text?.text}`,id:"2"}]},onResponse:e=>{T.A.emit("update-input-text",e)},onFinish:()=>{console.log("Finish")}}))}}),Kt=(0,C.A)(()=>{const e=v.chatId,t=(0,r.r_)(v)?.text?.text||"",n=p.A.create({chatId:e}),a=(0,g.IM)();a&&(0,g.G6)(a)?n.start({chatId:e,text:t}):(0,h.wG)({onOk:()=>{n.start({chatId:e,text:t})}}),Lt()}),Ut=(0,C.A)(()=>{Fe({chatId:v.chatId,threadId:v.id}),Lt()}),zt=(0,C.A)(()=>{$e({messageId:v.id}),Lt()}),jt=(0,C.A)(()=>{It(!1),St(!0)}),Jt=(0,C.A)(()=>{_e({chatId:v.chatId,messageId:v.id,isUnpin:!0}),Lt()}),Gt=(0,C.A)(()=>{if(Lt(),k?.messages){const e=k.messages.map(({id:e})=>e);Ke({fromChatId:v.chatId,messageIds:e})}else Ke({fromChatId:v.chatId,messageIds:[v.id]})}),Ht=(0,C.A)(()=>{Lt(),ze({sticker:v.content.sticker})}),qt=(0,C.A)(()=>{Lt(),je({sticker:v.content.sticker})}),Vt=(0,C.A)(()=>{Lt(),at({chatId:v.chatId,messageId:v.id})}),Wt=(0,C.A)(()=>{Lt(),ot({chatId:v.chatId,messageId:v.id})}),Zt=(0,C.A)(()=>{const e=k?.messages?{messageId:v.id,childMessageIds:k.messages.map(({id:e})=>e),withShift:!1}:{messageId:v.id,withShift:!1};Je(e),Lt()}),Yt=(0,C.A)(()=>{Ge({chatId:v.chatId,id:v.id}),Lt()}),Xt=(0,C.A)(e=>{He({chatId:v.chatId,messageId:v.id,scheduledAt:e}),Oe()}),Qt=(0,C.A)(()=>{It(!1),xt(Xt)}),en=(0,C.A)(()=>{Lt(),Ze({chatId:v.chatId,messageId:v.id})}),tn=(0,C.A)(()=>{Lt(),Ye({chatId:v.chatId,messageId:v.id})}),nn=(0,C.A)(e=>{et({messageIds:e}),Lt()}),an=(0,C.A)(()=>{ut({chatId:v.chatId,messageId:v.id,shouldIncludeThread:e!==i.l3,shouldIncludeGrouped:!0}),Lt()}),on=(0,C.A)(()=>{(0,d.eM)(v.content.contact.phoneNumber),Lt()}),sn=(0,C.A)(()=>{(k?.messages||[v]).forEach(e=>{const t=(0,r.ed)(e);t&&(Dt?Ve({media:t}):qe({media:t,originMessage:e}))}),Lt()}),rn=(0,C.A)(()=>{const e=(0,r.zX)(v);tt({gif:e}),Lt()}),cn=(0,C.A)(e=>{Ne&&!te?dt({initialSection:"saved_tags"}):it({chatId:v.chatId,messageId:v.id,reaction:e,shouldAddToRecent:!0}),Lt()}),ln=(0,C.A)(()=>{gt({chatId:v.chatId,messageId:v.id,count:1}),Lt()}),dn=(0,C.A)(()=>{pt({chatId:v.chatId,messageId:v.id}),Lt()}),mn=(0,C.A)(e=>{lt({chatId:v.chatId,messageId:v.id,position:e})}),un=(0,C.A)(()=>{st({chatId:v.chatId,id:v.id}),Lt()}),hn=(0,C.A)(()=>{rt({chatId:v.chatId,id:v.id}),Lt()}),gn=(0,C.A)(()=>{ct({chatId:v.chatId,messageId:v.id}),Lt()}),pn=(0,a.Kr)(()=>(k?k.messages:[v]).map(({id:e})=>e),[k,v]),An=(0,C.A)(()=>{V&&(It(!1),Oe(),At({chatId:V.id,messageIds:pn}))}),yn=(0,C.A)(async()=>{const{photo:e,document:t,webPage:n,voice:a,audio:o,text:i,video:s}=v.content,r=(0,m.Ah)(i?.text);await yt({chatId:v.chatId}),e?(0,m.tg)(v):n&&!i?.text||r?(0,m.ur)(v):t?(0,m.mu)(v):a?(0,m._b)(v):o?(0,m.LW)(v):s&&(0,m.Al)(v),Lt()});if(F)return void Lt();const fn=new Date;return fn.setFullYear(fn.getFullYear()+1),a.Ay.createElement("div",{ref:vt,className:(0,l.A)("ContextMenuContainer",De)},a.Ay.createElement(ae,{isReactionPickerOpen:Re,availableReactions:t,topReactions:n,defaultTagReactions:c,isWithPaidReaction:Me,message:v,isPrivate:ee,isCurrentUserPremium:te,canBuyPremium:se,isOpen:wt,enabledReactions:X,reactionsLimit:Q,anchor:O,targetHref:L,canShowReactionsCount:q,canShowReactionList:Z,canSendNow:B,canReschedule:_,canReply:K,canSmartReply:U,canScheduleMeeting:z,canQuote:Rt!==ie,canDelete:H,canPin:j,canReport:W,repliesThreadInfo:J,canUnpin:G,canEdit:Y,canForward:ne,canFaveSticker:re,canUnfaveSticker:ce,canCopy:le,canCopyLink:de,canSelect:me,canDownload:ue,canSaveGif:he,canRevote:ge,canClosePoll:pe,canShowSeenBy:Ie,canTranslate:Se,canShowOriginal:be,canSelectLanguage:Te,canPlayAnimatedEmojis:Ae,shouldRenderShowWhen:fe,canLoadReadDate:ye,hasCustomEmoji:kt,customEmojiSets:N,isDownloading:Dt,seenByRecentPeers:Pt,isInSavedMessages:Ne,noReplies:we,poll:P,story:D,onOpenThread:Ut,onReply:$t,onSmartReply:_t,onScheduleMeet:Kt,onEdit:zt,onPin:jt,onUnpin:Jt,onForward:Gt,onDelete:Ft,onReport:An,onFaveSticker:Ht,onUnfaveSticker:qt,onSelect:Zt,onSend:Yt,onReschedule:Qt,onClose:Lt,onCopyLink:an,onCopyMessages:nn,onCopyNumber:on,onDownload:sn,onSaveGif:rn,onCancelVote:Vt,onClosePoll:bt,onShowSeenBy:en,onToggleReaction:cn,onSendPaidReaction:ln,onShowPaidReactionModal:dn,onShowReactors:tn,onReactionPickerOpen:mn,onTranslate:un,onShowOriginal:hn,onSelectLanguage:gn,onSummarize:yn,userFullName:ke,canGift:Pe}),a.Ay.createElement(x,{isOpen:Ct,messageId:v.id,chatId:v.chatId,onClose:Bt}),a.Ay.createElement(M.A,{isOpen:Et,onClose:Tt,text:ft("lng_polls_stop_warning"),confirmLabel:ft("lng_polls_stop_sure"),confirmHandler:Wt}),_&&Mt)}))}}]);
//# sourceMappingURL=4376.90f6b847e3e3d8695289.js.map