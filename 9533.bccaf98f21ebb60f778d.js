(self.webpackChunkTelyAI=self.webpackChunkTelyAI||[]).push([[9533],{45:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(41036),o=a(54746),r=function(e){return e[e.failed=0]="failed",e[e.pending=1]="pending",e[e.succeeded=2]="succeeded",e[e.read=3]="read",e}(r||{});const i=(0,n.ph)(({status:e})=>n.Ay.createElement("div",{className:"MessageOutgoingStatus"},n.Ay.createElement(s.Ay,{name:"reveal",activeKey:r[e]},"failed"===e?n.Ay.createElement("div",{className:"MessageOutgoingStatus--failed"},n.Ay.createElement(o.A,{name:"message-failed"})):n.Ay.createElement(o.A,{name:`message-${e}`}))))},285:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(4961),l=a(59030),c=a(94189);const d=(0,n.ph)((0,s.EK)((e,{userId:t})=>{const a=(0,r.meB)(e),n=t&&(0,r.mBe)(e,t);return{chat:a,contactName:n?(0,o.u0)(n):void 0}})(({isOpen:e,chat:t,userId:a,contactName:o,onClose:r})=>{const{deleteChatMember:d}=(0,s.ko)(),m=(0,l.A)(),u=(0,n.hb)(()=>{d({chatId:t.id,userId:a}),r()},[t,d,r,a]);if(t&&a)return n.Ay.createElement(c.A,{isOpen:e,onClose:r,title:m("GroupRemoved.Remove"),textParts:(0,i.A)(m("PeerInfo.Confirm.RemovePeer",o)),confirmLabel:m("lng_box_remove"),confirmHandler:u,confirmIsDestructive:!0})}))},1671:()=>{},2178:(e,t,a)=>{"use strict";a.d(t,{v:()=>i});var n=a(84051),s=a(46536);const o=new Set(["INPUT","TEXTAREA","SELECT"]),r=(0,s.h)();function i(e){(0,n.vJ)(()=>{if(!e)return;const t=Object.entries(e);return r.addCallback(function(e){(function(e){return!(e.target instanceof HTMLElement)||!o.has(e.target.tagName)})(e)&&t.forEach(([t,a])=>{(function(e){return t=>function(e,t){const{alt:a,ctrl:n,meta:s,mod:o,shift:r,key:i}=e,{altKey:l,ctrlKey:c,metaKey:d,shiftKey:m,key:u}=t;if(a!==l)return!1;if(o){if(!c&&!d)return!1}else{if(n!==c)return!1;if(s!==d)return!1}return r===m&&Boolean(i&&(u.toLowerCase()===i.toLowerCase()||t.code.replace("Key","").toLowerCase()===i.toLowerCase()))}(function(e){const t=e.toLowerCase().split("+").map(e=>e.trim()),a={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},n=["alt","ctrl","meta","shift","mod"];return{...a,key:t.find(e=>!n.includes(e))}}(e),t)})(t)(e)&&a(e)})})},[e])}document.documentElement.addEventListener("keydown",r.runCallbacks)},2429:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});const n={root:"CdTfL4f7",fadeIn:"MyeHARy0",closing:"EZbKn_M3",peer:"kW0xpExG",name:"BDZrSTO_",name_hasUnreadStory:"OoUm5AUZ",nameHasUnreadStory:"OoUm5AUZ",hidden:"lnVtxMZI",contextMenu:"N1sagA0s"}},3225:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var n=a(84051),s=a(13439),o=a(31481),r=a(66644),i=a(98221),l=a(96454),c=a(36353),d=a(39074),m=a(58734),u=a(63988),p=a(83414),h=a(19129),g=a(37661),A=a(17712);const y=300,f=new RegExp(`(${i.A.source})$`,"g"),v=new RegExp(`${o.bpX.source}$`,"g");function E(e,t,a,E,b,x){const{loadCustomEmojiForEmoji:w,clearCustomEmojiForEmoji:C}=(0,s.ko)(),[N,I,S]=(0,g.A)(!1),M=(0,u.gs)(()=>{const a=t();if(!e||!a||!E()?.collapsed)return;if(!a.match(l.TL?i.A:o.bpX))return;const n=(0,d.LV)(b.current);return n.match(l.TL?f:v)?.[0]},[t,E,b,e],y),k=(0,p.A)(M,[M,t,E],!0),T=(0,h.A)(()=>Boolean(k()),[k]),P=Boolean(x?.length);(0,n.vJ)(()=>{if(!e||!T)return;const t=k();if(t){if(!P){const e=l.TL?t:t.match(/.+alt="(.+)"/)?.[1];e&&w({emoji:e})}}else C()},[e,T,k,P,C,w]);const L=(0,A.A)(t=>{const n=k();if(!e||!n)return;const s=b.current,o=(0,d.LV)(s),i=l.TL?n:n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=new RegExp(`(${i})\\1*$`,""),p=o.match(u)[0].length/n.length,h=o.replace(u,(0,m.hB)(t).repeat(p)),g=s.innerHTML.substring(o.length);a(`${h}${g}`),(0,r.Uz)(()=>{(0,c.A)(s,!0,!0)})});return(0,n.vJ)(S,[S,t]),{isCustomEmojiTooltipOpen:Boolean(T&&P&&!N),closeCustomEmojiTooltip:I,insertCustomEmoji:L}}},4955:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var n=a(96540),s=a(22199);const o=({className:e,disabled:t,onClick:a,children:o})=>n.createElement("button",{className:(0,s.cn)("w-[40px] h-[40px] p-[5px] border-none rounded-full box-border flex items-center justify-center hover:bg-[var(--color-interactive-element-hover)]",e),onClick:a,disabled:t},o)},5130:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});var n=a(14235),s=a(37836);function o(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e,t,a){this.target=e,this.onUpdate=t,this.channel=a,o(this,"requestStates",new Map),o(this,"requestStatesByCallback",new Map),o(this,"pendingPayloads",[]),o(this,"pendingTransferables",[]),o(this,"postMessagesOnTickEnd",(0,s.Fe)(()=>{const{channel:e}=this,t=this.pendingPayloads,a=this.pendingTransferables;this.pendingPayloads=[],this.pendingTransferables=[],this.target.postMessage({channel:e,payloads:t},a)}))}destroy(){}init(...e){this.postMessageOnTickEnd({type:"init",args:e})}request(e){const{requestStates:t,requestStatesByCallback:a}=this,{transferables:s,...o}=e,r=(0,n.A)(),i={type:"callMethod",messageId:r,...o},l={messageId:r},c=new Promise((e,t)=>{Object.assign(l,{resolve:e,reject:t})});if("function"==typeof i.args[i.args.length-1]){i.withCallback=!0;const e=i.args.pop();l.callback=e,a.set(e,l)}return t.set(r,l),c.catch(()=>{}).finally(()=>{t.delete(r),l.callback&&a.delete(l.callback)}),this.postMessageOnTickEnd(i,s),c}cancelCallback(e){e.isCanceled=!0;const{messageId:t}=this.requestStatesByCallback.get(e)||{};t&&this.postMessageOnTickEnd({type:"cancelProgress",messageId:t})}onMessage(e){const{requestStates:t,channel:a}=this;e.channel===a&&e.payloads.forEach(e=>{if("update"===e.type&&this.onUpdate&&this.onUpdate(e.update),"methodResponse"===e.type){const a=t.get(e.messageId);a&&(e.error?a.reject(e.error):a.resolve(e.response))}else if("methodCallback"===e.type){const a=t.get(e.messageId);a?.callback?.(...e.callbackArgs)}else if("unhandledError"===e.type)throw new Error(e.error?.message)})}postMessageOnTickEnd(e,t){this.pendingPayloads.push(e),t&&this.pendingTransferables.push(...t),this.postMessagesOnTickEnd()}}function i(e,t,a){const n=new r(e,t,a);function s({data:e}){n.onMessage(e)}return e.addEventListener("message",s),n.destroy=()=>{e.removeEventListener("message",s)},n}},6070:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(s.ar.Extra,"CustomSendMenu",!t);return a?n.Ay.createElement(a,e):void 0}},7971:(e,t,a)=>{"use strict";a.d(t,{Ah:()=>N,Al:()=>E,ER:()=>I,LW:()=>v,WE:()=>h,_b:()=>f,aT:()=>C,mu:()=>y,tg:()=>g,ur:()=>A});var n=a(25279),s=a(72531),o=a(77787),r=a(81120),i=(a(96140),a(90709)),l=a(58554),c=a(69036),d=a(30020),m=a(13439),u=a(60919);d.GlobalWorkerOptions.workerSrc="pdf.worker.min.js";const p=a(70306);async function h(e,t=!1){if(!e.isMentioned||!e.content?.text?.text)return;let a={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-reply-mention"}],content:JSON.stringify({messageId:e.id,content:e.content.text?.text,isAuto:t,status:"loading"})};await b(a),(0,r.Rx)({message:e.content.text?.text,language:M()}).then(n=>{n.text?(a={...a,content:JSON.stringify({messageId:e.id,content:e.content.text?.text,replys:n.text,isAuto:t,status:"success"})},b(a)):S(a,e,t)}).catch(n=>{console.log("error",n),S(a,e,t)})}async function g(e,t=!1){const a=e.content?.photo;if(!a)return;const s=(0,i.VO)(a,"download");if(!s)return;let o={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await b(o),await w({mimeType:"image/jpeg",mediaHash:s,message:e,newMessage:o,isAuto:t})}async function A(e,t=!1){const a=(0,m.mS)(),s=(0,u.Pn$)(a,e),o=s?s?.url:e.content?.text?.text;if(!o||""===o)return;let i={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await b(i),(0,r.U$)({url:o,text:e.content?.text?.text||"",language:M()}).then(a=>{a?.text?(i={...i,content:JSON.stringify({message:e,summaryInfo:a?.text,isAuto:t,status:"success"})},b(i)):S(i,e,t)}).catch(a=>{console.log("error",a),S(i,e,t)})}async function y(e,t=!1){const a=e.content?.document;if(!a)return;const s=(0,i.VO)(a,"download");if(!s)return;if(I(a.mimeType)&&t)return;let o={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};if(await b(o),I(a.mimeType))return void w({mimeType:a.mimeType,mediaHash:s,message:e,newMessage:o,isAuto:t});if(c=a.mimeType,["video/mp4"].indexOf(c)>=0)return void await x({mediaHash:s,mimeType:a?.mimeType,filename:a?.fileName,size:a?.size,newMessage:o,message:e,isAuto:t});var c;await l.hd(s,0);const m=l.Ih(s);if(!m)return;const u=await fetch(m),h=await u.blob(),g=await h.arrayBuffer();let A="";switch(a.mimeType){case"text/plain":A=(new TextDecoder).decode(g);break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":A=(await p.extractRawText({arrayBuffer:g})).value;break;case"application/pdf":const a=await d.getDocument({data:g}).promise;let n="";for(let e=1;e<=a.numPages;e++){const t=await a.getPage(e);n+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}A=n;break;default:return void await S(o,e,t)}""!==A?(0,r.OJ)({content:A,language:M()}).then(a=>{a?.text?(o={...o,content:JSON.stringify({message:e,summaryInfo:a?.text,isAuto:t,status:"success"})},b(o)):S(o,e,t)}).catch(a=>{console.log("error",a),S(o,e,t)}):await S(o,e,t)}async function f(e,t=!1){const a=e.content?.voice;if(!a)return;const s=(0,i.VO)(a,"download");if(!s)return;const o=Math.floor(4194304);if(e.content.audio?.size&&e.content.audio?.size*(4/3)>o)return void c.Ay.info("File size exceeds limit (4 MB)");let r={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await b(r),await x({mediaHash:s,mimeType:"audio/ogg",filename:a?.id+".ogg",size:a?.size,newMessage:r,message:e,isAuto:t})}async function v(e,t=!1){const a=e.content?.audio;if(!a)return;const s=(0,i.VO)(a,"download");if(!s)return;let o={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await b(o),await x({mediaHash:s,mimeType:a?.mimeType,filename:a?.fileName,size:a?.size,newMessage:o,message:e,isAuto:t})}async function E(e,t=!1){const a=e.content?.video;if(!a)return;const s=(0,i.VO)(a,"download");if(!s)return;let o={chatId:e.chatId,timestamp:(new Date).getTime(),id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"room-ai-media-summary"}],content:JSON.stringify({message:e,isAuto:t,status:"loading"})};await b(o),"video/mp4"===a?.mimeType?await x({mediaHash:s,mimeType:a?.mimeType,filename:a?.fileName,size:a?.size,newMessage:o,message:e,isAuto:t}):await S(o,e,t)}async function b(e){await(o.zs.message?.storeMessage(e)),await s.A.emit(s.E.AddRoomAIMessage,e)}async function x({mediaHash:e,mimeType:t,filename:a,size:n,newMessage:s,message:o,isAuto:i}){try{if(n&&n>4718592)return c.Ay.info("File size exceeds limit (4.5 MB)"),s={...s,content:JSON.stringify({message:o,errorMsg:"File size exceeds limit (4.5 MB)",isAuto:i,status:"error"})},void await b(s);await l.hd(e,0);const d=l.Ih(e);if(!d)return void S(s,o,i);const m=await fetch(d),u=await m.blob(),p=new FormData;p.append("file",u,a||"audio.ogg"),p.append("language",M()),t&&p.append("mimeType",t);const h=await(0,r.DF)(p);h?.text?b(s={...s,content:JSON.stringify({message:o,summaryInfo:h?.text,isAuto:i,status:"success"})}):S(s,o,i)}catch(e){console.log("error",e),S(s,o,i)}}async function w({mimeType:e,mediaHash:t,message:a,newMessage:n,isAuto:s}){await l.hd(t,0);const o=l.Ih(t);if(!o)return void S(n,a,s);const i=await fetch(o),c=await i.blob(),d=new FileReader;d.onloadend=function(){const t=d.result?.toString().split(",")[1]||"";(0,r.IT)({image:`data:${e};base64,`+t,language:M()}).then(e=>{e?.text?b(n={...n,content:JSON.stringify({message:a,summaryInfo:JSON.stringify({text:e?.text}),isAuto:s,status:"success"})}):S(n,a,s)}).catch(e=>{console.log("error",e),S(n,a,s)})},d.readAsDataURL(c)}function C(e){const{photo:t,document:a,webPage:n,voice:s,audio:o,text:r,video:i}=e?.content,l=N(r?.text),c=r?.text&&""!==r.text.trim();return t||a||n&&!c||s||o||l||i}function N(e){return"string"==typeof e&&/^https?:\/\/[\w\-._~:/?#[\]@!$&'()*+,;=%]+$/i.test(e)}function I(e){return e.startsWith("image/")}async function S(e,t,a){e={...e,content:JSON.stringify({message:t,isAuto:a,status:"error"})},await b(e)}function M(){const e=(0,m.mS)(),{autoTranslateLanguage:t="en"}=e.settings.byKey;return new Intl.DisplayNames([t],{type:"language"}).of(t)||"en"}},9442:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var n=a(84051),s=a(13439),o=a(23174),r=a(66644),i=a(90709),l=a(70636),c=a(36353),d=a(87894),m=a(39074),u=a(17778),p=a(63988),h=a(83414),g=a(37661),A=a(39351),y=a(17712);const f=300;let v;try{v=/(^|\s)@[-_\p{L}\p{M}\p{N}]*$/giu}catch(e){v=/(^|\s)@[-_\d\wа-яёґєії]*$/gi}function E(e,t,a,E,x,w,C,N){const I=(0,A.A)(),[S,M]=(0,n.J0)(),[k,T,P]=(0,g.A)(!1),L=(0,p.gs)(()=>{const a=t();if(!e||!E()?.collapsed||!a.includes("@"))return;const n=(0,m.LV)(x.current);return(0,u.S)(n).match(v)?.[0].trim()},[e,t,E,x],f),B=(0,h.A)(L,[L,t,E],!0),R=(0,h.A)(()=>e&&t().startsWith("@"),[t,e]);(0,n.vJ)(()=>{const e=B();if(!e||!w&&!C)return void M(void 0);const t=(0,s.mS)().users.byId;if(!t)return void M(void 0);const a=w?.reduce((e,t)=>(t.userId!==N&&e.push(t.userId),e),[]),n=e.substring(1),o=(0,l.PU)({ids:(0,d.Am)([...R()&&C||[],...a||[]]),query:n,type:"user"});M(Object.values((0,d._E)(t,o)))},[N,w,C,B,R]);const F=(0,y.A)((e,t=!1,n=!1)=>{if(!e.hasUsername&&!(0,l.F9)(I,e))return;const s=(0,i.Kl)(e),d=(0,l.F9)(I,e)||"",u=s?`@${s}`:`<a\n          class="text-entity-link"\n          data-entity-type="${o.C7.MentionName}"\n          data-user-id="${e.id}"\n          contenteditable="false"\n          dir="auto"\n        >${d}</a>`,p=x.current,h=b((0,m.LV)(p)),g=n?h.length:h.lastIndexOf("@"),A=(s?s.length+1:d.length)-(h.length-g);if(-1!==g){const e=`${h.substr(0,g)}${u}&nbsp;`,n=b(p.innerHTML).substring(h.length),s=(0,m.JC)(p);a(`${e}${n}`),(0,r.Uz)(()=>{const e=s+A+1;(0,c.A)(p,t),e>=0&&(0,m.vZ)(p,e)})}M(void 0)});return(0,n.vJ)(P,[P,t]),{isMentionTooltipOpen:Boolean(S?.length&&!k),closeMentionTooltip:T,insertMention:F,mentionFilteredUsers:S}}function b(e){return e.replace(/<div>(<br>|<br\s?\/>)?<\/div>/gi,"<br>")}},9626:(e,t,a)=>{"use strict";e.exports=a.p+"danger.7dcfa39ea30ab887338e.png"},9717:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(87894),o=a(79882),r=a(73767);function i(e,t){const a=(0,n.Kr)(()=>{if(e)return e.reduce((e,t,a)=>(e[t]=a,e),{})},[e]),i=(0,r.A)(a),l=(0,r.A)(t),c=(0,n.Kr)(()=>a&&i&&t===l?(0,s.LG)(a,(e,t)=>void 0!==i[t]?e-i[t]:-1/0):{},[t,a,l,i]);return{orderDiffById:c,getAnimationType:(0,o.W)(c)}}},9740:(e,t,a)=>{"use strict";a.d(t,{A:()=>X});var n=a(84051),s=a(13439),o=a(89925),r=a(96454),i=a(87357),l=a(49763),c=a(80140),d=a(60919),m=a(72531),u=a(40708),p=a(17712),h=a(95547),g=a(22720),A=a(26607),y=a(8235);const f=(0,n.ph)((0,s.EK)(e=>{const t=(0,d.meB)(e);return{isSelected:u.bL===t?.id}})(e=>{const{isSelected:t,offsetTop:a}=e,{openChat:o}=(0,s.ko)(),r=(0,i.A)("Chat chat-item-clickable",t&&"selected"),l=function(){const[e,t]=(0,n.J0)(0),a=(0,p.A)(e=>{e.chatId===u.bL&&t(e.count)});return(0,n.vJ)(()=>{const e=localStorage.getItem("room-ai-data"),n=e&&JSON.parse(e)?.[u.bL]?.unreadCount||0;return t(n),m.A.on(m.E.UpdateRoomAIUnreadCount,a),()=>{m.A.off(m.E.UpdateRoomAIUnreadCount,a)}},[]),e}();return n.Ay.createElement(g.A,{className:r,key:u.bL,style:`top: ${a}px`,onClick:()=>{o({id:u.bL}),h.A.updateRoomAIData(u.bL,"unreadCount",0)},withPortalForMenu:!0},n.Ay.createElement("img",{className:"w-[54px] h-[54px] rounded-full mr-[12px]",src:y,alt:"TelyAI"}),n.Ay.createElement("div",{className:"info"},n.Ay.createElement("div",{className:"info-row"},n.Ay.createElement("div",{className:"title FullNameTitle-module__root"},n.Ay.createElement("h3",{dir:"auto",role:"button",className:"fullName FullNameTitle-module__fullName"},"TelyAI"))),n.Ay.createElement("div",{className:"subtitle"},n.Ay.createElement("p",{className:"last-message shared-canvas-container",dir:"ltr"},"Chat Summary"),n.Ay.createElement(A.A,{isCustom:!0,className:"ChatBadge-transition",isOpen:l>0},n.Ay.createElement("div",{className:"ChatBadge unread"},l)))))}));var v=a(31481),E=a(23459),b=a(66644),x=a(9718),w=a(16581),C=a(74984),N=a(2178),I=a(96374),S=a(5912),M=a(9717),k=a(46222),T=a(52745),P=a(90709),L=a(87894),B=a(14242),R=a(4961),F=a(39351),D=a(21849),O=a(54746),z=a(24713);const U={root:"sG8AAzvK",minimized:"lTOui0dp",button:"bNkLqJf1",title:"rMTpNazX","unread-count":"O7esHjyC",unreadCount:"O7esHjyC",info:"OS2LWzdu",name:"bkCtPuPQ",icon:"f4LUPgr4",avatarWrapper:"RMY__Znz",avatar:"qeb0Aox1",chatsPreview:"_1817Hwgd",unread:"SS39xuL3"},j={isCustomPeer:!0,title:"Archived Chats",avatarIcon:"archive-filled",customPeerAvatarColor:"#9EAAB5"},V=(0,n.ph)(({archiveSettings:e,onDragEnter:t,onClick:a})=>{const{updateArchiveSettings:o}=(0,s.ko)(),r=(0,F.A)(),l=(0,C.Rh)(v._E9),c=(0,C.ic)(),d=c[v._E9]?.chatsCount,m=(0,n.Kr)(()=>{if(!l?.length)return r("Loading");const e=(0,s.mS)().chats.byId;return l.slice(0,5).map((t,a,s)=>{const o=a===s.length-1,l=e[t];if(!l)return;const c=(0,P.Js)(r,l);return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:(0,i.A)(U.chat,d&&l.unreadCount&&U.unread)},(0,R.A)(c)),o?"":", ")})},[l,r,d]),u=(0,n.Kr)(()=>{const t=!e.isMinimized&&{title:r("ContextArchiveCollapse"),icon:"collapse",handler:()=>{o({isMinimized:!0})}},a=e.isMinimized&&{title:r("ContextArchiveExpand"),icon:"expand",handler:()=>{o({isMinimized:!1})}},n={title:r("ContextArchiveToMenu"),icon:"archive-to-main",handler:()=>{o({isHidden:!0})}};return(0,L.oE)([t,a,n])},[e.isMinimized,r,o]),p=(0,n.hb)(e=>{e.preventDefault(),t?.()},[t]);return n.Ay.createElement(g.A,{onClick:a,onDragEnter:p,className:(0,i.A)(U.root,e.isMinimized&&U.minimized,"chat-item-clickable","chat-item-archive"),buttonClassName:U.button,contextActions:u,withPortalForMenu:!0},e.isMinimized?n.Ay.createElement("div",{className:(0,i.A)(U.info,"info")},n.Ay.createElement("div",{className:"info-row"},n.Ay.createElement("div",{className:(0,i.A)("title",U.title)},n.Ay.createElement("h3",{dir:"auto",className:(0,i.A)(U.name,"fullName")},n.Ay.createElement(O.A,{name:"archive-filled",className:U.icon}),r("ArchivedChats"))),n.Ay.createElement(z.A,{className:U.unreadCount,text:d?(0,B.Vw)(r,d):void 0}))):n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:(0,i.A)("status",U.avatarWrapper)},n.Ay.createElement(D.A,{peer:j})),n.Ay.createElement("div",{className:(0,i.A)(U.info,"info")},n.Ay.createElement("div",{className:"info-row"},n.Ay.createElement("div",{className:(0,i.A)("title",U.title)},n.Ay.createElement("h3",{dir:"auto",className:(0,i.A)(U.name,"fullName")},r("ArchivedChats")))),n.Ay.createElement("div",{className:"subtitle"},n.Ay.createElement("div",{className:(0,i.A)("status",U.chatsPreview)},m),n.Ay.createElement(z.A,{className:U.unreadCount,text:d?(0,B.Vw)(r,d):void 0})))))});var J=a(32754),H=a(43874),K=a(59030),$=a(79577),G=a(64493);const _=(0,n.ph)((0,s.EK)((e,{folderId:t,folderType:a})=>({chatFolder:t&&"folder"===a?(0,d.$aQ)(e,t):void 0,animatedEmoji:(0,d.oei)(e,"📂")}))(({chatFolder:e,animatedEmoji:t,foldersDispatch:a})=>{const{openSettingsScreen:r}=(0,s.ko)(),i=(0,K.A)(),{isMobile:l}=(0,H.Ay)(),c=(0,n.hb)(()=>{a({type:"editFolder",payload:e}),r({screen:o.VS.FoldersEditFolderFromChatList})},[e,a]);return n.Ay.createElement("div",{className:"yftKUVDQ"},n.Ay.createElement("div",{className:"UCBfMOiz"},t&&n.Ay.createElement($.A,{sticker:t,size:96})),n.Ay.createElement("h3",{className:"dB9cHelg",dir:"auto"},i("FilterNoChatsToDisplay")),n.Ay.createElement("p",{className:"TJ_liZcJ",dir:"auto"},i(e?"ChatList.EmptyChatListFilterText":"Chat.EmptyChat")),e&&n.Ay.createElement(G.A,{ripple:!l,fluid:!0,pill:!0,onClick:c,size:"smaller",isRtl:i.isRtl},n.Ay.createElement(O.A,{name:"settings"}),n.Ay.createElement("div",{className:"aL7e0w4t"},i("ChatList.EmptyChatListEditFilter"))))})),q=(0,n.ph)(({onClick:e})=>{const t=(0,F.A)();return n.Ay.createElement("div",{className:"fOmerTkM",onClick:e},n.Ay.createElement("div",{className:"URLYINJA"},t("TitleFrozenAccount")),n.Ay.createElement("div",{className:"mCFsx7Tv"},t("SubtitleFrozenAccount")))});var W=a(93545);const Q="pedMJD_v",Y=(0,n.ph)(({sessions:e,onHeightChange:t})=>{const{changeSessionSettings:a,terminateAuthorization:o,showNotification:r}=(0,s.ko)(),i=(0,n.li)(),l=(0,K.A)();(0,W.A)(i,e=>{const a=e.borderBoxSize?.[0]?.blockSize||e.contentRect.height;t(a)});const c=(0,n.Kr)(()=>Object.values(e).sort((e,t)=>t.dateCreated-e.dateCreated).find(e=>e.isUnconfirmed),[e]),d=(0,n.Kr)(()=>[c.deviceModel,c.region,c.country].filter(Boolean).join(", "),[c]),m=(0,p.A)(()=>{a({hash:c.hash,isConfirmed:!0})}),u=(0,p.A)(()=>{o({hash:c.hash}),r({title:l("UnconfirmedAuthDeniedTitle",1),message:l("UnconfirmedAuthDeniedMessageSingle",d)})});return n.Ay.createElement("div",{className:"yEkGgZVL",ref:i},n.Ay.createElement("h2",{className:"VhAJDrnz"},l("UnconfirmedAuthTitle")),n.Ay.createElement("p",{className:"WmyL1NJ8"},l("UnconfirmedAuthSingle",d)),n.Ay.createElement("div",{className:"_40UGD1Y"},n.Ay.createElement(G.A,{fluid:!0,isText:!0,size:"smaller",className:Q,onClick:m},l("UnconfirmedAuthConfirm")),n.Ay.createElement(G.A,{fluid:!0,isText:!0,size:"smaller",color:"danger",onClick:u,className:Q},l("UnconfirmedAuthDeny"))))}),Z=new Set(["9","0"]),X=(0,n.ph)(({className:e,folderType:t,folderId:a,isActive:d,isForumPanelOpen:m,canDisplayArchive:h,archiveSettings:g,sessions:A,foldersDispatch:y,onSettingsScreenSelect:P,onLeftColumnContentChange:L,isAccountFrozen:B,isMainList:R})=>{const{openChat:F,openNextChat:D,closeForumPanel:O,toggleStoryRibbon:z,openFrozenAccountModal:U,openLeftColumnContent:j}=(0,s.ko)(),H=(0,n.li)(),K=(0,n.li)(!1),[$,G]=(0,n.J0)(0),W="archived"===t,Q="all"===t,X="saved"===t,ee="preset"===t,te="unread"===t,ae="ai"===t,ne=Q?v.DSF:W?v._E9:X?v.pX9:ee?v.LFk:te?v.j7l:ae?v.Sab:a,se=Q&&h&&g,oe=B&&Q,re=(0,C.Rh)(ne);(0,E.A)(re);const ie=(re?.length||0)*v.yq1,le=se?g?.isMinimized?v.eqO:v.yq1:0,ce=oe?68:0,{orderDiffById:de,getAnimationType:me}=(0,M.A)(re),[ue,pe]=(0,I.A)(void 0,re,void 0,v.T7t),he=(0,n.Kr)(()=>{const e=Object.values(A||{}),t=e.find(e=>e.isCurrent);return!(!t||(0,c.Fm)()-t.dateCreated<v.C7Y)&&!B&&Q&&e.some(e=>e.isUnconfirmed)},[Q,A,B]);(0,n.vJ)(()=>{he||G(0)},[he]),(0,N.v)((0,n.Kr)(()=>d&&re?.length?{"Alt+ArrowUp":e=>{e.preventDefault(),D({targetIndexDelta:-1,orderedIds:re})},"Alt+ArrowDown":e=>{e.preventDefault(),D({targetIndexDelta:1,orderedIds:re})}}:void 0,[d,re])),(0,n.vJ)(()=>{if(d&&!X&&re&&r.lE)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){if((r.MP&&e.metaKey||!r.MP&&e.ctrlKey)&&e.code.startsWith("Digit")){const[,t]=e.code.match(/Digit(\d)/)||[];if(!t||Z.has(t))return;const a=se&&g&&!g.isMinimized,n=a?-1:0,s=Number(t)+n-1;if(a&&-1===s)return void(R&&j({contentKey:o.Bn.Archived}));if(s>re.length-1)return;F({id:re[s],shouldReplaceHistory:!0})}}},[g,X,d,F,D,re,se,R]);const{observe:ge}=(0,S.BL)({rootRef:H,throttleMs:200}),Ae=(0,p.A)(()=>{j({contentKey:o.Bn.Archived}),O()}),ye=(0,p.A)(()=>{U()}),fe=(0,p.A)(()=>{K.current?K.current=!1:Ae()}),ve=(0,w.A)(e=>{K.current?K.current=!1:F({id:e,shouldReplaceHistory:!0})},[F],500,!0),Ee=(0,p.A)(e=>{const t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;a<t.width||n<t.y||(K.current=!0)}),be=function(e,t,a,s){const o=(0,n.li)(),i=(0,n.li)(!1),l=(0,n.li)(0),c=(0,n.li)(!1),d=(0,n.li)(!0),m=(0,n.li)(0),u=(0,n.li)(!1),h=(0,p.A)((t=!1)=>{c.current||o.current&&e.current&&(o.current.style.display="block",e.current.scrollTop=1,r.Yw||t||(0,x.E)(e.current),i.current=!0,l.current=1,c.current=!0,d.current=!0)}),g=(0,p.A)(()=>{c.current&&o.current&&(o.current.style.display="none",c.current=!1)}),A=(0,p.A)(()=>{if(!e.current)return;if(i.current)return void(i.current=!1);const n=e.current.scrollTop,s=n>l.current,r=n<l.current,p=0===n,A=Date.now()-m.current;if(o.current){if(p&&!c.current)return void(0,b.dL)(h,[e.current,o.current]);(0,b.dL)(g,o.current)}r&&(d.current&&A>100||n<0&&u.current)?t?.():s&&n>0&&a?.(),l.current=n,d.current=p,m.current=Date.now(),u.current=s&&n<0}),y=(0,w.A)(n=>{if(!e.current)return;const s=e.current;s.scrollHeight>s.offsetHeight||0===n.deltaY||(n.deltaY<0?t?.():a?.())},[e,t,a],250);return(0,n.vJ)(()=>{const t=e.current;if(t)return 0===t.scrollTop&&(0,b.RK)(()=>{h(!0)}),t.addEventListener("scroll",A,{passive:!0}),t.addEventListener("wheel",y,{passive:!0}),()=>{t.removeEventListener("scroll",A),t.removeEventListener("wheel",y)}},[e,y]),r.pz||s?void 0:n.Ay.createElement("div",{ref:o,className:"overscroll-trigger",key:"overscroll-trigger"})}(H,(0,p.A)(()=>{z({isShown:!0,isArchived:W})}),(0,p.A)(()=>{z({isShown:!1,isArchived:W})}),X);return n.Ay.createElement(k.A,{className:(0,i.A)("chat-list custom-scroll",m&&"forum-panel-open",e),ref:H,items:ue,itemSelector:".ListItem:not(.chat-item-archive)",preloadBackwards:v.T7t,withAbsolutePositioning:!0,beforeChildren:be,maxHeight:ie+le+ce+$,onLoadMore:pe,onDragLeave:Ee},he&&n.Ay.createElement(Y,{key:"unconfirmed",sessions:A,onHeightChange:G}),oe&&n.Ay.createElement(q,{key:"frozen",onClick:ye}),se&&n.Ay.createElement(V,{key:"archive",archiveSettings:g,onClick:Ae,onDragEnter:fe}),ue?.length?function(){const e=re.indexOf(ue[0]),t=(0,l.zm)(ne)||0;return ue.map((s,o)=>{const r=e+o<t,i=$+le+ce+(e+o)*v.yq1;return s===u.bL?n.Ay.createElement(f,{key:"serena",offsetTop:i}):n.Ay.createElement(J.A,{key:s,teactOrderKey:r?o:(0,l.uk)(s,X),chatId:s,isPinned:r,folderId:a,isSavedDialog:X,animationType:me(s),orderDiff:de[s],offsetTop:i,observeIntersection:ge,onDragEnter:ve})})}():!ue||ue.length||X?n.Ay.createElement(T.A,{key:"loading"}):n.Ay.createElement(_,{folderId:a,folderType:t,foldersDispatch:y}))})},10221:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(84051),s=a(66644),o=a(76023),r=a(17712);const i=o.$;function l({anchorRef:e,overlayRef:t,isMirrored:a,isForMessageEffect:o,isDisabled:l,id:c}){const d=(0,r.A)(()=>{const n=t.current,r=e.current;if(!n||!r)return;const l=r.getBoundingClientRect(),c=n.getBoundingClientRect(),d=window.innerWidth;(0,s.RK)(()=>{const e=l.top+l.height/2,t=l.bottom,s=o?t:e;n.style.top=s-c.height/2+"px",a?n.style.left=l.left-i+"px":n.style.right=d-l.right-i+"px"})});return(0,n.vJ)(()=>{l||d()},[l,c]),(0,n.vJ)(()=>{if(l)return;const t=e.current.closest(".MessageList");return t?(t.addEventListener("scroll",d,{passive:!0}),()=>{t.removeEventListener("scroll",d)}):void 0},[l,e]),d}},10587:(e,t,a)=>{"use strict";a.d(t,{X:()=>r});var n=a(96540),s=a(22199);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(null,arguments)}const r=n.forwardRef(({className:e,...t},a)=>n.createElement("textarea",o({className:(0,s.cn)("flex min-h-[45px] w-full border-box rounded-md border border-input bg-white px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-black dark:placeholder:text-[#888888]",e),ref:a},t)));r.displayName="Textarea"},10979:(e,t,a)=>{"use strict";a.d(t,{s:()=>L,A:()=>B});var n=a(84051),s=a(74353),o=a.n(s),r=a(2543),i=a(13439),l=a(60919),c=a(87357),d=a(59030),m=a(76526),u=a(77787),p=a(7971),h=a(81120);var g=a(21849),A=a(34431),y=a(46222),f=a(57474),v=a(11553),E=a(23814),b=a(8235),x=a(63947),w=a(9716),C=a(22199);const N=({chatId:e,showName:t,size:a})=>{const{openChat:s}=(0,i.ko)(),o=(0,i.mS)(),r=(0,w.L8)(e);let c;return c=r?(0,l.mBe)(o,e):(0,l.hds)(o,e),n.Ay.createElement("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{s({id:e})}},n.Ay.createElement(g.A,{key:e,className:(0,C.cn)("overlay-avatar inline-block"),size:a??20,peer:c}),t&&n.Ay.createElement("div",null,r?`${c?.firstName??""} ${c?.lastName??""}`:c?.title))},I=({topicItem:e,index:t,chatId:a})=>{const{title:s,summaryItems:o}=e;if(!s||!a)return;const{focusMessage:r}=(0,i.ko)();return n.Ay.createElement("div",{className:"px-3"},n.Ay.createElement("div",{className:"flex flex-row items-center flex-wrap"},n.Ay.createElement("span",{className:"font-[700] mr-[14px]"},t+1,". ",s),n.Ay.createElement(N,{chatId:a})),n.Ay.createElement("ul",{className:"list-disc pl-1 list-inside"},o.map(e=>{const{content:t,relevantMessageIds:s}=e;if(t)return n.Ay.createElement("li",{role:"button",className:"cursor-pointer break-words",onClick:()=>function(e){if(!a)return;const t=Math.min(...e);t&&r({chatId:a,messageId:t})}(s)},t)})))},S=({data:e,isLast:t})=>n.Ay.createElement("div",{className:(0,c.A)("flex flex-col border-b-[1px]",t?"border-[transparent]":"border-[#EDEDED]")},n.Ay.createElement("div",{className:"flex items-center justify-between gap-1 px-3"},n.Ay.createElement("div",{className:"flex items-center gap-2"},n.Ay.createElement("img",{src:b,className:"w-[22px] h-[22px]",alt:""}),n.Ay.createElement("div",{className:"font-[600]"},"TelyAI")),n.Ay.createElement("div",{className:"text-[12px] text-[#979797]"},o()(e?.time).format("MMM D"),", ",e?.timeRange?.split("-")?.[1])),n.Ay.createElement("div",{className:"my-2 px-3"},n.Ay.createElement("div",{className:"flex items-center gap-[8px]"},n.Ay.createElement("img",{className:"w-[16px] h-[16px]",src:v,alt:""}),n.Ay.createElement("div",{className:"flex items-center gap-[4px]"},n.Ay.createElement("span",{className:"mr-[4px] font-bold text-[14px]"},"Time range: "),o()(e?.time).format("MMM D"),", ",e?.timeRange)),n.Ay.createElement("div",{className:"flex items-center gap-[8px]"},n.Ay.createElement("img",{className:"w-[16px] h-[16px]",src:E,alt:""}),n.Ay.createElement("div",{className:"flex items-center gap-[4px]"},n.Ay.createElement("span",{className:"font-bold text-[14px]"},"Messages: "),e?.messageCount?n.Ay.createElement("span",null,e?.messageCount):void 0))),e?.chatGroups?.map((e,t)=>n.Ay.createElement(I,{key:e?.chatId,chatId:e?.chatId,topicItem:e,index:t}))),M=({user:e,data:t,isLast:a})=>n.Ay.createElement("div",{className:(0,c.A)("flex flex-col pb-3 border-b-[1px]",a?"border-[transparent]":"border-[#EDEDED]")},n.Ay.createElement("div",{className:"flex items-center justify-between gap-1 px-3"},n.Ay.createElement("div",{className:"flex items-center gap-2"},n.Ay.createElement("img",{src:b,className:"w-[22px] h-[22px]",alt:""}),n.Ay.createElement("div",{className:"font-[600]"},"TelyAI")),n.Ay.createElement("div",{className:"text-[12px] text-[#979797]"},o()(t?.time).format("MMM D, HH:mm"))),n.Ay.createElement("div",{className:"ml-[25px] mt-2 px-3"},n.Ay.createElement("div",{className:"mb-1"},n.Ay.createElement("span",{className:"font-[600]"},e?.firstName||""," ",e?.lastName||""),"Post a Story"),n.Ay.createElement(x.A,{story:t.message,isArchive:!1}))),k=function({user:e,data:t,isLast:a}){const s=!1!==t.isSummary,o=!s&&"story"===t?.id?.split("-")[1];return s?n.Ay.createElement(S,{data:t,isLast:a}):o?n.Ay.createElement(M,{data:t,isLast:a,user:e}):void 0};var T=a(47778),P=a(24845);const L=["#E5D9FF","#CCD6FF","#B6FFCE","#FFD9D9","#FFD9FF"],B=(0,n.ph)((0,i.EK)(e=>{const{userPortraitUserId:t}=(0,l.nTw)(e);return{user:t?(0,l.mBe)(e,t):void 0,theme:(0,l.SJA)(e)}})(({theme:e,userId:t,user:a})=>{const{loading:s,userPortraitInfo:l,chatTags:v,portraitMessage:E}=function({userId:e}){const[t,a]=(0,n.J0)(!1),[s,o]=(0,n.J0)([]),[r,l]=(0,n.J0)(void 0),[c,d]=(0,n.J0)(void 0),[g,A]=(0,n.J0)([]),[y,f]=(0,n.J0)([]),v=(0,n.hb)(async e=>{a(!0);const t=await(0,m.cZ)(e);o(t?.filter(e=>!(0,p.Ah)(e?.content))),a(!1)},[o]),E=(0,n.hb)(async e=>{const t=await(u.zs.userPortrait?.getUserPortrait(e));t?(l(t),d(t)):(l(void 0),d(void 0));const a=await(u.zs.userPortraitMessage?.searchMessageBySenderId(e));A(a)},[]),b=(0,n.hb)(()=>{if(0===s?.length)return;const t=Math.max(...s.map(e=>e.messageId));if((!r||!r?.lastMsgId||r&&r?.lastMsgId<t)&&e===s?.[0]?.senderId){const n=r?.lastMsgId??0,o=s.reduce((e,t)=>(e[t.chatId]=(e[t.chatId]||0)+1,e),{}),l=Object.entries(o).sort((e,t)=>t[1]-e[1]).map(e=>e[0]);(0,h.jK)({messages:s?.slice(0,100)}).then(a=>{if(0===a.code&&a.data){const n={...r,id:e,lastMsgId:t,langs:a.data?.langs,tags:a.data?.tags,chatCount:Object.keys(o).length,chatIds:l};u.zs.userPortrait?.addUserPortrait(n),d(n)}});const c=(0,m.kU)(s.filter(e=>e.messageId>n));if(0===c.length)return;a(!0);const p=(0,i.mS)(),{autoTranslateLanguage:g="en"}=p.settings.byKey;(0,h.$4)({language:g,groupMessages:c}).then(t=>{if(0===t.code&&t.data&&t.data.activities&&Array.isArray(t.data.activities)){const n=[];t.data.activities?.forEach(t=>{const a=c.find(e=>e?.timeRange===t?.timeRange&&e?.time===t?.time),s={id:`${e}-(${t?.time})-(${t?.timeRange})`,senderId:e,isSummary:!0,time:t?.time,timeRange:t?.timeRange,summaryTime:(new Date).getTime(),messageCount:a?.chatGroups?.reduce((e,t)=>e+((t?.messages||[])?.length??0),0)??0,chatGroups:t?.chatGroups?.map(e=>({chatId:e?.chatId,title:e?.title,summaryItems:e?.summaryItems}))};u.zs.userPortraitMessage?.addUserPortraitMessage(s),n.push(s)}),A(e=>[...e,...n]),a(!1)}}).catch(()=>{a(!1)})}},[s,e,r]),x=(0,n.hb)(()=>{const e=[];c?.chatIds&&c?.chatIds?.length>0&&c?.chatIds?.slice(0,5).forEach(async t=>{const a=await(u.zs.aIChatFolders?.getAIChatFolder(t));e.push(a?.summary)}),f(e)},[c?.chatIds]);return(0,n.vJ)(()=>{b()},[s?.length,r?.lastMsgId,b]),(0,n.vJ)(()=>{x()},[x,c?.chatIds]),(0,n.vJ)(()=>{a(!1),o([]),A([]),d({}),f([]),E(e),v(e)},[e,v,E]),{userPortraitInfo:c,chatTags:y,portraitMessage:g,loading:t}}({userId:t}),b=(0,n.li)(),x=(0,d.A)();return(0,n.vJ)(()=>{b?.current?.scrollTo({top:0,behavior:"smooth"})},[t]),n.Ay.createElement(y.A,{ref:b,className:(0,c.A)(T.A.rightPanelBg,"Portrait custom-scroll"),noFastList:!0},n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"flex flex-col gap-2 items-center justify-center"},n.Ay.createElement(g.A,{peer:a,className:P.A.fallbackPhotoAvatar,size:"giant"}),n.Ay.createElement(A.A,{peer:a,canCopyTitle:!0})),n.Ay.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[14px]"},n.Ay.createElement("div",{className:"text-[16px] font-[700] mb-2"},"Basic Description"),n.Ay.createElement("div",{className:"flex flex-col gap-1"},a?.usernames?.[0]?.username&&n.Ay.createElement("div",null,n.Ay.createElement("span",{className:"font-[600]"},"Username: "),a?.usernames?.[0]?.username),n.Ay.createElement("div",null,n.Ay.createElement("span",{className:"font-[600]"},"Alias/Nickname: "),a?.firstName," ",a?.lastName),l?.langs&&n.Ay.createElement("div",null,n.Ay.createElement("span",{className:"font-[600]"},"Language: "),`${l?.langs?.[0]?`${l?.langs?.[0]}(Primary)`:""} ${l?.langs?.[1]?`, ${l?.langs?.[1]}(Secondary)`:""}`),l?.tags&&l?.tags?.length>0&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",null,n.Ay.createElement("span",{className:"font-[600]"},"Tags: ")),n.Ay.createElement("div",{className:"flex flex-row flex-wrap items-center gap-2"},l?.tags?.map((e,t)=>n.Ay.createElement("div",{className:"flex items-center justify-center px-2 rounded-[4px] h-[28px] text-[12px] font-[500] text-black",style:`background: ${L[t]}`},e))))))),l?n.Ay.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[14px]"},n.Ay.createElement("div",{className:"text-[16px] font-[700] mb-2"},"Behavioral Features & Group Participation"),l?.chatCount&&l?.chatCount>0&&n.Ay.createElement("div",null,n.Ay.createElement("div",{className:"font-[600]"},"Group Coverage"),n.Ay.createElement("div",null,"Participates in ",l?.chatCount," TG groups"," ",v?.length>0&&v?.filter(Boolean).length>0&&`(${(0,r.uniq)(v).join(",")})`)),l?.chatIds?.length&&n.Ay.createElement("div",{className:"mt-2"},n.Ay.createElement("div",{className:"font-[600]"},"Key Groups"),n.Ay.createElement("div",{className:"flex flex-col gap-2 mt-2"},l?.chatIds?.map(e=>n.Ay.createElement(N,{key:e,chatId:e,size:24,showName:!0}))))):void 0,n.Ay.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] text-[14px]"},n.Ay.createElement("div",{className:" rounded-t-[16px] text-[16px] font-[700] p-3 sticky top-[-10px] z-10 bg-[var(--color-ai-room-media-bg)] "},"Activity Stream"),s&&n.Ay.createElement("div",{className:"flex items-center justify-center p-3"},n.Ay.createElement(f.A,{className:"w-[18px] h-[18px] ml-2",color:"dark"===e?"white":"black"})),E?.length&&a?n.Ay.createElement("div",{className:"flex flex-col gap-2"},E?.sort((e,t)=>o()(!1===t?.isSummary?t?.time:`${t?.time} ${t?.timeRange?.split("-")[1]}`).unix()-o()(!1===e?.isSummary?e?.time:`${e?.time} ${e?.timeRange?.split("-")[1]}`).unix())?.map((e,t)=>n.Ay.createElement(k,{user:a,data:e,isLast:t===E.length-1,key:e?.id}))):!s&&n.Ay.createElement("div",{className:"empty"},x("NoMessages"))))}))},11359:(e,t,a)=>{"use strict";a.d(t,{L:()=>s});const n=5;function s(e,t){const{commonAncestorContainer:a}=e;let s=a,o=1;for(;s&&s.id!==t&&o<n;)s=s.parentElement,o++;return Boolean(s&&s.id===t)}},11462:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(30857),o=a(17712),r=a(35297);function i(e=!1){const t=(0,n.li)(e),a=(0,n.li)(!1),i=(0,s.A)();(0,r.A)(()=>{e&&(t.current=!0)},[e]);const l=(0,o.A)(()=>{t.current=!1,a.current=!1,i()}),c=(0,o.A)(()=>{a.current=!0,i()});return{shouldRenderForumPanel:t.current,isAnimationStarted:a.current,handleForumPanelAnimationEnd:l,handleForumPanelAnimationStart:c}}},11553:(e,t,a)=>{"use strict";e.exports=a.p+"calendar.44ba2c1ed5c080e9dfa9.png"},14413:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(84051),s=a(13439),o=a(31481),r=a(39351),i=a(19806),l=a(94189);const c=(0,n.ph)((0,s.EK)(e=>{const t=e.appConfig,a=t?.verifyAgeMin;return{verifyAgeMin:a||o.lYi}})(({isOpen:e,onClose:t,shouldAlwaysShow:a,onAlwaysShowChanged:s,confirmHandler:o,verifyAgeMin:c})=>{const d=(0,r.A)();return n.Ay.createElement(l.A,{title:d("TitleSensitiveModal",{years:c}),confirmLabel:d("ButtonSensitiveView"),isOpen:e,onClose:t,confirmHandler:o},d("TextSensitiveModal"),n.Ay.createElement(i.A,{className:"mYXi2mIC",label:d("ButtonSensitiveAlways",{years:c}),checked:a,onCheck:s}))}))},15006:(e,t,a)=>{"use strict";a.d(t,{U:()=>p,A:()=>u});var n=a(84051),s=a(13439),o=a(31481),r=a(60919),i=a(6842),l=a(14235);const c={root:"AN8wkEiR",ghost:"ANWk2pWP",scale:"kMHxyoSt",elementContainer:"UDCMfXxs"},d=50,m=1e3,u=(0,n.ph)(()=>n.Ay.createElement("div",{className:c.root,id:o.Lj4}));function p(e){const t=(0,s.mS)();if(!(0,r.Rwe)(t))return!1;const a=e.getBoundingClientRect(),u=a.left+window.scrollX,p=a.top+window.scrollY,h=a.width,g=a.height;if(u+h+d<0||u-d>window.innerWidth||p+g+d<0||p-d>window.innerHeight)return!1;const A=Math.floor(Date.now()/1e3),y=`${o.xcU}-${(0,l.A)()}`,f=n.Ay.createElement("svg",{className:c.ghost,width:h,height:g,style:`left: ${u}px; top: ${p}px;`,viewBox:`0 0 ${h} ${g}`},n.Ay.createElement("defs",null,function(e,t,a=42){return n.Ay.createElement("filter",{xmlns:o.jNX,id:e,x:"-150%",y:"-150%",width:"400%",height:"400%","color-interpolation-filters":"sRGB"},n.Ay.createElement("feTurbulence",{type:"fractalNoise",baseFrequency:"0.5",numOctaves:"1",result:"dustNoise",seed:a}),n.Ay.createElement("feComponentTransfer",{in:"dustNoise",result:"dustNoiseMask"},n.Ay.createElement("feFuncA",{type:"linear",slope:"5",intercept:"0"},n.Ay.createElement("animate",{attributeName:"slope",values:"5; 2; 1; 0",dur:`${m}ms`,fill:"freeze"}))),n.Ay.createElement("feComposite",{in:"SourceGraphic",in2:"dustNoiseMask",operator:"in",result:"dustySource"}),n.Ay.createElement("feTurbulence",{type:"fractalNoise",baseFrequency:"0.015",numOctaves:"1",result:"displacementNoise1",seed:a+1}),n.Ay.createElement("feTurbulence",{type:"fractalNoise",baseFrequency:"1",numOctaves:"2",result:"displacementNoise2",seed:a+2}),n.Ay.createElement("feMerge",{result:"combinedNoise"},n.Ay.createElement("feMergeNode",{in:"displacementNoise1"}),n.Ay.createElement("feMergeNode",{in:"displacementNoise2"})),n.Ay.createElement("feDisplacementMap",{in:"dustySource",in2:"combinedNoise",scale:"0",xChannelSelector:"R",yChannelSelector:"G"},n.Ay.createElement("animate",{attributeName:"scale",values:"0; "+3*t,dur:`${m}ms`,fill:"freeze"})))}(y,Math.min(h,g),A)),n.Ay.createElement("g",{filter:`url(#${y})`},n.Ay.createElement("foreignObject",{className:c.elementContainer,width:h,height:g}))),v=(0,i.A)(f)[0],E=v.querySelector("foreignObject"),b=window.getComputedStyle(e),x=e.cloneNode(!0);Array.from(b).forEach(e=>x.style.setProperty(e,b.getPropertyValue(e),"important")),E.appendChild(x);const w=document.getElementById(o.Lj4);return w.appendChild(v),v.addEventListener("animationend",()=>{w.removeChild(v)},{once:!0}),!0}},15365:()=>{},15591:(e,t,a)=>{"use strict";a.d(t,{A:()=>le});var n=a(84051),s=a(13439),o=a(23174),r=a(31481),i=a(90709),l=a(27109),c=a(60919),d=a(85982),m=a(64713),u=a(83868),p=a(59852),h=a(79882),g=a(24899),A=a(4961),y=a(82117),f=a(39351),v=a(17712),E=a(62587),b=a(59030),x=a(38691),w=a(32754),C=a(64493),N=a(22720),I=a(55158),S=a(63152),M=a(87412),k=a(84685),T=a(66644),P=a(96454),L=a(87357),B=a(17663);const R=1440,F=10080;function D(){const e=new Date;e.setHours(0,0,0,0);const t=e.getDay(),a=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(a)).getTime()}function O(e,t){if(0===t)return e;const a=[];for(const n of e){let e=(n.startMinute+t)%F,s=(n.endMinute+t)%F;e<0&&(e+=F),s<=0&&(s+=F),e>s?(a.push({startMinute:e,endMinute:10079}),a.push({startMinute:0,endMinute:s})):a.push({startMinute:e,endMinute:s})}return a.sort((e,t)=>e.startMinute-t.startMinute),a.reduce((e,t)=>{const a=e[e.length-1];return a&&a.endMinute>=t.startMinute?a.endMinute=Math.max(a.endMinute,t.endMinute):e.push(t),e},[])}var z=a(98255),U=a(32625),j=a(19129),V=a(37661),J=a(30857),H=a(41036),K=a(54746);const $="MPBKHdZL",G=Array.from({length:7},(e,t)=>t),_=(0,n.ph)(({businessHours:e})=>{const t=(0,n.li)(),[a,s,o]=(0,V.A)(!1),[r,i,l]=(0,V.A)(!1),c=(0,b.A)(),d=(0,J.A)();(0,U.A)(d,6e4);const m=(0,z.A)(e=>e.timezones?.byId),u=(0,j.A)(m,[m]),p=(0,n.Kr)(()=>{if(!u)return 0;const t=u[e.timezoneId];return(-60*(new Date).getTimezoneOffset()-t.utcOffset)/60},[e.timezoneId,u]),h=(0,n.Kr)(()=>{const t=D(),a=function(e){const t={};for(const a of e){const e=a.startMinute,n=a.endMinute,s=Math.floor(e/R),o=Math.floor((n-1)/R);for(let a=s;a<=o;a++)t[a]||(t[a]=[]),t[a].push({startMinute:Math.max(0,e-a*R),endMinute:Math.min(R,n-a*R)})}return t}(O(e.workHours,r?p:0)),n={};return G.forEach(e=>{const s=a[e];n[e]=s?s.map(({startMinute:e,endMinute:a})=>a-e===1440?c("BusinessHoursDayFullOpened"):`${(0,B.fU)(c,t+60*e*1e3)} – ${(0,B.fU)(c,t+60*a*1e3)}`):[c("BusinessHoursDayClosed")]}),n},[e.workHours,r,c,p]),g=(0,n.Kr)(()=>{const t=O(e.workHours,p),a=D(),n=((new Date).getTime()-a)/1e3/60;return t.some(({startMinute:e,endMinute:t})=>e<=n&&n<=t)},[e.workHours,p]),A=(0,n.Kr)(()=>(new Date(Date.now()-(r?0:60*p*1e3)).getDay()+6)%7,[r,p]),y=(0,v.A)(()=>{a?o():s()}),f=(0,v.A)(e=>{e.stopPropagation(),r?l():i()});(0,n.vJ)(()=>{if(!a)return;const e=document.querySelector(`.${H.uo} > .${$}`);if(!e)return;const n=e.offsetHeight;(0,T.RK)(()=>{t.current.style.height=`${n}px`})},[a]);const E=(0,v.A)(()=>{const e=document.querySelector(`.${H.VY} > .${$}`);(0,T.YS)(()=>{const a=e.offsetHeight;(0,T.RK)(()=>{t.current.style.height=`${a}px`})})});return n.Ay.createElement(N.A,{icon:"clock",iconClassName:"rlM4Mbnn",multiline:!0,className:"Ef_0p5Qm",isStatic:a,ripple:!0,narrow:!0,withColorTransition:!0,onClick:y},n.Ay.createElement("div",{className:"nHSmCUNs"},n.Ay.createElement("div",{className:"JTZ8UnnP"},n.Ay.createElement("div",null,c("BusinessHoursProfile")),n.Ay.createElement("div",{className:(0,L.A)("JVL7ZnnJ",g&&"segAfYXs")},c(g?"BusinessHoursProfileNowOpen":"BusinessHoursProfileNowClosed"))),n.Ay.createElement(K.A,{className:"dYxw2cFn",name:a?"up":"down"})),a&&n.Ay.createElement("div",{className:"lp9VIV1o"},Boolean(p)&&n.Ay.createElement("div",{className:"gVwflFhz",role:"button",tabIndex:0,onMouseDown:P.TF?void 0:f,onClick:P.TF?f:void 0},c(r?"BusinessHoursProfileSwitchMy":"BusinessHoursProfileSwitchLocal")),n.Ay.createElement(H.Ay,{className:"WKgL_XiP",ref:t,name:"fade",activeKey:Number(r),onStart:E},n.Ay.createElement("dl",{className:$},G.map(e=>n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("dt",{className:(0,L.A)("cmxPqAof",e===A&&"YZVvP_56")},(0,B.wv)(c,6===e?0:e+1)),n.Ay.createElement("dd",{className:"Rs0VPgpq"},h[e].map(e=>n.Ay.createElement("div",null,e)))))))))});var q=a(50444),W=a(77787),Q=a(10979);const Y=()=>n.Ay.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:3,fill:"none"},n.Ay.createElement("path",{fill:"currentColor",d:"M1.268 0a1.267 1.267 0 1 1-.002 2.534A1.267 1.267 0 0 1 1.268 0Zm4.435 0a1.268 1.268 0 1 1 0 2.536 1.268 1.268 0 0 1 0-2.536Zm4.437 0a1.268 1.268 0 1 1 0 2.535 1.268 1.268 0 0 1 0-2.535Z"})),Z=(0,n.ph)(({user:e,subscriptionType:t})=>{const a=(0,b.A)(),{openUserPortrait:o,openPayPackageModal:r}=(0,s.ko)(),[i,l]=(0,n.J0)(),c=(0,v.A)(()=>{(0,q.N)()&&"plus"===t?o({userId:e?.id}):r()}),d=(0,n.hb)(async e=>{if(!e)return;const t=await(W.zs.userPortrait?.getUserPortrait(e));l(t||void 0)},[]);return(0,n.vJ)(()=>{d(e?.id)},[e?.id,d]),n.Ay.createElement(N.A,{icon:"portrait-large-icon",iconClassName:(0,L.A)(i?.tags?.length?"pb-[40px]":""),multiline:!0,narrow:!0,ripple:!0,onClick:c},n.Ay.createElement("span",{className:"title"},n.Ay.createElement("span",{className:"font-[600]"},(e?.firstName||"")+(e?.lastName||"")),"‘s portrait"),i?.tags&&i?.tags?.length>0&&n.Ay.createElement("div",{className:"flex items-center gap-1 my-1"},i?.tags?.slice(0,1)?.map((e,t)=>n.Ay.createElement("div",{className:"flex items-center justify-center px-2 rounded-[4px] h-[24px] text-[12px] font-[500]",style:`background: ${Q.s[t]}`},e)),i?.tags?.length>1&&n.Ay.createElement("div",{className:"flex items-center justify-center px-2 rounded-[4px] h-[24px]",style:`background: ${Q.s[1]}`},n.Ay.createElement(Y,null))),n.Ay.createElement("span",{className:"subtitle"},a("User Portrait")))});var X=a(87894),ee=a(58554),te=a(14737),ae=a(82855);const ne=["🎉","🎆","🎈"],se=(0,n.ph)((0,s.EK)(e=>{const{birthdayNumbers:t,animatedEmojiEffects:a}=e;return{birthdayNumbers:t,animatedEmojiEffects:a,isPremiumPurchaseBlocked:(0,c.n_C)(e)}})(({user:e,birthday:t,isPremiumPurchaseBlocked:a,birthdayNumbers:r,animatedEmojiEffects:l,isInSettings:c})=>{const{openGiftModal:d,requestConfetti:m}=(0,s.ko)(),u=(0,n.li)(),p=(0,n.li)(!1),[h,g,y]=(0,V.A)(),f=(0,b.A)(),{formattedDate:E,isToday:x,age:w}=(0,n.Kr)(()=>{const e=new Date,a=new Date;return t.year&&a.setFullYear(t.year),a.setMonth(t.month-1),a.setDate(t.day),a.setHours(0,0,0,0),{formattedDate:(0,B.A)(a,f.code,!0,"long"),isToday:a.getDate()===e.getDate()&&a.getMonth()===e.getMonth(),age:t.year&&oe(a)}},[t,f]),C=(0,n.Kr)(()=>{if(!w||!x)return;const e=r?.stickers?.filter(({emoji:e})=>e?.endsWith("️⃣"));if(!e)return;const t=(0,X.dU)(e,"emoji");return w.toString().split("").map(e=>t[e+"️⃣"])},[w,r?.stickers,x]),I=(0,n.Kr)(()=>{if(!x)return;const e=ne[Math.floor(Math.random()*ne.length)];return l?.stickers?.find(({emoji:t})=>t===e)},[l?.stickers,x]);(0,n.vJ)(()=>{if(x&&C&&(C.forEach(e=>{const t=(0,i.Mw)(e,"preview");ee.hd(t,o.qZ.BlobUrl)}),I)){const e=(0,i.Mw)(I,"preview");ee.hd(e,o.qZ.BlobUrl)}},[I,x,C]),(0,te.A)(y,h?3e3:void 0),(0,n.vJ)(()=>{if(h){p.current=!0;const e=document.getElementById(c?"LeftColumn":"RightColumn");if(!e)return;(0,T.YS)(()=>{const{top:t,left:a,width:n,height:s}=e.getBoundingClientRect();m({top:t,left:a,width:n,height:s,style:"top-down"})})}},[c,h]);const S=`ProfileBirthday${x?"Today":""}Value${w?"Year":""}`,M=x&&!e.isPremium&&!e.isSelf&&!a,k=(0,v.A)(()=>{d({forUserId:e.id})}),R=(0,v.A)(()=>{x&&(M&&p.current?k():g())}),F=!x&&!M;return n.Ay.createElement("div",{className:"wCp6TBYF"},n.Ay.createElement(N.A,{icon:"calendar",secondaryIcon:M?"gift":void 0,secondaryIconClassName:"c4HDQNGJ",multiline:!0,narrow:!0,ref:u,ripple:!F,onClick:R,isStatic:F,onSecondaryIconClick:k},n.Ay.createElement("div",{className:"title",dir:f.isRtl?"rtl":void 0},(0,A.A)(f(S,[E,w],void 0,w))),n.Ay.createElement("span",{className:"subtitle"},f(x?"ProfileBirthdayToday":"ProfileBirthday"))),h&&P.ol&&C?.map((e,t)=>n.Ay.createElement("div",{className:(0,L.A)("lQeU96Fj",t>0&&"e1ezfWJb"),style:`--digit-offset: ${t}`},n.Ay.createElement(ae.A,{containerRef:u,sticker:e,size:128,forceAlways:!0}))),h&&I&&n.Ay.createElement("div",{className:"cFEXGUih"},n.Ay.createElement(ae.A,{containerRef:u,sticker:I,size:288,shouldLoop:!0,forceAlways:!0})))}));function oe(e){const t=new Date;let a=t.getFullYear()-e.getFullYear();const n=t.getMonth()-e.getMonth();return(n<0||0===n&&t.getDate()<e.getDate())&&a--,a}const re="UZbkeFDB",ie={width:64,height:64,zoom:15},le=(0,n.ph)((0,s.EK)((e,{chatOrUserId:t,isSavedDialog:a})=>{const{countryList:{phoneCodes:n},subscriptionInfo:s}=e,o=t?(0,c.hds)(e,t):void 0,r=t?(0,c.mBe)(e,t):void 0,d=t?(0,c.XOs)(e,t):void 0,m=o?.isForum,u=o&&(0,l.If)(o,(0,c.K52)(e),(0,c.P5N)(e,o.id)),{threadId:p}=(0,c.Xf0)(e)||{},h=m&&p?Number(p):void 0,g=o&&(0,c.AWZ)(e,o.id),A=r&&(0,c.vGo)(e,r.id),y=A?.botVerification||g?.botVerification,f=g?.inviteLink,v=A?.bio||g?.about,E=o&&!r&&(!(0,i.WX)(o)&&!(0,i.Sq)(o,"inviteUsers")||(0,i.ub)(o,"inviteUsers")),b=h?(0,c.sZk)(e,t,h):void 0,x=!a&&e.chats.listIds.saved?.includes(t),w=A?.personalChannelId?(0,c.hds)(e,A.personalChannelId):void 0,C=r?.hasMainMiniApp;return{phoneCodeList:n,chat:o,user:r,userFullInfo:A,canInviteUsers:E,botAppPermissions:d,isMuted:u,topicId:h,chatInviteLink:f,description:v,topicLink:b,hasSavedMessages:x,personalChannel:w,hasMainMiniApp:C,isBotCanManageEmojiStatus:A?.isBotCanManageEmojiStatus,botVerification:y,subscriptionType:s?.subscriptionType}})(({chatOrUserId:e,user:t,chat:a,userFullInfo:l,isInSettings:T,canInviteUsers:P,isMuted:L,phoneCodeList:B,topicId:R,description:F,chatInviteLink:D,topicLink:O,hasSavedMessages:z,personalChannel:U,hasMainMiniApp:j,isBotCanManageEmojiStatus:V,botAppPermissions:J,botVerification:H,subscriptionType:K})=>{const{showNotification:$,updateChatMutedState:G,updateTopicMutedState:q,loadPeerStories:W,openSavedDialog:Q,openMapModal:Y,requestCollectibleInfo:X,requestMainWebView:ee,toggleUserEmojiStatusPermission:te,toggleUserLocationPermission:ae}=(0,s.ko)(),{id:ne,usernames:oe,phoneNumber:le,isSelf:ce}=t||{},{id:de,usernames:me}=a||{},ue=ne||de,{businessLocation:pe,businessWorkHours:he,personalChannelMessageId:ge,birthday:Ae}=l||{},ye=(0,b.A)(),fe=(0,f.A)();(0,y.A)(([e])=>{ue&&e!==ue&&(t||a&&(0,i.WX)(a))&&W({peerId:ue})},[ue,a,t]);const{width:ve,height:Ee,zoom:be}=ie,xe=(0,x.A)(),we=pe?.geo&&(0,i.rt)(pe.geo,ve,Ee,be,xe),Ce=(0,E.A)(we),Ne=(0,n.Kr)(()=>{if(pe?.geo)return Ce?n.Ay.createElement("img",{src:Ce,alt:"",className:re}):n.Ay.createElement(I.A,{className:re})},[pe,Ce]),Ie=Boolean(R&&R!==o.l3),Se=a&&(0,i.WX)(a)||t?.isPremium,Me=(0,n.Kr)(()=>{const e=oe?.filter(e=>e.isActive);return e?.length?e:void 0},[oe]),ke=(0,n.Kr)(()=>{const e=t?void 0:me?.filter(e=>e.isActive);return e?.length?e:void 0},[me,t]),Te=(0,n.Kr)(()=>{if(a)return Ie?O:(0,i.L7)(a)||D},[a,Ie,O,D]),Pe=(0,v.A)(()=>{const{address:e,geo:t}=pe;if(!t)return(0,d.eM)(e),void $({message:ye("BusinessLocationCopied")});Y({geoPoint:t,zoom:be})}),Le=(0,v.A)(()=>{Ie?q({chatId:de,topicId:R,isMuted:!L}):G({chatId:de,isMuted:!L})}),Be=(0,v.A)(()=>{t&&te({botId:t.id,isEnabled:!V})}),Re=(0,v.A)(()=>{t&&ae({botId:t.id,isAccessGranted:!J?.geolocation})}),Fe=(0,v.A)(()=>{Q({chatId:e})});function De(e,t){(0,d.eM)(e),$({message:`${t} was copied`})}const Oe=le&&(0,m.Ox)(B,le),ze=(0,v.A)(()=>{le?.length===r.PGI&&le.startsWith(r._Bb)?X({collectible:le,peerId:ue,type:"phone"}):De(Oe,ye("Phone"))}),Ue=(0,v.A)((e,t)=>{e.isEditable?De((0,g.A)(e.username,t),ye(t?"Link":"Username")):X({collectible:e.username,peerId:ue,type:"username"})}),je=(0,v.A)(()=>{const e=t?.id;if(!e)return;const a=(0,p.A)();ee({botId:e,peerId:e,theme:a,shouldMarkBotTrusted:!0})}),Ve=fe("ProfileOpenAppAbout",{terms:n.Ay.createElement(k.A,{text:fe("ProfileOpenAppTerms"),url:fe("ProfileBotOpenAppInfoLink")})},{withNodes:!0});if(!(de&&(0,c._ls)((0,s.mS)(),de)||ce&&!T))return n.Ay.createElement("div",{className:"ChatExtra"},U&&n.Ay.createElement("div",{className:"HP5EJx7s"},n.Ay.createElement("h3",{className:"cHyTGri2"},ye("ProfileChannel")),n.Ay.createElement("span",{className:"kYd2GrmU"},ye("Subscribers",U.membersCount,"i")),n.Ay.createElement(w.A,{chatId:U.id,orderDiff:0,animationType:h.I.None,isPreview:!0,previewMessageId:ge,className:"qOJwhXMC"})),Boolean(Oe?.length)&&n.Ay.createElement(N.A,{icon:"phone",multiline:!0,narrow:!0,ripple:!0,onClick:ze},n.Ay.createElement("span",{className:"title",dir:fe.isRtl?"rtl":void 0},Oe),n.Ay.createElement("span",{className:"subtitle"},ye("Phone"))),Me&&n.Ay.createElement(n.Ay.Fragment,null,Je(Me),t&&n.Ay.createElement(Z,{user:t,subscriptionType:K})),F&&Boolean(F.length)&&n.Ay.createElement(N.A,{icon:"info",multiline:!0,narrow:!0,isStatic:!0,allowSelection:!0},n.Ay.createElement("span",{className:"title word-break allow-selection",dir:fe.isRtl?"rtl":void 0},(0,A.A)(F,["br",Se?"links":"tg_links","emoji"])),n.Ay.createElement("span",{className:"subtitle"},ye(ne?"UserBio":"Info"))),ke&&!Ie&&Je(ke,!0),(!ke&&P||Ie)&&Te&&n.Ay.createElement(N.A,{icon:"link",multiline:!0,narrow:!0,ripple:!0,onClick:()=>De(Te,ye("SetUrlPlaceholder"))},n.Ay.createElement("div",{className:"title"},Te),n.Ay.createElement("span",{className:"subtitle"},ye("SetUrlPlaceholder"))),Ae&&n.Ay.createElement(se,{key:ue,birthday:Ae,user:t,isInSettings:T}),j&&n.Ay.createElement(N.A,{multiline:!0,isStatic:!0,narrow:!0},n.Ay.createElement(C.A,{className:"x925YeS3",size:"smaller",onClick:je},ye("ProfileBotOpenApp")),n.Ay.createElement("div",{className:"IrqRJFxm"},Ve)),!T&&n.Ay.createElement(N.A,{icon:"unmute",narrow:!0,ripple:!0,onClick:Le},n.Ay.createElement("span",null,ye("Notifications")),n.Ay.createElement(S.A,{id:"group-notifications",label:ne?"Toggle User Notifications":"Toggle Chat Notifications",checked:!L,inactive:!0})),he&&n.Ay.createElement(_,{businessHours:he}),pe&&n.Ay.createElement(N.A,{icon:"location",ripple:!0,multiline:!0,narrow:!0,rightElement:Ne,onClick:Pe},n.Ay.createElement("div",{className:"title"},pe.address),n.Ay.createElement("span",{className:"subtitle"},ye("BusinessProfileLocation"))),z&&!T&&n.Ay.createElement(N.A,{icon:"saved-messages",narrow:!0,ripple:!0,onClick:Fe},n.Ay.createElement("span",null,ye("SavedMessagesTab"))),l&&"isBotAccessEmojiGranted"in l&&n.Ay.createElement(N.A,{icon:"user",narrow:!0,ripple:!0,onClick:Be},n.Ay.createElement("span",null,ye("BotProfilePermissionEmojiStatus")),n.Ay.createElement(S.A,{label:ye("BotProfilePermissionEmojiStatus"),checked:V,inactive:!0})),void 0!==J?.geolocation&&n.Ay.createElement(N.A,{icon:"location",narrow:!0,ripple:!0,onClick:Re},n.Ay.createElement("span",null,ye("BotProfilePermissionLocation")),n.Ay.createElement(S.A,{label:ye("BotProfilePermissionLocation"),checked:J?.geolocation,inactive:!0})),H&&n.Ay.createElement("div",{className:"RWFu5ENh"},n.Ay.createElement(M.A,{className:"b32hsSPS",documentId:H.iconId,size:16}),H.description));function Je(e,t){const[a,...s]=e,o=s.length?ye("UsernameAlso","%USERNAMES%").split("%").map(e=>"USERNAMES"===e?n.Ay.createElement(n.Ay.Fragment,null,s.map((e,a)=>n.Ay.createElement(n.Ay.Fragment,null,a>0?", ":"",n.Ay.createElement("a",{key:e.username,href:(0,g.A)(e.username,!0),onMouseDown:u.A,onClick:a=>{(0,u.A)(a),Ue(e,t)},className:"text-entity-link username-link"},(0,g.A)(e.username))))):e):void 0;return n.Ay.createElement(N.A,{icon:t?"link":"mention",multiline:!0,narrow:!0,ripple:!0,onClick:()=>{Ue(a,t)}},n.Ay.createElement("span",{className:"title",dir:fe.isRtl?"rtl":void 0},(0,g.A)(a.username,t)),n.Ay.createElement("span",{className:"subtitle"},o&&n.Ay.createElement("span",{className:"other-usernames"},o),ye(t?"Link":"Username")))}}))},17169:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});const n={name:"BDZrSTO_",root:"QOz6fQFU",avatar:"dXSy0i2c",avatarHidden:"n0vJEdNW",ghost:"E1IeDpeb",ghostAnimateName:"HMp3KTKQ",ghostRevealName:"unYkDic1",ghostLast:"dZJGfaXC"}},17751:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var n=a(84051),s=a(13439),o=a(89925),r=a(90709),i=a(60919),l=a(87357),c=a(4961),d=a(54699),m=a(17712),u=a(59030),p=a(42452),h=a(21849),g=a(80999),A=a(34431),y=a(54746),f=a(80477);const v=(0,n.ph)((0,s.EK)((e,{userId:t,forceShowSelf:a})=>{const{isSynced:n}=e,s=t?(0,i.mBe)(e,t):void 0,o=t?(0,i.K0y)(e,t):void 0,r=!a&&s&&s.isSelf,l=r?s:(0,i.mBe)(e,e.currentUserId);return{user:s,userStatus:o,isSavedMessages:r,areMessagesLoaded:Boolean(t&&(0,i.zeq)(e,t)),self:l,isSynced:n}})(({customPeer:e,typingStatus:t,avatarSize:a="medium",status:i,statusIcon:v,withDots:E,withMediaViewer:b,withUsername:x,withStory:w,withFullInfo:C,withUpdatingStatus:N,emojiStatusSize:I,noStatusOrTyping:S,noEmojiStatus:M,noFake:k,noVerified:T,noRtl:P,user:L,userStatus:B,self:R,isSavedMessages:F,isSavedDialog:D,areMessagesLoaded:O,adminMember:z,ripple:U,className:j,storyViewerOrigin:V,isSynced:J,onEmojiStatusClick:H,iconElement:K,rightElement:$})=>{const{loadFullUser:G,openMediaViewer:_,loadMoreProfilePhotos:q}=(0,s.ko)(),W=(0,u.A)(),{id:Q}=L||{},Y=b&&!F;(0,n.vJ)(()=>{Q&&(C&&J&&G({userId:Q}),b&&q({peerId:Q,isPreload:!0}))},[Q,C,b,J]),(0,d.A)(6e4);const Z=(0,m.A)((e,t)=>{L&&t&&(e.stopPropagation(),_({isAvatarView:!0,chatId:L.id,mediaIndex:0,origin:"jumbo"===a?o.TQ.ProfileAvatar:o.TQ.MiddleHeaderAvatar}))}),X=(0,n.Kr)(()=>L&&x&&(0,r.Kl)(L),[L,x]);if(!L&&!e)return;const ee=z?z.customTitle||W(z.isOwner?"GroupInfo.LabelOwner":"GroupInfo.LabelAdmin"):void 0;return n.Ay.createElement("div",{className:(0,l.A)("ChatInfo",j),dir:!P&&W.isRtl?"rtl":void 0},D&&R&&n.Ay.createElement(h.A,{key:"saved-messages",size:a,peer:R,isSavedMessages:!0,className:"saved-dialog-avatar"}),n.Ay.createElement(h.A,{key:L?.id,size:a,peer:e||L,className:(0,l.A)(D&&"overlay-avatar"),isSavedMessages:F,isSavedDialog:D,withStory:w,storyViewerOrigin:V,storyViewerMode:"single-peer",onClick:Y?Z:void 0}),n.Ay.createElement("div",{className:"info"},ee?n.Ay.createElement("div",{className:"info-name-title"},n.Ay.createElement(A.A,{peer:L,withEmojiStatus:!M,emojiStatusSize:I,isSavedMessages:F,isSavedDialog:D,onEmojiStatusClick:H}),ee&&n.Ay.createElement("span",{className:"custom-title"},ee)):n.Ay.createElement(A.A,{peer:e||L,noFake:k,noVerified:T,withEmojiStatus:!M,emojiStatusSize:I,isSavedMessages:F,isSavedDialog:D,onEmojiStatusClick:H,iconElement:K}),(i||!F&&!S)&&function(){if(i)return E?n.Ay.createElement(g.A,{className:"status",content:i}):n.Ay.createElement("span",{className:"status",dir:"auto"},v&&n.Ay.createElement(y.A,{className:"status-icon",name:v}),(0,c.A)(i));if(N&&!O)return n.Ay.createElement(g.A,{className:"status",content:W("Updating")});if(e?.subtitleKey)return n.Ay.createElement("span",{className:"status",dir:"auto"},n.Ay.createElement("span",{className:"user-status",dir:"auto"},W(e.subtitleKey)));if(!L)return;if(t)return n.Ay.createElement(f.A,{typingStatus:t});if((0,r.DX)(L.id))return;const a=(0,r.CD)(W,L,B),s=(0,l.A)("handle",a&&"withStatus");return n.Ay.createElement("span",{className:(0,l.A)("status",(0,r.PF)(L,B,!0)&&"online")},X&&n.Ay.createElement("span",{className:s},X),a&&n.Ay.createElement("span",{className:"user-status",dir:"auto"},a))}()),U&&n.Ay.createElement(p.A,null),$)}))},17778:(e,t,a)=>{"use strict";a.d(t,{S:()=>i});const n=/(<br>|<br\s?\/>)/g,s=/(&nbsp;|\u00A0)/g,o=/(<div>|<\/div>)/gi,r=/\n$/i;function i(e){return e.replace(s," ").replace(n,"\n").replace(o,"").replace(r,"")}},20247:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(13439),o=a(31481),r=a(17712);function i(e,t,a){const{shouldPaidMessageAutoApprove:i}=(0,s.mS)().settings.byKey,[l,c]=(0,n.J0)(Boolean(i)),[d,m]=(0,n.J0)(!1),u=(0,n.li)(void 0),p=(0,r.A)(()=>{(0,s.ko)().closePaymentMessageConfirmDialogOpen()});(0,n.vJ)(()=>{d&&!t&&(m(!1),a>e&&u?.current?.())},[d,t,a,e]);const h=(0,r.A)(()=>{(0,s.ko)().openStarsBalanceModal({topup:{balanceNeeded:e,purpose:o.D3m}}),m(!0)});return{closeConfirmDialog:p,handleWithConfirmation:(t,...n)=>{if(e){if(u.current=()=>t(...n),!i)return void(0,s.ko)().openPaymentMessageConfirmDialogOpen();if(e>a)return void h()}t(...n)},dialogHandler:(0,r.A)(()=>{e>a?h():u?.current?.(),(0,s.ko)().closePaymentMessageConfirmDialogOpen(),l&&(0,s.ko)().setPaidMessageAutoApprove()}),shouldAutoApprove:l,setAutoApprove:c}}},21488:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(13439),o=a(37836);const r=function(e,t,a){const{loadPeerStoriesByIds:r}=(0,s.ko)(),i=(0,n.Kr)(()=>{const a=(0,o.nF)(r,200,!0);return()=>{a({peerId:e,storyIds:[t]})}},[t,e]);(0,n.vJ)(()=>{e&&t&&(!a||!("content"in a)&&!("isDeleted"in a))&&i()},[i,a,t,e])}},23459:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(9716),l=a(37836);const c=36e5,d=new Map;let m=new Set;const u=(0,l.nF)(()=>{const e=Array.from(m),t=e.slice(0,100),a=e.slice(101);(0,s.ko)().loadStoriesMaxIds({peerIds:t}),t.forEach(e=>d.set(e,Date.now())),m=new Set(a),m.size&&u()},500);function p(e){const t=(0,n.Kr)(()=>{const t=(0,s.mS)();return e?.map(e=>(0,r.PVB)(t,e)).filter(Boolean)},[e]),a=(0,n.Kr)(()=>{const e=(0,s.mS)();return t?.filter(t=>{const a=d.get(t.id)||0;if(Date.now()-a<c)return!1;if((0,i.L8)(t.id)){const a=t,n=(0,r.K0y)(e,a.id),s=n&&"userStatusEmpty"!==n.type;return!a.isContact&&!a.isSelf&&!(0,o.tv)(a)&&!t.isSupport&&s}{const a=t,n=(0,r._ls)(e,a.id);return(0,o.WX)(a)&&!n}}).map(e=>e.id)},[t]);(0,n.vJ)(()=>{a?.length&&(a.forEach(e=>m.add(e)),u())},[a])}},23565:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(30857),o=a(73767),r=a(35297);function i(e,t){const a=(0,o.A)(e,!0),i=(0,n.li)(),l=(0,s.A)(),c=null!=e,d=null!=a;return c&&i.current&&(clearTimeout(i.current),i.current=void 0),(0,r.A)(()=>{t&&!c&&d&&!i.current&&(i.current=window.setTimeout(()=>{i.current=void 0,l()},t))},[t,l,c,d]),i.current&&t&&!c?a:e}},23814:(e,t,a)=>{"use strict";e.exports=a.p+"message.772cf7cc443d60210a5e.png"},24807:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(84051),s=a(13439),o=a(87357),r=a(80140),i=a(22237),l=a(14242),c=a(59852),d=a(19129),m=a(39351),u=a(17712),p=a(59030),h=a(68292),g=a(54746),A=a(64493),y=a(26607);const f=(0,n.ph)(({topic:e,topics:t,chat:a,isPinned:f,isMuted:v,shouldShowOnlyMostImportant:E,wasTopicOpened:b,forceHidden:x,isSavedDialog:w,hasMiniApp:C,isSelected:N})=>{const{requestMainWebView:I}=(0,s.ko)(),S=(0,p.A)(),M=(0,m.A)(),{unreadMentionsCount:k=0,unreadReactionsCount:T=0}=a.isForum?{}:a,P=!f&&e&&!b,L=a.isForum&&!e,B=(0,n.Kr)(()=>L&&t?Object.values(t).filter(({unreadCount:e})=>e):void 0,[t,L]),R=(0,n.Kr)(()=>L?B?.length:(e||a).unreadCount,[a,e,B,L]),F=(0,n.Kr)(()=>{if(!L)return!v||0===e?.notifySettings.mutedUntil;if(v)return B?.some(e=>0===e.notifySettings.mutedUntil);const t=B?.every(e=>e.notifySettings.mutedUntil&&e.notifySettings.mutedUntil>(0,r.Fm)());return!t},[L,v,B,e?.notifySettings.mutedUntil]),D=!e&&a.hasUnreadMark,O=!(0,d.A)(()=>(0,i.Hp)(x)?x():x,[x])&&Boolean(R||k||D||f||T||P||C),z=Boolean((R||D)&&!w),U=(0,o.A)("ChatBadge",!F&&"muted",!z&&f&&"pinned",z&&"unread"),j=(0,u.A)(e=>{e.stopPropagation();const t=(0,c.A)();I({botId:a.id,peerId:a.id,theme:t})});return n.Ay.createElement(y.A,{isCustom:!0,className:"ChatBadge-transition",isOpen:O},function(){const e=T&&n.Ay.createElement("div",{className:(0,o.A)("ChatBadge reaction",!F&&"muted")},n.Ay.createElement(g.A,{name:"heart"})),t=k&&n.Ay.createElement("div",{className:"ChatBadge mention"},n.Ay.createElement(g.A,{name:"mention"})),a=P&&n.Ay.createElement("div",{className:(0,o.A)("ChatBadge unopened",!F&&"muted")}),s=D||R?n.Ay.createElement("div",{className:U},!D&&n.Ay.createElement(h.A,{text:(0,l.Vw)(M,R)})):void 0,r=f&&n.Ay.createElement("div",{className:U},n.Ay.createElement(g.A,{name:"pinned-chat"})),i=C&&n.Ay.createElement(A.A,{color:N?"secondary":"primary",className:"ChatBadge miniapp",pill:!0,size:"tiny",onClick:j},S("BotOpen")),c=!s&&!t&&!e&&r,d=[a,e,t,s,c].filter(Boolean);return w?r:C&&(0===d.length||c)?i:0!==d.length?1===d.length?d[0]:E?[t,s,e,r].filter(Boolean)[0]:n.Ay.createElement("div",{className:"ChatBadge-wrapper"},d):void 0}())})},24845:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});const n={fallbackPhoto:"Wm9Ygb23",fallbackPhotoContents:"nflKKT3R",fallbackPhotoVisible:"tFkRrvxe",fallbackPhotoAvatar:"R7w3H5eC",photoWrapper:"GBGLnrA7",photoDashes:"uyvKpR3B",photoDash:"wB4yjvei",photoDash_current:"aZmp9FLh",photoDashCurrent:"aZmp9FLh",navigation:"ZZRcBh8v",navigation_prev:"RQITz4WQ",navigationPrev:"RQITz4WQ",navigation_next:"_0F1Txru",navigationNext:"_0F1Txru",info:"UcyW7tVh",status:"cpyXyZDl","user-status":"_HDVUj4P",userStatus:"_HDVUj4P","get-status":"Qga38M20",getStatus:"Qga38M20",topicContainer:"yzg267rr",topicTitle:"umOuiu3K",topicIcon:"ZCxp0_t4",topicIconTitle:"lkfZNWOm",topicMessagesCounter:"tLTzQ2ks"}},24899:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(31481);function s(e,t){return t?`${n.jsp}${e}`:`@${e}`}},24920:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(30857),o=a(73767);function r(e){const t=(0,s.A)(),a=(0,n.li)(e),r=(0,o.A)(e);return!1===e&&r!==e&&(a.current=!1),{shouldDisableDropdownMenuTransitionRef:a,handleDropdownMenuTransitionEnd:function(){a.current=Boolean(e),t()}}}},25352:()=>{},25477:(e,t,a)=>{"use strict";a.d(t,{A:()=>S});var n=a(84051),s=a(13439),o=a(90709),r=a(87357),i=a(17663),l=a(58554),c=a(76023),d=a(35127),m=a(84313),u=a(43874),p=a(37661),h=a(5912),g=a(17712),A=a(62587),y=a(37960),f=a(69419),v=a(73767),E=a(34201),b=a(61097),x=a(54746),w=a(27860),C=a(14413),N=a(65843),I=a(35913);const S=(0,n.ph)((0,s.EK)(e=>{const t=e.appConfig,a=t?.needAgeVideoVerification;return{needsAgeVerification:a}})(({id:e,video:t,isOwn:a,isInWebPage:S,noAvatars:M,canAutoLoad:k,canAutoPlay:T,uploadProgress:P,forcedWidth:L,dimensions:B,asForwarded:R,isDownloading:F,isProtected:D,className:O,lastPlaybackTimestamp:z,clickArg:U,isMediaNsfw:j,observeIntersectionForLoading:V,observeIntersectionForPlaying:J,onClick:H,onCancelUpload:K,needsAgeVerification:$})=>{const{cancelMediaDownload:G,updateContentSettings:_,openAgeVerificationModal:q}=(0,s.ko)(),W=(0,n.li)(),Q=(0,n.li)(),[Y,Z,X]=(0,p.A)(),[ee,te]=(0,n.J0)(!1),ae="extendedMediaPreview"===t.mediaType,ne=ae?void 0:t.blobUrl,se=ae||t.isSpoiler||j,[oe,re,ie]=(0,p.A)(se);(0,n.vJ)(()=>{se?re():ie()},[se]);const le=(0,g.A)(()=>{X(),ie(),ee&&_({isSensitiveEnabled:!0})}),ce=(0,h.Vz)(W,V),de=(0,h.Vz)(W,J)&&ce,me=(0,n.li)(ce);de&&!me.current&&(me.current=!0);const{isMobile:ue}=(0,u.Ay)(),[pe,he]=(0,n.J0)(k),ge=Boolean(pe&&ce&&!ae),[Ae,ye]=(0,n.J0)(Boolean(T&&!oe)),fe=ae?void 0:(0,o.sC)(t,"inline"),[ve]=(0,n.J0)(Boolean(fe&&l.Ih(fe))),{mediaData:Ee,loadProgress:be}=(0,f.A)(fe,!ge,ae?void 0:(0,o.Cz)(t,"inline")),xe=ne||Ee,[we,Ce]=(0,p.A)(),Ne=(0,o.VD)(t),Ie=Boolean(Ne),Se=Boolean(L),Me=xe&&me.current,ke=(0,m.A)(Q,!0,!Me),Te=ae?void 0:(0,o.sC)(t,"preview"),[Pe]=(0,n.J0)(Boolean(Te&&l.Ih(Te))),Le=ce,Be=(0,A.A)(Te,!Le),Re=we&&!ke,{ref:Fe}=(0,y.A)({hasMediaData:Boolean((Ie||Be)&&!Re)}),De=Boolean(!Ie||Be||we),Oe=(0,b.A)(t,De);(0,y.A)({ref:Oe,hasMediaData:!De});const ze=(0,b.A)(t,!Se),{loadProgress:Ue}=(0,f.A)(ae?void 0:(0,o.sC)(t,"download"),!F,ae?void 0:(0,o.Cz)(t,"download")),{isUploading:je,isTransferring:Ve,transferProgress:Je}=(0,o.LK)(P||(F?Ue:be),ge&&!we&&!ve||F,void 0!==P),He=!1===(0,v.A)(pe),{ref:Ke,shouldRender:$e}=(0,E.A)({isOpen:Ve&&!ke,noMountTransition:He,withShouldRender:!0}),{ref:Ge}=(0,E.A)({isOpen:Boolean((pe||xe)&&!Ae&&!$e)}),[_e,qe]=(0,n.J0)(0),We=(0,g.A)(e=>{qe(Math.max(0,e.currentTarget.currentTime-1))}),Qe=(Number.isFinite(Q.current?.duration)&&!ke?Q.current?.duration:t.duration)||0,{width:Ye,height:Ze}=B||(ae?(0,c.ri)(t,Boolean(a),R,S,M,ue):(0,c.rO)(t,Boolean(a),R,S,M,ue)),Xe=(0,g.A)((e,a)=>{if(je)K?.(U);else if(ae||!F){if(xe)return xe&&!Ae&&ye(!0),oe?j?$?void q():void Z():void ie():a&&ge&&!we&&!ve?(he(!1),void e.stopPropagation()):void H?.(U,e);he(e=>!e)}else G({media:t})}),et=(0,g.A)(e=>{Xe(e,!0)}),tt=(0,r.A)("media-inner dark",!je&&"interactive",Ze<d.ej&&"fix-min-height",O),at=`height: ${Ze}px;${B?` width: ${Ye}px; left: ${B.x}px; top: ${B.y}px;`:""}`;return n.Ay.createElement("div",{ref:W,id:e,className:tt,style:at,onClick:je?void 0:e=>Xe(e)},Se&&n.Ay.createElement("canvas",{ref:ze,className:"thumbnail blurred-bg"}),Me&&n.Ay.createElement(N.A,{ref:Q,src:xe,className:(0,r.A)("full-media",Se&&"with-blurred-bg"),canPlay:Ae&&de&&!ke,defaultMuted:!0,muted:!0,loop:!0,playsInline:!0,disablePictureInPicture:!0,draggable:!D,onTimeUpdate:We,onReady:Ce,style:L?`width: ${L}px`:void 0}),n.Ay.createElement("img",{ref:Fe,src:Be,className:(0,r.A)("thumbnail",Se&&"with-blurred-bg"),alt:"",style:L?`width: ${L}px;`:void 0,draggable:!D}),Ie&&!Pe&&n.Ay.createElement("canvas",{ref:Oe,className:"thumbnail"}),D&&n.Ay.createElement("span",{className:"protector"}),n.Ay.createElement(x.A,{ref:Ge,name:"large-play"}),n.Ay.createElement(w.A,{isVisible:oe,withAnimation:!0,thumbDataUri:Ne,isNsfw:j,width:Ye,height:Ze,className:"media-spoiler"}),$e&&n.Ay.createElement("div",{ref:Ke,className:"media-loading"},n.Ay.createElement(I.A,{progress:Je,onClick:et})),!pe&&!xe&&n.Ay.createElement(x.A,{name:"download"}),!Ve||ke&&!F?n.Ay.createElement("div",{className:"message-media-duration"},!ae&&t.isGif?"GIF":(0,i.QO)(Math.max(Qe-_e,0)),ke&&n.Ay.createElement(x.A,{name:"message-failed",className:"playback-failed"})):n.Ay.createElement("span",{className:"message-transfer-progress"},je||F?`${Math.round(100*Je)}%`:"..."),Boolean(z)&&n.Ay.createElement("div",{className:"message-media-last-progress",style:`--_progress: ${Math.floor(z/Qe*100)}%`}),n.Ay.createElement(C.A,{isOpen:Y,onClose:X,shouldAlwaysShow:ee,onAlwaysShowChanged:te,confirmHandler:le}))}))},25498:(e,t,a)=>{"use strict";a.d(t,{A:()=>P});var n=a(84051),s=a(13439),o=a(31481),r=a(66644),i=a(60919),l=a(52491),c=a(36353),d=a(87894),m=a(79824),u=a(37830),p=a(4961),h=a(58734),g=a(17778),A=a(63988),y=a(83414),f=a(37661),v=a(17712);let E,b,x,w,C;const N=36,I=2,S=300,M=(0,u.A)(function(e,t,a){return e&&t.length?Object.values((0,d._E)(e,t)).slice(0,a):m.p}),k=(0,u.A)(function(e,t,a){const n=Object.values(e),s=(0,d.dU)(n,"native"),o=t?(0,d.LG)(t,e=>Object.values((0,d._E)(s,e))):{},r=a?(0,d.LG)(a,e=>Object.values((0,d._E)(s,e))):{},i={...o,...r},l=[].concat(Object.keys(o),Object.keys(r)),c=n.reduce((e,t)=>(t.names.forEach(a=>{e[a]||(e[a]=[]),e[a].push(t)}),e),{}),m=Object.keys(c),u=l.reduce((e,t)=>Math.max(e,t.length),0);return{byKeyword:i,keywords:l,byName:c,names:m,maxKeyLength:u}}),T=(0,u.A)(function(e,t,a){const{byKeyword:n,keywords:s,byName:o,names:r,maxKeyLength:i}=e;let l=[];if(t.length>i)return m.p;const c=s.filter(e=>e.startsWith(t)).sort();l=l.concat(Object.values((0,d._E)(n,c)).flat());const u=r.filter(e=>e.startsWith(t));return l=l.concat(Object.values((0,d._E)(o,u)).flat()),l=(0,d.Am)(l),l.length?l.slice(0,a):m.p});try{w=/(^|\s):(?!\s)[-+_:'\s\p{L}\p{N}]*$/giu,C=/\p{Ll}/u}catch(e){w=/(^|\s):(?!\s)[-+_:'\s\d\wа-яёґєії]*$/gi,C=/[a-zяёґєії]/}function P(e,t,u,P=o.CfG,L,B,R){const[F,D,O]=(0,f.A)(!1),[z,U]=(0,n.J0)(),[j,V]=(0,n.J0)(m.p),[J,H]=(0,n.J0)(m.p);(0,n.vJ)(()=>{function t(){U(x.emojis)}e&&(x?t():async function(){return E||(E=a.e(996).then(a.t.bind(a,20996,19)),b=(await E).default,x=(0,l.cp)(b)),E}().then(t))},[e]);const K=(0,A.gs)(()=>{const a=t();return e&&a.includes(":")?(0,g.S)(a).match(w)?.[0].trim():void 0},[t,e],S),$=(0,y.A)(K,[K,t],!0),G=(0,v.A)(e=>{if(V(e),e===m.p)return void H(m.p);const t=e.map(e=>e.native),a=(0,d.Xd)((0,i.oZ0)((0,s.mS)(),t),"id");H(a)}),_=(0,v.A)((e,a=!1)=>{const n=t();if(!n)return;const s=n.lastIndexOf(":",a?n.lastIndexOf(":")-1:void 0);if(-1!==s){const t="string"==typeof e?(0,p.A)(e,["emoji_html"])[0]:(0,h.hB)(e);u(`${n.substring(0,s)}${t}`);const a=P===o.CfG?document.querySelector(o.m$5):document.getElementById(P);(0,r.Uz)(()=>{(0,c.A)(a,!0,!0)})}G(m.p)});return(0,n.vJ)(()=>{const e=$();if(!e||!z)return void G(m.p);const t=e.length>2&&e.endsWith(":"),a=e.substring(1,t?1+e.length-2:void 0);let n=m.p;if(a){if(1===a.length&&C.test(a)||a.length>=I){const e=k(z,B,R);n=T(e,a.toLowerCase(),N)}}else n=M(z,L,N);n.length?t?_(n[0].native,!0):G(n):G(m.p)},[B,z,$,R,_,L,G]),(0,n.vJ)(O,[O,t]),{isEmojiTooltipOpen:Boolean(j.length||J.length)&&!F,closeEmojiTooltip:D,filteredEmojis:j,filteredCustomEmojis:J,insertEmoji:_}}},25897:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(s.ar.Extra,"CustomEmojiTooltip",!t);return a?n.Ay.createElement(a,e):void 0}},26440:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var n=a(84051),s=a(13439),o=a(31481),r=a(87357),i=a(37661),l=a(17712),c=a(54746),d=a(64493),m=a(66469),u=a(57474),p=a(80089),h=a(80464);const g=e=>{const{isOpen:t}=e,a=(0,h.A)(p.ar.Extra,"SymbolMenu",!t);return a?n.Ay.createElement(a,e):void 0},A=(0,n.ph)(({chatId:e,threadId:t,isMobile:a,canSendGifs:p,canSendStickers:h,isMessageComposer:A,isReady:y,isSymbolMenuOpen:f,idPrefix:v,isAttachmentModal:E,canSendPlainText:b,isSymbolMenuForced:x,className:w,forceDarkTheme:C,inputCssSelector:N=o.m$5,openSymbolMenu:I,closeSymbolMenu:S,onCustomEmojiSelect:M,onStickerSelect:k,onGifSelect:T,onRemoveSymbol:P,onEmojiSelect:L,closeBotCommandMenu:B,closeSendAsMenu:R})=>{const{setStickerSearchQuery:F,setGifSearchQuery:D,addRecentEmoji:O,addRecentCustomEmoji:z}=(0,s.ko)(),U=(0,n.li)(),[j,V]=(0,i.A)(),[J,H]=(0,n.J0)(void 0),K=(0,r.A)("composer-action-button mobile-symbol-menu-button",!y&&"not-ready",j?f&&"menu-opened":f&&"is-loading"),$=(0,l.A)(()=>{B?.(),R?.(),I();const e=U.current;if(!e)return;const{x:t,y:a}=e.getBoundingClientRect();H({x:t,y:a})}),G=(0,l.A)(e=>{"stickers"===e?(F({query:""}),D({query:void 0})):(D({query:""}),F({query:void 0}))}),_=(0,l.A)(()=>{const e=document.querySelector(E?o.wVm:N);a&&e===document.activeElement?(e?.blur(),setTimeout(()=>{B?.(),I()},100)):I()}),q=(0,l.A)(()=>U.current),W=(0,l.A)(()=>U.current?.closest(".custom-scroll, .no-scrollbar")),Q=(0,l.A)(()=>document.querySelector("#portals .SymbolMenu .bubble")),Y=(0,l.A)(()=>({withPortal:!0}));return n.Ay.createElement(n.Ay.Fragment,null,a?n.Ay.createElement(d.A,{className:K,round:!0,color:"translucent",onClick:f?S:_,ariaLabel:"Choose emoji, sticker or GIF"},n.Ay.createElement(c.A,{name:"smile"}),n.Ay.createElement(c.A,{name:"keyboard"}),f&&!j&&n.Ay.createElement(u.A,{color:"gray"})):n.Ay.createElement(m.A,{className:(0,r.A)("composer-action-button symbol-menu-button",f&&"activated"),round:!0,color:"translucent",onActivate:$,ariaLabel:"Choose emoji, sticker or GIF"},n.Ay.createElement("div",{ref:U,className:"symbol-menu-trigger"}),n.Ay.createElement(c.A,{name:"smile"})),n.Ay.createElement(g,{chatId:e,threadId:t,isOpen:f||Boolean(x),canSendGifs:p,canSendStickers:h,isMessageComposer:A,idPrefix:v,onLoad:V,onClose:S,onEmojiSelect:L,onStickerSelect:k,onCustomEmojiSelect:M,onGifSelect:T,onRemoveSymbol:P,onSearchOpen:G,addRecentEmoji:O,addRecentCustomEmoji:z,isAttachmentModal:E,canSendPlainText:b,className:(0,r.A)(w,C&&"component-theme-dark"),anchor:E?J:void 0,getTriggerElement:E?q:void 0,getRootElement:E?W:void 0,getMenuElement:E?Q:void 0,getLayout:E?Y:void 0}))})},26959:()=>{},31791:(e,t,a)=>{"use strict";a.d(t,{v:()=>n});let n=function(e){return e.FULLSCREEN_CHANGE="fullscreen-change",e.UPDATE_ERROR="update-error",e.UPDATE_AVAILABLE="update-available",e.DEEPLINK="deeplink",e}({})},31880:(e,t,a)=>{"use strict";a.d(t,{A:()=>p,a:()=>c});var n=a(13439),s=a(60919),o=a(87894),r=a(42215);const i=["includedChatIds","bots","channels","groups","contacts","nonContacts"],l=["excludedChatIds","excludeArchived","excludeMuted","excludeRead"];function c(e,t,a){let r=[],c=[];if("included"===t){const{includedChatIds:t,...n}=a?e.includeFilters||{}:(0,o.Up)(e.folder,i);r=t||[],c=Object.keys(n).filter(e=>Boolean(n[e]))}else{const{excludedChatIds:t,...n}=a?e.excludeFilters||{}:(0,o.Up)(e.folder,l);r=t||[],c=Object.keys(n).filter(e=>Boolean(n[e]))}const d=(0,n.mS)();return{selectedChatIds:r.filter(e=>(0,s.hds)(d,e)),selectedChatTypes:c}}function d(e){if(e){const{includedChatIds:t,...a}=e;if(Object.values(a).filter(Boolean).length>1||t?.length)return"";if(a.bots)return"Bots";if(a.groups)return"Groups";if(a.channels)return"Channels";if(a.contacts)return"Contacts";if(a.nonContacts)return"Non-Contacts"}return""}const m={mode:"create",chatFilter:"",folder:{title:{text:""},includedChatIds:[],excludedChatIds:[]}},u=(e,t)=>{switch(t.type){case"setTitle":return{...e,folder:{...e.folder,title:{text:t.payload}},isTouched:!0};case"setFolderId":return{...e,folderId:t.payload,mode:"edit"};case"editIncludeFilters":return{...e,includeFilters:(0,o.Up)(e.folder,i)};case"editExcludeFilters":return{...e,excludeFilters:(0,o.Up)(e.folder,l)};case"setIncludeFilters":return{...e,includeFilters:t.payload,chatFilter:""};case"setExcludeFilters":return{...e,excludeFilters:t.payload,chatFilter:""};case"saveFilters":return e.includeFilters?{...e,folder:{...(0,o.cJ)(e.folder,i),title:e.folder.title?e.folder.title:{text:d(e.includeFilters)},...e.includeFilters},includeFilters:void 0,chatFilter:"",isTouched:!0}:e.excludeFilters?{...e,folder:{...(0,o.cJ)(e.folder,l),...e.excludeFilters},excludeFilters:void 0,chatFilter:"",isTouched:!0}:e;case"editFolder":{const{id:e,...a}=t.payload;return{mode:"edit",folderId:e,folder:a,chatFilter:""}}case"setChatFilter":return{...e,chatFilter:t.payload};case"setIsTouched":return{...e,isTouched:t.payload};case"setIsLoading":return{...e,isLoading:t.payload};case"setError":return{...e,isLoading:!1,error:t.payload};case"setIsChatlist":return{...e,folder:{...e.folder,isChatList:t.payload}};case"reset":return m;default:return e}},p=()=>(0,r.A)(u,m)},32754:(e,t,a)=>{"use strict";a.d(t,{A:()=>F});var n=a(84051),s=a(13439),o=a(23174),r=a(89925),i=a(90709),l=a(27109),c=a(60919),d=a(96454),m=a(87357),u=a(9716),p=a(66414),h=a(98255),g=a(43874),A=a(47067),y=a(49746),f=a(37661),v=a(5912),E=a(17712),b=a(50680),x=a(53188),w=a(21849),C=a(54314),N=a(34431),I=a(54746),S=a(9267),M=a(81642),k=a(22720),T=a(97967),P=a(97046),L=a(24807);const B="AA5s1Pu4",R=(0,n.ph)(({isSelected:e,isActive:t,isMobile:a})=>n.Ay.createElement("div",{className:(0,m.A)("byPckqUT",t&&"IsUWP16T",e&&!a&&"qy2i51dM")},n.Ay.createElement("div",{className:"nl36F75B"},n.Ay.createElement("div",{className:B}),n.Ay.createElement("div",{className:B}),n.Ay.createElement("div",{className:B})))),F=(0,n.ph)((0,s.EK)((e,{chatId:t,isSavedDialog:a,isPreview:n,previewMessageId:s})=>{const r=(0,c.hds)(e,t),i=(0,c.mBe)(e,t);if(!r)return{currentUserId:e.currentUserId};const d=s||(0,c.ZZX)(e,t,a?"saved":"all"),m=s?(0,c.O5q)(e,t,s):(0,c.yHC)(e,t,a?"saved":"all"),{isOutgoing:u,forwardInfo:p}=m||{},h=a&&p?.fromId?(0,c.PVB)(e,p.fromId):void 0,g=m?(0,c.Y7C)(e,m):void 0,A=h||g,{chatId:y,threadId:f,type:v}=(0,c.Xf0)(e)||{},E=!n&&t===y&&(a?t===f:f===o.l3),b=r.isForum&&t===y||t===(0,c.nTw)(e).forumPanelChatId,x=(0,c.K0y)(e,t),w=m&&(0,c.nkm)(e,m),C=(0,c.C5H)(e,t,o.l3,"typingStatus"),N=(0,c.xyP)(e,t),I=m?.content.storyData,S=I&&(0,c.Msb)(e,I.peerId,I.id),M=(0,c.trm)(e),k=(0,c.k2W)(e,t);return{chat:r,isMuted:(0,l.If)(r,(0,c.K52)(e),(0,c.P5N)(e,r.id)),lastMessageSender:A,draft:(0,c.GA4)(e,t,o.l3),isSelected:E,isSelectedForum:b,isForumPanelOpen:(0,c.clw)(e),canScrollDown:E&&"thread"===v,canChangeFolder:(e.chatFolders.orderedIds?.length||0)>1,...u&&m&&{lastMessageOutgoingStatus:(0,c.Tl2)(e,m)},user:i,userStatus:x,lastMessageTopic:w,typingStatus:C,withInterfaceAnimations:(0,c.PKK)(e),lastMessage:m,lastMessageId:d,currentUserId:e.currentUserId,listedTopicIds:N?.listedTopicIds,topics:N?.topicsById,isSynced:e.isSynced,lastMessageStory:S,isAccountFrozen:M,monoforumChannel:k}})(({chatId:e,folderId:t,orderDiff:a,animationType:l,isPinned:B,listedTopicIds:F,topics:D,observeIntersection:O,chat:z,monoforumChannel:U,lastMessageStory:j,isMuted:V,user:J,userStatus:H,lastMessageSender:K,lastMessageOutgoingStatus:$,offsetTop:G,draft:_,withInterfaceAnimations:q,isSelected:W,isSelectedForum:Q,isForumPanelOpen:Y,canScrollDown:Z,canChangeFolder:X,lastMessageTopic:ee,typingStatus:te,lastMessageId:ae,lastMessage:ne,isSavedDialog:se,currentUserId:oe,isPreview:re,previewMessageId:ie,className:le,isSynced:ce,onDragEnter:de,isAccountFrozen:me})=>{const{openChat:ue,openSavedDialog:pe,toggleChatInfo:he,focusLastMessage:ge,focusMessage:Ae,loadTopics:ye,openForumPanel:fe,closeForumPanel:ve,setShouldCloseRightColumn:Ee,reportMessages:be,openFrozenAccountModal:xe}=(0,s.ko)(),{isMobile:we}=(0,g.Ay)(),[Ce,Ne,Ie]=(0,f.A)(),[Se,Me,ke]=(0,f.A)(),[Te,Pe,Le]=(0,f.A)(),[Be,Re,Fe]=(0,f.A)(),[De,Oe,ze]=(0,f.A)(),[Ue,je,Ve]=(0,f.A)(),{isForum:Je,isForumAsMessages:He,isMonoforum:Ke}=z||{};(0,y.A)(se?oe:e,ae,ne);const{renderSubtitle:$e,ref:Ge}=(0,x.A)({chat:z,chatId:e,lastMessage:ne,typingStatus:te,draft:_,statefulMediaContent:(0,i.FE)({story:j}),lastMessageTopic:ee,lastMessageSender:K,observeIntersection:O,animationType:l,withInterfaceAnimations:q,orderDiff:a,isSavedDialog:se,isPreview:re,topics:D}),_e=(0,h.A)(c.sRo),qe=(0,E.A)(()=>{const t=we&&He;if(we&&Ee({value:!0}),re)Ae({chatId:e,messageId:ie});else{if(se)return pe({chatId:e,noForumTopicPanel:!0},{forceOnHeavyAnimation:!0}),void(we&&he({force:!1}));if(Je){if(Y)return void ve(void 0,{forceOnHeavyAnimation:!0});if(t||fe({chatId:e},{forceOnHeavyAnimation:!0}),!He)return}ue({id:e,noForumTopicPanel:t,shouldReplaceHistory:!0},{forceOnHeavyAnimation:!0}),W&&Z&&ge()}}),We=(0,E.A)(t=>{t.preventDefault(),de?.(e)}),Qe=(0,E.A)(()=>{me?xe():(Re(),Ne())}),Ye=(0,E.A)(()=>{me?xe():(Oe(),Me())}),Ze=(0,E.A)(()=>{je(),Pe()}),Xe=(0,E.A)(()=>{me?xe():z&&be({chatId:z.id,messageIds:[]})}),et=(0,A.A)({chat:z,user:J,handleDelete:Qe,handleMute:Ye,handleChatFolderChange:Ze,handleReport:Xe,folderId:t,isPinned:B,isMuted:V,canChangeFolder:X,isSavedDialog:se,currentUserId:oe,isPreview:re,topics:D}),tt=(0,v.Vz)(Ge,z?O:void 0);(0,n.vJ)(()=>{tt&&Je&&ce&&void 0===F&&ye({chatId:e})},[e,F,ce,Je,tt]);const at=J&&H&&(0,i.PF)(J,H),{hasShownClass:nt}=(0,b.A)(at),st=(0,n.Kr)(()=>{if(d.OS)return se?`#${(0,p.az)(oe,"thread",e)}`:`#${(0,p.az)(e,"thread",o.l3)}`},[e,oe,se]);if(!z)return;const ot=J||z,rt=(0,m.A)("Chat chat-item-clickable",(0,u.L8)(e)?"private":"group",Je&&"forum",W&&"selected",Q&&"selected-forum",re&&"standalone",le);return n.Ay.createElement(k.A,{ref:Ge,className:rt,href:st,style:`top: ${G}px`,ripple:!Je&&!we,contextActions:et,onClick:qe,onDragEnter:We,withPortalForMenu:!0},n.Ay.createElement("div",{className:(0,m.A)("status","status-clickable")},n.Ay.createElement(w.A,{peer:Ke?U:ot,isSavedMessages:J?.isSelf,isSavedDialog:se,size:re?"medium":"large",asMessageBubble:Ke,withStory:!J?.isSelf&&!Ke,withStoryGap:nt||Boolean(z.subscriptionUntil),storyViewerOrigin:r.G9.ChatList,storyViewerMode:"single-peer"}),n.Ay.createElement("div",{className:"avatar-badge-wrapper"},n.Ay.createElement("div",{className:(0,m.A)("avatar-online","avatar-badge",nt&&"avatar-online-shown")}),!nt&&Boolean(z.subscriptionUntil)&&n.Ay.createElement(S.A,{type:"gold",className:"avatar-badge avatar-subscription",size:"adaptive"}),n.Ay.createElement(L.A,{chat:z,isMuted:V,shouldShowOnlyMostImportant:!0,forceHidden:_e,topics:D,isSelected:W})),z.isCallActive&&z.isCallNotEmpty&&n.Ay.createElement(R,{isMobile:we,isSelected:W,isActive:q})),n.Ay.createElement("div",{className:"info"},n.Ay.createElement("div",{className:"info-row"},n.Ay.createElement(N.A,{peer:Ke?U:ot,isMonoforum:Ke,monoforumBadgeClassName:"monoforum-badge",withEmojiStatus:!0,isSavedMessages:e===J?.id&&J?.isSelf,isSavedDialog:se,observeIntersection:O}),V&&!se&&n.Ay.createElement(I.A,{name:"muted"}),n.Ay.createElement("div",{className:"separator"}),ne&&n.Ay.createElement(M.A,{message:ne,outgoingStatus:se?void 0:$,draftDate:_?.date})),n.Ay.createElement("div",{className:"subtitle"},$e(),!re&&n.Ay.createElement(L.A,{chat:z,isPinned:B,isMuted:V,isSavedDialog:se,hasMiniApp:J?.hasMainMiniApp,topics:D,isSelected:W}))),Be&&n.Ay.createElement(C.A,{isOpen:Ce,onClose:Ie,onCloseAnimationEnd:Fe,chat:z,isSavedDialog:se}),De&&n.Ay.createElement(P.A,{isOpen:Se,onClose:ke,onCloseAnimationEnd:ze,chatId:e}),Ue&&n.Ay.createElement(T.A,{isOpen:Te,onClose:Le,onCloseAnimationEnd:Ve,chatId:e}))}))},34458:(e,t,a)=>{"use strict";a.d(t,{$:()=>y,UG:()=>d,wV:()=>A});var n=a(31481),s=a(66644),o=a(19822),r=a(83868),i=a(76023),l=a(2429),c=a(17169);const d=250,m=.25*i.$,u=11,p=.1875*i.$,h=.125*i.$,g=new Set;function A(e){w();const{container:t,toggler:a,leftMainHeader:r,ribbonPeers:i,toggleAvatars:l}=f(e);if(!(a&&l&&i&&t&&r))return;const{bottom:h,right:A}=r.getBoundingClientRect(),y=h+m,C=l[0],N=l[l.length-1],I=E(C);Array.from(i).reverse().forEach((e,r,{length:i})=>{const l=E(e);if(!l)return;const m=l===I;let h=b(a,l),f=u+r+1;if(h||(h=r===i-1?N:C,f=u),!h)return;let{top:w,left:S,width:M}=h.getBoundingClientRect();const{left:k,width:T}=e.getBoundingClientRect();if(k>A)return;S-=p,M+=2*p;const P=S-k,L=w-y,B=M/T;w-=p;const R=k-S+2*p,F=y-w+p,D=T/(M+2*p);(0,s.RK)(()=>{if(!h)return;const a=v(e);let r;f>u?(r=v(h),m&&r.classList.add(c.A.ghostLast)):a.classList.add(c.A.ghostAnimateName),(0,o.ZM)(a,{top:`${y}px`,left:`${k}px`,zIndex:String(f),opacity:r?"0":"",transform:`translate3d(${P}px, ${L}px, 0) scale(${B})`}),r&&(0,o.ZM)(r,{top:`${w}px`,left:`${S}px`,zIndex:String(f)}),t.appendChild(a),r&&t.appendChild(r),h.classList.add("animating"),e.classList.add("animating"),(0,s.RK)(()=>{(0,o.ZM)(a,{opacity:"",transform:""}),r?(0,o.ZM)(r,{opacity:"0",transform:`translate3d(${R}px, ${F}px, 0) scale(${D})`}):a.classList.add(c.A.ghostRevealName);const i=x(()=>{(0,s.RK)(()=>{t.contains(a)&&t.removeChild(a),r&&t.contains(r)&&t.removeChild(r),h?.classList.remove("animating"),e.classList.remove("animating"),g.delete(i)})},d+n.xB5);g.add(i)})})})}function y(e){w();const{container:t,toggler:a,toggleAvatars:r,ribbonPeers:i,leftMainHeader:l}=f(e);if(!(a&&r&&i&&t&&l))return;const{right:m}=l.getBoundingClientRect(),A=r[0],y=r[r.length-1],C=E(A);Array.from(i).reverse().forEach((e,r,{length:i})=>{const l=E(e);if(!l)return;const f=l===C;let w=b(a,l),N=u+r+1;if(w||(w=r===i-1?y:A,N=u),!w)return;const{top:I,left:S,width:M}=e.getBoundingClientRect();let{left:k,width:T,top:P}=w.getBoundingClientRect();if(S>m)return;k-=p,T+=2*p;const L=k-S,B=P-I-h,R=T/M;P-=p;const F=S-k+2*p,D=I-P+p,O=M/(T+2*p);(0,s.RK)(()=>{const a=v(e);let r;N>u?(r=v(w),f&&r.classList.add(c.A.ghostLast)):a.classList.add(c.A.ghostAnimateName,c.A.ghostRevealName),(0,o.ZM)(a,{top:`${I}px`,left:`${S}px`,width:`${M}px`,zIndex:String(N)}),r&&(0,o.ZM)(r,{top:`${P}px`,left:`${k}px`,zIndex:String(N),opacity:"0",transform:`translate3d(${F}px, ${D}px, 0) scale(${O})`}),e.classList.add("animating"),w.classList.add("animating"),t.appendChild(a),r&&t.appendChild(r),(0,s.RK)(()=>{(0,o.ZM)(a,{opacity:r?"0":"",transform:`translate3d(${L}px, ${B}px, 0) scale(${R})`}),r?(0,o.ZM)(r,{opacity:"",transform:""}):a.classList.remove(c.A.ghostRevealName);const i=x(()=>{(0,s.RK)(()=>{t.contains(a)&&t.removeChild(a),r&&t.contains(r)&&t.removeChild(r),e.classList.remove("animating"),w.classList.remove("animating")}),g.delete(i)},d+n.xB5);g.add(i)})})})}function f(e){let t=document.getElementById("LeftColumn");if(t&&e&&(t=t.querySelector(".ArchivedChats")),!t)return{};const a=t.querySelector("#StoryToggler"),n=t.querySelector("#StoryRibbon"),s=t.querySelector(".left-header"),o=n?.querySelectorAll(`.${l.A.peer}`),r=a?.querySelectorAll(".Avatar");return{container:t,toggler:a,leftMainHeader:s,ribbonPeers:o,toggleAvatars:r}}function v(e){const t=e.cloneNode(!0);t.classList.add(c.A.ghost),t.classList.remove("animating"),t.draggable=!1,t.oncontextmenu=r.A;const a=e.querySelector("canvas");if(a){const e=t.querySelector("canvas");e?.getContext("2d")?.drawImage(a,0,0)}return t}function E(e){return e?.getAttribute("data-peer-id")}function b(e,t){return e?.querySelector(`[data-peer-id="${t}"]`)}function x(e,t){const a=setTimeout(e,t);return()=>{clearTimeout(a),e()}}function w(){g.forEach(e=>e()),g.clear()}},35127:(e,t,a)=>{"use strict";a.d(t,{MC:()=>r,ej:()=>l,nP:()=>c,yA:()=>d});var n=a(76023);const s=12,o=40,r=20*n.$,i=s*n.$,l=5*n.$;function c(e,t){return(e?.length??0)>o||t?r:i}function d({media:e,messageText:t,isOwn:a,isInWebPage:o,asForwarded:r,noAvatars:i,isMobile:d}){const m="photo"===e.mediaType,u="video"===e.mediaType,p=m&&o,h=u&&o,{width:g,height:A}=m?(0,n.ck)(e,a,r,p,i,d):u?(0,n.rO)(e,a,r,h,i,d):(0,n.ri)(e,a,r,o,i,d),y=c(t);let f=1;g<y&&y-g<s&&(f=y/g),A*f<l&&l-A*f<s&&(f=l/A);const v=Math.round(g*f),E=Math.round(A*f);return{width:v,height:E,isSmall:v<y||E<l}}},35749:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(77312),s=a(63527);function o(e){return e.messages.webPageById}function r(e,t){const a=(0,s.A)(o);if(!e)return;const r=e.content.webPage?.id,i=r?a[r]:void 0;return(0,n.EO)(e,{webPage:i},t)}},36353:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(96454);function s(e,t,a){if(!t&&e===document.activeElement)return;const s=window.getSelection(),o=document.createRange(),r=e.lastChild||e;n.TF||a||r&&r.nodeValue?(o.selectNodeContents(a?e:r),o.collapse(!1),s.removeAllRanges(),s.addRange(o)):e.focus()}},36680:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(84051),s=a(96454),o=a(17712);const r=250;let i;function l(e,t,a=r,l=!1){const c=(0,n.li)(!1),d=(0,o.A)(()=>{c.current=!0});return(0,n.vJ)(()=>{i&&(clearTimeout(i),i=void 0),!e||s.TF||l||(i=window.setTimeout(()=>{c.current||t()},2*a))},[l,e,a,t]),[(0,o.A)(()=>{c.current=!0}),(0,o.A)(()=>{c.current=!1,i&&(clearTimeout(i),i=void 0),i=window.setTimeout(()=>{c.current||t()},a)}),d]}},37378:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(87357),l=a(17663),c=a(58849),d=a(49086),m=a(4961),u=a(17712),p=a(59030),h=a(96530),g=a(81524),A=a(84685);const y=(0,n.ph)((0,s.EK)((e,{message:t})=>({webPage:(0,r.Pn$)(e,t)}))(({message:e,webPage:t,senderTitle:a,isProtected:s,observeIntersection:r,onMessageClick:y})=>{const f=(0,p.A)();let v=t;if(!v){const t=(0,o.ZD)(e);if(t){const{url:a,domain:n}=t;v={siteName:n.replace(/^www./,""),url:a.includes("://")?a:a.includes("@")?`mailto:${a}`:`http://${a}`,formattedDescription:(0,o.P5)(e)?.text!==a?(0,d.C)(f,e,void 0,void 0,170):void 0}}}const E=(0,u.A)(()=>{y(e)});if("full"!==v?.webpageType)return;const{siteName:b,url:x,displayUrl:w,title:C,description:N,formattedDescription:I,photo:S,video:M}=v,k=!a&&N&&(0,c.A)(N,170),T=(0,i.A)("WebLink scroll-item",!S&&!M&&"without-media"),P=x.replace("mailto:","")||w;return n.Ay.createElement("div",{className:T,"data-initial":(b||w)[0],dir:f.isRtl?"rtl":void 0},S&&n.Ay.createElement(g.A,{message:e,isProtected:s,observeIntersection:r}),n.Ay.createElement("div",{className:"content"},n.Ay.createElement(h.A,{isRtl:f.isRtl,className:"site-title",onClick:E},(0,m.A)(C||b||w)),(k||I)&&n.Ay.createElement(h.A,{isRtl:f.isRtl,className:"site-description",onClick:E},I||k&&(0,m.A)(k)),n.Ay.createElement(A.A,{url:x,className:"site-name",text:P,isRtl:f.isRtl}),a&&n.Ay.createElement("div",{className:"sender-name"},(0,m.A)(a))),a&&n.Ay.createElement("div",{className:"message-date"},n.Ay.createElement(h.A,{className:"date",onClick:E,isRtl:f.isRtl},(0,l.be)(f,1e3*e.date))))}))},37605:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var n=a(84051),s=a(13439),o=a(23174),r=a(89925),i=a(66644),l=a(90709),c=a(60919),d=a(96454),m=a(9716),u=a(2178),p=a(17712),h=a(59030),g=a(54746),A=a(64493),y=a(80089),f=a(80464);const v=e=>{const{isOpen:t}=e,a=(0,f.A)(y.ar.Extra,"HeaderMenuContainer",!t);return a?n.Ay.createElement(a,e):void 0};var E=a(84219);const b=(0,n.ph)(()=>{const e=(0,p.A)(()=>{(0,s.ko)().openInviteFriendsModal()});return n.Ay.createElement("div",{className:"invite-button",onClick:e},n.Ay.createElement("img",{className:"w-[20px] h-[20px]",src:E,alt:""}),n.Ay.createElement("span",{className:"text-[12px] font-medium"},"Invite"))}),x=(0,n.ph)((0,s.EK)((e,{chatId:t,threadId:a,messageListType:n,isMobile:s})=>{const r=(0,c.hds)(e,t),i=Boolean(r&&(0,l.WX)(r)),u=Boolean(r&&(0,l.Vs)(r)),p=(0,c.wmb)(e),h=(0,c.Qq_)(e),g=(0,m.L8)(t),{doNotTranslate:A}=e.settings.byKey,y=(0,c._ls)(e,t);if(!r||y||(0,c.rTV)(e))return{noMenu:!0,language:p,translationLanguage:h,doNotTranslate:A};const f=(0,c.yps)(e,t),v=g?void 0:(0,c.AWZ)(e,t),E=g?(0,c.vGo)(e,t):void 0,b=v||E,x=(0,c.nZ4)(e,t),w="thread"===n&&a===o.l3,C="thread"===n&&a!==o.l3,N=(0,c.gjV)(e,s),I=(0,l.cG)(t,a,e.currentUserId),S=!!g&&(0,c.apd)(e,t),M=Boolean(f&&S),k=!M&&Boolean((0,c.I_m)(e,t)),T=S&&!f,P=Boolean((w||r.isForum)&&(i||u)&&r.isNotJoined&&!r.isMonoforum),L=w||C,B=d.OL&&(0,m.L8)(r.id)&&!x&&!f&&!r.isSupport&&!(0,l.Qe)(r.id),R=w&&!x&&!P,F=I||w&&!P,D=d.OL&&w&&r.isCallActive,O=d.OL&&w&&!r.isCallActive&&(r.adminRights?.manageCall||r.isCreator&&(0,l.yn)(r))&&!r.isMonoforum,z=w&&v?.canViewStatistics,U=w&&v?.canViewMonetization,j=w&&!r.isMonoforum&&(u||i)&&(z||(0,l.ub)(r,"postStories")),V=!j&&(u||i)&&!r.isMonoforum,J=w?v?.requestsPending:void 0,H=Boolean(r?.isNotJoined&&r.isJoinToSend),K=Boolean(r?.isNotJoined&&r.isJoinRequest),$=!(0,c.PKK)(e),G=(0,c.trm)(e),_=(0,l.WX)(r)?r.linkedMonoforumId:void 0,q=Boolean((0,c.qZq)(e,t));return{noMenu:!1,isChannel:i,isRightColumnShown:N,canStartBot:k,canRestartBot:M,canSubscribe:P,canSearch:L,canCall:B,canMute:R,canViewStatistics:z,canViewMonetization:U,canViewBoosts:j,canShowBoostModal:V,canLeave:F,canEnterVoiceChat:D,canCreateVoiceChat:O,pendingJoinRequests:J,shouldJoinToSend:H,shouldSendJoinRequest:K,noAnimation:$,canTranslate:(0,c.jGY)(e,t)&&!b?.isTranslationDisabled,isTranslating:q,translationLanguage:h,language:p,doNotTranslate:A,detectedChatLanguage:r.detectedLanguage,canUnblock:T,isAccountFrozen:G,channelMonoforumId:_}})(({chatId:e,threadId:t,noMenu:a,isMobile:o,isChannel:l,canStartBot:c,canRestartBot:m,canUnblock:y,canSubscribe:f,canSearch:E,canCall:x,canMute:C,canViewStatistics:N,canViewMonetization:I,canViewBoosts:S,canShowBoostModal:M,canLeave:k,canEnterVoiceChat:T,canCreateVoiceChat:P,channelMonoforumId:L,pendingJoinRequests:B,isRightColumnShown:R,isForForum:F,canExpandActions:D,shouldJoinToSend:O,shouldSendJoinRequest:z,noAnimation:U,onTopicSearch:j,isAccountFrozen:V})=>{const{joinChannel:J,sendBotCommand:H,openMiddleSearch:K,restartBot:$,requestMasterAndRequestCall:G,requestNextManagementScreen:_,showNotification:q,openChat:W,unblockUser:Q,setViewForumAsMessages:Y}=(0,s.ko)(),Z=(0,n.li)(),X=(0,h.A)(),[ee,te]=(0,n.J0)(!1),[ae,ne]=(0,n.J0)(void 0),se=(0,p.A)(()=>{te(!0);const e=Z.current.getBoundingClientRect();ne({x:e.right,y:e.bottom})}),oe=(0,p.A)(()=>{te(!1)}),re=(0,p.A)(()=>{ne(void 0)}),ie=(0,p.A)(()=>{J({chatId:e}),z&&q({message:X(l?"RequestToJoinChannelSentDescription":"RequestToJoinGroupSentDescription")})}),le=(0,p.A)(()=>{H({command:"/start"})}),ce=(0,p.A)(()=>{$({chatId:e})}),de=(0,p.A)(()=>{Q({userId:e})}),me=(0,p.A)(()=>{_({screen:r.je.JoinRequests})}),ue=(0,p.A)(()=>{F?j?.():(K(),o?w():U?(0,i.YS)(()=>{(0,i.Uz)(w)}):setTimeout(w,320))}),pe=(0,p.A)(()=>{W({id:e}),Y({chatId:e,isEnabled:!0})}),he=(0,p.A)(()=>{V||G({userId:e})}),ge=(0,p.A)(e=>{E&&d.lE&&!e.shiftKey&&(e.preventDefault(),ue())});return(0,u.v)((0,n.Kr)(()=>({"Mod+F":ge}),[])),n.Ay.createElement("div",{className:"HeaderActions"},!o&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(b,null),D&&!z&&(f||O)&&n.Ay.createElement(A.A,{size:"tiny",ripple:!0,fluid:!0,onClick:ie},X(l?"ProfileJoinChannel":"ProfileJoinGroup")),D&&z&&n.Ay.createElement(A.A,{size:"tiny",ripple:!0,fluid:!0,onClick:ie},X("ChannelJoinRequest")),D&&c&&n.Ay.createElement(A.A,{size:"tiny",ripple:!0,fluid:!0,onClick:le},X("BotStart")),D&&m&&n.Ay.createElement(A.A,{size:"tiny",ripple:!0,fluid:!0,onClick:ce},X("BotRestart")),D&&y&&n.Ay.createElement(A.A,{size:"tiny",ripple:!0,fluid:!0,onClick:de},X("Unblock")),E&&n.Ay.createElement(A.A,{round:!0,ripple:R,color:"translucent",size:"smaller",onClick:ue,ariaLabel:X("Conversation.SearchPlaceholder")},n.Ay.createElement(g.A,{name:"search"})),x&&n.Ay.createElement(A.A,{round:!0,color:"translucent",size:"smaller",onClick:he,ariaLabel:"Call"},n.Ay.createElement(g.A,{name:"phone"}))),!F&&Boolean(B)&&n.Ay.createElement(A.A,{round:!0,className:"badge-button",ripple:R,color:"translucent",size:"smaller",onClick:me,ariaLabel:X(l?"SubscribeRequests":"MemberRequests")},n.Ay.createElement(g.A,{name:"user"}),n.Ay.createElement("div",{className:"badge"},B)),n.Ay.createElement(A.A,{ref:Z,className:ee?"active":"",round:!0,ripple:!o,size:"smaller",color:"translucent",disabled:a,ariaLabel:"More actions",onClick:se},n.Ay.createElement(g.A,{name:"more"})),ae&&n.Ay.createElement(v,{chatId:e,threadId:t,isOpen:ee,anchor:ae,withExtraActions:o||!D,isChannel:l,canStartBot:c,canSubscribe:f,canSearch:E,canCall:x,canMute:C,canViewStatistics:N,canViewBoosts:S,canViewMonetization:I,canShowBoostModal:M,canLeave:k,canEnterVoiceChat:T,canCreateVoiceChat:P,pendingJoinRequests:B,onJoinRequestsClick:me,withForumActions:F,channelMonoforumId:L,onSubscribeChannel:ie,onSearchClick:ue,onAsMessagesClick:pe,onClose:oe,onCloseAnimationEnd:re}))}));function w(){const e=document.querySelector("#MiddleSearch input");e?.focus()}},37830:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(87894);const s=new WeakMap;function o(e){return(...t)=>{const a=s.get(e);if(a&&(0,n.k)(a.lastArgs,t))return a.lastResult;const o=e(...t);return s.set(e,{lastArgs:t,lastResult:o}),o}}},38102:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(87412),o=a(76471);const r=(0,n.ph)(({topic:e,className:t,letterClassName:a,size:r,noLoopLimit:i,observeIntersection:l,onClick:c})=>e.iconEmojiId&&"0"!==e.iconEmojiId?n.Ay.createElement(s.A,{documentId:e.iconEmojiId,className:t,size:r,observeIntersectionForPlaying:l,loopLimit:i?void 0:2,onClick:c}):n.Ay.createElement(o.A,{iconColor:e.iconColor,title:e.title,topicId:e.id,className:t,letterClassName:a,onClick:c}))},38218:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(31481),o=a(17712);const r=function({onClick:e,onStart:t,onEnd:a,threshold:r=250}){const i=(0,n.li)(!1),l=(0,n.li)(!1),c=(0,n.li)(void 0),d=(0,o.A)(e=>{const a="button"in e&&0===e.button||"touches"in e&&e.touches.length>0;!l.current&&a&&(l.current=!0,c.current=window.setTimeout(()=>{t?.(),i.current=!0},r))}),m=(0,o.A)(t=>{l.current&&(i.current?a?.():e?.(t),u())}),u=(0,o.A)(()=>{i.current=!1,l.current=!1,window.clearTimeout(c.current)});return(0,n._W)(()=>{window.clearTimeout(c.current)}),(0,n.vJ)(()=>(document.body.addEventListener(s.D2Y,u),()=>{document.body.removeEventListener(s.D2Y,u)}),[]),{onMouseDown:d,onMouseUp:m,onMouseLeave:m,onTouchStart:d,onTouchEnd:m}}},38493:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(96540),s=a(57446),o=a(96454),r=a(87357),i=a(4146),l=a(36838),c=a(59030),d=a(66644),m=a(41402),u=a(4961),p=a(11217);const h="Tab--active",g=({className:e,title:t,isActive:a,badgeCount:s,isBadgeActive:i,previousActiveTab:l,onClick:c,clickArg:g})=>{const A=(0,n.useRef)(void 0);(0,n.useLayoutEffect)(()=>{a&&void 0===l&&A.current&&A.current.classList.add(h)},[a,l]),(0,n.useEffect)(()=>{if(!a||void 0===l)return;const e=A.current,t=e.parentElement.children[l];if(!t)return void(a&&!e.classList.contains(h)&&(0,d.RK)(()=>{e.classList.add(h)}));const n=e.querySelector(".platform"),s=t.querySelector(".platform"),o=s.parentElement.offsetLeft-n.parentElement.offsetLeft,r=s.clientWidth/n.clientWidth;(0,d.RK)(()=>{s.classList.remove("animate"),n.classList.remove("animate"),n.style.transform=`translate3d(${o}px, 0, 0) scale3d(${r}, 1, 1)`,(0,d.gm)(()=>((0,m.A)(n),()=>{n.classList.add("animate"),n.style.transform="none",t.classList.remove(h),e.classList.add(h)}))})},[a,l]);const{handleClick:y,handleMouseDown:f}=(0,p.Q)(e=>{"mousedown"===e.type&&e.button!==o.w3.Main||c?.(g)});return n.createElement("div",{className:(0,r.A)("Tab",c&&"Tab--interactive",e),onClick:y,onMouseDown:f,ref:A},n.createElement("span",{className:"Tab_inner"},(0,u.A)(t),Boolean(s)&&n.createElement("span",{className:(0,r.A)("badge",i&&"Tab__badge--active")},s),n.createElement("i",{className:"platform"})))},A=o.pz?450:o.Ni?400:300,y=({tabs:e,activeTab:t,onSwitchTab:a,className:o,tabClassName:d,inversion:m})=>{const u=(0,n.useRef)(void 0),p=(0,i.A)(t);(0,l.A)(u,void 0,!0),(0,n.useEffect)(()=>{const e=u.current,{scrollWidth:a,offsetWidth:n,scrollLeft:o}=e;if(a<=n)return;const r=e.childNodes[t];if(!r)return;const{offsetLeft:i,offsetWidth:l}=r,c=i-n/2+l/2;Math.abs(c-o)<16||(0,s.A)(e,c,A)},[t]);const h=(0,c.A)();return n.createElement("div",{className:(0,r.A)("TabList","no-scrollbar",m&&"inversion",o),ref:u,dir:h.isRtl?"rtl":void 0},e.map((e,s)=>n.createElement(g,{key:e.id,title:e.title,isActive:s===t,badgeCount:e.badgeCount,isBadgeActive:e.isBadgeActive,previousActiveTab:p,onClick:a,clickArg:s,className:d})))},f=(0,n.memo)(y)},39074:(e,t,a)=>{"use strict";a.d(t,{DY:()=>l,JC:()=>r,LV:()=>o,oR:()=>s,vZ:()=>i});const n=document.createElement("div");function s(e){const t=window.getSelection();if(t?.getRangeAt&&t.rangeCount){const a=t.getRangeAt(0);a.deleteContents();const n=a.createContextualFragment(e),s=n.lastChild;a.insertNode(n),s?(a.setStartAfter(s),a.setEndAfter(s)):a.collapse(!1),t.removeAllRanges(),t.addRange(a)}}function o(e,t){if(!e)return"";const a=window.getSelection();if(!a||!a.rangeCount)return e.innerHTML;const s=a.getRangeAt(0).cloneRange();return s.intersectsNode(e)?t||e.contains(s.commonAncestorContainer)?(s.collapse(!0),s.setStart(e,0),n.innerHTML="",n.appendChild(s.cloneContents()),n.innerHTML):"":e.innerHTML}function r(e){let t=0;const a=window.getSelection();if(!a||0===a.rangeCount)return t;const n=a.getRangeAt(0),s=n.cloneRange();return s.selectNodeContents(e),s.setEnd(n.endContainer,n.endOffset),t=s.toString().length,t}function i(e,t){for(const a of e.childNodes)if(a.nodeType===Node.TEXT_NODE){if(a.length>=t){const e=document.createRange(),n=window.getSelection();return e.setStart(a,t),e.collapse(!0),n.removeAllRanges(),n.addRange(e),-1}t-="length"in a?a.length:0}else if(-1===(t=i(a,t)))return-1;return t}function l(){const e=window.getSelection();e?.removeAllRanges()}},40175:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(84051),s=a(13439),o=a(31481),r=a(60919),i=a(34458),l=a(59030),c=a(34201),d=a(92111),m=a(21849),u=a(17169);const p=(0,n.ph)((0,s.EK)((e,{isArchived:t})=>{const{orderedPeerIds:{archived:a,active:n},byPeerId:s}=e.stories,{storyViewer:{isRibbonShown:o,isArchivedRibbonShown:i}}=(0,r.nTw)(e),l=(0,r.clw)(e),c=(0,r.xYJ)(e,"storyRibbonAnimations");return{currentUserId:e.currentUserId,orderedPeerIds:t?a:n,isShown:t?!i:!o,isForumPanelOpen:l,withAnimation:c,usersById:e.users.byId,chatsById:e.chats.byId,peerStories:s}})(function({currentUserId:e,orderedPeerIds:t,usersById:a,chatsById:r,canShow:p,isShown:h,isForumPanelOpen:g,isArchived:A,withAnimation:y,peerStories:f}){const{toggleStoryRibbon:v}=(0,s.ko)(),E=(0,l.A)(),b=(0,n.Kr)(()=>1===t.length?[a[t[0]]||r[t[0]]]:t.map(e=>a[e]||r[e]).filter(t=>t&&t.id!==e).slice(0,o.dqH).reverse(),[e,t,a,r]),x=(0,n.Kr)(()=>b?.length?b.reduce((e,t)=>{const a=f[t.id];if(!a)return e;const n=a.orderedIds.some(e=>{const t=a.byId[e];if(!t||!("isForCloseFriends"in t))return!1;const n=a.lastReadId&&t.id<=a.lastReadId;return t.isForCloseFriends&&!n});return e[t.id]=n,e},{}):{},[f,b]),w=(0,n.Kr)(()=>t.slice(0,5),[t]);(0,d.A)(w);const C=p&&h,{ref:N,shouldRender:I}=(0,c.A)({isOpen:C,className:"slow",withShouldRender:!0});if((0,n.vJ)(()=>{y&&!g&&(C?((0,n.VK)(i.UG+o.xB5),(0,i.$)(A)):((0,n.VK)(i.UG+o.xB5),(0,i.wV)(A)))},[A,C,y,g]),I)return n.Ay.createElement("button",{ref:N,type:"button",id:"StoryToggler",className:u.A.root,"aria-label":E("Chat.Context.Peer.OpenStory"),onClick:()=>v({isShown:!0,isArchived:A}),dir:E.isRtl?"rtl":void 0},b.map(e=>n.Ay.createElement(m.A,{key:e.id,peer:e,size:"tiny",className:u.A.avatar,withStorySolid:!0,forceFriendStorySolid:x[e.id]})))}))},40435:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(41074);const s={dark:{outgoing:"rgb(135,116,225)",incoming:"rgb(33,33,33)"},light:{outgoing:"rgb(238,255,222)",incoming:"rgb(255,255,255)"}};function o(e,t,a,o,r){return o?Promise.resolve(s[r||"light"][t?"outgoing":"incoming"]):(0,n.M1)({name:"offscreen-canvas:getAppendixColorFromImage",args:[e,t]},Math.round(a)%n.bP)}},41074:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>i,M1:()=>l,bP:()=>o});var n=a(31481),s=a(5130);const o=Math.min(navigator.hardwareConcurrency||4,4);let r;function i(){return n.W75?[]:(r||(r=new Array(o).fill(void 0).map(()=>{const e=new Worker(new URL(a.p+a.u(9722),a.b));return{worker:e,connector:(0,s.U)(e,void 0,"media")}})),r)}function l(e,t){return i()[t].connector.request(e)}},41316:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(84051);function s(e){const[t,a]=(0,n.Ul)();return(0,n.vJ)(()=>{function t(){const t=window.getSelection();if(!t?.rangeCount)return;const n=t.getRangeAt(0);if(!n)return;if(!document.querySelector(e))return;const{commonAncestorContainer:s}=n;(s instanceof Element?s:s.parentElement).closest(e)&&a(n)}return document.addEventListener("selectionchange",t),()=>document.removeEventListener("selectionchange",t)},[e,a]),t}},41510:(e,t,a)=>{"use strict";a.d(t,{I:()=>E,A:()=>b});var n=a(84051),s=a(13439),o=a(90709),r=a(87357),i=a(11778),l=a(55153),c=a(45761),d=a(39351),m=a(17712),u=a(73767),p=a(50680),h=a(3325),g=a(15283),A=a(37661),y=a(93545),f=a(54746);const v=(0,n.ph)(({isQuick:e,isGeneric:t,onFileSelect:a})=>{const s=(0,n.li)(),o=(0,n.li)(),[i,l,c]=(0,A.A)(),d=(0,m.A)(e=>{const{relatedTarget:t}=e;t&&e.stopPropagation(),c()}),u=(0,m.A)(()=>{const e=o.current;if(!e)return;const{width:t,height:a}=e.getBoundingClientRect();e.viewBox.baseVal.width=t,e.viewBox.baseVal.height=a});(0,y.A)(s,u),(0,g.A)(u);const p=(0,r.A)("DropTarget",i&&"hovered");return n.Ay.createElement("div",{className:p,ref:s,onDrop:a,onDragEnter:l,onDragLeave:d,"data-dropzone":!0},n.Ay.createElement("svg",{className:"target-outline-container"},n.Ay.createElement("rect",{className:"target-outline",x:"0",y:"0",width:"100%",height:"100%",rx:"8"})),n.Ay.createElement("div",{className:"target-content"},n.Ay.createElement(f.A,{name:e?"photo":"document"}),n.Ay.createElement("div",{className:"title"},"Drop files here to send them"),!t&&n.Ay.createElement("div",{className:"description"},e?"in a quick way":"without compression")))});let E=function(e){return e.None="none",e.Document="document",e.QuickFile="quick_file",e}({});const b=(0,n.ph)(({isOpen:e,withQuick:t,editingMessage:a,onHide:g,onFileSelect:A})=>{const y=(0,d.A)(),{showNotification:f,updateAttachmentSettings:E}=(0,s.ko)(),b=(0,n.li)(),x=(0,u.A)(t),{shouldRender:w,transitionClassNames:C}=(0,p.A)(e);(0,n.vJ)(()=>e?(0,i.A)(g):void 0,[e,g]);const N=(0,m.A)(async e=>{const{dataTransfer:n}=e;let s=[];if(!(n.files&&n.files.length>0)||n.items&&n.items.length){if(n.items&&n.items.length>0){const e=await(0,c.A)(n.items);e?.length&&(s=s.concat(e))}}else s=s.concat(Array.from(n.files));if(a){if(s.length>1)return void f({message:y("MediaReplaceInvalidError",void 0,{pluralValue:s.length})});if(1===s.length){const e=await(0,l.A)(s[0].name,s[0]);if(!(a&&e&&(0,o.eh)(a,e)))return void f({message:y("MediaReplaceInvalidError",void 0,{pluralValue:s.length})})}}g(),E({shouldCompress:!t&&void 0}),A(s)}),I=(0,m.A)(async e=>{const{dataTransfer:t}=e;if(t.files&&t.files.length>0){const e=Array.from(t.files);if(a){if(e.length>1)return void f({message:y("MediaReplaceInvalidError",void 0,{pluralValue:e.length})});if(1===e.length){const t=await(0,l.A)(e[0].name,e[0]);if(!(a&&t&&(0,o.eh)(a,t)))return void f({message:y("MediaReplaceInvalidError",void 0,{pluralValue:e.length})})}}g(),E({shouldCompress:!0}),A(e)}}),S=(0,m.A)(e=>{e.stopPropagation();const{target:t,relatedTarget:a}=e;!t.matches(".DropTarget, .DropArea")||a&&a.matches(".DropTarget, .DropArea")||(b.current=window.setTimeout(()=>{g()},150))});if(!w)return;const M=t||x,k=(0,r.A)("DropArea",C);return n.Ay.createElement(h.A,{containerSelector:"#middle-column-portals"},n.Ay.createElement("div",{className:k,onDragLeave:S,onDragOver:()=>{b.current&&window.clearTimeout(b.current)},onDrop:g,onClick:g},n.Ay.createElement(v,{onFileSelect:N,isGeneric:!M}),M&&n.Ay.createElement(v,{onFileSelect:I,isQuick:!0})))})},42215:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(84051),s=a(30857);function o(e,t){const a=(0,s.A)(),o=(0,n.li)(e),r=(0,n.li)(t),i=(0,n.hb)(e=>(r.current=o.current(r.current,e),a(),r.current),[]);return[r.current,i]}},42827:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(84051),s=a(87357),o=a(58443),r=a(4961),i=a(59030),l=a(50680),c=a(64489);const d=(0,n.ph)(({text:e="Nothing found.",description:t,withSticker:a})=>{const d=(0,i.A)(),{transitionClassNames:m}=(0,l.A)(!0);return n.Ay.createElement("div",{className:(0,s.A)("NothingFound",m,t&&"with-description",a&&"with-sticker")},a&&n.Ay.createElement(c.A,{className:"sticker",size:120,tgsUrl:o.w.DuckNothingFound,previewUrl:o.d.DuckNothingFound,nonInteractive:!0,noLoop:!1}),e,t&&n.Ay.createElement("p",{className:"description"},(0,r.A)(d(t),["br"])))})},44589:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var n=a(84051),s=a(13439),o=a(31481),r=a(90709),i=a(91525),l=a(37661),c=a(5912),d=a(17712),m=a(62587),u=a(69419),p=a(59030),h=a(19806),g=a(94189),A=a(52988);const y=(0,n.ph)(({document:e,observeIntersection:t,smaller:a,canAutoLoad:y,autoLoadFileMaxSizeMb:f,uploadProgress:v,withDate:E,datetime:b,className:x,sender:w,isSelected:C,isSelectable:N,shouldWarnAboutSvg:I,isDownloading:S,message:M,onSelect:k,onCancelUpload:T,onMediaClick:P,onDateClick:L})=>{const{cancelMediaDownload:B,downloadMedia:R,setSharedSettingOption:F}=(0,s.ko)(),D=(0,n.li)(),O=(0,p.A)(),[z,U,j]=(0,l.A)(),[V,J]=(0,n.J0)(!1),{fileName:H,size:K,timestamp:$}=e,G=(0,i.rK)(e)||"",_=(0,c.Vz)(D,t),[q,W]=(0,l.A)();(0,n.vJ)(()=>{_&&W()},[_,W]);const[Q,Y]=(0,n.J0)(y&&(!f||K<=1048576*f)),Z=Boolean(S||Q&&q),X=(0,r.mr)(e,"download"),{loadProgress:ee,mediaData:te}=(0,u.A)(X,!Z,(0,r.Cz)(e,"download"),void 0,!0),ae=Boolean(te),{isUploading:ne,isTransferring:se,transferProgress:oe}=(0,r.LK)(v||ee,Z&&!ae,void 0!==v),re=(0,i.ON)(e),ie=re?(0,r.VD)(e):void 0,le=re?e.previewBlobUrl:void 0,ce=(0,m.A)((0,r.mr)(e,"pictogram"),!_),de=P&&e.innerMediaType,me=(0,d.A)(()=>{R({media:e,originMessage:M})}),ue=(0,d.A)(()=>{ne?T&&T():S?B({media:e}):se?Y(!1):de?P():o.c59.has(G)&&I?U():me()}),pe=(0,d.A)(()=>{F({shouldWarnAboutSvg:!V}),j(),me()}),he=(0,d.A)(()=>{L?.(M)});return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(A.A,{ref:D,name:H,extension:G,size:K,timestamp:E?b||$:void 0,thumbnailDataUri:ie,previewData:le||ce,smaller:a,isTransferring:se,isUploading:ne,transferProgress:oe,className:x,sender:w,isSelectable:N,isSelected:C,actionIcon:de?(0,r.hr)(e)?"play":"eye":"download",onClick:ue,onSelect:k,onDateClick:L?he:void 0}),n.Ay.createElement(g.A,{isOpen:z,onClose:j,confirmHandler:pe},O("lng_launch_svg_warning"),n.Ay.createElement(h.A,{className:"dialog-checkbox",checked:V,label:O("lng_launch_exe_dont_ask"),onCheck:J})))})},45227:(e,t,a)=>{"use strict";a.d(t,{P:()=>o});var n=a(96540),s=a(5338);function o({component:e,props:t}){return a=>{if(!a)return{unmount:()=>{}};a._reactRoot||(a._reactRoot=s.createRoot(a));try{a._reactRoot.render(n.createElement(e,t))}catch(e){return console.error("Failed to render React component:",e),{unmount:()=>{}}}return{unmount:()=>{a._reactRoot?.unmount(),a._reactRoot=null}}}}},45318:(e,t,a)=>{"use strict";e.exports=a.p+"GiftStar.59a3e3598fdbab13b181.svg"},45761:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(87679);async function s(e){const t=[];function a(e,n){return new Promise(s=>{if(e instanceof File)t.push(e),s(e);else if(e.isFile){const a=n.getAsFile();e.file(e=>{t.push(e),s(e)},()=>{a&&t.push(a),s(a)})}else e.isDirectory&&e.createReader().readEntries(e=>{const t=[];for(let s=0;s<e.length;s++)t.push(a(e[s],n));s(Promise.all(t))})})}const s=[];for(let t=0;t<e.length;t++){const n=e[t];if("file"===n.kind){const e=n.webkitGetAsEntry()||n.getAsFile();e&&s.push(a(e,n))}}return await Promise.all(s),(0,n.kc)(t)}},46051:(e,t,a)=>{"use strict";a.d(t,{G:()=>n,w:()=>s});const n="video/mp4; codecs=hvc1.1.6.L63.00",s="video/mp4; codecs=avc1.64001E"},47058:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(84051),s=a(13439),o=a(87357),r=a(85982),i=a(43874),l=a(17712),c=a(59030),d=a(64493),m=a(22699),u=a(24433),p=a(54746);const h=(0,n.ph)(({title:e,link:t,isDisabled:a,className:h,withShare:g,onRevoke:A})=>{const y=(0,c.A)(),{showNotification:f,openChatWithDraft:v}=(0,s.ko)(),{isMobile:E}=(0,i.Ay)(),b=!A,x=(0,l.A)(()=>{(0,r.eM)(t),f({message:{key:"LinkCopied"}})}),w=(0,l.A)(()=>{a||x()}),C=(0,l.A)(()=>{v({text:{text:t}})}),N=(0,n.Kr)(()=>({onTrigger:e,isOpen:t})=>n.Ay.createElement(d.A,{round:!0,ripple:!E,size:"smaller",color:"translucent",className:t?"active":"",onClick:e,ariaLabel:y("AccDescrOpenMenu2")},n.Ay.createElement(p.A,{name:"more"})),[E,y]);return n.Ay.createElement("div",{className:h},n.Ay.createElement("p",{className:"vCMpiQTJ"},y(e||"InviteLink.InviteLink")),n.Ay.createElement("div",{className:"xNjJHI7j"},n.Ay.createElement("input",{className:(0,o.A)("form-control","Ag6k_p7b"),value:t,readOnly:!0,onClick:w}),b?n.Ay.createElement(d.A,{color:"translucent",className:"obuPXobw",size:"smaller",round:!0,disabled:a,onClick:w},n.Ay.createElement(p.A,{name:"copy"})):n.Ay.createElement(m.A,{className:"p7t3macG",trigger:N,positionX:"right"},n.Ay.createElement(u.A,{icon:"copy",onClick:w,disabled:a},y("Copy")),A&&n.Ay.createElement(u.A,{icon:"delete",onClick:A,destructive:!0},y("RevokeButton")))),g&&n.Ay.createElement(d.A,{size:"smaller",disabled:a,onClick:C,className:"Sbagy_Tm"},y("FolderLinkScreen.LinkActionShare")))})},47067:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(84051),s=a(13439),o=a(31481),r=a(90709),i=a(96454),l=a(9716),c=a(87894),d=a(50444),m=a(39351);const u=({chat:e,user:t,folderId:a,isPinned:u,isMuted:p,canChangeFolder:h,isSavedDialog:g,currentUserId:A,isPreview:y,topics:f,handleDelete:v,handleMute:E,handleChatFolderChange:b,handleReport:x},w=!1)=>{const C=(0,m.A)(),{isSelf:N}=t||{},I=t?.id===o.zv8,S=(0,n.Kr)(()=>{if(e)return g?C("Delete"):(0,l.L8)(e.id)||(0,r.IC)(e)?C("DeleteChat"):(0,r.WX)(e)?C("ChannelLeave"):C("GroupLeaveGroup")},[e,g,C]);return(0,n.Kr)(()=>{if(!e||y)return;const{toggleChatPinned:n,toggleSavedDialogPinned:o,updateChatMutedState:m,toggleChatArchived:M,markChatMessagesRead:k,markChatUnread:T,openChatInNewTab:P,openUserPortrait:L,openPayPackageModal:B}=(0,s.ko)(),R=(0,l.L8)(e.id)?{title:"User Portrait",icon:"portrait-icon",handler:()=>{(0,d.N)()&&"plus"===(0,s.mS)().subscriptionInfo.subscriptionType?L({chatId:e.id,userId:e.id}):B()}}:void 0,F=i.OS&&{title:i.cp?C("ChatListOpenInNewWindow"):C("ChatListOpenInNewTab"),icon:"open-in-new-tab",handler:()=>{P(g?{chatId:A,threadId:e.id}:{chatId:e.id})}},D=()=>{g?o({id:e.id}):n({id:e.id,folderId:a})},O=u?{title:C("ChatListUnpinFromTop"),icon:"unpin",handler:D}:{title:C("ChatListPinToTop"),icon:"pin",handler:D},z={title:S,icon:"delete",destructive:!0,handler:v};if(g)return(0,c.oE)([F,O,z]);const U=h?{title:C("ChatListContextAddToFolder"),icon:"folder",handler:b}:void 0,j=p?{title:C("ChatsUnmute"),icon:"unmute",handler:()=>m({chatId:e.id,isMuted:!1})}:{title:`${C("ChatsMute")}...`,icon:"mute",handler:E};if(w)return(0,c.oE)([F,O,U,j]);const V=e.unreadCount||e.hasUnreadMark||Object.values(f||{}).some(({unreadCount:e})=>e)?{title:C("ChatListContextMaskAsRead"),icon:"readchats",handler:()=>k({id:e.id})}:void 0,J=e.unreadCount||e.hasUnreadMark||e.isForum?void 0:{title:C("ChatListContextMaskAsUnread"),icon:"unread",handler:()=>T({id:e.id})},H=(0,r.TJ)(e)?{title:C("Unarchive"),icon:"unarchive",handler:()=>M({id:e.id})}:{title:C("Archive"),icon:"archive",handler:()=>M({id:e.id})},K=x&&!t&&((0,r.WX)(e)||(0,r.YE)(e))?{title:C("ReportPeerReport"),icon:"flag",handler:x}:void 0,$=void 0!==a;return(0,c.oE)([R,F,U,V,J,O,!N&&j,!N&&!I&&!$&&H,K,z])},[e,t,h,C,b,u,w,p,A,v,E,x,a,N,I,g,S,y,f])}},47526:(e,t,a)=>{"use strict";a.d(t,{KE:()=>l,PP:()=>c,_u:()=>i,zS:()=>r});const n={google:"https://maps.google.com/maps",bing:"https://bing.com/maps/default.aspx",osm:"https://www.openstreetmap.org",apple:"https://maps.apple.com"},s=new Map(Object.entries({"building/medical":"#43b3f4","building/gym":"#43b3f4","education/cafeteria":"#f7943f","travel/bedandbreakfast":"#9987ff","travel/hotel":"#9987ff","travel/hostel":"#9987ff","travel/resort":"#9987ff","travel/hotel_bar":"#e56dd6",arts_entertainment:"#e56dd6",building:"#6e81b2",education:"#a57348",event:"#959595",food:"#f7943f",home:"#00aeef",nightlife:"#e56dd6",parks_outdoors:"#6cc039",shops:"#ffb300",travel:"#1c9fff",work:"#ad7854"})),o=["#e56cd5","#f89440","#9986ff","#44b3f5","#6dc139","#ff5d5a","#f87aad","#6e82b3","#f5ba21"];function r(e,t,a=15){const{lat:s,long:o}=t,r=n[e];switch(e){case"google":return`${r}/place/${s}+${o}/@${s},${o},${a}z`;case"bing":return`${r}?cp=${s}~${o}&lvl=${a}&sp=point.${s}_${o}`;case"apple":return`${r}?q=${s},${o}`;default:return`${r}/?mlat=${s}&mlon=${o}&zoom=${a}`}}function i(e,t){return 156543.03392*Math.cos(e*(Math.PI/180))/2**t}function l(e){return e?`https://ss3.4sqi.net/img/categories_v2/${e}_88.png`:""}function c(e){return e?s.get(e)||s.get(e.split("/")[0])||o[(t=e,t.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0)%o.length)]:"#008df2";var t}},47778:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});const n={rightPanelBg:"ZfJHpS2Q"}},48227:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(84051),s=a(48775),o=a(39351),r=a(19806),i=a(94189);const l=(0,n.ph)(({isOpen:e,onClose:t,userName:a,messagePriceInStars:l,messagesCount:c,shouldAutoApprove:d,setAutoApprove:m,confirmHandler:u})=>{const p=(0,o.A)(),h=p("ConfirmationModalPaymentForMessage",{user:a,amount:(0,s.Kk)(p,l),totalAmount:(0,s.Kk)(p,l*c),count:c},{withMarkdown:!0,withNodes:!0,pluralValue:c}),g=p("PayForMessage",{count:c},{withNodes:!0,pluralValue:c});return n.Ay.createElement(i.A,{title:p("TitleConfirmPayment"),confirmLabel:g,isOpen:e,onClose:t,confirmHandler:u},h,n.Ay.createElement(r.A,{className:"eScpikxM",label:p("DoNotAskAgain"),checked:d,onCheck:m}))})},48885:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,S:()=>p});var n=a(84051),s=a(61433),o=a(66644),r=a(14737),i=a(17712),l=a(93545),c=a(672);const d=450,m=100;function u({ref:e,isOpen:t,isDisabled:a,withResizeObserver:s,onStateChange:u}){const[p,h]=(0,n.J0)(t),g=(0,n.li)(),A=e||g,y=(0,n.li)(0),f=(0,i.A)(()=>{h(!0),u?.({element:void 0,height:0,isOpen:!1})});(0,n.vJ)(()=>{a&&f()},[a]),(0,n.vJ)(()=>{t&&h(!0)},[t]),(0,n._W)(f),(0,r.A)(()=>{h(!1),u?.({height:0,isOpen:!1})},t?void 0:d);const v=(0,n.hb)(()=>{const e=A.current;!a&&e&&p&&(t?(0,o.gm)(()=>{const a=e.offsetHeight;return y.current=a,()=>{u?.({element:e,height:a,isOpen:t})}}):u?.({element:e,height:0,isOpen:!1}))},[t,p,a,A,u]),E=(0,c.A)(()=>{const e=A.current;e&&e.offsetHeight!==y.current&&v()},[v,A],m,!0);return(0,n.Nf)(v,[v]),(0,l.A)(A,E,!s||!p),{shouldRender:p,ref:A}}function p(e,t=!1){let a=0;for(let n=0;n<e.length;n++){const r=e[n],i=r.element;if(!i)continue;const l=`${a}px`,c=()=>{(0,s.Tv)(i,{transform:`translateY(${r.isOpen?l:`calc(${l} - 100%)`})`,zIndex:String(-n),transition:t?"none":""})};i.dataset.isPanelOpen||!r.isOpen||t?c():((0,s.Tv)(i,{transform:`translateY(calc(${l} - 100%))`,zIndex:String(-n),transition:"none"}),i.dataset.isPanelOpen="true",(0,o.Uz)(c)),a+=r.height}}},48906:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(84051);const s=function({isOwn:e}){const t=e?"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z":"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z";return n.Ay.createElement("svg",{width:"9",height:"20",className:"svg-appendix"},n.Ay.createElement("defs",null,n.Ay.createElement("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"messageAppendix"},n.Ay.createElement("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.Ay.createElement("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.Ay.createElement("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"}))),n.Ay.createElement("g",{fill:"none","fill-rule":"evenodd"},n.Ay.createElement("path",{d:t,fill:"#000",filter:"url(#messageAppendix)"}),n.Ay.createElement("path",{d:t,fill:e?"#EEFFDE":"FFF",className:"corner"})))}},49068:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(s.ar.Extra,"EmojiTooltip",!t);return a?n.Ay.createElement(a,e):void 0}},49642:(e,t,a)=>{"use strict";a.d(t,{D5:()=>o,Eg:()=>i,HW:()=>l,MV:()=>s,hm:()=>c,wp:()=>d});const n={play:void 0,pause:void 0,seekbackward:void 0,seekforward:void 0,previoustrack:void 0,nexttrack:void 0,stop:void 0,seekTo:void 0};function s(e,t){const{mediaSession:a}=window.navigator;a?(e&&o(e),t&&r(t)):console.warn("MediaSession API not supported in this browser")}function o(e){const{mediaSession:t}=window.navigator;t&&(t.metadata=e??null)}function r(e){const{mediaSession:t}=window.navigator;t&&Object.entries({...n,...e}).forEach(([e,a])=>{try{t.setActionHandler(e,a)}catch(e){}})}function i(){const{mediaSession:e}=window.navigator;e&&(e.metadata=null,r(n),e.playbackState&&(e.playbackState="none"),e.setPositionState?.())}function l(e="none"){const{mediaSession:t}=window.navigator;t&&t.playbackState&&(t.playbackState=e)}function c(e){if(!e||void 0===e.position||void 0===e.duration)return;e.position=Math.min(e.position,e.duration);const{mediaSession:t}=window.navigator;t?.setPositionState?.(e)}function d({title:e,artist:t,album:a,artwork:n}){if("MediaMetadata"in window)return new window.MediaMetadata({title:e,artist:t,album:a,artwork:n})}},50444:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});var n=a(13439);function s(){const{subscriptionInfo:e}=(0,n.mS)();return e?.creditBalance>0&&!e?.isExpirated}},51083:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var n=a(84051),s=a(13439),o=a(89925),r=a(90709),i=a(60919),l=a(87357),c=a(76023),d=a(4961),m=a(39351),u=a(17712),p=a(59030),h=a(41036),g=a(21849),A=a(80999),y=a(34431),f=a(54746),v=a(38102),E=a(80477);const b=2.5*c.$,x=(0,n.ph)((0,s.EK)((e,{chatId:t,threadId:a})=>{const n=(0,i.hds)(e,t),s=a?(0,i.Vw0)(e,t,a):void 0,o=n?(0,i.ToO)(e,n):void 0,r=Boolean((0,i.zeq)(e,t)),l=a?(0,i.S0q)(e,t,a):void 0;return{chat:n,threadInfo:s,onlineCount:o,topic:l,areMessagesLoaded:r,messagesCount:l&&(0,i.QbG)(e,t,a),self:(0,i.mBe)(e,e.currentUserId),monoforumChannel:(0,i.k2W)(e,t)}})(({typingStatus:e,className:t,statusIcon:a,avatarSize:c="medium",noAvatar:x,status:w,withDots:C,withMediaViewer:N,withUsername:I,withFullInfo:S,withUpdatingStatus:M,withChatType:k,threadInfo:T,noRtl:P,chat:L,onlineCount:B,areMessagesLoaded:R,topic:F,messagesCount:D,noStatusOrTyping:O,withStory:z,storyViewerOrigin:U,noEmojiStatus:j,emojiStatusSize:V,isSavedDialog:J,self:H,withMonoforumStatus:K,monoforumChannel:$,onClick:G,onEmojiStatusClick:_})=>{const{loadFullChat:q,openMediaViewer:W,loadMoreProfilePhotos:Q}=(0,s.ko)(),Y=!K&&$?$:L,Z=(0,p.A)(),X=(0,m.A)(),ee=Y&&(0,r.Vs)(Y),te=Boolean(Y?.isForum&&T&&F),{id:ae,isMin:ne}=Y||{},se=(0,i._ls)((0,s.mS)(),ae);(0,n.vJ)(()=>{ae&&!ne&&(S&&q({chatId:ae}),N&&Q({peerId:ae,isPreload:!0}))},[ae,ne,S,ee,N]);const oe=(0,u.A)((e,t)=>{Y&&t&&(e.stopPropagation(),W({isAvatarView:!0,chatId:Y.id,mediaIndex:0,origin:"jumbo"===c?o.TQ.ProfileAvatar:o.TQ.MiddleHeaderAvatar}))}),re=(0,n.Kr)(()=>Y&&I&&(0,r.Kl)(Y),[Y,I]);if(Y)return n.Ay.createElement("div",{className:(0,l.A)("ChatInfo",t),dir:!P&&Z.isRtl?"rtl":void 0,onClick:G},!x&&!te&&n.Ay.createElement(n.Ay.Fragment,null,J&&H&&n.Ay.createElement(g.A,{key:"saved-messages",size:c,peer:H,isSavedMessages:!0,className:"saved-dialog-avatar"}),n.Ay.createElement(g.A,{key:Y.id,className:(0,l.A)(J&&"overlay-avatar"),size:c,peer:Y,withStory:z,asMessageBubble:Boolean($),storyViewerOrigin:U,storyViewerMode:"single-peer",isSavedDialog:J,onClick:N?oe:void 0})),te&&n.Ay.createElement(v.A,{topic:F,className:"topic-header-icon",size:b}),n.Ay.createElement("div",{className:"info"},F?n.Ay.createElement("h3",{dir:"auto",className:"fullName"},(0,d.A)(F.title)):n.Ay.createElement(y.A,{peer:Y,isMonoforum:!K&&Boolean($),emojiStatusSize:V,withEmojiStatus:!j,isSavedDialog:J,onEmojiStatusClick:_}),!O&&function(){if(w)return C?n.Ay.createElement(A.A,{className:"status",content:w}):n.Ay.createElement("span",{className:"status",dir:"auto"},a&&n.Ay.createElement(f.A,{className:"status-icon",name:a}),(0,d.A)(w));if(M&&!R&&!se)return n.Ay.createElement(A.A,{className:"status",content:Z("Updating")});if(K)return n.Ay.createElement("span",{className:"status",dir:"auto"},X("MonoforumStatus"));if(L?.isMonoforum)return;if(w)return C?n.Ay.createElement(A.A,{className:"status",content:w}):n.Ay.createElement("span",{className:"status",dir:"auto"},a&&n.Ay.createElement(f.A,{className:"status-icon",name:a}),(0,d.A)(w));if(!Y)return;if(e)return n.Ay.createElement(E.A,{typingStatus:e});if(te)return n.Ay.createElement("span",{className:"status",dir:"auto"},n.Ay.createElement(h.Ay,{name:"fade",shouldRestoreHeight:!0,activeKey:void 0!==D?1:2,className:"message-count-transition"},void 0!==D&&Z("messages",D,"i")));if(k)return n.Ay.createElement("span",{className:"status",dir:"auto"},Z((0,r.Gg)(Y)));const t=(0,r.sT)(Z,Y),s=B?`, ${Z("OnlineCount",B,"i")}`:void 0;return n.Ay.createElement("span",{className:"status"},re&&n.Ay.createElement("span",{className:"handle withStatus"},re),n.Ay.createElement("span",{className:"group-status"},t),s&&n.Ay.createElement("span",{className:"online-status"},s))}()))}))},51644:(e,t,a)=>{"use strict";a.d(t,{A:()=>I});var n=a(84051),s=a(13439),o=a(31481),r=a(66644),i=a(90709),l=a(87357),c=a(40435),d=a(35127),m=a(43874),u=a(37661),p=a(5912),h=a(17712),g=a(37859),A=a(37960),y=a(69419),f=a(29886),v=a(73767),E=a(34201),b=a(61097),x=a(54746),w=a(27860),C=a(14413),N=a(35913);const I=(0,n.ph)((0,s.EK)(e=>{const t=e.appConfig,a=t?.needAgeVideoVerification;return{needsAgeVerification:a}})(({id:e,photo:t,messageText:a,isOwn:I,noAvatars:S,canAutoLoad:M,isInSelectMode:k,isSelected:T,uploadProgress:P,forcedWidth:L,size:B="inline",dimensions:R,asForwarded:F,nonInteractive:D,shouldAffectAppendix:O,isDownloading:z,isProtected:U,theme:j,isInWebPage:V,clickArg:J,className:H,isMediaNsfw:K,observeIntersection:$,onClick:G,onCancelUpload:_,needsAgeVerification:q})=>{const W=(0,n.li)(),Q="extendedMediaPreview"===t.mediaType,Y=Q?void 0:t.blobUrl,Z=(0,p.Vz)(W,$),{isMobile:X}=(0,m.Ay)(),[ee,te]=(0,n.J0)(M),ae=ee&&Z&&!Q,{mediaData:ne,loadProgress:se}=(0,y.A)(Q?void 0:(0,i.rI)(t,B),!ae),oe=(0,f.A)(ne),re=Y||ne,{ref:ie,shouldRender:le}=(0,A.A)({hasMediaData:Boolean(re),withShouldRender:!0}),ce=Boolean(L),[de]=(0,n.J0)(!re),me=Boolean(re),ue=(0,b.A)(t,me);(0,A.A)({ref:ue,hasMediaData:!me});const pe=(0,b.A)(t,!ce),he=(0,i.VD)(t),{updateContentSettings:ge,openAgeVerificationModal:Ae}=(0,s.ko)(),[ye,fe,ve]=(0,u.A)(),[Ee,be]=(0,n.J0)(!1),xe=Q||t.isSpoiler||K,[we,Ce,Ne]=(0,u.A)(xe);(0,n.vJ)(()=>{xe?Ce():Ne()},[xe]);const Ie=(0,h.A)(()=>{ve(),Ne(),Ee&&ge({isSensitiveEnabled:!0})}),{loadProgress:Se}=(0,y.A)(Q?void 0:(0,i.rI)(t,"download"),!z,Q?void 0:(0,i.Cz)(t,"download")),{isUploading:Me,isTransferring:ke,transferProgress:Te}=(0,i.LK)(P||(z?Se:se),ae&&!re,void 0!==P),Pe=!1===(0,v.A)(ee),{ref:Le,shouldRender:Be}=(0,E.A)({isOpen:ke,noMountTransition:Pe,className:"slow",withShouldRender:!0}),{ref:Re,shouldRender:Fe}=(0,E.A)({isOpen:!re&&!ee,withShouldRender:!0}),De=(0,h.A)(e=>{if(Me)_?.(J);else{if(re)return we?K?q?void Ae():void fe():void Ne():void G?.(J,e);te(e=>!e)}});(0,g.A)(([e])=>{if(!O)return void(e&&W.current.closest(o.KFG).removeAttribute(o.D3G));const t=W.current.closest(o.KFG);if(re){const e=Number(t.closest(".Message").dataset.messageId);(0,c.A)(re,Boolean(I),e,T,j).then(e=>{(0,r.RK)(()=>{t.style.setProperty("--appendix-bg",e),t.setAttribute(o.D3G,"")})})}else t.classList.add("has-appendix-thumb")},[O,re,I,k,T,j]);const{width:Oe,height:ze,isSmall:Ue}=R||(0,d.yA)({media:t,isOwn:I,asForwarded:F,noAvatars:S,isMobile:X,messageText:a,isInWebPage:V}),je=(0,l.A)("media-inner",!Me&&!D&&"interactive",Ue&&"small-image",(Oe===ze||"pictogram"===B)&&"square-image",ze<d.ej&&"fix-min-height",H),Ve=R?` width: ${Oe}px; left: ${R.x}px; top: ${R.y}px;`:"",Je="inline"===B?`height: ${ze}px;${Ve}`:void 0;return n.Ay.createElement("div",{id:e,ref:W,className:je,style:Je,onClick:Me?void 0:De},ce&&n.Ay.createElement("canvas",{ref:pe,className:"thumbnail blurred-bg"}),re&&n.Ay.createElement("img",{ref:ie,src:re||oe,className:(0,l.A)("full-media",ce&&"with-blurred-bg"),alt:"",style:L?`width: ${L}px`:void 0,draggable:!U}),de&&n.Ay.createElement("canvas",{ref:ue,className:"thumbnail"}),U&&n.Ay.createElement("span",{className:"protector"}),Be&&!Fe&&n.Ay.createElement("div",{ref:Le,className:"media-loading"},n.Ay.createElement(N.A,{progress:Te,onClick:Me?De:void 0})),Fe&&n.Ay.createElement(x.A,{ref:Re,name:"download"}),n.Ay.createElement(w.A,{isVisible:we,withAnimation:!0,thumbDataUri:he,width:Oe,height:ze,className:"media-spoiler",isNsfw:K}),ke&&n.Ay.createElement("span",{className:"message-transfer-progress"},Math.round(100*Te),"%"),n.Ay.createElement(C.A,{isOpen:ye,onClose:ve,shouldAlwaysShow:Ee,onAlwaysShowChanged:be,confirmHandler:Ie}))}))},52844:(e,t,a)=>{"use strict";let n;function s(e="*",t,a=!1){n||(n=document.createElement("input"),n.setAttribute("type","file")),n.setAttribute("accept",e),a?n.removeAttribute("multiple"):n.setAttribute("multiple","multiple"),n.onchange=null,n.value="",n.onchange=t,n.click()}a.d(t,{p:()=>s})},52988:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(84051),s=a(96454),o=a(87357),r=a(17663),i=a(91525),l=a(76023),c=a(4961),d=a(43874),m=a(45470),u=a(83057),p=a(59030),h=a(50680),g=a(96530),A=a(35913),y=a(54746);const f=(0,n.ph)(({ref:e,name:t,size:a,extension:f="",timestamp:v,sender:E,thumbnailDataUri:b,previewData:x,className:w,smaller:C,isTransferring:N,isUploading:I,isSelectable:S,isSelected:M,transferProgress:k,actionIcon:T,onClick:P,onSelect:L,onDateClick:B})=>{const R=(0,p.A)();let F=(0,n.li)();e&&(F=e);const{isMobile:D}=(0,d.Ay)(),[O]=(0,n.J0)(!x),z=Boolean(x),U=(0,m.A)(b,z,D&&!s.QH),j=(0,u.A)(!z),{shouldRender:V,transitionClassNames:J}=(0,h.A)(N,void 0,!0),H=(0,i.fE)(f),K=(0,i.zV)(a),$=(0,n.Kr)(()=>N&&k?`${(0,i.zV)(a*k)} / ${K}`:K,[N,a,K,k]),{width:G,height:_}=(0,l.tP)(C),q=(0,o.A)("File",w,C&&"smaller",P&&!I&&"interactive",M&&"file-is-selected");return n.Ay.createElement("div",{ref:F,className:q,dir:R.isRtl?"rtl":void 0,onClick:L},S&&n.Ay.createElement("div",{className:"message-select-control no-selection"},M&&n.Ay.createElement(y.A,{name:"select"})),n.Ay.createElement("div",{className:"file-icon-container",onClick:I?void 0:P},b||x?n.Ay.createElement("div",{className:"file-preview media-inner"},n.Ay.createElement("img",{src:x,className:"full-media",width:G,height:_,draggable:!1,alt:""}),O&&n.Ay.createElement("canvas",{ref:U,className:(0,o.A)("thumbnail",j)})):n.Ay.createElement("div",{className:`file-icon ${H}`},f.length<=4&&n.Ay.createElement("span",{className:"file-ext",dir:"auto"},f)),V&&n.Ay.createElement("div",{className:(0,o.A)("file-progress",H,J)},n.Ay.createElement(A.A,{progress:k,size:C?"s":"m",onClick:I?P:void 0})),P&&n.Ay.createElement(y.A,{name:T||"download",className:(0,o.A)("action-icon",V&&"hidden")})),n.Ay.createElement("div",{className:"file-info"},n.Ay.createElement("div",{className:"file-title",dir:"auto",title:t},(0,c.A)(t)),n.Ay.createElement("div",{className:"file-subtitle",dir:"auto"},n.Ay.createElement("span",null,$),E&&n.Ay.createElement("span",{className:"file-sender"},(0,c.A)(E)),!E&&Boolean(v)&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"bullet"}),n.Ay.createElement(g.A,{onClick:B},(0,r.fS)(R,1e3*v,!0))))),E&&Boolean(v)&&n.Ay.createElement(g.A,{onClick:B},(0,r.be)(R,1e3*v)))})},53188:(e,t,a)=>{"use strict";a.d(t,{A:()=>L});var n=a(84051),s=a(31481),o=a(66644),r=a(90709),i=a(70636),l=a(87357),c=a(4961),d=a(18501),m=a(79882),u=a(35749),p=a(2338),h=a(21488),g=a(62587),A=a(59030),y=a(13439),f=a(76023),v=a(43874),E=a(11217),b=a(38102);const x="CBda1UmC",w="BhS75ocD",C="uWo2dhui",N="g3XnC73g",I=Number(f.$),S=(0,n.ph)(({chat:e,topics:t,renderLastMessage:a,observeIntersection:s})=>{const{openThread:o}=(0,y.ko)(),i=(0,n.li)(),d=(0,n.li)(),m=(0,A.A)(),[u,...p]=(0,n.Kr)(()=>t?(0,r.CO)(Object.values(t),void 0,!0).slice(0,3):[],[t]),[h,g]=(0,n.J0)(!1),[f,S]=(0,n.J0)(void 0),{handleClick:M,handleMouseDown:k}=(0,E.Q)(t=>{0===u.unreadCount||e.isForumAsMessages||(t.stopPropagation(),t.preventDefault(),o({chatId:e.id,threadId:u.id,shouldReplaceHistory:!0,noForumTopicPanel:(0,v.Ny)()}))});return(0,n.vJ)(()=>{const e=i.current,t=d.current;if(!e||!t)return;const a=e.offsetWidth,n=t.offsetWidth;Math.abs(a-n)<I?S(Math.max(a,n)):S(void 0),g(a>n)},[u,a]),n.Ay.createElement("div",{className:(0,l.A)("Ow6Ij9O5",h&&"U_yhhC0w",f&&"HV0wCR4O"),dir:m.isRtl?"rtl":void 0,style:f?`--overwritten-width: ${f}px`:void 0},u&&n.Ay.createElement("div",{className:x},n.Ay.createElement("div",{className:(0,l.A)("lEbV6HrI",u.unreadCount&&w),ref:d,onClick:M,onMouseDown:k},n.Ay.createElement(b.A,{topic:u,observeIntersection:s}),n.Ay.createElement("div",{className:"k3Ch25ZQ"},(0,c.A)(u.title)),!f&&h&&n.Ay.createElement("div",{className:C},n.Ay.createElement("div",{className:N}))),n.Ay.createElement("div",{className:"IkuCBmvA"},p.map(e=>n.Ay.createElement("div",{className:(0,l.A)("d0hTIVJn",e.unreadCount&&w),key:e.id},n.Ay.createElement(b.A,{topic:e,className:"oknhG11L",observeIntersection:s}),n.Ay.createElement("span",{className:"ZUj3xAjs"},(0,c.A)(e.title))))),n.Ay.createElement("div",{className:"_m_2xcPW"})),!u&&n.Ay.createElement("div",{className:(0,l.A)(x,"L4Zk0yMN")},m("Loading")),n.Ay.createElement("div",{className:(0,l.A)("KJ16dBus",u?.unreadCount&&w),ref:i,onClick:M,onMouseDown:k},a(),!f&&!h&&n.Ay.createElement("div",{className:C},n.Ay.createElement("div",{className:N}))))});var M=a(54746),k=a(18653),T=a(80477);const P=200;function L({chat:e,topics:t,lastMessage:a,statefulMediaContent:y,chatId:f,typingStatus:v,draft:E,lastMessageTopic:b,lastMessageSender:x,observeIntersection:w,animationType:C,orderDiff:N,withInterfaceAnimations:I,isTopic:L,isSavedDialog:B,isPreview:R}){const F=(0,A.A)(),D=(0,n.li)(),O=a?.content.storyData,z=y&&!y.story;(0,h.A)(z?O?.peerId:void 0,O?.id,y?.story);const U=y?.story||a,j=U&&!(0,r.fP)(U),V=(0,p.A)(U),J=j?V:void 0,H=(0,u.A)(U,"micro"),K=(0,g.A)(j?H:void 0),$=Boolean(a&&(0,r.lk)(a)),G=(0,n.hb)(()=>{if(!B&&!R&&v&&a&&v.timestamp>1e3*a.date)return n.Ay.createElement(T.A,{typingStatus:v});const t=E&&E.replyInfo?.replyToMsgId===b?.id,s=E?.replyInfo&&!E.text&&E.isLocal;if(!e?.isForum&&!B&&!R&&E&&!s&&(!L||!t))return n.Ay.createElement("p",{className:"last-message",dir:F.isRtl?"auto":"ltr"},n.Ay.createElement("span",{className:"draft"},F("Draft")),n.Ay.createElement("span",{className:"last-message-summary",dir:"auto"},(0,d.fd)({text:E.text?.text||"",entities:E.text?.entities,asPreview:!0,withTranslucentThumbs:!0})));if(!a)return;const o=x?(0,i.Q5)(F,f,x):void 0;return n.Ay.createElement("p",{className:"last-message shared-canvas-container",dir:F.isRtl?"auto":"ltr"},o&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"sender-name"},(0,c.A)(o)),n.Ay.createElement("span",{className:"colon"},":")),!B&&a.forwardInfo&&n.Ay.createElement(M.A,{name:"share-filled",className:"chat-prefix-icon"}),"story"===a.replyInfo?.type&&n.Ay.createElement(M.A,{name:"story-reply",className:"chat-prefix-icon"}),n.Ay.createElement("span",{className:"last-message-summary",dir:"auto"},function(e,t,a,s){const o=n.Ay.createElement(k.A,{message:e,noEmoji:Boolean(a),observeIntersectionForLoading:t,inChatList:!0});if(!a)return o;const i=(0,r.y2)(e);return n.Ay.createElement("span",{className:"media-preview"},n.Ay.createElement("img",{src:a,alt:"",className:(0,l.A)("media-preview--image",s&&"round",i&&"media-preview-spoiler"),draggable:!1}),(0,r.zX)(e)&&n.Ay.createElement(M.A,{name:"play"}),o)}(a,w,K||J,$)))},[e,f,E,$,L,F,a,x,b,K,J,w,v,B,R]);return(0,n.Nf)(()=>{const e=D.current;if(I&&e){if(C===m.I.Opacity)e.style.opacity="0",(0,o.RK)(()=>{e.classList.add("animate-opacity"),e.style.opacity="1"});else{if(C!==m.I.Move)return;e.style.transform=`translate3d(0, ${-N*s.yq1}px, 0)`,(0,o.RK)(()=>{e.classList.add("animate-transform"),e.style.transform=""})}setTimeout(()=>{(0,o.RK)(()=>{e.classList.remove("animate-opacity","animate-transform"),e.style.opacity="",e.style.transform=""})},P+s.xB5)}},[I,N,C]),{renderSubtitle:function(){return e?.isForum&&!L?n.Ay.createElement(S,{chat:e,renderLastMessage:G,observeIntersection:w,topics:t}):G()},ref:D}}},53827:(e,t,a)=>{"use strict";a.d(t,{_K:()=>A,dj:()=>v,kz:()=>y});var n=a(13439),s=a(89925),o=a(66644),r=a(60919),i=a(96454),l=a(60343),c=a(80853),d=a(41733);const m=new Map;let u,p=[],h=[];function g(e,t){const a=u&&m.get(u);a&&(a.audio.pause(),a.audio.currentTime=0,a.onTrackChange&&a.onTrackChange());const o=f(e,(0,r.nTw)((0,n.mS)()).audioPlayer.origin||s.d9.Inline,t);if(!o)return;if(!m.has(o))return void(0,n.ko)().openAudioPlayer((0,l.ES)(E(o).messageKey));const i=m.get(o);i.onForcePlay&&i.onForcePlay(),u=o,i.audio.src&&(0,d.A)(i.audio)}function A(){const e=u&&m.get(u);e&&e.audio.pause()}function y(e,t,a,A,y){if(!m.has(e)){const a=function(e,t,a,n){const s=new Audio;function o(t){return a=>{m.has(e)&&((0,c.f)(s)||m.get(e).handlers.forEach(e=>{e(t,a)}))}}return s.addEventListener("timeupdate",o("onTimeUpdate")),s.addEventListener("play",o("onPlay")),s.addEventListener("pause",o("onPause")),s.addEventListener("loadstart",o("onLoadStart")),s.addEventListener("loadeddata",o("onLoadedData")),s.addEventListener("playing",o("onPlaying")),s.addEventListener("ended",()=>{m.has(e)&&((0,c.f)(s)||g(e))}),{audio:s,type:t,proxy:new Proxy(s,{get:(e,t)=>e[t]}),handlers:[],onForcePlay:a,onTrackChange:n}}(e,t,A,y);m.set(e,a),function(e,t){"audio"!==e.type||h.includes(t)||(h.push(t),h.sort(b)),"voice"!==e.type||p.includes(t)||(p.push(t),p.sort(b))}(a,e)}const{audio:v,proxy:x,handlers:w}=m.get(e);return w.push(a),{play(a){if(!v.paused)return;const o=u&&m.get(u);o&&u!==e&&(o.audio.pause(),o.audio.currentTime=0,(0,c.f)(o.audio)&&(o.audio.dataset.preventPlayAfterPatch="true"),o.onTrackChange&&o.onTrackChange()),u=e,v.src||(v.src=a,v.preload="auto",a.includes("/progressive/")&&i.Yw&&(delete v.dataset.preventPlayAfterPatch,(0,c.C)(v))),(0,d.A)(v),function(e,t){if((0,r.nTw)((0,n.mS)()).globalSearch.currentContent===s.$C.Music)return;const{chatId:a}=(0,l.ES)(E(t).messageKey),o=(0,r.Xf0)((0,n.mS)())?.chatId,i=e=>e.startsWith(`msg${a}`)||o&&e.startsWith(`msg${o}`);"audio"===e&&(h=h.filter(i)),"voice"===e&&(p=p.filter(i))}(t,e)},pause(){u===e&&v.pause()},stop(){if(u===e){const e=v.src;v.pause(),(0,o.Uz)(()=>{v.src="",v.src=e})}},setCurrentTime(t){u===e&&(v.fastSeek?v.fastSeek(t):v.currentTime=t)},setVolume(t){u===e&&(v.volume=t,v.muted=!1)},setPlaybackRate(t){u===e&&(v.playbackRate=t)},toggleMuted(e){v.muted=void 0===e?!v.muted:e},proxy:x,requestNextTrack(){g(e)},isLast:()=>!f(e,(0,r.nTw)((0,n.mS)()).audioPlayer.origin),isFirst:()=>!f(e,(0,r.nTw)((0,n.mS)()).audioPlayer.origin,!0),requestPreviousTrack(){g(e,!0)},destroy(t=!1){const n=m.get(e);n&&(n.handlers=n.handlers.filter(e=>e!==a),n.handlers.length||(n.audio.pause(),m.delete(e),t&&function(e,t){const a=e=>e!==t;"audio"===e.type&&(h=h.filter(a)),"voice"===e.type&&(p=p.filter(a))}(n,e),e===u&&(u=void 0)))}}}function f(e,t=s.d9.Inline,a){const n=function(e){switch(e.type){case"audio":return h;case"voice":return p;default:return}}(m.get(e));if(!n)return;if(t===s.d9.Search){const t=n.indexOf(e);if(t<0)return;return n[t+(a?-1:1)]}const{chatId:o}=(0,l.ES)(E(e).messageKey),r=n.filter(e=>e.startsWith(`msg${o}`)),i=r.indexOf(e);if(i<0)return;let c=t===s.d9.Inline?-1:1;return a&&(c*=-1),r[i+c]}function v(e){const t=(0,l.AD)(e);if(t)return`${t}-${e.date}`}function E(e){return{messageKey:e.match(/^msg(-?\d+)-(\d+)/)[0],date:Number(e.split("-").pop())}}function b(e,t){if(!e||!t)return 0;const{date:a,messageKey:n}=E(e),{date:s,messageKey:o}=E(t),r=s-a;return 0===r?o.localeCompare(n):r}},54172:(e,t,a)=>{"use strict";a.d(t,{A:()=>Za});var n=a(84051),s=a(13439),o=a(23174),r=a(89925),i=a(31481),l=a(90709),c=a(70636),d=a(26129),m=a(60919),u=a(56494),p=a(30708),h=a(96454),g=a(87357),A=a(9716),y=a(60343),f=a(80140),v=a(83868),E=a(41512),b=a(46942),x=a.n(b),w=a(72531),C=a(50444),N=a(7971),I=a(81120),S=a(85325),M=a(80395),k=a(48799),T=a(40459),P=a(8063),L=a(17712),B=a(8235);const R="w-[20px] h-[20px] text-[16px] cursor-pointer flex items-center justify-center",F=(0,n.ph)((0,s.EK)((e,{message:t,messageListType:a,detectedLanguage:n})=>{const{subscriptionInfo:s}=e,{subscriptionType:o}=s,r=(0,l.Ie)(t),i=(0,l.XR)(t),c=(0,N.aT)(t),d="pinned"===a,u="scheduled"===a,p=(0,m.hds)(e,t.chatId),h=p&&(0,A.L8)(p.id)?void 0:(0,m.AWZ)(e,t.chatId),{threadId:g}=(0,m.Xf0)(e)||{},{canReplyGlobally:y}=g&&(0,m.WAX)(e,t,g)||{},f=p&&!(0,l.Sq)(p,"sendPlain",h),v=(0,m.Rny)(e,t.chatId,t.id);return{message:t,canScheduleMeeting:!r&&i,canAISummarize:c,canSmartReply:!r&&!d&&!u&&y&&f&&i,canTranslate:!(v?Boolean((0,m.a_$)(e,t.chatId,v)[t.id]?.text):void 0)&&(0,m.S86)(e,t,n),subscriptionType:o}})(({message:e,position:t,canScheduleMeeting:a,canAISummarize:o,canSmartReply:r,canTranslate:i,subscriptionType:l})=>{const c=a||o||r||i,[d,m]=(0,n.J0)(!1),{openPayPackageModal:u}=(0,s.ko)(),p=(0,L.A)(async()=>{if(!(0,C.N)())return void u();if(!l||"free"===l||"basic"===l)return void u();if(d)return;const t=e.chatId;if(P.Ay.get(t))return;m(!0);const a=(0,A.L8)(t)?void 0:e.senderId,n=(0,M.IM)(),s=()=>{P.Ay.create({chatId:t,targetUserId:a}).handleTargetMessage(e),setTimeout(()=>m(!1),2e3)};n&&await(0,M.G6)(n)?s():(0,S.wG)({onOk:s,onCancel:()=>m(!1)})}),h=(0,L.A)(async()=>{if((0,C.N)()){if(e.content.text?.text){(0,s.ko)().updateDraftReplyInfo({replyToMsgId:e.id,replyToPeerId:void 0,quoteText:void 0,quoteOffset:void 0});const t=await(0,T.G)(e.content.text.text);t&&t.score>.8?w.A.emit("update-input-text",t.answer):(w.A.emit("update-input-spiner",!0),(0,I.uN)({message:e.content.text?.text,message_id:e.id}).then(e=>{w.A.emit("update-input-text",e.data.reply)}).catch(()=>{w.A.emit("update-input-spiner",!1)}))}}else u()}),g=(0,L.A)(()=>{if(!(0,C.N)())return void u();const{photo:t,document:a,webPage:n,voice:o,audio:r,text:i,video:l}=e.content,c=(0,N.Ah)(i?.text);(0,s.ko)().openChatAIWithInfo({chatId:e.chatId}),t?(0,N.tg)(e):n&&!i?.text||c?(0,N.ur)(e):a?(0,N.mu)(e):o?(0,N._b)(e):r?(0,N.LW)(e):l&&(0,N.Al)(e)}),y=(0,L.A)(()=>{(0,C.N)()?(0,s.ko)().requestMessageTranslation({chatId:e.chatId,id:e.id}):u()});if(c)return n.Ay.createElement("div",{className:x()("message-gpt-menu","top"===t?"top-[-32px]":"bottom-[-32px]")},n.Ay.createElement("div",{className:"message-gpt-menu-inner"},n.Ay.createElement("div",{className:x()("!cursor-auto",R)},n.Ay.createElement("img",{className:"w-[20px] h-[20px] mt-[-4px]",src:B,alt:""})),i&&n.Ay.createElement("div",{className:R,onClick:y,title:"Translate"},n.Ay.createElement(k.wE,{size:16})),a&&n.Ay.createElement("div",{className:R,onClick:p,title:"Schedule meeting"},n.Ay.createElement(k.Nn,{size:16})),o&&n.Ay.createElement("div",{className:R,onClick:g,title:"Summarize"},n.Ay.createElement(k.hD,{size:16})),r&&n.Ay.createElement("div",{className:R,onClick:h,title:"Smart Reply"},n.Ay.createElement(k.o9,{size:16}))))}));var D=a(76023),O=a(35049),z=a(4961),U=a(58734);function j(e){if(!e||1!==e.extendedMedia.length)return{photo:void 0,video:void 0};const t=e.extendedMedia[0],a="mediaType"in t;return{photo:a?t.duration?void 0:t:t.photo,video:a?t.duration?t:void 0:t.video}}var V=a(43336),J=a(35127);function H(e,t){return e.reduce((e,t)=>e+t,t)}function K(e){const t={width:0,height:0};return e.forEach(({dimensions:e,sides:a})=>{2&a&&(t.width=e.width+e.x),4&a&&(t.height=e.height+e.y)}),t}function $(e,t,a,n){const s=function(e,t,a){const n=e[0].isOutgoing,s=(t?e[0].content.paidMedia.extendedMedia.map(e=>"mediaType"in e?e:e.photo||e.video):e.map(e=>(0,l.r_)(e).photo||(0,l.r_)(e).video)).filter(Boolean);return s.map(e=>{const t=(0,J.yA)({media:e,isOwn:n,isMobile:a});return t.width/t.height})}(a.messages,a.isPaidMedia,n),o=function(e){return e.map(e=>e>1.2?"w":e<.8?"n":"q").join("")}(s),r=function(e){return e.reduce((e,t)=>t+e,1)/e.length}(s),i=s.length,c=s.some(e=>e>2),d=(0,D.w4)(e,!1,t,n);let m;const u={ratios:s,proportions:o,averageRatio:r,maxWidth:d,minWidth:100,maxHeight:d,spacing:2};return m=i>=5||c?function({ratios:e,averageRatio:t,maxWidth:a,minWidth:n,spacing:s,maxHeight:o=4*a/3}){const r=function(e,t){return e.map(e=>t>1.1?(0,V.qE)(e,1,2.75):(0,V.qE)(e,.6667,1))}(e,t),i=e.length,l=new Array(i),c=[],d=e=>{const t=[];let n=0;e.forEach(e=>{t.push(((e,t)=>{const n=H(r.slice(e,e+t),0);return(a-(t-1)*s)/n})(n,e)),n+=e}),c.push({lineCounts:e,heights:t})};for(let e=1;e!==i;++e){const t=i-e;e<=3&&t<=3&&d([e,t])}for(let e=1;e!==i-1;++e)for(let a=1;a!==i-e;++a){const n=i-e-a;e<=3&&a<=(t<.85?4:3)&&n<=3&&d([e,a,n])}for(let e=1;e!==i-1;++e)for(let t=1;t!==i-e;++t)for(let a=1;a!==i-e-t;++a){const n=i-e-t-a;e<=3&&t<=3&&a<=3&&n<=4&&d([e,t,a,n])}let m,u=0;for(let e=0;e<c.length;e++){const{heights:t,lineCounts:a}=c[e],r=a.length,i=H(t,0)+s*(r-1),l=Math.min(...t)<n?1.5:1,d=(()=>{for(let e=1;e!==r;++e)if(a[e-1]>a[e])return 1.5;return 1})(),p=Math.abs(i-o)*l*d;(!m||p<u)&&(m=c[e],u=p)}const p=m.lineCounts,h=m.heights,g=p.length;let A=0,y=0;for(let e=0;e!==g;++e){const t=p[e],n=h[e],o=Math.round(n);let i=0;for(let c=0;c!==t;++c){const d=0|(0===e?1:0)|(e===g-1?4:0)|(0===c?8:0)|(c===t-1?2:0),m=r[A],u=c===t-1?a-i:Math.round(m*n);l[A]={dimensions:{x:i,y,width:u,height:o},sides:d},i+=u+s,++A}y+=o+s}return l}(u):2===i?function(e){const{ratios:t,proportions:a,averageRatio:n}=e;return"ww"===a&&n>1.4&&t[1]-t[0]<.2?function(e){const{ratios:t,maxWidth:a,spacing:n,maxHeight:s}=e,o=Math.round(Math.min(a/t[0],Math.min(a/t[1],(s-n)/2)));return[{dimensions:{x:0,y:0,width:a,height:o},sides:11},{dimensions:{x:0,y:o+n,width:a,height:o},sides:14}]}(e):"ww"===a||"qq"===a?function(e){const{ratios:t,maxWidth:a,spacing:n,maxHeight:s}=e,o=(a-n)/2,r=Math.round(Math.min(o/t[0],Math.min(o/t[1],s)));return[{dimensions:{x:0,y:0,width:o,height:r},sides:13},{dimensions:{x:o+n,y:0,width:o,height:r},sides:7}]}(e):function(e){const{ratios:t,minWidth:a,maxWidth:n,spacing:s,maxHeight:o}=e,r=Math.round(1.5*a),i=Math.min(Math.round(Math.max(.4*(n-s),(n-s)/t[0]/(1/t[0]+1/t[1]))),n-s-r),l=n-i-s,c=Math.min(o,Math.round(Math.min(l/t[0],i/t[1])));return[{dimensions:{x:0,y:0,width:l,height:c},sides:13},{dimensions:{x:l+s,y:0,width:i,height:c},sides:7}]}(e)}(u):3===i?function(e){const{proportions:t}=e;return"n"===t[0]?function(e){const{maxHeight:t,spacing:a,ratios:n,maxWidth:s,minWidth:o}=e,r=t,i=Math.round(Math.min((t-a)/2,n[1]*(s-a)/(n[2]+n[1]))),l=r-i-a,c=Math.max(o,Math.round(Math.min((s-a)/2,Math.min(i*n[2],l*n[1])))),d=Math.min(Math.round(r*n[0]),s-a-c);return[{dimensions:{x:0,y:0,width:d,height:r},sides:13},{dimensions:{x:d+a,y:0,width:c,height:l},sides:3},{dimensions:{x:d+a,y:l+a,width:c,height:i},sides:6}]}(e):function(e){const{maxWidth:t,ratios:a,maxHeight:n,spacing:s}=e,o=t,r=Math.round(Math.min(o/a[0],.66*(n-s))),i=(t-s)/2,l=Math.min(n-r-s,Math.round(Math.min(i/a[1],i/a[2])));return[{dimensions:{x:0,y:0,width:o,height:r},sides:11},{dimensions:{x:0,y:r+s,width:i,height:l},sides:12},{dimensions:{x:i+s,y:r+s,width:o-i-s,height:l},sides:6}]}(e)}(u):function(e){const{proportions:t}=e;return"w"===t[0]?function({maxWidth:e,ratios:t,spacing:a,maxHeight:n,minWidth:s}){const o=e,r=Math.round(Math.min(o/t[0],.66*(n-a))),i=Math.round((e-2*a)/(t[1]+t[2]+t[3])),l=Math.max(s,Math.round(Math.min(.4*(e-2*a),i*t[1]))),c=Math.round(Math.max(Math.max(s,.33*(e-2*a)),i*t[3])),d=o-l-c-2*a,m=Math.min(n-r-a,i);return[{dimensions:{x:0,y:0,width:o,height:r},sides:11},{dimensions:{x:0,y:r+a,width:l,height:m},sides:12},{dimensions:{x:l+a,y:r+a,width:d,height:m},sides:4},{dimensions:{x:l+a+d+a,y:r+a,width:c,height:m},sides:6}]}(e):function({maxHeight:e,ratios:t,maxWidth:a,spacing:n,minWidth:s}){const o=e,r=Math.round(Math.min(o*t[0],.6*(a-n))),i=Math.round((e-2*n)/(1/t[1]+1/t[2]+1/t[3])),l=Math.round(i/t[1]),c=Math.round(i/t[2]),d=o-l-c-2*n,m=Math.max(s,Math.min(a-r-n,i));return[{dimensions:{x:0,y:0,width:r,height:o},sides:13},{dimensions:{x:r+n,y:0,width:m,height:l},sides:3},{dimensions:{x:r+n,y:l+n,width:m,height:c},sides:2},{dimensions:{x:r+n,y:l+c+2*n,width:m,height:d},sides:6}]}(e)}(u),{layout:m,containerStyle:K(m)}}var G=a(43874),_=a(10722),q=a(49746),W=a(21488),Q=a(37661),Y=a(5912),Z=a(39351),X=a(59030),ee=a(73767),te=a(14622),ae=a(34201),ne=a(9705),se=a(5130);let oe;const re=new ne.A;h.CM&&setTimeout(function(){oe||(oe=(0,se.U)(new Worker(new URL(a.p+a.u(8590),a.b))),re.resolve())},4e3);var ie=a(84947),le=a(37836);const ce=new Map;const de=(0,le.nF)(function(e){const{updateChatDetectedLanguage:t}=(0,s.ko)(),a=ce.get(e);if(!a)return;const n=a.size;if(n<8)return;let o=0,r=0;const i=new Map;for(const e of a.values()){e.isTranslatable&&o++,e.detectedLanguage&&r++;const t=e.detectedLanguage;if(t){const e=i.get(t)||0;i.set(t,e+1)}}if(o/n<.3||r/o<.6)return;t({chatId:e,detectedLanguage:Array.from(i.entries()).sort(([,e],[,t])=>t-e)[0][0]})},1e3);var me=a(79519),ue=a(46275),pe=a(64154),he=a(66644),ge=a(50442),Ae=a(43503),ye=a(54464),fe=a(672);const ve=3*D.$,Ee=Number(D.$),be="data-is-document-group-hover";function xe(e,t,a,o,r,i,l,c,d,m,u,p,g){const{updateDraftReplyInfo:A,sendDefaultReaction:y}=(0,s.ko)(),[f,E,b]=(0,Q.A)(),[x,w,C]=(0,Q.A)(),N=(0,n.li)(),I=(0,fe.A)(e=>{const t=u.current;if(!t)return;const{clientX:a,clientY:n}=e,{x:s,width:o,y:r,height:i}=t.getBoundingClientRect(),l=s+o/2,c=r+i/2,d=Math.abs(l-a)<ve,m=Math.abs(c-n)<Ee;d&&m?E():b()},[u],he.YS);return(0,n.vJ)(()=>{if(!h.TF||o||!r||m||!g?.())return;let e;return(0,ge.wJ)(t.current,{selectorToPreventScroll:".MessageList",excludedClosestSelector:".no-word-wrap",onSwipe:(t,a)=>a===ge.ez.Left&&(e||(e=Date.now()),w(),!0),onRelease:()=>{e&&r&&(A({replyToMsgId:a}),setTimeout(C,Math.max(0,150-(Date.now()-e))),e=void 0)}})},[t,o,a,w,C,r,m,g]),{handleMouseDown:o?void 0:function(e){(0,ye.l)(e),c(e)},handleClick:function(t){if(o)e(t);else if(h.TF)return N.current?(clearInterval(N.current),N.current=void 0,void y({chatId:d,messageId:a})):void(N.current=setTimeout(()=>{N.current=void 0,function(e){if(h.Ni){const t=e.target;if(!t.classList.contains("text-content")&&!t.classList.contains("Message"))return;Ae.A.getIsKeyboardVisible()?setTimeout(()=>{l(e)},350):l(e)}}(t)},200))},handleContextMenu:o?i?v.A:void 0:function(t){if(h.Ni){if(t.target.matches("a[href]")||m)return;t.preventDefault(),e()}else l(t)},handleDoubleClick:o?void 0:function(){!h.TF&&r&&A({replyToMsgId:a,replyToPeerId:void 0,quoteText:void 0,quoteOffset:void 0})},handleContentDoubleClick:h.TF?void 0:function(e){e.stopPropagation()},handleMouseMove:I,handleSendQuickReaction:function(e){e.stopPropagation(),y({chatId:d,messageId:a})},handleMouseLeave:function(e){(0,he.YS)(b),p&&function(e){const t=Ce(e.currentTarget);t&&t.removeAttribute(be)}(e)},isSwiped:x,isQuickReactionVisible:f,handleDocumentGroupMouseEnter:we}}function we(e){const t=Ce(e.currentTarget);t&&t.setAttribute(be,"")}function Ce(e){let t=e;do{t=t.nextElementSibling}while(t&&!t.classList.contains("last-in-document-group"));return t}var Ne=a(65240),Ie=a(21849),Se=a(87412),Me=a(44589),ke=a(80999),Te=a(91930),Pe=a(11217),Le=a(62587),Be=a(54746),Re=a(86070);const Fe=({story:e,sender:t,noUserColors:a,isProtected:o,observeIntersectionForLoading:r,onClick:i})=>{const{showNotification:d}=(0,s.ko)(),m=(0,X.A)(),u=(0,n.li)(),p=(0,Y.Vz)(u,r),h=e&&"content"in e,A=e&&"isDeleted"in e,y=h&&Boolean(e.content.video),f=h?"Story":A?"ExpiredStory":"Loading",v=(0,Le.A)(h&&(0,l.EN)(e,"pictogram"),!p),E=y?e.content.video.thumbnail?.dataUri:void 0,b=v||E,x=t?(0,c.F9)(m,t):void 0,w=(0,L.A)(()=>{e&&!A?i():d({message:m("StoryNotFound")})}),{handleClick:C,handleMouseDown:N}=(0,Pe.Q)(w);return n.Ay.createElement(Re.A,{ref:u,peerColor:t?.color,noUserColors:a,shouldReset:!0,className:(0,g.A)("EmbeddedMessage",b&&"with-thumb"),onClick:C,onMouseDown:N},b&&function(e,t){const{width:a,height:s}=(0,D.mr)();return n.Ay.createElement("div",{className:"embedded-thumb"},n.Ay.createElement("img",{src:e,width:a,height:s,alt:"",className:"pictogram",draggable:!1}),t&&n.Ay.createElement("span",{className:"protector"}))}(b,o),n.Ay.createElement("div",{className:"message-text with-message-color"},n.Ay.createElement("p",{className:"embedded-text-wrapper"},A&&n.Ay.createElement(Be.A,{name:"story-expired",className:"embedded-origin-icon"}),h&&n.Ay.createElement(Be.A,{name:"story-reply",className:"embedded-origin-icon"}),m(f)),n.Ay.createElement("div",{className:"message-title"},(0,z.A)(x||" "))))};var De=a(2578),Oe=a(9267),ze=a(74936),Ue=a(17794),je=a(90603),Ve=a(38102);var Je=a(61911);const He=1.125*D.$,Ke=(0,n.ph)(({topic:e,className:t,onClick:a})=>{const s=(0,X.A)();return n.Ay.createElement("div",{className:(0,g.A)("JldIqqof",t),style:`--topic-button-accent-color: var(${(0,je.Mt)(e?.iconColor)})`,onClick:a},e?n.Ay.createElement(Ve.A,{topic:e,size:He}):n.Ay.createElement("img",{src:Je,alt:"",draggable:!1}),e?.title?(0,z.A)(e.title):s("Loading"),e?.isClosed&&n.Ay.createElement(Be.A,{name:"lock"}),n.Ay.createElement(Be.A,{name:"next"}))});var $e=a(15006),Ge=a(64493),_e=a(94189),qe=a(40664);function We(e){return(0,n.ph)((0,s.EK)((e,t)=>{const{clickArg:a,noSelectControls:n}=t;return{isInSelectMode:!n&&(0,m.rTV)(e),isSelected:!n&&(0,m.H1_)(e,a)}})(t=>{const{isInSelectMode:a,isSelected:o,dimensions:r,clickArg:i}=t,{toggleMessageSelection:l}=(0,s.ko)(),c=(0,L.A)(e=>{e.stopPropagation(),l({messageId:i,withShift:e?.shiftKey})}),d=(0,n.Kr)(()=>{const{dimensions:e,onClick:n}=t;return{...t,isInSelectMode:a,isSelected:o,dimensions:{...e,x:0,y:0},onClick:a?void 0:n}},[t,a,o]);return n.Ay.createElement("div",{className:(0,g.A)("album-item-select-wrapper",o&&"is-selected"),style:r?`left: ${r.x}px; top: ${r.y}px;`:"",onClick:a?c:void 0},a&&n.Ay.createElement("div",{className:"message-select-control"},o&&n.Ay.createElement(Be.A,{name:"select"})),n.Ay.createElement(e,d))}))}var Qe=a(51644),Ye=a(25477);const Ze=We(Qe.A),Xe=We(Ye.A),et=(0,s.EK)(e=>{const t=(0,m.SJA)(e),a=(0,m.yuw)(e);return{theme:t,uploadsByKey:e.fileUploads.byMessageKey,activeDownloads:a}})(({album:e,observeIntersection:t,hasCustomAppendix:a,isOwn:o,isProtected:r,albumLayout:i,onMediaClick:c,uploadsByKey:d,activeDownloads:u,theme:p})=>{const{cancelUploadMedia:h}=(0,s.ko)(),{content:{paidMedia:g}}=e.mainMessage,A=e.isPaidMedia?g.extendedMedia.length:e.messages.length,f=(0,L.A)(t=>{c(e.mainMessage.id,t)}),v=(0,L.A)(e=>{c(e)}),E=(0,L.A)(t=>{h({chatId:e.mainMessage.chatId,messageId:t})}),b=(0,n.Kr)(()=>e.isPaidMedia?e.mainMessage.content.paidMedia.extendedMedia.map(()=>e.mainMessage):e.messages,[e]),{width:x,height:w}=i.containerStyle;return n.Ay.createElement("div",{className:"Album",style:`width: ${x}px; height: ${w}px;`},b.map(function(c,h){const g=e.isPaidMedia?c.content.paidMedia?.extendedMedia[h]:void 0,b=g&&"mediaType"in g?g:g?.photo,x=g&&"mediaType"in g?g:g?.video,w=b||(0,l.yl)(c),C=x||(0,l.r_)(c).video,N=d[(0,y.bj)(c)],I=N?.progress,{dimensions:S,sides:M}=i.layout[h],k=(0,m.wwb)((0,s.mS)(),c),T=(0,m.OEt)((0,s.mS)(),c);if(w){const s=a&&(o?h===A-1:Boolean(8&M&&4&M));return n.Ay.createElement(Ze,{id:`album-media-${(0,l.GZ)(c.id,e.isPaidMedia?h:void 0)}`,photo:w,isOwn:o,observeIntersectionForLoading:t,canAutoLoad:k,shouldAffectAppendix:s,uploadProgress:I,dimensions:S,isProtected:r,clickArg:e.isPaidMedia?h:c.id,onClick:e.isPaidMedia?f:v,onCancelUpload:E,isDownloading:"extendedMediaPreview"!==w.mediaType&&(0,l.$r)(u,w),theme:p,noSelectControls:e.isPaidMedia})}if(C)return n.Ay.createElement(Xe,{id:`album-media-${(0,l.GZ)(c.id)}`,video:C,observeIntersectionForLoading:t,canAutoLoad:k,canAutoPlay:T,uploadProgress:I,dimensions:S,isProtected:r,clickArg:e.isPaidMedia?h:c.id,onClick:e.isPaidMedia?f:v,onCancelUpload:E,isDownloading:"extendedMediaPreview"!==C.mediaType&&(0,l.$r)(u,C),theme:p,noSelectControls:e.isPaidMedia})}))});var tt=a(95807),at=a(41733);const nt=7*D.$;function st(e,t,a,o,r,i,l){const{interactWithAnimatedEmoji:c,sendEmojiInteraction:d,sendWatchingEmojiInteraction:m}=(0,s.ko)(),u=(0,n.li)(),p=(0,n.li)(),g=(0,Le.A)(a?`document${a}`:void 0,!a),A=l||nt,y=(0,tt.A)(`width: ${A}px`,`height: ${A}px`,i&&!h.cp&&"cursor: pointer"),f=(0,n.li)(void 0),v=(0,n.li)(void 0),E=(0,L.A)(()=>{u.current&&(d({chatId:e,messageId:t,emoji:i,interactions:f.current}),v.current=void 0,f.current=void 0)}),b=(0,L.A)(()=>{const e=p.current;g&&(e&&(e.pause(),e.remove()),p.current=new Audio,p.current.src=g,(0,at.A)(p.current),p.current.addEventListener("ended",()=>{p.current=void 0},{once:!0}))}),x=(0,L.A)(()=>{b();const a=u.current;if(!(i&&a&&t&&e))return;const{x:n,y:s}=a.getBoundingClientRect();c({emoji:i,x:n,y:s,startSize:A,isReversed:!r}),f.current||(f.current=[],v.current=performance.now(),setTimeout(E,1e3)),f.current.push(v.current?(performance.now()-v.current)/1e3:0)});return(0,n.vJ)(()=>{const a=u.current;a&&o&&o.forEach(({id:n,startSize:s,messageId:o})=>{if(s||t!==o)return;const{x:l,y:c}=a.getBoundingClientRect();m({id:n,chatId:e,emoticon:i,startSize:A,x:l,y:c,isReversed:!r}),b()})},[o,e,i,r,t,b,m,A]),{ref:u,size:A,style:y,handleClick:x}}const ot=(0,n.ph)((0,s.EK)((e,{customEmojiId:t,withEffects:a})=>{const n=e.customEmojis.byId[t];return{sticker:n,effect:n?.emoji&&a?(0,m.Nr8)(e,n.emoji):void 0,soundId:n?.emoji&&(0,m.tKM)(e,n.emoji),noPlay:!(0,m.BWX)(e)}})(({isOwn:e,customEmojiId:t,messageId:a,chatId:s,activeEmojiInteractions:o,sticker:r,effect:i,soundId:l,noPlay:c,observeIntersection:d})=>{const{ref:m,size:u,style:p,handleClick:h}=st(s,a,l,o,e,i?.emoji,(0,U.Rr)(1));return n.Ay.createElement(Se.A,{ref:m,documentId:t,className:(0,g.A)("AnimatedEmoji media-inner",r?.id===D.AC&&"like-sticker-thumb"),style:p,size:u,isBig:!0,noPlay:c,withSharedAnimation:!0,forceOnHeavyAnimation:Boolean(i&&o?.length),observeIntersectionForLoading:d,onClick:h})}));var rt=a(79577);const it=(0,n.ph)((0,s.EK)((e,{emoji:t,withEffects:a})=>({sticker:(0,m.oei)(e,t),effect:a?(0,m.Nr8)(e,t):void 0,soundId:(0,m.tKM)(e,t)}))(({isOwn:e,observeIntersection:t,forceLoadPreview:a,messageId:s,chatId:o,activeEmojiInteractions:r,sticker:i,effect:l,soundId:c})=>{const{ref:d,size:m,style:u,handleClick:p}=st(o,s,c,r,e,l?.emoji),h=(0,Y.Vz)(d,t);return n.Ay.createElement(rt.A,{sticker:i,size:m,quality:1,noLoad:!h,forcePreview:a,play:h,forceAlways:!0,ref:d,className:(0,g.A)("AnimatedEmoji media-inner",i?.id===D.AC&&"like-sticker-thumb"),style:u,onClick:p})}));var lt=a(14242),ct=a(93809),dt=a(68292),mt=a(57474);const ut=(0,n.ph)(({isCustomShape:e,threadInfo:t,disabled:a,isLoading:o,asActionButton:r})=>{const{openThread:i,openFrozenAccountModal:l}=(0,s.ko)(),c=(0,ct.A)([o],450),d=(0,X.A)(),u=(0,Z.A)(),{originMessageId:p,chatId:h,messagesCount:A,lastMessageId:y,lastReadInboxMessageId:f,recentReplierIds:v,originChannelId:E}=t,b=(0,L.A)(()=>{const e=(0,s.mS)();(0,m.trm)(e)?l():i({isComments:!0,chatId:h,originMessageId:p,originChannelId:E})}),x=(0,n.Kr)(()=>{if(!v?.length)return;const e=(0,s.mS)();return v.map(t=>(0,m.PVB)(e,t)).filter(Boolean)},[v]);if(void 0===A)return;const w=Boolean(f&&y&&f<y),C=A?d("CommentsCount","%COMMENTS_COUNT%",void 0,A).split("%").map(e=>"COMMENTS_COUNT"===e?n.Ay.createElement(dt.A,{text:(0,lt.Vw)(u,A)}):e):void 0;return n.Ay.createElement("div",{"data-cnt":(0,lt.Vw)(u,A),className:(0,g.A)("CommentButton",w&&"has-unread",a&&"disabled",e&&"CommentButton-custom-shape",o&&"loading",r&&"as-action-button"),dir:d.isRtl?"rtl":"ltr",onClick:b,role:"button",tabIndex:0},n.Ay.createElement(Be.A,{name:"comments-sticker",className:(0,g.A)("CommentButton_icon-comments",o&&c&&"CommentButton_hidden")}),!x?.length&&n.Ay.createElement(Be.A,{name:"comments"}),Boolean(x?.length)&&n.Ay.createElement("div",{className:"recent-repliers",dir:d.isRtl?"rtl":"ltr"},x.map(e=>n.Ay.createElement(Ie.A,{key:e.id,size:"small",peer:e}))),n.Ay.createElement("div",{className:"label",dir:"auto"},A?C:d("LeaveAComment")),n.Ay.createElement("div",{className:"CommentButton_right"},o&&n.Ay.createElement(mt.A,{className:(0,g.A)("CommentButton_loading",!c&&"CommentButton_hidden"),color:e?"white":"blue"}),n.Ay.createElement(Be.A,{name:"next",className:(0,g.A)("CommentButton_icon-open",o&&c&&"CommentButton_hidden")})))});var pt=a(85982),ht=a(64713);const gt="ReDHhQHm";function At(e){return e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.firstName?e.firstName:e.lastName?e.lastName:""}const yt=(0,s.EK)((e,{contact:t})=>{const{countryList:{phoneCodes:a}}=e;return{user:(0,m.mBe)(e,t.userId),phoneCodeList:a}})(({contact:e,user:t,phoneCodeList:a,noUserColors:o})=>{const r=(0,X.A)(),{openChat:i,openAddContactDialog:c,showNotification:d,openChatWithInfo:m}=(0,s.ko)(),{phoneNumber:u,userId:p}=e,h="0"!==p,g=h&&t&&(0,l.Gh)(t),A=(0,L.A)(()=>{i({id:p})}),y=(0,L.A)(()=>{c({userId:t?.id})}),f=(0,L.A)(()=>{t?m({id:p}):((0,pt.eM)(u),d({message:r("PhoneCopied")}))});return n.Ay.createElement(Re.A,{noUserColors:o,peer:t,emojiIconClassName:"SjZYi3sJ",className:"AAHWWWvU"},n.Ay.createElement("div",{className:"tpDpg82n",onClick:f},n.Ay.createElement(Ie.A,{size:"medium",peer:t,text:At(e)}),n.Ay.createElement("div",{className:"fpYynE5s"},n.Ay.createElement("div",{className:"_PNTJc_V"},t?(0,l.Yg)(t):At(e)),n.Ay.createElement("div",{className:"JP_3wes8"},(0,ht.Ox)(a,u)))),h&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:"_OSJcuqH"}),n.Ay.createElement("div",{className:"Blui4M4G"},n.Ay.createElement(Ge.A,{isText:!0,color:"translucent",ripple:!0,size:"tiny",onClick:A,className:gt},r("SharedContactMessage")),g&&n.Ay.createElement(Ge.A,{isText:!0,color:"translucent",ripple:!0,size:"tiny",onClick:y,className:gt},r("SharedContactAdd")))))});var ft=a(80089),vt=a(80464);const Et=e=>{const{isOpen:t}=e,a=(0,vt.A)(ft.ar.Extra,"ContextMenuContainer",!t);return a?n.Ay.createElement(a,e):void 0};var bt=a(18501),xt=a(57675),wt=a(32581);const Ct={color:0},Nt=(0,n.ph)(({factCheck:e,isToggleDisabled:t})=>{const a=(0,X.A)(),s=(0,n.li)(),o=(0,n.li)(),{isCollapsed:r,isCollapsible:i,setIsCollapsed:l}=(0,xt.A)(s,4,o),c=(0,n.Kr)(()=>{if(e.countryCode&&a.code)return new Intl.DisplayNames([a.code],{type:"region"}).of(e.countryCode)},[e.countryCode,a.code]),d=!t&&r,m=(0,L.A)(()=>{l(!1)}),u=(0,L.A)(()=>{l(e=>!e)});if(e.text)return n.Ay.createElement(Re.A,{peerColor:Ct,className:"HMB5LgeX",onClick:d?m:void 0},n.Ay.createElement("div",{ref:o,className:(0,g.A)("nfCzKu78",r&&"hYzpXwTM")},n.Ay.createElement("div",{className:"vZnCPl3t"},a("FactCheck")),n.Ay.createElement("div",{ref:s,className:"k_dGolcu"},(0,bt.fd)({text:e.text.text,entities:e.text.entities})),n.Ay.createElement(wt.A,{className:"qRaSs5iA"}),n.Ay.createElement("div",{className:"EDmr0wJG"},a("FactCheckFooter",c))),i&&n.Ay.createElement("div",{className:(0,g.A)("mxPizZpR",!t&&"Cj2cLczd"),onClick:t?void 0:u,"aria-hidden":!0},n.Ay.createElement(Be.A,{name:r?"down":"up"})))});var It=a(55158);const St=(0,n.ph)(({message:e,canAutoLoadMedia:t})=>{const{clickBotInlineButton:a}=(0,s.ko)(),o=e.content.game,{title:r,description:i}=o,c=(0,l.zb)(o),d=(0,l.ih)(o),m=(0,Le.A)(c,!t),u=(0,Le.A)(d,!t);return n.Ay.createElement("div",{className:"Game"},n.Ay.createElement("div",{className:"preview",style:"width: 480px; height: 270px",onClick:()=>{a({chatId:e.chatId,messageId:e.id,button:e.inlineButtons[0][0]})}},!m&&!u&&n.Ay.createElement(It.A,{className:"skeleton preview-content"}),m&&n.Ay.createElement("img",{className:"preview-content",src:m,alt:r,draggable:!1}),u&&n.Ay.createElement("video",{className:"preview-content",playsInline:!0,muted:!0,disablePictureInPicture:!0,autoPlay:!0,loop:!0,src:u})),n.Ay.createElement("div",{className:"title"},r),!(0,l.P5)(e)&&n.Ay.createElement("div",{className:"description"},i))});var Mt=a(17663),kt=a(52491),Tt=a(51580),Pt=a(58443),Lt=a(64489),Bt=a(10187);const Rt="ogvcv3mr",Ft="MSFa9BPf",Dt="HfZ6SuLI",Ot="rPyyNYxK",zt="FV70u896",Ut=(0,n.ph)((0,s.EK)((e,{message:t})=>{const{giveaway:a}=t.content,n=(0,m.hds)(e,t.chatId);return{chat:n,sender:(a?.channelIds[0]?(0,m.hds)(e,a.channelIds[0]):void 0)||(0,m.Szq)(e,t)||n,giftSticker:a&&(0,m.t0O)(e,a.months),canPlayAnimatedEmojis:(0,m.BWX)(e)}})(({chat:e,sender:t,message:a,canPlayAnimatedEmojis:o,giftSticker:r})=>{const{openChat:i}=(0,s.ko)(),d=(0,n.li)(!1),[m,u]=(0,n.J0)(),p=(0,X.A)(),{giveaway:h,giveawayResults:A}=a.content,y=Boolean(A),{months:v,untilDate:E,prizeDescription:b,stars:x}=h||A,w=(0,l.Ie)(a),C=y?A.winnersCount:h.quantity,N=(0,f.Fm)()>E,I=(0,n.Kr)(()=>{if(y)return;const e=new Intl.DisplayNames([p.code,"en"].filter(Boolean),{type:"region"});return h?.countries?.map(t=>`${(0,kt.D0)(t)} ${e.of(t)}`).join(", ")},[h,y,p.code]),S=(0,L.A)(e=>{i({id:e})}),M=(0,L.A)(async()=>{if(d.current)return;d.current=!0;const t=await(0,Tt.px)("fetchGiveawayInfo",{peer:e,messageId:a.id});u(t),d.current=!1}),k=(0,L.A)(()=>{u(void 0)}),T=(0,n.Kr)(()=>{if(m)return p("results"===m.type?"BoostingGiveawayEnd":"BoostingGiveAwayAbout")},[m,p]);return n.Ay.createElement("div",{className:"CbpKtOey"},n.Ay.createElement("div",{className:(0,g.A)("hjjKhvVv",y&&"JEiR48jJ")},y?n.Ay.createElement(Lt.A,{size:150,tgsUrl:Pt.w.PartyPopper,nonInteractive:!0,noLoop:!0}):n.Ay.createElement(rt.A,{sticker:r,play:o&&N,noLoop:!0,nonInteractive:!0,size:175}),n.Ay.createElement("span",{className:"n_QCMv_A"},`x${C}`)),y?function(e){const t=e.winnerIds;return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:Ft},n.Ay.createElement("strong",{className:Rt},(0,z.A)(p("BoostingGiveawayResultsMsgWinnersSelected"),["simple_markdown"])),n.Ay.createElement("p",{className:Dt},(0,z.A)(p("BoostingGiveawayResultsMsgWinnersTitle",t.length),["simple_markdown"])),n.Ay.createElement("strong",{className:Rt},p("lng_prizes_results_winners")),n.Ay.createElement("div",{className:Ot},t.map(e=>n.Ay.createElement(Bt.A,{peerId:e,forceShowSelf:!0,withPeerColors:!w,className:zt,clickArg:e,onClick:S})))),n.Ay.createElement("div",{className:Ft},n.Ay.createElement("p",{className:Dt},p("BoostingGiveawayResultsMsgAllWinnersReceivedLinks"))))}(A):function(e){const t=e.channelIds;return n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("div",{className:Ft},n.Ay.createElement("strong",{className:Rt},(0,z.A)(p("BoostingGiveawayPrizes"),["simple_markdown"])),b&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("p",{className:Dt},(0,z.A)(p("BoostingGiveawayMsgPrizes",[C,b],void 0,C),["simple_markdown"])),n.Ay.createElement(wt.A,null,p("BoostingGiveawayMsgWithDivider"))),n.Ay.createElement("p",{className:Dt},a?.content?.giveaway?.stars?n.Ay.createElement(n.Ay.Fragment,null,(0,z.A)(p("Chat.Giveaway.Message.Stars.PrizeText",p("Stars",a?.content?.giveaway?.stars)),["simple_markdown"]),n.Ay.createElement("br",null),(0,z.A)(p("AmongWinners",C),["simple_markdown"])):n.Ay.createElement(n.Ay.Fragment,null,(0,z.A)(p("Chat.Giveaway.Info.Subscriptions",C),["simple_markdown"]),n.Ay.createElement("br",null),(0,z.A)(p("ActionGiftPremiumSubtitle",p("Chat.Giveaway.Info.Months",v)),["simple_markdown"])))),n.Ay.createElement("div",{className:Ft},n.Ay.createElement("strong",{className:Rt},(0,z.A)(p("BoostingGiveawayMsgParticipants"),["simple_markdown"])),n.Ay.createElement("p",{className:Dt},(0,z.A)(p("BoostingGiveawayMsgAllSubsPlural",t.length),["simple_markdown"])),n.Ay.createElement("div",{className:Ot},t.map(e=>n.Ay.createElement(Bt.A,{peerId:e,forceShowSelf:!0,withPeerColors:!w,className:zt,clickArg:e,onClick:S}))),I&&n.Ay.createElement("span",null,(0,z.A)(p("Chat.Giveaway.Message.CountriesFrom",I)))),n.Ay.createElement("div",{className:Ft},n.Ay.createElement("strong",{className:Rt},(0,z.A)(p("BoostingWinnersDate"),["simple_markdown"])),n.Ay.createElement("p",{className:Dt},(0,Mt.L2)(1e3*E,p.code,!0))))}(h),n.Ay.createElement(Ge.A,{className:"jMBw7STU",color:"adaptive",size:"smaller",onClick:M},p("BoostingHowItWork")),n.Ay.createElement(_e.A,{isOpen:Boolean(m),isOnlyConfirm:!0,title:T,confirmHandler:k,onClose:k},function(){if(!t||!m)return;const e="results"===m.type,a=(0,c.vj)(t)?(0,l.Js)(p,t):(0,l.Yg)(t),o=(0,Mt.U)(p,1e3*E),r=h?.channelIds?h.channelIds.length-1:0,i=p("Chat.Giveaway.Info.OtherChannels",r),d=r>0,u=e?"BoostingGiveawayHowItWorksTextEnd":"BoostingGiveawayHowItWorksText",g=e?p("Chat.Giveaway.Info.Months",v):p("Stars",x,"i"),A=p(u,[a,C,g],void 0,C),y=b?p("BoostingGiveawayHowItWorksIncludeText",[a,C,b],void 0,C):void 0;let f="";f=e?d?"BoostingGiveawayHowItWorksSubTextSeveralEnd":"BoostingGiveawayHowItWorksSubTextEnd":d?"BoostingGiveawayHowItWorksSubTextSeveral":"BoostingGiveawayHowItWorksSubText";let w=p(f,[o,C,a,r],void 0,C);e&&m.activatedCount&&(w+=` ${p("BoostingGiveawayUsedLinksPlural",m.activatedCount)}`);let N="";e&&(N=m.isRefunded?p("BoostingGiveawayCanceledByPayment"):p(m.isWinner?"BoostingGiveawayYouWon":"BoostingGiveawayYouNotWon"));let I="";if(e);else if(m.disallowedCountry)I=p("BoostingGiveawayNotEligibleCountry");else if(m.adminDisallowedChatId){const e=(0,s.mS)().chats.byId[m.adminDisallowedChatId],t=e&&(0,l.Js)(p,e);I=p("BoostingGiveawayNotEligibleAdmin",t)}else if(m.joinedTooEarlyDate){const e=(0,Mt.U)(p,1e3*m.joinedTooEarlyDate);I=p("BoostingGiveawayNotEligible",e)}else I=m.isParticipating?d?p("Chat.Giveaway.Info.ParticipatingMany",[a,r]):p("Chat.Giveaway.Info.Participating",a):d?p("Chat.Giveaway.Info.NotQualifiedMany",[a,i,o]):p("Chat.Giveaway.Info.NotQualified",[a,o]);return n.Ay.createElement(n.Ay.Fragment,null,N&&n.Ay.createElement("p",{className:"ZQ4aVVkI"},(0,z.A)(N,["simple_markdown"])),n.Ay.createElement("p",null,(0,z.A)(A,["simple_markdown"])),y&&n.Ay.createElement("p",null,(0,z.A)(y,["simple_markdown"])),n.Ay.createElement("p",null,(0,z.A)(w,["simple_markdown"])),I&&n.Ay.createElement("p",null,(0,z.A)(I,["simple_markdown"])))}()))}));var jt=a(85449);const Vt=(0,n.ph)(({message:e,onClick:t})=>{const a=(0,X.A)(),s=(0,n.Kr)(()=>{const t=[];return e.inlineButtons.forEach(e=>{t.push(e.map(e=>(0,jt.A)(a,e)))}),t},[a,e.inlineButtons]);return n.Ay.createElement("div",{className:"InlineButtons"},e.inlineButtons.map((a,o)=>n.Ay.createElement("div",{className:"row"},a.map((a,r)=>n.Ay.createElement(Ge.A,{size:"tiny",ripple:!0,disabled:"unsupported"===a.type||"suggestedMessage"===a.type&&a.disabled,onClick:()=>t({chatId:e.chatId,messageId:e.id,button:a})},(e=>{const{type:t}=e;switch(t){case"url":if(!i.OFc.test(e.url))return n.Ay.createElement(Be.A,{className:"corner-icon",name:"arrow-right"});break;case"urlAuth":return n.Ay.createElement(Be.A,{className:"corner-icon",name:"arrow-right"});case"buy":case"receipt":return n.Ay.createElement(Be.A,{className:"corner-icon",name:"card"});case"switchBotInline":return n.Ay.createElement(Be.A,{className:"corner-icon",name:"share-filled"});case"webView":case"simpleWebView":return n.Ay.createElement(Be.A,{className:"corner-icon",name:"webapp"});case"copy":return n.Ay.createElement(Be.A,{className:"corner-icon",name:"copy"});case"suggestedMessage":if("suggestChanges"===e.buttonType)return n.Ay.createElement(Be.A,{className:"left-icon",name:"edit"});if("approve"===e.buttonType)return n.Ay.createElement(Be.A,{className:"left-icon",name:"check"});if("decline"===e.buttonType)return n.Ay.createElement(Be.A,{className:"left-icon",name:"close"})}})(a),n.Ay.createElement("span",{className:"inline-button-text"},s[o][r]))))))});var Jt=a(17142),Ht=a(40435),Kt=a(37859),$t=a(61097);const Gt=(0,n.ph)(({message:e,shouldAffectAppendix:t,isInSelectMode:a,isSelected:s,theme:o,forcedWidth:r})=>{const c=(0,n.li)(),d=(0,X.A)(),m=(0,Z.A)(),u=(0,l.NO)(e),{title:p,description:h,amount:g,currency:A,isTest:y,photo:f}=u,v=(0,Le.A)((0,l.cy)(f)),E=Boolean(r),b=(0,$t.A)(v,!E),x=e.id;(0,Kt.A)(([e])=>{if(t){if(v){const e=c.current.closest(i.KFG);(0,Ht.A)(v,!1,x,s,o).then(t=>{(0,he.RK)(()=>{e.style.setProperty("--appendix-bg",t),e.setAttribute(i.D3G,"")})})}}else e&&c.current.closest(i.KFG).removeAttribute(i.D3G)},[t,v,a,s,o,x]);const w=r||f?.dimensions?.width,C=(0,tt.A)(f?.dimensions&&`width: ${w}px`,f?.dimensions&&`aspect-ratio: ${f.dimensions.width} / ${f.dimensions.height}`,Boolean(!f?.dimensions&&r)&&`width: ${r}px`);return n.Ay.createElement("div",{ref:c,className:"Invoice"},p&&n.Ay.createElement("p",{className:"title"},(0,z.A)(p)),h&&n.Ay.createElement("div",{className:"info"},(0,z.A)(h,["emoji","br"])),n.Ay.createElement("div",{className:"description "+(f?"has-image":"")},Boolean(f)&&n.Ay.createElement("div",{className:"invoice-image-container"},E&&n.Ay.createElement("canvas",{ref:b,className:"thumbnail blurred-bg"}),v&&n.Ay.createElement("img",{className:"invoice-image",src:v,alt:"",style:C,crossOrigin:"anonymous",draggable:!1}),!v&&f&&n.Ay.createElement(It.A,{width:w,height:f.dimensions?.height,forceAspectRatio:!0})),n.Ay.createElement("p",{className:"description-text"},(0,Jt.vv)(m,g,A,{iconClassName:"invoice-currency-icon"}),y&&n.Ay.createElement("span",{className:"test-invoice"},d("PaymentTestInvoice")))))});var _t=a(32625),qt=a(27860);const Wt={root:"dCK8GQ_8",duration:"CWT8ZMwV",buy:"C38zhCDM",spoiler:"CG55VZP1"},Qt=(0,n.ph)(({message:e,isConnected:t})=>{const{openInvoice:a,loadExtendedMedia:o}=(0,s.ko)(),r=(0,X.A)(),i=(0,l.NO)(e),{chatId:c,id:d}=e,m=(0,L.A)(()=>{o({chatId:c,ids:[d]})});(0,_t.A)(m,t?3e4:void 0);const{amount:u,currency:p,extendedMedia:h}=i,{width:A,height:y,thumbnail:f,duration:v}=h,E=(0,L.A)(()=>{a({type:"message",chatId:c,messageId:d,isExtendedMedia:!0})});return n.Ay.createElement("div",{className:(0,g.A)(Wt.root,"media-inner"),onClick:E},n.Ay.createElement(qt.A,{thumbDataUri:f?.dataUri,width:A,height:y,isVisible:!0,className:Wt.spoiler}),Boolean(v)&&n.Ay.createElement("div",{className:Wt.duration},(0,Mt.QO)(v)),n.Ay.createElement("div",{className:Wt.buy},n.Ay.createElement(Be.A,{name:"lock",className:Wt.lock}),r("Checkout.PayPrice",(0,Jt.Ad)(u,p))))});var Yt=a(47526),Zt=a(14737),Xt=a(30857),ea=a(38691);const ta=a.p+"map-pin.899635f6fe777c28998a.svg",aa=24*Math.PI,na=1e-4,sa={width:400,height:300,zoom:16};function oa(){return n.Ay.createElement("svg",{className:"round-pin",style:"enable-background:new 0 0 64 64",viewBox:"0 0 64 64"},n.Ay.createElement("circle",{cx:"32",cy:"32",r:"24.5"}),n.Ay.createElement("path",{d:"M32 8c13.23 0 24 10.77 24 24S45.23 56 32 56 8 45.23 8 32 18.77 8 32 8m0-1C18.19 7 7 18.19 7 32s11.19 25 25 25 25-11.19 25-25S45.81 7 32 7z"}),n.Ay.createElement("path",{d:"m29.38 57.67-1.98-1.59 3.02-1.66L32 51.54l1.58 2.88 3.02 1.66-1.91 1.53L32 60.73z"}),n.Ay.createElement("path",{d:"m32 52.58 1.07 1.95.14.26.26.14 2.24 1.22-1.33 1.06-.07.06-.06.07L32 59.96l-2.24-2.61-.06-.07-.07-.06-1.33-1.06 2.24-1.22.26-.14.14-.26L32 52.58m0-2.08-1.94 3.56L26.5 56l2.5 2 3 3.5 3-3.5 2.5-2-3.56-1.94L32 50.5z"}))}const ra=(0,n.ph)(({message:e,peer:t})=>{const{openMapModal:a}=(0,s.ko)(),o=(0,n.li)(),r=(0,n.li)(),i=(0,X.A)(),c=(0,Xt.A)(),d=(0,l.fB)(e),{mediaType:m,geo:u}=d,p=(0,f.Fm)(),h=(0,l.vz)(e),A="geoLive"!==m||h?void 0:e.date+d.period-p,[y,v]=(0,n.J0)(u),E="venue"===m||"geoLive"===m&&!h,{width:b,height:x,zoom:w}=sa,C=(0,ea.A)(),N=(0,l.rt)(y,b,x,w,C),I=(0,Le.A)(N),S=(0,ee.A)(I,!0),M=I||S,k=(0,n.Kr)(()=>{if("geoLive"!==m||!y.accuracyRadius)return 0;const{lat:e,accuracyRadius:t}=y;return t/(0,Yt._u)(e,w)},[m,y,w]),T=(0,L.A)(t=>{if("geoLive"!==m)return;const a=t.lastElementChild,n=t.firstElementChild,s=e.date+d.period-(0,f.Fm)(),o=(1-s/d.period)*aa,r=(0,Mt.dq)(i,1e3*s);n.textContent=r,a.firstElementChild.setAttribute("stroke-dashoffset",`-${o}`)});return(0,n.Nf)(()=>{r.current&&T(r.current)},[T]),(0,n.vJ)(()=>{Math.abs(u.lat-y.lat)<na&&Math.abs(u.long-y.long)<na?y.accuracyRadius!==u.accuracyRadius&&v({...y,accuracyRadius:u.accuracyRadius}):v(u)},[u,y]),(0,Zt.A)(()=>{c()},h?void 0:1e3*(A||0)),(0,_t.A)(()=>{(0,he.RK)(()=>{const e=r.current;e&&T(e)})},A?1e3:void 0),n.Ay.createElement("div",{ref:o,className:"Location media-inner interactive",onClick:()=>{a({geoPoint:y,zoom:w})}},n.Ay.createElement("div",{className:"map-wrapper"},M?n.Ay.createElement("img",{className:"full-media map",src:M,alt:"Location on a map",draggable:!1,style:`width: ${sa.width}px; height: ${sa.height}px;`}):n.Ay.createElement(It.A,{width:b,height:x}),function(){if(M)return n.Ay.createElement(n.Ay.Fragment,null,Boolean(k)&&!h&&n.Ay.createElement("div",{className:"location-accuracy",style:`width: ${2*k}px; height: ${2*k}px`}),function(){const e=(0,g.A)("pin",m,h&&"expired");if("geoLive"===m)return n.Ay.createElement("div",{className:e},n.Ay.createElement(oa,null),n.Ay.createElement(Ie.A,{peer:t,className:"location-avatar"}),void 0!==d.heading&&n.Ay.createElement("div",{className:"direction",style:`--direction: ${d.heading}deg`}));if("venue"===m){const t=(0,Yt.PP)(d.venueType),a=(0,Yt.KE)(d.venueType);if(a)return n.Ay.createElement("div",{className:e,style:`--pin-color: ${t}`},n.Ay.createElement(oa,null),n.Ay.createElement("img",{src:a,draggable:!1,className:"venue-icon",alt:""}))}return n.Ay.createElement("img",{className:e,draggable:!1,src:ta,alt:""})}())}()),function(){if(E)return"venue"===m?n.Ay.createElement("div",{className:"location-info"},n.Ay.createElement("div",{className:"location-info-title"},d.title),n.Ay.createElement("div",{className:"location-info-subtitle"},d.address)):"geoLive"===m?n.Ay.createElement("div",{className:"location-info"},n.Ay.createElement("div",{className:"location-info-title"},i("AttachLiveLocation")),n.Ay.createElement("div",{className:"location-info-subtitle"},(0,Mt.IF)(i,p,e.editDate)),!h&&n.Ay.createElement("div",{className:"geo-countdown",ref:r},n.Ay.createElement("span",{className:"geo-countdown-text"}),n.Ay.createElement("svg",{width:"32px",height:"32px"},n.Ay.createElement("circle",{cx:"16",cy:"16",r:12,className:"geo-countdown-progress",transform:"rotate(-90, 16, 16)","stroke-dasharray":aa,"stroke-dashoffset":"0"})))):void 0}())});var ia=a(48906),la=a(75295),ca=a(48775),da=a(45);const ma=(0,n.ph)(({message:e,outgoingStatus:t,signature:a,withReactionOffset:o,repliesThreadInfo:r,renderQuickReactionButton:i,noReplies:l,isTranslated:c,isPinned:d,withFullDate:m,effectEmoji:u,onClick:p,onTranslationClick:h,onEffectClick:A,onOpenThread:y,paidMessageStars:f})=>{const{showNotification:v}=(0,s.ko)(),[E,b]=(0,Q.A)(),x=(0,X.A)(),w=(0,Z.A)();function C(e){e.stopPropagation(),v({message:{key:"ImportedInfo"}})}const N=(0,n.Kr)(()=>{if(!E)return;const t=(0,Mt.L2)(1e3*e.date,x.code,void 0,x.timeFormat),a=e.isEdited&&(0,Mt.L2)(1e3*e.editDate,x.code,void 0,x.timeFormat),n=e.forwardInfo&&(0,Mt.L2)(1e3*(e.forwardInfo.savedDate||e.forwardInfo.date),x.code,void 0,x.timeFormat);let s=t;return a&&(s+="\n",s+=w("MessageTooltipEditedDate",{date:a})),n&&(s+="\n",s+=w("MessageTooltipForwardedDate",{date:n})),s},[E,x,e,x.timeFormat]),I=(0,n.Kr)(()=>{if(!e.viewsCount)return;let t=w("MessageTooltipViews",{count:w.number(e.viewsCount)},{pluralValue:e.viewsCount});return e.forwardsCount&&(t+="\n",t+=w("MessageTooltipForwards",{count:w.number(e.forwardsCount)},{pluralValue:e.forwardsCount})),t},[w,e.forwardsCount,e.viewsCount]),S=(0,n.Kr)(()=>{const e=r?.messagesCount;if(e)return w("MessageTooltipReplies",{count:e},{pluralValue:e})},[w,r]),M=(0,n.Kr)(()=>{const t=(0,Mt.fU)(x,1e3*e.date);return m?(0,Mt.be)(x,1e3*(e.forwardInfo?.date||e.date),!0):t},[x,e.date,e.forwardInfo?.date,m]),k=(0,g.A)("MessageMeta",o&&"reactions-offset",e.forwardInfo?.isImported&&"is-imported");return n.Ay.createElement("span",{className:k,dir:w.isRtl?"rtl":"ltr",onClick:p,"data-ignore-on-paste":!0},u&&n.Ay.createElement("span",{className:"message-effect-icon",onClick:A},(0,z.A)(u)),c&&n.Ay.createElement(Be.A,{name:"language",className:"message-translated",onClick:h}),Boolean(e.viewsCount)&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"message-views",title:I},(0,lt.Vw)(w,e.viewsCount)),n.Ay.createElement(Be.A,{name:"channelviews"})),!l&&Boolean(r?.messagesCount)&&n.Ay.createElement("span",{onClick:function(e){e.stopPropagation(),y()},className:"message-replies-wrapper",title:S},n.Ay.createElement("span",{className:"message-replies"},n.Ay.createElement(dt.A,{text:(0,lt.Vw)(w,r.messagesCount)})),n.Ay.createElement(Be.A,{name:"reply-filled"})),d&&n.Ay.createElement(Be.A,{name:"pinned-message",className:"message-pinned"}),a&&n.Ay.createElement("span",{className:"message-signature"},(0,z.A)(a)),Boolean(f)&&n.Ay.createElement("span",{className:"message-price"},(0,ca.U2)(w,f,{asFont:!0,className:"message-price-star-icon",containerClassName:"message-price-stars-container"})),n.Ay.createElement("span",{className:"message-time",title:N,onMouseEnter:b},e.forwardInfo?.isImported&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"message-imported",onClick:C},(0,Mt.L2)(1e3*e.forwardInfo.date,w.code,!0)),n.Ay.createElement("span",{className:"message-imported",onClick:C},w("MessageMetaImported"))),e.isEdited&&`${w("MessageMetaEdited")} `,e.isVideoProcessingPending&&`${w("MessageMetaApproximate")} `,M),t&&n.Ay.createElement(da.A,{status:t}),i&&i())});var ua=a(4262);const pa=(0,n.ph)(({phoneCall:e,message:t,chatId:a})=>{const{requestMasterAndRequestCall:o}=(0,s.ko)(),r=(0,X.A)(),{isVideo:i,reason:l,duration:c}=e,d=t.isOutgoing,m="missed"===l,u="busy"===l||void 0===c,p=(0,L.A)(()=>{o({isVideo:i,userId:a})}),A=(0,n.Kr)(()=>e.duration?(0,Mt.zA)(r,e.duration):void 0,[r,e.duration]),y=(0,Mt.fU)(r,1e3*t.date);return n.Ay.createElement("div",{className:"wqsZyy8u"},n.Ay.createElement(Ge.A,{size:"smaller",color:"translucent",round:!0,ripple:!0,onClick:p,className:"NGmo4ADz",disabled:!h.OL,ariaLabel:r(d?"CallAgain":"CallBack")},n.Ay.createElement(Be.A,{name:i?"video-outlined":"phone"})),n.Ay.createElement("div",{className:"iFn6m6hd"},n.Ay.createElement("div",{className:"l8QfocIQ"},r((0,ua.fB)(e,t.isOutgoing))),n.Ay.createElement("div",{className:"rF5tkx92"},n.Ay.createElement(Be.A,{name:"arrow-right",className:(0,g.A)("ONmpzmUS",m&&"Alra_BWu",u&&"J7xsuCAm",!d&&"BfgDXljM")}),n.Ay.createElement("span",{className:"kKPKwFzu"},A?r("CallMessageWithDuration",[y,A]):y))))});var ha=a(98607);const ga=(0,n.ph)(({paidMedia:e,chatId:t,messageId:a,isOutgoing:o,children:r})=>{const{openInvoice:l}=(0,s.ko)(),c=(0,X.A)(),d=(0,Z.A)(),m=!e.isBought,u=(0,n.Kr)(()=>{const t=c("UnlockPaidContent",e.starsAmount);return(0,ha.i)(t,i.Cyx,n.Ay.createElement(Oe.A,{className:"ywiOugiH",type:"gold",size:"adaptive"}))},[c,e]),p=(0,L.A)(e=>{l({type:"message",chatId:t,messageId:a}),(0,v.A)(e)});return n.Ay.createElement("div",{className:"mVaSjZRJ",onClick:m?p:void 0},r,m&&n.Ay.createElement(Ge.A,{className:"GnKGu6D9",color:"dark",size:"tiny",fluid:!0,pill:!0},n.Ay.createElement("span",{className:"gLaaVQXr"},u)),e.isBought&&n.Ay.createElement("div",{className:(0,g.A)("message-paid-media-status","IGXW5hWr")},o?(0,ca.U2)(d,e.starsAmount):c("Chat.PaidMedia.Purchased")))});var Aa=a(26875),ya=a(77561),fa=a(1087);function va(e,t){return t>0?(e/t*100).toFixed():0}const Ea=({answer:e,voteResults:t,totalVoters:a,maxVotersCount:s,correctResults:o,shouldAnimate:r})=>{const i=(0,Z.A)(),l=t&&t.find(t=>t.option===e.option),c=0===o.length||-1!==o.indexOf(e.option),d=o.length>0&&c||l?.isChosen,m=l?va(l.votersCount,a||0):0,[u,p]=(0,n.J0)(r?0:m),h=l?va(l.votersCount,s||0):0,A=u!==m;if((0,n.vJ)(()=>{r&&p(m)},[r,m]),!t||!l)return;const y=`width: ${h}%; transform:scaleX(${A?0:1})`;return n.Ay.createElement("div",{className:"PollOption",dir:i.isRtl?"rtl":void 0},n.Ay.createElement("div",{className:"poll-option-share "+("100"===m?"limit-width":"")},m,"%",d&&n.Ay.createElement("span",{className:(0,g.A)("poll-option-chosen",!c&&"wrong",r&&"animate")},n.Ay.createElement(Be.A,{name:c?"check":"close",className:"poll-option-icon"}))),n.Ay.createElement("div",{className:"poll-option-right"},n.Ay.createElement("div",{className:"poll-option-text",dir:"auto"},(0,bt.fd)({text:e.text.text,entities:e.text.entities})),n.Ay.createElement("div",{className:(0,g.A)("poll-option-answer",d&&!c&&"wrong")},r&&n.Ay.createElement("svg",{className:"poll-line",style:A?"":"stroke-dasharray: 100% 200%; stroke-dashoffset: -44"},n.Ay.createElement("path",{d:"M4.47 5.33v13.6a9 9 0 009 9h13"})),n.Ay.createElement("div",{className:"poll-option-line",style:y}))))},ba=12*Math.PI;function xa(e){e.stopPropagation()}const wa=(0,n.ph)(({message:e,poll:t,observeIntersectionForLoading:a,observeIntersectionForPlaying:o,onSendVote:r})=>{const{loadMessage:i,openPollResults:l,requestConfetti:c,showNotification:d}=(0,s.ko)(),{id:u,chatId:p}=e,{summary:h,results:g}=t,[A,v]=(0,n.J0)(!1),[E,b]=(0,n.J0)([]),[x,w]=(0,n.J0)(!1),[C,N]=(0,n.J0)(!h.closed&&h.closeDate&&h.closeDate>0?Math.min(h.closeDate-(0,f.Fm)(),h.closePeriod):0),I=(0,n.li)(),S=(0,n.li)(),{results:M,totalVoters:k}=g,T=M&&M.some(e=>e.isChosen),P=!h.closed&&!T,B=!P&&h.isPublic&&Number(g.totalVoters)>0,R=P&&h.multipleChoice,F=g.recentVoterIds,D=M?Math.max(...M.map(e=>e.votersCount)):k,O=(0,n.Kr)(()=>M?.filter(e=>e.isCorrect).map(e=>e.option)||[],[M]),z=(0,n.Kr)(()=>h.answers.map(e=>({label:(0,bt.fd)({text:e.text.text,entities:e.text.entities,observeIntersectionForLoading:a,observeIntersectionForPlaying:o}),value:e.option,hidden:Boolean(h.quiz&&h.closePeriod&&C<=0)})),[C,a,o,h.answers,h.closePeriod,h.quiz]);(0,n.vJ)(()=>{const e=t.results.results?.find(e=>e.isChosen);A&&e&&(e.isCorrect&&c({}),v(!1))},[A,t.results.results,c]),(0,n.Nf)(()=>{if(C>0&&setTimeout(()=>N(C-1),1e3),!S.current)return;C<=5&&I.current.classList.add("hurry-up");const e=(h.closePeriod-C)/h.closePeriod*ba;S.current.setAttribute("stroke-dashoffset",`-${e}`)},[C,h.closePeriod]),(0,n.vJ)(()=>{h.quiz&&(C<=0||T&&!h.closed)&&i({chatId:p,messageId:u})},[p,C,T,i,u,h.closed,h.quiz]),(0,n.vJ)(()=>{let e;return h.quiz&&!h.closed&&h.closePeriod&&h.closePeriod>0&&(e=window.setTimeout(()=>{i({chatId:p,messageId:u})},1e3*h.closePeriod)),()=>{e&&window.clearTimeout(e)}},[P,p,i,u,h.closePeriod,h.closed,h.quiz]);const U=(0,n.Kr)(()=>{const e=(0,s.mS)();return F?F.reduce((t,a)=>{const n=(0,m.PVB)(e,a);return n&&t.push(n),t},[]):[]},[F]),j=(0,L.A)(e=>{b([e]),v(!0),w(!0),r([e])}),V=(0,L.A)(e=>{b(e)}),J=(0,L.A)(()=>{v(!0),w(!0),r(E)}),H=(0,L.A)(()=>{l({chatId:p,messageId:u})}),K=(0,L.A)(()=>{d({localId:(0,y.bj)(e),message:(0,bt.fd)({text:t.results.solution,entities:t.results.solutionEntities}),duration:5e3,containerSelector:"#middle-column-portals"})});(0,n.vJ)(()=>{x&&T&&h.quiz&&g.results&&t.results.solution&&(g.results.find(e=>e.isChosen&&e.isCorrect)||K())},[T,x,g.results,h.quiz,t.results.solution]);const $=(0,X.A)();return n.Ay.createElement("div",{className:"Poll",dir:$.isRtl?"auto":"ltr"},n.Ay.createElement("div",{className:"poll-question"},(0,bt.fd)({text:h.question.text,entities:h.question.entities,observeIntersectionForLoading:a,observeIntersectionForPlaying:o})),n.Ay.createElement("div",{className:"poll-type"},$(function(e){return void 0===e.isPublic?" ":e.closed?"FinalResults":e.quiz?e.isPublic?"QuizPoll":"AnonymousQuizPoll":e.isPublic?"PublicPoll":"AnonymousPoll"}(h)),U.length>0&&n.Ay.createElement("div",{className:"poll-recent-voters"},n.Ay.createElement(Aa.A,{size:"micro",peers:U})),C>0&&P&&n.Ay.createElement("div",{ref:I,className:"poll-countdown"},n.Ay.createElement("span",null,(0,Mt.QO)(C)),n.Ay.createElement("svg",{width:"16px",height:"16px"},n.Ay.createElement("circle",{ref:S,cx:"8",cy:"8",r:6,className:"poll-countdown-progress",transform:"rotate(-90, 8, 8)","stroke-dasharray":ba,"stroke-dashoffset":"0"}))),h.quiz&&t.results.solution&&!P&&n.Ay.createElement(Ge.A,{round:!0,size:"tiny",color:"translucent",className:"poll-quiz-help",onClick:K,ariaLabel:"Show Solution"},n.Ay.createElement(Be.A,{name:"lamp"}))),P&&n.Ay.createElement("div",{className:"poll-answers",onClick:xa},R?n.Ay.createElement(ya.A,{options:z,selected:E,onChange:V,disabled:e.isScheduled||A,loadingOptions:A?E:void 0,isRound:!0}):n.Ay.createElement(fa.A,{name:`poll-${u}`,options:z,onChange:j,disabled:e.isScheduled||A,loadingOption:A?E[0]:void 0})),!P&&n.Ay.createElement("div",{className:"poll-results"},h.answers.map(function(e){return n.Ay.createElement(Ea,{key:e.option,shouldAnimate:x||!P,answer:e,voteResults:M,totalVoters:k,maxVotersCount:D,correctResults:O})})),!B&&!R&&n.Ay.createElement("div",{className:"poll-voters-count"},function(e,t,a){return a?e(t?"Answer":"Vote",a,"i"):e(t?"Chat.Quiz.TotalVotesEmpty":"Chat.Poll.TotalVotesResultEmpty")}($,h.quiz,g.totalVoters)),R&&n.Ay.createElement(Ge.A,{isText:!0,disabled:0===E.length,size:"tiny",onClick:J},$("PollSubmitVotes")),B&&n.Ay.createElement(Ge.A,{isText:!0,size:"tiny",onClick:H},$("PollViewResults")))});var Ca=a(43581),Na=a(84555),Ia=a(10221),Sa=a(18104),Ma=a(14413),ka=a(82855),Ta=a(3325);const Pa="GydRBA08",La="WMMaWlOL",Ba=(0,n.ph)((0,s.EK)(e=>{const t=e.appConfig,a=t?.needAgeVideoVerification;return{needsAgeVerification:a}})(({message:e,shouldLoop:t,shouldPlayEffect:a,withEffect:r,isMediaNsfw:i,onStopEffect:c,observeIntersection:d,observeIntersectionForPlaying:m,needsAgeVerification:u})=>{const{showNotification:p,openStickerSet:A,updateContentSettings:y,openAgeVerificationModal:f}=(0,s.ko)(),v=(0,X.A)(),{isMobile:E}=(0,G.Ay)(),b=(0,n.li)(),x=(0,n.li)(),w=e.content.sticker,{stickerSetInfo:C,isVideo:N,hasEffect:I}=w,S=!e.isOutgoing,[M,k,T]=(0,Q.A)(),[P,B]=(0,n.J0)(!1),R=i,[F,O,z]=(0,Q.A)(R);(0,n.vJ)(()=>{R?O():z()},[R]);const U=(0,L.A)(()=>{T(),z(),P&&y({isSensitiveEnabled:!0})}),j=w.isPreloadedGlobally?void 0:(0,l.Mw)(w,N&&!h.OF?"pictogram":"inline"),V=(0,Y.Vz)(b,d),J=(0,Y.Vz)(b,m),H=`sticker${w.id}?size=f`,K=(0,Le.A)(H,!V||!I||!r,o.qZ.BlobUrl),[$,_,q]=(0,Q.A)(),W=(0,l.VD)(w),Z=(0,L.A)(()=>{q(),c?.()});(0,n.vJ)(()=>{I&&r&&J&&a&&_()},[I,J,a,_,r]);const ee=I&&r&&K&&$;(0,Ia.A)({anchorRef:b,overlayRef:x,isMirrored:S,isDisabled:!ee});const te=(0,L.A)(()=>{A({stickerSetInfo:w.stickerSetInfo})}),ae=(0,L.A)(()=>{if(F)return i?u?void f():void k():void z();if(I){if($||!r)return void p({message:v("PremiumStickerTooltip"),action:{action:"openStickerSet",payload:{stickerSetInfo:w.stickerSetInfo}},actionText:v("ViewAction")});if(r)return void _()}te()}),ne="isMissing"in C,{width:se,height:oe}=(0,D.bu)(w,E),re=(0,g.A)("media-inner","FPceNkgD",ne&&"hruUWBuj",I&&S&&Pa);return n.Ay.createElement("div",{ref:b,className:re,style:`width: ${se}px; height: ${oe}px;`,onClick:ne?void 0:ae},n.Ay.createElement(ka.A,{containerRef:b,sticker:w,fullMediaHash:j,fullMediaClassName:"full-media",size:se,shouldLoop:t,noLoad:!V,noPlay:!J,withSharedAnimation:!0}),n.Ay.createElement(qt.A,{isVisible:F,withAnimation:!0,thumbDataUri:W,width:se,height:oe,className:"media-spoiler",isNsfw:i}),ee&&n.Ay.createElement(Ta.A,null,n.Ay.createElement(Sa.A,{ref:x,key:H,className:(0,g.A)(La,S&&Pa),tgsUrl:K,size:1.49*se,play:!0,isLowPriority:!0,noLoop:!0,onEnded:Z})),n.Ay.createElement(Ma.A,{isOpen:M,onClose:T,shouldAlwaysShow:P,onAlwaysShowChanged:B,confirmHandler:U}),ee&&n.Ay.createElement(Ta.A,null,n.Ay.createElement(Sa.A,{ref:x,key:H,className:(0,g.A)(La,S&&Pa),tgsUrl:K,size:1.49*se,play:!0,isLowPriority:!0,noLoop:!0,onEnded:Z})))}));var Ra=a(45470),Fa=a(14),Da=a(50680),Oa=a(59816);const za=(0,n.ph)(function({story:e,isPreview:t,isProtected:a,isConnected:o}){const{openStoryViewer:r,loadPeerStoriesByIds:i,showNotification:c}=(0,s.ko)(),d=(0,X.A)(),{isMobile:m}=(0,G.Ay)(),u=e&&"isDeleted"in e,p=e&&"content"in e,A=p?e.content.video:void 0,y=p?(0,l.EN)(e):void 0,f=(0,Le.A)(y),v=p?A?A.thumbnail?.dataUri:e.content.photo?.thumbnail?.dataUri:void 0,E=(0,Fa.A)(f,!0),{shouldRender:b,transitionClassNames:x}=(0,Da.A)(Boolean(E)),w=(0,Ra.A)(v,u&&!t,m&&!h.QH),C=(0,g.A)("EVLTkrt1","media-inner",(!o||u)&&"AQWPv0bP",u&&"tprkr7qf",t&&"V3HabdKr");(0,n.vJ)(()=>{!e||p||u||i({peerId:e.peerId,storyIds:[e.id]})},[e,u,p]);const N=(0,L.A)(()=>{u?c({message:d("StoryNotFound")}):r({peerId:e.peerId,storyId:e.id,isSinglePeer:!0,isSingleStory:!0})});return n.Ay.createElement("div",{className:C,onClick:o?N:void 0},!u&&t&&n.Ay.createElement("canvas",{ref:w,className:"thumbnail blurred-bg"}),b&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("img",{src:E,alt:"",className:(0,g.A)("WAItYc5d",t&&"ClGe8yij",x),draggable:!1}),p&&n.Ay.createElement(Oa.A,{story:e,className:x})),u&&n.Ay.createElement("span",null,n.Ay.createElement(Be.A,{name:"story-expired",className:"nLA7VEhv"}),d("StoryExpiredSubtitle")),Boolean(A?.duration)&&n.Ay.createElement("div",{className:"message-media-duration"},(0,Mt.QO)(A.duration)),a&&n.Ay.createElement("span",{className:"protector"}))}),Ua=(0,n.ph)((0,s.EK)((e,{message:t})=>{const{id:a,peerId:n}=t.content.storyData;return{story:(0,m.Msb)(e,n,a),isConnected:"connectionStateReady"===e.connectionState}})(function({message:e,story:t,isProtected:a,isConnected:s}){const{storyData:o}=e.content;return n.Ay.createElement(za,{story:t||o,isProtected:a,isConnected:s})})),ja=(0,n.ph)((0,s.EK)((e,{message:t})=>{const{id:a,peerId:n}=t.content.storyData,s=(0,m._bp)(e,n)?.lastReadId;return{story:(0,m.Msb)(e,n,a),peer:(0,m.PVB)(e,n),targetUser:(0,m.mBe)(e,t.chatId),isUnread:Boolean(s&&s<a)}})(function({message:e,story:t,peer:a,isUnread:o,targetUser:r}){const{openStoryViewer:i}=(0,s.ko)(),d=(0,X.A)(),{storyData:m}=e.content,u=(0,L.A)(()=>{i({peerId:t.peerId,storyId:t.id,isSinglePeer:!0,isSingleStory:!0})}),p=t&&"isDeleted"in t,h=t&&"content"in t,A=h?t.content.video:void 0,y=h?(0,l.EN)(t,"pictogram"):void 0,f=(0,Le.A)(y)||A?.thumbnail?.dataUri;return(0,W.A)(m.peerId,m.id,t),n.Ay.createElement("div",{className:(0,g.A)("action-message-story-mention",o&&"is-unread",h&&"with-preview"),tabIndex:0,role:"button",onClick:h?u:void 0},h&&n.Ay.createElement("span",{className:"story-media-wrapper"},f&&n.Ay.createElement("img",{src:f,alt:"",className:"story-media"})),n.Ay.createElement("span",{className:"story-title"},(0,z.A)(a&&"isSelf"in a&&a.isSelf?d(p?"ExpiredStoryMentioned":"StoryYouMentionedTitle",(0,l.u0)(r)):p?d("ExpiredStoryMention"):d("StoryMentionedTitle",(0,c.F9)(d,a)),["emoji","simple_markdown"])))})),Va=(0,n.ph)((0,s.EK)((e,{message:t})=>({sender:(0,m.Y7C)(e,t),isCurrentUserPremium:(0,m.g29)(e),isSynced:e.isSynced}))(({message:e,todoList:t,sender:a,isCurrentUserPremium:o,isSynced:r})=>{const{toggleTodoCompleted:i,showNotification:l,requestConfetti:d}=(0,s.ko)(),{todo:u,completions:p}=t,{title:h,items:A,othersCanComplete:y}=u,[f,v]=(0,n.J0)([]),E=(0,n.Kr)(()=>new Set(f),[f]),b=!e.isScheduled&&o&&r;(0,n.Nf)(()=>{const e=p?.map(e=>e.itemId.toString())||[];v(e)},[p]);const x=(0,Z.A)(),w=(0,L.A)(e=>{e.preventDefault(),e.stopPropagation(),o||l({message:x("SubscribeToTelegramPremiumForToggleTask"),action:{action:"openPremiumModal",payload:{initialSection:"todo"}},actionText:x("PremiumMore")})}),C=(0,L.A)(t=>{const a=t.find(e=>!E.has(e)),n=Array.from(E).find(e=>!t.includes(e));i({chatId:e.chatId,messageId:e.id,completedIds:a?[Number(a)]:[],incompletedIds:n?[Number(n)]:[]}),t.length===A.length&&d({})}),N=Boolean(e.forwardInfo)||!y&&!e.isOutgoing,I=e.isOutgoing,S=(0,n.Kr)(()=>A.map(e=>{const t=y?(0,m.mBe)((0,s.mS)(),p?.find(t=>t.itemId===e.id)?.completedBy||""):void 0,a=t?(0,c.em)(x,t):void 0;return{label:(0,bt.fd)(e.title),value:e.id.toString(),user:t,subLabel:a}}),[A,y,p,x]);return n.Ay.createElement("div",{className:"todo-list",dir:x.isRtl?"auto":"ltr"},n.Ay.createElement("div",{className:"todo-list-header"},n.Ay.createElement("div",{className:"todo-list-title"},(0,bt.fd)(h)),n.Ay.createElement("div",{className:"list-type"},e.forwardInfo?x("TitleToDoList"):y?x("TitleGroupToDoList"):I?x("TitleYourToDoList"):a?x("TitleUserToDoList",{peer:(0,c.F9)(x,a)},{withNodes:!0}):x("TitleToDoList"))),n.Ay.createElement("div",{className:"todo-list-items"},N?n.Ay.createElement("div",{className:"todo-list-items"},S.map(e=>n.Ay.createElement("div",{key:e.value,className:"todo-list-readonly-item"},n.Ay.createElement("div",{className:"todo-readonly-item-checkbox"},E.has(e.value)?n.Ay.createElement(Be.A,{name:"check"}):n.Ay.createElement("div",{className:"todo-item-bullet-point"})),n.Ay.createElement("div",{className:(0,g.A)("readonly-item-label",E.has(e.value)&&"completed-label")},e.label)))):n.Ay.createElement(ya.A,{options:S,selected:f,onChange:C,onClickLabel:o?void 0:w,disabled:!b,isRound:!0})),n.Ay.createElement("div",{className:"completed-tasks-count"},n.Ay.createElement(dt.A,{text:x("DescriptionCompletedToDoTasks",{number:f.length,count:S.length})})))}));var Ja=a(58849),Ha=a(87094),Ka=a(39877),$a=a(84685),Ga=a(66833),_a=a(40558);const qa=(0,n.ph)(({gift:e,observeIntersectionForLoading:t,observeIntersectionForPlaying:a,onClick:s})=>{const o=(0,n.li)(),{backdrop:r,model:i,pattern:l}=(0,Ga.uc)(e),[c,d,m]=(0,Q.A)(),u=[r.centerColor,r.edgeColor];return n.Ay.createElement("div",{className:(0,g.A)("interactive-gift","LaOdPURl"),onClick:s,onMouseEnter:h.TF?void 0:d,onMouseLeave:h.TF?void 0:m},n.Ay.createElement("div",{className:"zDnMa37m"},n.Ay.createElement(_a.A,{className:"EdXfeKWY",backgroundColors:u,patternColor:r.patternColor,patternIcon:l.sticker})),n.Ay.createElement("div",{ref:o,className:"o_DYZEMV"},n.Ay.createElement(ka.A,{containerRef:o,sticker:i.sticker,size:120,shouldLoop:c,observeIntersectionForPlaying:a,observeIntersectionForLoading:t})))}),Wa=(0,n.ph)((0,s.EK)(e=>({canPlayAnimatedEmojis:(0,m.BWX)(e)}))(({messageWebPage:e,webPage:t,message:a,noAvatars:o,canAutoLoad:i,canAutoPlay:c,asForwarded:d,isDownloading:m=!1,isProtected:u,isConnected:p,story:h,theme:A,backgroundEmojiId:y,shouldWarnAboutSvg:f,autoLoadFileMaxSizeMb:v,lastPlaybackTimestamp:E,observeIntersectionForLoading:b,observeIntersectionForPlaying:x,onMediaClick:w,onDocumentClick:C,onContainerClick:N,onAudioPlay:I,onCancelMediaTransfer:S})=>{const{openUrl:M,openTelegramLink:k}=(0,s.ko)(),T=(0,n.li)(),P=(0,X.A)(),B=(0,Z.A)(),R=(0,L.A)(()=>{w()}),F=(0,L.A)(e=>{N?.(e)}),D="full"===t?.webpageType?t:void 0,{story:O,stickers:U}=D||{};(0,W.A)(O?.peerId,O?.id,h);const j=U?.isWithTextColor||U?.documents?.[0]?.shouldUseTextColor,V=(0,Ha.A)(T,void 0,!j),J=(0,n.Kr)(()=>{const e=t?.url&&(0,ue.vG)(t?.url);if(e&&"timestamp"in e)return e.timestamp},[t?.url]);if("full"!==t?.webpageType)return;const H=(0,L.A)(()=>{k({url:t.url})}),{siteName:K,url:$,displayUrl:G,title:_,description:q,photo:Q,video:Y,audio:ee,type:te,document:ae}=t,{mediaSize:ne}=e,se="telegram_story"===te,oe="telegram_nft"===te,re=h&&"isDeleted"in h?void 0:function(e){switch(e){case"telegram_channel_request":case"telegram_megagroup_request":case"telegram_chat_request":return"ViewButtonRequestJoin";case"telegram_message":return"ViewButtonMessage";case"telegram_bot":return"ViewButtonBot";case"telegram_voicechat":return"ViewButtonVoiceChat";case"telegram_livestream":return"ViewButtonVoiceChatChannel";case"telegram_megagroup":case"telegram_chat":return"ViewButtonGroup";case"telegram_channel":return"ViewButtonChannel";case"telegram_user":return"ViewButtonUser";case"telegram_botapp":return"ViewButtonBotApp";case"telegram_chatlist":return"ViewChatList";case"telegram_story":return"ViewButtonStory";case"telegram_channel_boost":case"telegram_group_boost":return"ViewButtonBoost";case"telegram_stickerset":return"ViewButtonStickerset";case"telegram_emojiset":return"ViewButtonEmojiset";case"telegram_nft":return"ViewButtonGiftUnique";default:return}}(U?.isEmoji?"telegram_emojiset":te),ie=re&&B(re),le=(0,Ja.A)(q,170),ce=Boolean(le||_||K);let de=Boolean(U);ce&&t?.photo&&!t.video&&!t.document&&(de=function(e,t){if(!e?.photo)return!1;if("small"===t)return!0;if("large"===t)return!1;const{width:a,height:n}=(0,l.Xn)(e.photo)||{};return!(!a||!n||a!==n||e.hasLargeMedia)}(t,ne));const me=(Q||Y)&&w&&!de,pe=(0,g.A)("WebPage",de&&"with-square-photo",!Q&&!Y&&"without-media",Y&&"with-video",!ce&&"no-article",ae&&"with-document",ie&&"with-quick-button",oe&&"with-gift");return n.Ay.createElement(Re.A,{className:pe,"data-initial":(K||G)[0],dir:P.isRtl?"rtl":"auto",onClick:F},n.Ay.createElement("div",{className:(0,g.A)("WebPage--content",se&&"is-story",oe&&"is-gift")},y&&n.Ay.createElement(Ka.A,{emojiDocumentId:y,className:"WebPage--background-icons"}),se&&n.Ay.createElement(za,{story:h,isProtected:u,isConnected:p,isPreview:!0}),oe&&n.Ay.createElement(qa,{gift:t.gift,observeIntersectionForLoading:b,observeIntersectionForPlaying:x,onClick:H}),ce&&n.Ay.createElement("div",{className:(0,g.A)("WebPage-text","WebPage-text_interactive"),onClick:()=>M({url:$,shouldSkipModal:e.isSafe})},n.Ay.createElement($a.A,{className:"site-name",url:$,text:K||G}),_&&n.Ay.createElement("p",{className:"site-title"},(0,z.A)(_)),le&&!oe&&n.Ay.createElement("p",{className:"site-description"},(0,z.A)(le,["emoji","br"]))),Q&&!oe&&!Y&&!ae&&n.Ay.createElement(Qe.A,{photo:Q,isOwn:a?.isOutgoing,isInWebPage:!0,observeIntersection:b,noAvatars:o,canAutoLoad:i,size:de?"pictogram":"inline",asForwarded:d,nonInteractive:!me,isDownloading:m,isProtected:u,theme:A,onClick:me?R:void 0,onCancelUpload:S}),Y&&n.Ay.createElement(Ye.A,{video:Y,isOwn:a?.isOutgoing,isInWebPage:!0,observeIntersectionForLoading:b,noAvatars:o,canAutoLoad:i,canAutoPlay:c,asForwarded:d,isDownloading:m,isProtected:u,lastPlaybackTimestamp:E||J,onClick:me?R:void 0,onCancelUpload:S}),ee&&n.Ay.createElement(Ne.Ay,{theme:A,message:a,origin:r.d9.Inline,noAvatars:o,isDownloading:m,onPlay:I,onCancelUpload:S}),ae&&n.Ay.createElement(Me.A,{document:ae,message:a,observeIntersection:b,autoLoadFileMaxSizeMb:v,onMediaClick:C,onCancelUpload:S,isDownloading:m,shouldWarnAboutSvg:f}),U&&n.Ay.createElement("div",{ref:T,className:(0,g.A)("media-inner","square-image",U.isEmoji&&"WebPage--emoji-grid","WebPage--stickers")},U.documents.map(e=>n.Ay.createElement("div",{key:e.id,className:"WebPage--sticker"},n.Ay.createElement(ka.A,{containerRef:T,sticker:e,shouldLoop:!0,size:U.isEmoji?38:80,customColor:V,observeIntersectionForPlaying:x,observeIntersectionForLoading:b}))))),ie&&(he=ie,n.Ay.createElement(Ge.A,{className:"WebPage--quick-button",size:"tiny",color:"translucent",isRectangular:!0,noForcedUpperCase:!0,onClick:H},he)));var he})),Qa=1.75*D.$,Ya=2.25*D.$,Za=(0,n.ph)((0,s.EK)((e,t)=>{const{focusedMessage:a,forwardMessages:n,activeReactions:s,activeEmojiInteractions:r,loadingThread:c}=(0,m.nTw)(e),{message:g,album:f,withSenderName:v,withAvatar:E,threadId:b,messageListType:x,isLastInDocumentGroup:w,isFirstInGroup:C}=t,{id:N,chatId:I,viaBotId:S,isOutgoing:M,forwardInfo:k,transcriptionId:T,isPinned:P,viaBusinessBotId:L,effectId:B,paidMessageStars:R}=g,F=(0,m.k9R)(e,g),{shouldWarnAboutSvg:D}=(0,p.l)(e),O=(0,A.L8)(I),z=(0,m.hds)(e,I),U=(0,m.nZ4)(e,I),j=(0,l.DX)(I),V=(0,l.Qe)(I),J=z&&(0,l.WX)(z),H=z&&(0,l.YE)(z),K=O?void 0:(0,m.AWZ)(e,I),$=F?.story,G=$?(0,m.Msb)(e,$.peerId,$.id):void 0,_=n.messageIds&&n.messageIds.includes(N),q=!U&&(0,l.zP)(g),W=v||E||q,Q=(0,m.Y7C)(e,g),Y=(0,m.Szq)(e,g),Z=S?(0,m.mBe)(e,S):void 0,X=Q?.id&&H?K?.adminMembersById?.[Q?.id]:void 0,ee=g.id===b,{replyToMsgId:te,replyToPeerId:ae,replyFrom:ne}=(0,d.Q)(g)||{},{peerId:se,storyId:oe}=(0,d.W)(g)||{},re=te&&te===b,ie=(0,m.gMr)(e,g),le=k||ne,ce=ie?(0,m.Y7C)(e,ie):!le||j||V?void 0:(0,m.HdA)(e,le),de=ie&&(0,m.Szq)(e,ie),me=ae?(0,m.hds)(e,ae):void 0,ue=!j&&!V&&me&&!(0,l.gA)(me)&&(me.isNotJoined||(0,m._ls)(e,me.id)),pe="topicCreate"===ie?.content.action?.type,he=oe&&se?(0,m.Msb)(e,se,oe):void 0,ge=se?(0,m.PVB)(e,se):void 0,Ae=(0,m.ldX)(e,g),ye="thread"===x&&(f?f.messages.some(t=>(0,m.nJv)(e,t,b)):(0,m.nJv)(e,g,b)),{direction:fe,noHighlight:ve,isResizingContainer:Ee,quote:be,quoteOffset:xe,scrollTargetPosition:we}=ye&&a||{},Ce=(0,m.TCk)(e),Ne=Ce?.results?.query&&`${Ce.isHashtag?"#":""}${Ce.results.query}`,Ie=(0,l.wb)(g),Se=Ie&&(0,m.oei)(e,Ie)?Ie:void 0,Me=(0,l.Jw)(g);let ke;ke=f?.messages?f.messages.every(({id:t})=>(0,m.H1_)(e,t)):(0,m.H1_)(e,N);const Te="thread"===x&&(0,m.tOf)(e,g,b),Pe=(0,m.yuw)(e),Le=(0,u.iS)(e,g),Be=Le&&(0,l.$r)(Pe,Le),Re=(0,m.Vw0)(e,I,f?.commentsMessage?.id||N),Fe=Boolean(g.groupedId)&&!g.isInAlbum,De=Fe?(0,m.D_S)(e,I,g.groupedId)[0]:void 0,Oe=Fe?w?(0,m.O5q)(e,I,De):void 0:g,ze=z?.unreadReactions?.includes(g.id),Ue=b===o.l3&&z?.isForum&&C,je=Ue?(0,m.nkm)(e,g):void 0,Ve=(0,m.RnX)(e,I),Je=(0,m.Rny)(e,I,g.id),He=(0,m.qZq)(e,I),Ke=h.CM&&e.settings.byKey.canTranslate&&!He,$e="connectionStateReady"===e.connectionState,Ge=Boolean(Oe&&s[(0,y.bj)(Oe)]?.length),_e=(0,m.g29)(e),qe=Q&&(0,m.nZ4)(e,Q.id)?K?.boostsApplied??g.senderBoosts:g.senderBoosts,We=z?.boostLevel||0,Qe=e.appConfig?.groupTranscribeLevelMin,Ye=(_e||Boolean(Qe&&We>=Qe),L?(0,m.mBe)(e,L):void 0),Ze=B?e.availableEffectById[B]:void 0,Xe=(0,m.zcZ)(e,g),et=(0,u.me)(e,g),tt=(0,u.xd)(e,I,g.id),at=Je?Boolean((0,m.a_$)(e,g.chatId,Je)[g.id]?.text):void 0,nt=(0,m.trm)(e),st=e.appConfig?.starsSuggestedPostFutureMin||i.WHU,ot=(0,u.B9)(e,g),rt=ie&&(0,u.B9)(e,ie);return{theme:(0,m.SJA)(e),forceSenderName:q,sender:Q,canShowSender:W,originSender:Y,botSender:Z,shouldHideReply:re||pe,isThreadTop:ee,replyMessage:ie,replyMessageSender:ce,replyMessageForwardSender:de,replyMessageChat:me,replyStory:he,isReplyPrivate:ue,storySender:ge,isInDocumentGroup:Fe,isProtected:(0,m.ynf)(e,g),isChatProtected:(0,m.ryq)(e,I),isFocused:ye,isForwarding:_,reactionMessage:Oe,isChatWithSelf:U,isRepliesChat:j,isAnonymousForwards:V,isChannel:J,isGroup:H,canReply:Te,highlight:Ne,animatedEmoji:Se,animatedCustomEmoji:Me,isInSelectMode:(0,m.rTV)(e),isSelected:ke,isGroupSelected:Boolean(g.groupedId)&&!g.isInAlbum&&(0,m.SLS)(e,I,g.groupedId),threadId:b,isDownloading:Be,isPinnedList:"pinned"===x,isPinned:P,canAutoLoadMedia:(0,m.wwb)(e,g),canAutoPlayMedia:(0,m.OEt)(e,g),autoLoadFileMaxSizeMb:e.settings.byKey.autoLoadFileMaxSizeMb,shouldLoopStickers:(0,m.ML4)(e),repliesThreadInfo:Re,availableReactions:e.reactions.availableReactions,defaultReaction:(0,l.Nb)(g)||"scheduled"===x?void 0:(0,m.nTJ)(e,I),hasActiveReactions:Ge,activeEmojiInteractions:r,hasUnreadReaction:ze,isTranscribing:void 0!==T&&e.transcriptions[T]?.isPending,transcribedText:void 0!==T?e.transcriptions[T]?.text:void 0,hasTranslation:at,isPremium:_e,senderAdminMember:X,messageTopic:je,hasTopicChip:Ue,chatTranslations:Ve,areTranslationsEnabled:Ke,shouldDetectChatLanguage:(0,m.LRV)(e,I),requestedTranslationLanguage:Je,requestedChatTranslationLanguage:He,hasLinkedChat:Boolean(K?.linkedChatId),withAnimatedEffects:(0,m.xYJ)(e,"stickerEffects"),webPageStory:G,isConnected:$e,isLoadingComments:Re?.isCommentsInfo&&c?.loadingChatId===Re?.originChannelId&&c?.loadingMessageId===Re?.originMessageId,shouldWarnAboutSvg:D,...M&&{outgoingStatus:(0,m.Tl2)(e,g,"scheduled"===x)},..."number"==typeof Ae&&{uploadProgress:Ae},...ye&&{focusDirection:fe,noFocusHighlight:ve,isResizingContainer:Ee,focusedQuote:be,focusedQuoteOffset:xe,scrollTargetPosition:we},senderBoosts:qe,tags:e.savedReactionTags?.byKey,canTranscribeVoice:!0,viaBusinessBot:Ye,minFutureTime:st,effect:Ze,poll:Xe,maxTimestamp:et,lastPlaybackTimestamp:tt,paidMessageStars:R,isChatWithUser:O,isAccountFrozen:nt,isMediaNsfw:ot,isReplyMediaNsfw:rt,webPage:F}})(({message:e,observeIntersectionForBottom:t,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,album:u,noAvatars:p,withAvatar:A,withSenderName:y,noComments:b,noReplies:x,appearanceOrder:w,isJustAdded:C,isFirstInGroup:N,isPremium:I,isLastInGroup:S,isFirstInDocumentGroup:M,isLastInDocumentGroup:k,isTranscribing:T,transcribedText:P,hasTranslation:B,isLastInList:R,theme:V,forceSenderName:H,sender:K,canShowSender:ne,originSender:se,botSender:le,isThreadTop:he,shouldHideReply:ge,replyMessage:Ae,replyMessageSender:ye,replyMessageForwardSender:fe,replyMessageChat:ve,replyStory:Ee,isReplyPrivate:be,storySender:we,outgoingStatus:Ce,uploadProgress:Pe,isInDocumentGroup:Le,isLoadingComments:Re,isProtected:je,isChatProtected:Ve,isFocused:Je,focusDirection:He,focusedQuote:We,focusedQuoteOffset:Ze,noFocusHighlight:Xe,scrollTargetPosition:tt,isResizingContainer:at,isForwarding:nt,isChatWithSelf:st,isRepliesChat:rt,isAnonymousForwards:lt,isChannel:ct,isGroup:dt,canReply:mt,highlight:pt,animatedEmoji:ht,animatedCustomEmoji:gt,hasActiveReactions:At,hasLinkedChat:ft,isInSelectMode:vt,isSelected:bt,isGroupSelected:xt,threadId:wt,reactionMessage:Ct,availableReactions:It,defaultReaction:Mt,activeEmojiInteractions:kt,messageListType:Tt,isPinnedList:Pt,isPinned:Lt,isDownloading:Bt,canAutoLoadMedia:Rt,canAutoPlayMedia:Ft,shouldLoopStickers:Dt,autoLoadFileMaxSizeMb:Ot,repliesThreadInfo:zt,hasUnreadReaction:jt,memoFirstUnreadIdRef:Jt,senderAdminMember:Ht,messageTopic:Kt,hasTopicChip:$t,chatTranslations:_t,areTranslationsEnabled:qt,shouldDetectChatLanguage:Wt,requestedTranslationLanguage:Yt,requestedChatTranslationLanguage:Zt,withAnimatedEffects:Xt,webPageStory:ea,isConnected:ta,getIsMessageListReady:aa,shouldWarnAboutSvg:na,senderBoosts:sa,tags:oa,canTranscribeVoice:ca,viaBusinessBot:da,effect:ua,poll:ha,maxTimestamp:Aa,lastPlaybackTimestamp:ya,isMediaNsfw:fa,isReplyMediaNsfw:va,paidMessageStars:Ea,isChatWithUser:ba,isAccountFrozen:xa,minFutureTime:Ia,webPage:Sa,onIntersectPinnedMessage:Ma})=>{const{toggleMessageSelection:ka,clickBotInlineButton:Ta,clickSuggestedMessageButton:Pa,rejectSuggestedPost:La,openSuggestedPostApprovalModal:Ra,disableContextMenuHint:Fa,animateUnreadReaction:Da,focusLastMessage:Oa,markMentionsRead:za}=(0,s.ko)(),Ja=(0,n.li)(),Ha=(0,n.li)(),Ka=(0,n.li)(),$a=(0,n.li)(),Ga=(0,X.A)(),_a=(0,Z.A)(),[qa,Za]=(0,n.J0)(!1),[Xa,en]=(0,n.J0)(!1),[tn,an]=(0,n.J0)(!1),[nn,sn,on]=(0,Q.A)(),[rn,ln,cn]=(0,Q.A)(),[dn,mn]=(0,n.J0)(""),{isMobile:un,isTouchScreen:pn}=(0,G.Ay)();(0,Y.mv)(Ha,t);const{isContextMenuOpen:hn,contextMenuAnchor:gn,contextMenuTarget:An,handleBeforeContextMenu:yn,handleContextMenu:fn,handleContextMenuClose:vn,handleContextMenuHide:En}=(0,_.A)(Ja,pn&&vt||xa,!h.cp,h.Ni,aa),{isGptMenuOpen:bn,gptMenuPosition:xn}=(e=>{const[t,a]=(0,n.J0)(!1),[s,o]=(0,n.J0)("bottom"),[r,i]=(0,n.J0)(!1);return(0,n.vJ)(()=>{let e=null;const t=()=>{i(!0),e&&window.clearTimeout(e),e=window.setTimeout(()=>{i(!1)},200)};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),e&&window.clearTimeout(e)}},[]),(0,n.vJ)(()=>{const t=e?.current;if(!t)return;const n=()=>{if(r)return;const e=t.getBoundingClientRect(),n=window.innerHeight-e.bottom;o(n<150?"top":"bottom"),a(!0)},s=()=>a(!1);return t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",s),()=>{t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",s)}},[e,r]),{isGptMenuOpen:t,gptMenuPosition:s}})($a);(0,n.vJ)(()=>{hn&&Fa()},[hn,Fa]);const wn=w<=0,[Cn,Nn]=(0,Q.A)(wn);(0,n.vJ)(()=>{wn||setTimeout(Nn,w*i.zq7)},[w,Nn,wn]),(0,ae.A)({ref:Ja,isOpen:Cn||C,noMountTransition:wn&&!C,className:!1});const{id:In,chatId:Sn,forwardInfo:Mn,viaBotId:kn,isTranscriptionError:Tn,factCheck:Pn}=e;(0,n._W)(()=>{if(e.isPinned){const e=u?u.mainMessage.id:In;Ma?.({viewportPinnedIdsToRemove:[e]})}});const Ln=(0,l.Nb)(e),Bn=(0,l.Ie)(e),Rn="scheduled"===Tt||e.isScheduled,Fn=(0,l.Tv)(e)&&!ge,{paidMedia:Dn}=(0,l.r_)(e),{photo:On,video:zn}=j(Dn),{photo:Un=On,video:jn=zn,audio:Vn,voice:Jn,document:Hn,sticker:Kn,contact:$n,invoice:Gn,location:_n,action:qn,game:Wn,storyData:Qn,giveaway:Yn,giveawayResults:Zn,todo:Xn}=(0,l.r_)(e),es=(0,d.Q)(e),ts=(0,d.W)(e),as=Boolean(!qa&&(Tn||P)),ns=Boolean(ts),ss=Boolean(zt)&&"thread"===Tt,os=!as&&(0,l.aN)(e),rs=os&&(ht||gt),is=Ct?.reactions&&!(0,l.G)(Ct.reactions),ls=Mn&&(!st||Rn)&&!rt&&!Mn.isLinkedChannelPost&&!lt&&!le||Boolean(Qn&&!Qn.isMention),cs=Boolean(sa)&&!ls&&N,ds=Qn?.isMention,ms="video"===jn?.mediaType&&jn.isRound,us=Boolean(u)&&(u.isPaidMedia&&Dn.extendedMedia.length>1||u.messages.length>1)&&!u.messages.some(e=>0===Object.keys(e.content).length),ps=Le&&!M,hs=Le&&!k,gs=void 0!==gn,As=!(gs||vt||nt||hs||ds||(Kn||rs)&&ls),ys=ct&&!Rn&&e.isForwardingAllowed&&!Ve,fs=Boolean(Pt||Mn&&(Mn.isChannelPost||st||rt||lt)&&Mn.fromMessageId),vs=Boolean(Pn?.text),Es=ls&&os,bs=$t||Fn||ns||Es,xs=(0,L.A)((e,t)=>{xa||ka({messageId:In,groupedId:t,...e?.shiftKey&&{withShift:!0},...us&&{childMessageIds:u.messages.map(({id:e})=>e)}})}),ws=ne?K:void 0,Cs=Mn&&(st||rt||lt||!ws)?se:ws,Ns=ls?se:K,Is=Bn&&!os,Ss=Mn||Qn?se:ws,Ms=(0,l.G5)(e),{handleMouseDown:ks,handleClick:Ts,handleContextMenu:Ps,handleDoubleClick:Ls,handleContentDoubleClick:Bs,handleMouseMove:Rs,handleSendQuickReaction:Fs,handleMouseLeave:Ds,isSwiped:Os,isQuickReactionVisible:zs,handleDocumentGroupMouseEnter:Us}=xe(xs,Ja,In,Boolean(vt),Boolean(mt),Boolean(je),fn,yn,Sn,gs,Ka,hs,aa),{handleSenderClick:js,handleViaBotClick:Vs,handleReplyClick:Js,handleMediaClick:Hs,handleDocumentClick:Ks,handleAudioPlay:$s,handleAlbumMediaClick:Gs,handlePhotoMediaClick:_s,handleVideoMediaClick:qs,handleMetaClick:Ws,handleTranslationClick:Qs,handleOpenThread:Ys,handleReadMedia:Zs,handleCancelUpload:Xs,handleVoteSend:eo,handleGroupForward:to,handleForward:ao,handleFocus:no,handleFocusForwarded:so,handleDocumentGroupSelectAll:oo,handleTopicChipClick:ro,handleStoryClick:io}=function({lang:e,selectMessage:t,message:a,webPage:n,chatId:i,threadId:c,isInDocumentGroup:m,asForwarded:u,isScheduled:p,album:h,senderPeer:g,botSender:A,messageTopic:y,isTranslatingChat:f,story:v,isReplyPrivate:E,isRepliesChat:b,isSavedMessages:x,lastPlaybackTimestamp:w}){const{openChat:C,showNotification:N,focusMessage:I,openMediaViewer:S,openAudioPlayer:M,markMessagesRead:k,cancelUploadMedia:T,sendPollVote:P,openForwardMenu:B,openChatLanguageModal:R,openThread:F,openStoryViewer:D,searchChatMediaMessages:O}=(0,s.ko)(),{id:z,forwardInfo:U,groupedId:j,content:{paidMedia:V,video:J}}=a,{replyToMsgId:H,replyToPeerId:K,replyToTopId:$,isQuote:G,quoteText:_,quoteOffset:q}=(0,d.Q)(a)||{},W=(0,L.A)(()=>{g?u&&U?.channelPostId?I({chatId:g.id,messageId:U.channelPostId}):C({id:g.id}):N({message:e("HidAccount")})}),Q=(0,L.A)(()=>{A&&C({id:A.id})}),Y=(0,L.A)(()=>{H&&!E?b&&K&&$?F({isComments:!0,originChannelId:K,originMessageId:$,focusMessageId:H}):I({chatId:K||i,threadId:b?$:c,messageId:H,replyMessageId:K?void 0:z,noForumTopicPanel:!K,...G&&{quote:_?.text,quoteOffset:q}}):N({message:e(G?"QuotePrivate":"ReplyPrivate")})}),Z=(0,L.A)(()=>{S({chatId:i,threadId:c,messageId:z,origin:p?r.TQ.ScheduledInline:r.TQ.Inline})}),X=(0,L.A)(e=>{if(V&&!V.isBought)return;e&&O({chatId:i,threadId:c,currentMediaMessageId:z});const t=n?.url&&(0,ue.vG)(n.url),a=J||(0,l.rU)(n),s=t&&"timestamp"in t?t.timestamp:void 0;S({chatId:i,threadId:c,messageId:z,origin:p?r.TQ.ScheduledInline:r.TQ.Inline,timestamp:w||a?.timestamp||s,withDynamicLoading:e})}),ee=(0,L.A)(()=>{X(!p&&!V)}),te=(0,L.A)(()=>{const e=a.content?.video?.isGif;X(!e&&!p&&!V)}),ae=(0,L.A)(()=>{((0,l.yl)(a)||(0,l.eY)(n))&&ee(),te()}),ne=(0,L.A)(()=>{M({chatId:i,messageId:z})}),se=(0,L.A)((e,t)=>{V&&!V.isBought||(O({chatId:i,threadId:c,currentMediaMessageId:z}),S({chatId:i,threadId:c,messageId:e,mediaIndex:t,origin:p?r.TQ.ScheduledAlbum:r.TQ.Album,withDynamicLoading:!V}))}),oe=(0,L.A)(()=>{k({messageIds:[z]})}),re=(0,L.A)(()=>{T({chatId:i,messageId:z})}),ie=(0,L.A)(e=>{P({chatId:i,messageId:z,options:e})}),le=(0,L.A)(()=>{B({fromChatId:i,groupedId:j})}),ce=(0,L.A)(()=>{if(h&&h.messages){const e=h.messages.map(({id:e})=>e);B({fromChatId:i,messageIds:e})}else B({fromChatId:i,messageIds:[z]})}),de=(0,L.A)(()=>{I({chatId:i,threadId:o.l3,messageId:z})}),me=(0,L.A)(()=>{const e=x&&U.savedFromPeerId||U.fromChatId;m?I({chatId:e,groupedId:j,groupedChatId:i,messageId:U.fromMessageId}):K&&$?b?F({isComments:!0,originChannelId:K,originMessageId:$,focusMessageId:U.fromMessageId}):I({chatId:K,threadId:$,messageId:U.fromMessageId}):I({chatId:e,messageId:U.fromMessageId})}),pe=(0,L.A)(e=>{e.stopPropagation(),t(e,j)}),he=(0,L.A)(e=>{e.stopPropagation(),R({chatId:i,messageId:f?void 0:z})}),ge=(0,L.A)(()=>{F({chatId:a.chatId,threadId:a.id})}),Ae=(0,L.A)(()=>{y&&I({chatId:K||i,threadId:y.id,messageId:z})}),ye=(0,L.A)(()=>{v&&D({peerId:v.peerId,storyId:v.id,isSingleStory:!0})});return{handleSenderClick:W,handleViaBotClick:Q,handleReplyClick:Y,handleDocumentClick:Z,handleMediaClick:ae,handleAudioPlay:ne,handleAlbumMediaClick:se,handlePhotoMediaClick:ee,handleVideoMediaClick:te,handleMetaClick:pe,handleTranslationClick:he,handleOpenThread:ge,handleReadMedia:oe,handleCancelUpload:re,handleVoteSend:ie,handleGroupForward:le,handleForward:ce,handleFocus:de,handleFocusForwarded:me,handleDocumentGroupSelectAll:pe,handleTopicChipClick:Ae,handleStoryClick:ye}}({lang:Ga,selectMessage:xs,message:e,webPage:Sa,chatId:Sn,threadId:wt,isInDocumentGroup:Le,asForwarded:ls,isScheduled:Rn,album:u,avatarPeer:Cs,senderPeer:Ss,botSender:le,messageTopic:Kt,isTranslatingChat:Boolean(Zt),story:Ee&&"content"in Ee?Ee:void 0,isReplyPrivate:be,isRepliesChat:rt,isSavedMessages:st,lastPlaybackTimestamp:ya}),lo=(0,L.A)(e=>{e.stopPropagation(),sn()});(0,n.vJ)(()=>{R&&as&&P&&Oa()},[Oa,R,P,as]),(0,n.vJ)(()=>{const t=Ja.current,a=e.isInAlbum&&u?.messages.some(e=>!e.isDeleting);e.isDeleting&&t&&!a&&((0,$e.U)(t)?en(!0):an(!0))},[e.isDeleting]);const co=u?.hasMultipleCaptions?void 0:u?.captionMessage||e,mo=co&&(0,l.XR)(co),uo=mo||vs,po=(0,g.A)("Message message-list-item",N&&"first-in-group",je&&"hide-on-print",je&&!mo?"is-protected":"allow-selection",S&&"last-in-group",M&&"first-in-document-group",k&&"last-in-document-group",R&&"last-in-list",Bn&&"own",Boolean(e.viewsCount)&&"has-views",e.isEdited&&"was-edited",Fn&&"has-reply",hn&&"has-menu-open",Je&&!Xe&&"focused",nt&&"is-forwarding",tn&&"is-deleting",Xa&&"is-dissolving",Le&&"is-in-document-group",us&&"is-album",e.hasUnreadMention&&"has-unread-mention",bt&&"is-selected",vt&&"is-in-selection-mode",he&&!A&&"is-thread-top",Boolean(e.inlineButtons)&&"has-inline-buttons",Os&&"is-swiped",C&&"is-just-added",(At||nn)&&"has-active-effect",ds&&"is-story-mention",!As&&"no-action-button"),ho=co&&(0,l.r_)(co).text,go=Boolean(e.isInvertedMedia),{replyToMsgId:Ao,replyToPeerId:yo}=es||{},{peerId:fo,storyId:vo}=ts||{};(0,n.vJ)(()=>{(Kn?.hasEffect||ua)&&(Jt?.current&&In>=Jt.current||Ln)&&sn()},[ua,Ln,Jt,In,Kn?.hasEffect]);const Eo=function(e,t,a){const[s,o]=(0,n.J0)();return(0,n.vJ)(()=>{t||a&&!a()||(e?async function(e,t=.2){return oe||await re.promise,await oe.request({name:"detectLanguage",args:[e,t]})}(e).then(o):o(void 0))},[t,e,a]),s}(ho?.text,!(qt||Wt),aa);!function(e,t,a,s){(0,n.vJ)(()=>{if(a||s&&!s())return;const n=Boolean(e.content.text?.text.length);!function({chatId:e,id:t,isTranslatable:a,detectedLanguage:n}){const s=ce.get(e)||new ie.A(150),o=s.get(t);o&&o.detectedLanguage===n&&o.isTranslatable===a||(s.set(t,{id:t,isTranslatable:a,detectedLanguage:n}),ce.set(e,s),de(e))}({chatId:e.chatId,id:e.id,isTranslatable:n,detectedLanguage:t})},[e,t,a,s])}(e,Eo,!Wt,aa);const bo=(0,l.ZR)(e,!0),{isPending:xo,translatedText:wo}=(0,pe.A)(_t,Sn,bo?In:void 0,Yt),Co=(0,ee.A)(wo,Boolean(bo)),No=wo||Co,Io="phoneCall"===qn?.type?qn:void 0,So=(zt||ft&&ct&&Ln)&&!hs&&"thread"===Tt&&!b,Mo=zt?.isCommentsInfo&&!hs&&"thread"===Tt&&!b,ko=!pn&&!Io&&!vt&&Mt&&!hs&&!ds&&!Ms&&!xa,To=!as&&is&&(os||(Un||jn||Qn||"geo"===_n?.mediaType)&&!uo),Po=function(e,t,{poll:a,webPage:n,hasSubheader:s,isCustomShape:o,isLastInGroup:r,asForwarded:c,hasThread:d,forceSenderName:m,hasCommentCounter:u,hasCommentButton:p,hasActionButton:h,hasReactions:g,isGeoLiveActive:A,withVoiceTranscription:y,peerColorClass:f,hasOutsideReactions:v}={}){const{paidMedia:E}=(0,l.r_)(e),{photo:b,video:x}=j(E),w=(0,l.r_)(e),{photo:C=b,video:N=x,audio:I,voice:S,document:M,contact:k,location:T,invoice:P,storyData:L,giveaway:B,giveawayResults:R}=w,F=t?.hasMultipleCaptions?void 0:(0,l.r_)(t?.captionMessage||e).text,D=Boolean(e.factCheck?.text),O="video"===N?.mediaType&&N.isRound,z=e.isInvertedMedia,U=C||N&&!O||t||n,V=[i.zPk],J=L||C||N||T||P?.extendedMedia||E,H=F||"venue"===T?.mediaType||A||D,K=J&&!H,$=Boolean(e.inlineButtons),G=Boolean(e.viaBotId),_=z&&U?!(!g||v)||!!D||!(!n||!H):H;return f&&V.push(f),!J&&e.emojiOnlyCount?(V.push("emoji-only"),e.emojiOnlyCount<=i.Apc&&V.push(`emoji-only-${e.emojiOnlyCount}`)):H?V.push("text"):V.push("no-text"),Object.keys(w).length||V.push("unsupported"),h&&V.push("has-action-button"),o&&(V.push("custom-shape"),O&&V.push("round"),u&&V.push("has-comment-counter")),J&&!y?V.push("media"):N?V.push("video"):I?V.push("audio"):S?(V.push("voice"),y&&V.push("with-voice-transcription")):M?V.push("document"):k?V.push("contact"):a?V.push("poll"):B||R?V.push("giveaway"):"full"===n?.webpageType&&(V.push("web-page"),(n.photo||n.video)&&V.push("media"),n.document&&V.push("document"),n.gift&&V.push("gift")),P&&!P.extendedMedia&&V.push("invoice"),P&&P.photo&&V.push("has-photo"),L&&V.push("story"),c&&V.push("is-forwarded"),s&&V.push("has-subheader"),d&&V.push("has-replies"),g&&V.push("has-reactions"),v&&V.push("has-outside-reactions"),G&&V.push("is-via-bot"),m&&V.push("force-sender-name"),o||(V.push("has-shadow"),J&&d&&V.push("has-background"),(s||c||G||!K||m||D||y)&&V.push("has-solid-background"),D&&V.push("has-fact-check"),!r||$||!C&&K&&!p||V.push("has-appendix")),U&&z&&V.push("is-inverted-media"),_?V.push("has-footer"):V.push("no-footer"),V.join(" ")}(e,u,{poll:ha,webPage:Sa,hasSubheader:bs,isCustomShape:os,isLastInGroup:S,asForwarded:ls,hasThread:ss&&!b,forceSenderName:H,hasCommentCounter:ss&&zt.messagesCount>0,hasCommentButton:Mo,hasActionButton:ys||fs,hasReactions:is,isGeoLiveActive:"geoLive"===_n?.mediaType&&!(0,l.vz)(e),withVoiceTranscription:as,peerColorClass:(0,O.y)(Ns,Is,!0),hasOutsideReactions:To}),Lo=Po.includes("has-appendix"),Bo=(0,U.Rr)(e.emojiOnlyCount),Ro=ba?void 0:us&&Ea?u.messages.length*Ea:Ea;let Fo,Do;Fo=Io||hs?"none":!uo||Sa||Bo||go?go&&!Bo&&(vs||Sa)?"in-text":"standalone":"in-text",is?To?Do="outside":ls?(Fo="standalone",Do="inside"):Do="inside":Do="none";const Oo=os?"in-meta":"in-content";(0,q.A)(yo||Sn,Ao,Ae,e.id,ge||be),(0,W.A)(fo||Sn,vo,Ee),(0,me.A)({elementRef:Ja,chatId:Sn,isFocused:Je,focusDirection:He,noFocusHighlight:Xe,isResizingContainer:at,isJustAdded:C,isQuote:Boolean(We),scrollTargetPosition:tt});const zo=da?(0,c.em)(Ga,da):void 0,Uo=!e.senderId,jo=zo||Uo&&e.postAuthorTitle||(ls||st)&&Mn?.postAuthorTitle||void 0;(0,te.A)(Ja,R),(0,n.vJ)(()=>{const t=Ha.current;if(!t||!(0,E.Y)(t))return;jt&&Da({messageIds:[In]});let a=[];e.hasUnreadMention&&(a=[In]),u&&(a=u.messages.filter(e=>e.hasUnreadMention).map(e=>e.id)),a.length&&za({chatId:Sn,messageIds:a})},[jt,u,Sn,In,Da,e.hasUnreadMention]);const Vo=(0,n.Kr)(()=>us?$(Bn,Boolean(p),u,un):void 0,[us,Bn,p,u,un]),Jo=ls&&!os?28:0,Ho=(0,n.Kr)(()=>{let e,t,a,n=!1,s="";if(!us&&(Un||jn||Gn?.extendedMedia)){let a;if(Un||jn){const e=Un||jn;e&&!ms&&(a=(0,J.yA)({media:e,isOwn:Bn,asForwarded:ls,noAvatars:p,isMobile:un}).width)}else if(Gn?.extendedMedia&&Gn.extendedMedia.width&&Gn.extendedMedia.height){const{width:e,height:t}=Gn.extendedMedia;a=(0,D.kn)({width:e,height:t,fromOwnMessage:Bn,asForwarded:ls,noAvatars:p,isMobile:un}).width}a&&(a<J.MC&&(t=a),e=Math.max((0,J.nP)(ho?.text,So),a),!ls&&Gn?.extendedMedia&&e-a>18&&(n=!0))}else Vo&&(e=Math.max((0,J.nP)(ho?.text,So),Vo.containerStyle.width),e-Vo.containerStyle.width>18&&(n=!0));if(e)s=`width: ${e}px`,a=e+Ya;else if(Kn&&!bs){const{width:e}=(0,D.bu)(Kn,un);s=`width: ${e+Jo}px`,a=e+Ya}return{contentWidth:t,noMediaCorners:n,style:s,reactionsMaxWidth:a}},[Vo,ls,Jo,bs,Gn?.extendedMedia,us,So,un,Bn,p,Un,Kn,ho?.text,jn,ms]),{contentWidth:Ko,noMediaCorners:$o,style:Go,reactionsMaxWidth:_o}=Ho;function qo(e){if(co)return n.Ay.createElement(ze.A,{messageOrStory:co,translatedText:Yt||B?No:void 0,isForAnimation:e,focusedQuote:We,focusedQuoteOffset:Ze,emojiSize:Bo,highlight:pt,isProtected:je,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,withTranslucentThumbs:os,isInSelectMode:vt,canBeEmpty:vs,maxTimestamp:Aa,threadId:wt})}const Wo=(0,n.hb)(()=>{if(Mt)return n.Ay.createElement("div",{className:(0,g.A)("quick-reaction","no-selection",zs&&!At&&"visible"),onClick:Fs,ref:Ka},n.Ay.createElement(Ue.A,{reaction:Mt,size:Qa,availableReactions:It,observeIntersection:m}))},[At,It,Mt,Fs,zs,m]);function Qo(){const t=n.Ay.createElement(ma,{message:e,isPinned:Lt,withFullDate:st&&!Bn,noReplies:x,repliesThreadInfo:zt,outgoingStatus:Ce,signature:jo,withReactionOffset:"inside"===Do,renderQuickReactionButton:ko&&"in-meta"===Oo?Wo:void 0,availableReactions:It,isTranslated:Boolean(Yt?No:void 0),effectEmoji:ua?.emoticon,onClick:Ws,onEffectClick:lo,onTranslationClick:Qs,onOpenThread:Ys,paidMessageStars:Ro});return"inside"!==Do?t:n.Ay.createElement(Ca.A,{message:Ct,threadId:wt,metaChildren:t,observeIntersection:m,noRecentReactors:ct,tags:oa,isCurrentUserPremium:I,isAccountFrozen:xa})}function Yo(){const t=(0,l.T_)(e);if(t&&Sa)return n.Ay.createElement(Wa,{messageWebPage:t,webPage:Sa,message:e,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,noAvatars:p,canAutoLoad:Rt,canAutoPlay:Ft,asForwarded:ls,isDownloading:Bt,isProtected:je,theme:V,story:ea,isConnected:ta,lastPlaybackTimestamp:ya,backgroundEmojiId:Ns?.color?.backgroundEmojiId,shouldWarnAboutSvg:na,autoLoadFileMaxSizeMb:Ot,onAudioPlay:$s,onMediaClick:Hs,onDocumentClick:Ks,onCancelMediaTransfer:Xs})}function Zo(e){const t=n.Ay.createElement(n.Ay.Fragment,null,us&&a&&n.Ay.createElement(et,{album:u,albumLayout:Vo,observeIntersection:a,isOwn:Bn,isProtected:je,hasCustomAppendix:e,onMediaClick:Gs}),!us&&Un&&n.Ay.createElement(Qe.A,{messageText:ho?.text,photo:Un,isOwn:Bn,observeIntersection:a,noAvatars:p,canAutoLoad:Rt,uploadProgress:Pe,shouldAffectAppendix:e,isDownloading:Bt,isProtected:je,asForwarded:ls,theme:V,isMediaNsfw:fa,forcedWidth:Ko,onClick:_s,onCancelUpload:Xs}),!us&&jn&&!ms&&n.Ay.createElement(Ye.A,{video:jn,isOwn:Bn,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,forcedWidth:Ko,noAvatars:p,canAutoLoad:Rt,canAutoPlay:Ft,uploadProgress:Pe,isDownloading:Bt,isProtected:je,asForwarded:ls,isMediaNsfw:fa,lastPlaybackTimestamp:ya,onClick:qs,onCancelUpload:Xs}));return Dn?n.Ay.createElement(ga,{chatId:Sn,messageId:In,paidMedia:Dn,isOutgoing:Bn},t):t}function Xo(){return!(os&&!kn)&&(y&&(!(Un||jn||_n||Dn)||$t)||ls||kn||H)&&!ps&&!(Fn&&os)}function er(){return n.Ay.createElement("span",{className:"forward-title-container"},ls&&n.Ay.createElement(Be.A,{name:Mn?.hiddenUserName?"forward":"share-filled"}),ls&&n.Ay.createElement("span",{className:"forward-title"},Ga("ForwardedFrom")))}const tr=(0,L.A)(t=>{"suggestedMessage"===t.button.type&&("approve"!==t.button.buttonType?"decline"!==t.button.buttonType?Pa({...t,button:t.button}):ln():Ra({chatId:Sn,messageId:e.id}))}),ar=(0,L.A)(e=>{mn(e.target.value)}),nr=(0,L.A)(()=>{La({chatId:Sn,messageId:e.id,rejectComment:dn.trim()||void 0}),cn(),mn("")});function sr(t=!1,s=!1){let o;!Ss||os&&kn?Mn?.hiddenUserName?o=Mn.hiddenUserName:Qn&&se&&(o=(0,c.em)(Ga,se)):o=(0,c.em)(Ga,Ss);const r=Ss&&"emojiStatus"in Ss&&Ss.emojiStatus,d=Ss&&"isPremium"in Ss&&Ss.isPremium,u=ls&&Ss,p=le?.hasUsername;return n.Ay.createElement("div",{className:"message-title",dir:"ltr"},o||ls?n.Ay.createElement("span",{className:(0,g.A)("message-title-name-container",Mn?.hiddenUserName?"sender-hidden":"interactive",void 0),dir:"ltr"},!t&&er(),n.Ay.createElement("span",{className:"message-title-name"},Qn&&n.Ay.createElement(Be.A,{name:"play-story"}),u&&n.Ay.createElement(Ie.A,{className:"forward-avatar",peer:Ss,size:"micro"}),n.Ay.createElement("span",{className:"sender-title",onClick:js},o?(0,z.A)(o):ls?" ":void 0),!ls&&r&&n.Ay.createElement(Se.A,{documentId:r.documentId,className:"no-selection",loopLimit:i.J$1,observeIntersectionForLoading:a,observeIntersectionForPlaying:m}),!ls&&!r&&d&&n.Ay.createElement(Oe.A,null),Ss?.fakeType&&n.Ay.createElement(De.A,{fakeType:Ss.fakeType}))):le?void 0:" ",le?.hasUsername&&n.Ay.createElement("span",{className:"interactive"},n.Ay.createElement("span",{className:"via"},Ga("ViaBot")),n.Ay.createElement("span",{className:"sender-title",onClick:Vs},(0,z.A)(`@${(0,l.Kl)(le)}`))),n.Ay.createElement("div",{className:"title-spacer"}),s||p?void 0:Mn?.isLinkedChannelPost?n.Ay.createElement("span",{className:"admin-title",dir:"auto"},Ga("DiscussChannel")):e.postAuthorTitle&&dt&&!ls?n.Ay.createElement("span",{className:"admin-title",dir:"auto"},e.postAuthorTitle):!Ht||ls||kn?void 0:n.Ay.createElement("span",{className:"admin-title",dir:"auto"},Ht.customTitle||Ga(Ht.isOwner?"GroupInfo.LabelOwner":"GroupInfo.LabelAdmin")),cs&&n.Ay.createElement("span",{className:"sender-boosts","aria-hidden":!0},n.Ay.createElement(Be.A,{name:sa>1?"boosts":"boost"}),sa>1?sa:void 0))}const or=dt&&ls?e.postAuthorTitle:void 0,rr=e.suggestedPostInfo&&!e.isOutgoing&&!e.suggestedPostInfo.isAccepted&&!e.suggestedPostInfo.isRejected,ir=(0,n.Kr)(()=>{if(!e.suggestedPostInfo?.scheduleDate||!Ia)return!1;const t=(0,f.Fm)();return e.suggestedPostInfo.scheduleDate<=t+Ia},[e.suggestedPostInfo,Ia]);return n.Ay.createElement("div",{ref:Ja,id:(0,l.GZ)(e.id),className:po,"data-message-id":In,onCopy:je?v.A:void 0,onMouseDown:ks,onClick:Ts,onContextMenu:Ps,onDoubleClick:Ls,onMouseEnter:hs?Us:void 0,onMouseMove:ko?Rs:void 0,onMouseLeave:ko||hs?Ds:void 0},n.Ay.createElement("div",{ref:Ha,className:"bottom-marker","data-message-id":In,"data-last-message-id":u?u.messages[u.messages.length-1].id:void 0,"data-album-main-id":u?u.mainMessage.id:void 0,"data-has-unread-mention":e.hasUnreadMention||void 0,"data-has-unread-reaction":jt||void 0,"data-is-pinned":Lt||void 0,"data-should-update-views":void 0!==e.viewsCount}),!Le&&n.Ay.createElement("div",{className:"message-select-control no-selection"},bt&&n.Ay.createElement(Be.A,{name:"select"})),k&&n.Ay.createElement("div",{className:(0,g.A)("message-select-control group-select no-selection",xt&&"is-selected"),onClick:oo},xt&&n.Ay.createElement(Be.A,{name:"select"})),n.Ay.createElement("div",{ref:$a,className:(0,g.A)("message-content-wrapper",Po.includes("text")&&"can-select-text",Po.includes("giveaway")&&"giveaway-result-content")},n.Ay.createElement("div",{className:Po,style:Go,dir:"auto"},ls&&!ps&&n.Ay.createElement(n.Ay.Fragment,null,Xo()&&sr(),or&&n.Ay.createElement("span",{className:"admin-title",dir:"auto"},or)),function(){const t=(0,g.A)("content-inner",ls&&"forwarded-message",Es&&"forwarded-custom-shape",bs&&"with-subheader",$o&&"no-media-corners"),s=S&&(!uo||go&&!vs&&!is)&&!Mo,o=(0,g.A)("text-content","clearfix","in-text"===Fo&&"with-meta",Ce&&"with-outgoing-icon"),i=!Ms||!Bn||st;return n.Ay.createElement("div",{className:t,onDoubleClick:Bs,dir:"auto"},!ls&&Xo()&&sr(),bs&&n.Ay.createElement("div",{className:"message-subheader"},$t&&n.Ay.createElement(Ke,{topic:Kt,onClick:ro,className:"message-topic"}),Es&&n.Ay.createElement("div",{className:"forward-custom-shape-subheader"},n.Ay.createElement("div",{className:"message-title"},er()),sr(!0,!0)),Fn&&n.Ay.createElement(Te.A,{message:Ae,replyInfo:es,noUserColors:Is,isProtected:je,sender:ye,senderChat:ve,forwardSender:fe,chatTranslations:_t,isMediaNsfw:va,requestedChatTranslationLanguage:Zt,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,onClick:Js}),ns&&n.Ay.createElement(Fe,{story:Ee,sender:we,noUserColors:Is,isProtected:je,observeIntersectionForLoading:a,onClick:io})),Kn&&a&&m&&n.Ay.createElement(Ba,{message:e,observeIntersection:a,observeIntersectionForPlaying:m,shouldLoop:Dt,shouldPlayEffect:nn,withEffect:Xt,isMediaNsfw:fa,onStopEffect:on}),rs&&gt&&n.Ay.createElement(ot,{customEmojiId:gt,withEffects:Xt&&ba&&!ua,isOwn:Bn,observeIntersection:a,forceLoadPreview:Ln,messageId:In,chatId:Sn,activeEmojiInteractions:kt}),rs&&ht&&n.Ay.createElement(it,{emoji:ht,withEffects:Xt&&ba&&!ua,isOwn:Bn,observeIntersection:a,forceLoadPreview:Ln,messageId:In,chatId:Sn,activeEmojiInteractions:kt}),Xt&&ua&&!Ln&&n.Ay.createElement(la.A,{shouldPlay:nn,messageId:e.id,isMirrored:!e.isOutgoing,effect:ua,observeIntersectionForLoading:a,observeIntersectionForPlaying:m,onStop:on}),Io&&n.Ay.createElement(pa,{message:e,phoneCall:Io,chatId:Sn}),!us&&ms&&!as&&n.Ay.createElement(Na.A,{message:e,observeIntersection:a,canAutoLoad:Rt,isDownloading:Bt,onReadMedia:i?Zs:void 0,onHideTranscription:Za,isTranscriptionError:Tn,isTranscribed:Boolean(P),canTranscribe:ca&&!Ms,isTranscriptionHidden:qa,isTranscribing:T}),(Vn||Jn||as)&&n.Ay.createElement(Ne.Ay,{theme:V,message:e,origin:r.d9.Inline,uploadProgress:Pe,isSelectable:Le,isSelected:bt,noAvatars:p,onPlay:$s,onReadMedia:Jn&&i?Zs:void 0,onCancelUpload:Xs,isDownloading:Bt,isTranscribing:T,isTranscriptionHidden:qa,isTranscribed:Boolean(P),isTranscriptionError:Tn,canDownload:!je,onHideTranscription:Za,canTranscribe:ca&&!Ms}),Hn&&n.Ay.createElement(Me.A,{document:Hn,message:e,observeIntersection:a,canAutoLoad:Rt,autoLoadFileMaxSizeMb:Ot,uploadProgress:Pe,isSelectable:Le,isSelected:bt,onMediaClick:Ks,onCancelUpload:Xs,isDownloading:Bt,shouldWarnAboutSvg:na}),Qn&&!ds&&n.Ay.createElement(Ua,{message:e,isProtected:je}),ds&&n.Ay.createElement(ja,{message:e}),$n&&n.Ay.createElement(yt,{contact:$n,noUserColors:Bn}),ha&&n.Ay.createElement(wa,{message:e,poll:ha,onSendVote:eo}),Xn&&n.Ay.createElement(Va,{message:e,todoList:Xn}),(Yn||Zn)&&n.Ay.createElement(Ut,{message:e}),Wn&&n.Ay.createElement(St,{message:e,canAutoLoadMedia:Rt}),Gn?.extendedMedia&&n.Ay.createElement(Qt,{message:e,isConnected:ta}),as&&n.Ay.createElement("p",{className:(0,g.A)("transcription",!qa&&Tn&&"transcription-error"),dir:"auto"},Tn?Ga("NoWordsRecognized"):T&&P?n.Ay.createElement(ke.A,{content:P}):P),go&&function(e){const t=(0,g.A)("text-content","clearfix"),a=(0,g.A)("text-content","clearfix","in-text"===Fo&&"with-meta",Ce&&"with-outgoing-icon"),s=us||!us&&Un||!us&&jn&&!ms||!rs&&vs,o="in-text"===Fo;return n.Ay.createElement(n.Ay.Fragment,null,Yo(),uo&&!rs&&n.Ay.createElement("div",{className:t,dir:"auto"},qo(),xo&&n.Ay.createElement("div",{className:"translation-animation"},n.Ay.createElement("div",{className:"text-loading"},qo(!0))),!s&&o&&Qo()),s&&n.Ay.createElement(n.Ay.Fragment,null,Zo(e),!rs&&n.Ay.createElement("div",{className:a,dir:"auto"},vs&&n.Ay.createElement(Nt,{factCheck:Pn,isToggleDisabled:vt}),o&&Qo())))}(s),!go&&n.Ay.createElement(n.Ay.Fragment,null,Zo(s),uo&&!rs&&n.Ay.createElement("div",{className:o,dir:"auto"},qo(),xo&&n.Ay.createElement("div",{className:"translation-animation"},n.Ay.createElement("div",{className:"text-loading"},qo(!0))),vs&&n.Ay.createElement(Nt,{factCheck:Pn,isToggleDisabled:vt}),"in-text"===Fo&&Qo()),Yo()),Gn&&!Gn.extendedMedia&&n.Ay.createElement(Gt,{message:e,shouldAffectAppendix:s&&!is,isInSelectMode:vt,isSelected:bt,theme:V,forcedWidth:Ko}),_n&&n.Ay.createElement(ra,{message:e,isInSelectMode:vt,isSelected:bt,theme:V,peer:K}))}(),!hs&&"standalone"===Fo&&!ds&&Qo(),As&&n.Ay.createElement("div",{className:(0,g.A)("message-action-buttons",Re&&"message-action-buttons-shown")},Mo&&os&&n.Ay.createElement(ut,{threadInfo:zt,disabled:b,isLoading:Re,isCustomShape:!0,asActionButton:!0}),ys&&n.Ay.createElement(Ge.A,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:Ga("lng_context_forward_msg"),onClick:k?to:ao},n.Ay.createElement(Be.A,{name:"share-filled"})),fs&&n.Ay.createElement(Ge.A,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:"Focus message",onClick:Pt?no:so},n.Ay.createElement(Be.A,{name:"arrow-right"}))),Mo&&!(As&&os)&&n.Ay.createElement(ut,{threadInfo:zt,disabled:b,isLoading:Re}),Lo&&n.Ay.createElement(ia.A,{isOwn:Bn}),ko&&"in-content"===Oo&&Wo(),bn&&n.Ay.createElement(F,{position:xn,message:e,messageListType:Tt,detectedLanguage:Eo})),e.inlineButtons&&n.Ay.createElement(Vt,{message:e,onClick:Ta}),rr&&n.Ay.createElement(Vt,{message:{...e,inlineButtons:[[{type:"suggestedMessage",buttonType:"decline",text:_a("SuggestedPostDecline")},{type:"suggestedMessage",buttonType:"approve",text:_a("SuggestedPostApprove"),disabled:ir}],[{type:"suggestedMessage",buttonType:"suggestChanges",text:_a("SuggestedPostSuggestChanges")}]]},onClick:tr}),"outside"===Do&&!ds&&n.Ay.createElement(Ca.A,{message:Ct,threadId:wt,isOutside:!0,isCurrentUserPremium:I,maxWidth:_o,observeIntersection:m,noRecentReactors:ct,tags:oa,isAccountFrozen:xa})),gn&&n.Ay.createElement(Et,{isOpen:hn,anchor:gn,targetHref:An?.matches("a[href]")?An.href:void 0,message:e,album:u,messageListType:Tt,onClose:vn,onCloseAnimationEnd:En,repliesThreadInfo:zt,noReplies:x,detectedLanguage:Eo}),rn&&n.Ay.createElement(_e.A,{isOpen:rn,onClose:cn,title:_a("SuggestedPostDecline"),confirmLabel:_a("SuggestedPostDecline"),confirmHandler:nr,confirmIsDestructive:!0},n.Ay.createElement("div",{className:"decline-dialog-question"},(0,z.A)(_a("DeclinePostDialogQuestion",{sender:K?(0,c.em)(Ga,K):""},{withNodes:!0,withMarkdown:!0}))),n.Ay.createElement(qe.A,{placeholder:_a("DeclineReasonPlaceholder"),value:dn,onChange:ar,maxLength:200})))}))},54314:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(9716),l=a(4961),c=a(17712),d=a(59030),m=a(64493),u=a(22337),p=a(21849);const h=(0,n.ph)((0,s.EK)((e,{chat:t,isSavedDialog:a})=>{const n=(0,i.L8)(t.id),s=(0,r.nZ4)(e,t.id),l=n&&(0,r.mBe)(e,(0,o.e7)(t)),c=l&&(0,o.tv)(l)&&!t.isSupport,d=n&&!s&&!c&&!a,m=n?(0,o.u0)((0,r.mBe)(e,(0,o.e7)(t))):void 0;return{isPrivateChat:n,isChatWithSelf:s,isBot:c,isChannel:(0,o.WX)(t),isBasicGroup:(0,o.yn)(t),isSuperGroup:(0,o.Vs)(t),currentUserId:e.currentUserId,canDeleteForAll:d,contactName:m}})(({isOpen:e,chat:t,isSavedDialog:a,isChannel:r,isPrivateChat:i,isChatWithSelf:h,isBot:g,isBasicGroup:A,isSuperGroup:y,currentUserId:f,canDeleteForAll:v,contactName:E,onClose:b,onCloseAnimationEnd:x})=>{const{leaveChannel:w,deleteHistory:C,deleteSavedHistory:N,deleteChannel:I,deleteChatUser:S,blockUser:M,deleteChat:k}=(0,s.ko)(),T=(0,d.A)(),P=(0,o.Js)(T,t),L=(0,c.A)(()=>{C({chatId:t.id,shouldDeleteForAll:!0}),b()}),B=(0,c.A)(()=>{C({chatId:t.id,shouldDeleteForAll:!0}),M({userId:t.id}),b()}),R=(0,c.A)(()=>{a?N({chatId:t.id}):i?C({chatId:t.id,shouldDeleteForAll:!1}):A?t.isCreator?(C({chatId:t.id,shouldDeleteForAll:!0}),k({chatId:t.id})):(C({chatId:t.id,shouldDeleteForAll:!1}),S({chatId:t.id,userId:f})):!r&&!y||t.isCreator?(r||y)&&t.isCreator&&I({chatId:t.id}):w({chatId:t.id}),b()}),F=(0,c.A)(()=>{r||y?(w({chatId:t.id}),b()):A&&t.isCreator?(C({chatId:t.id,shouldDeleteForAll:!1}),S({chatId:t.id,userId:f})):R()});return n.Ay.createElement(u.A,{isOpen:e,className:"DeleteChatModal",header:n.Ay.createElement("div",{className:"modal-header",dir:T.isRtl?"rtl":void 0},n.Ay.createElement(p.A,{size:"tiny",peer:t,isSavedMessages:h}),n.Ay.createElement("h3",{className:"modal-title"},T(a?h?"ClearHistoryMyNotesTitle":"ClearHistoryTitleSingle2":r&&!t.isCreator?"LeaveChannel":r&&t.isCreator?"ChannelDelete":A||y?"Group.LeaveGroup":"DeleteChatUser"))),onClose:b,onCloseAnimationEnd:x},a?n.Ay.createElement("p",null,(0,l.A)(h?T("ClearHistoryMyNotesMessage"):T("ClearHistoryMessageSingle",P),["simple_markdown","emoji"])):r&&t.isCreator?n.Ay.createElement("p",null,(0,l.A)(T("ChatList.DeleteAndLeaveGroupConfirmation",P),["simple_markdown","emoji"])):r&&!t.isCreator||A||y?n.Ay.createElement("p",null,(0,l.A)(T("ChannelLeaveAlertWithName",P),["simple_markdown","emoji"])):n.Ay.createElement("p",null,(0,l.A)(T("ChatList.DeleteChatConfirmation",E),["simple_markdown","emoji"])),n.Ay.createElement("div",{className:"dialog-buttons-column"},g&&!a&&n.Ay.createElement(m.A,{color:"danger",className:"confirm-dialog-button",isText:!0,onClick:B},T("DeleteAndStop")),v&&n.Ay.createElement(m.A,{color:"danger",className:"confirm-dialog-button",isText:!0,onClick:L},E?(0,l.A)(T("ChatList.DeleteForEveryone",E)):T("DeleteForAll")),!i&&t.isCreator&&!a&&n.Ay.createElement(m.A,{color:"danger",className:"confirm-dialog-button",isText:!0,onClick:R},T("DeleteForAll")),n.Ay.createElement(m.A,{color:"danger",className:"confirm-dialog-button",isText:!0,onClick:i||a?R:F},T(a?"Delete":r&&!t.isCreator?"LeaveChannel":r&&t.isCreator?"Chat.Input.Delete":A||y?"Group.LeaveGroup":v?"ChatList.DeleteForCurrentUser":"Delete")),n.Ay.createElement(m.A,{className:"confirm-dialog-button",isText:!0,onClick:b},T("Cancel"))))}))},54639:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(84051),s=a(13439),o=a(37661),r=a(17712),i=a(59030),l=a(71429),c=a(24433),d=a(23174),m=a(90709),u=a(87357),p=a(43874),h=a(62587);const g="VGmPJoga",A=/#fff/gi,y=(0,n.ph)(({icon:e,theme:t})=>{const{isTouchScreen:a}=(0,p.Ay)(),s=(0,h.A)((0,m.mr)(e,"full"),!1,d.qZ.Text),o=(0,n.Kr)(()=>{if(!s)return"";const e="dark"===t?"rgb(170, 170, 170)":"rgb(112, 117, 121)",a=s.replace(A,e),n=(new DOMParser).parseFromString(a,"image/svg+xml");return n.querySelectorAll("path").forEach(t=>{t.style.stroke=e,t.style.strokeWidth="0.5px"}),`data:image/svg+xml;utf8,${n.documentElement.outerHTML}`},[s,t]);return n.Ay.createElement("i",{className:(0,u.A)("mklnEg0s","icon",!a&&g)},n.Ay.createElement("img",{src:o,alt:"",className:(0,u.A)("tT8KQwg0",!a&&g),draggable:!1}))}),f=(0,n.ph)(({bot:e,theme:t,chatId:a,threadId:d,isInSideMenu:m,canShowNew:u,onMenuOpened:p,onMenuClosed:h})=>{const{callAttachBot:g,toggleAttachBot:A}=(0,s.ko)(),f=(0,i.A)(),v=(0,n.Kr)(()=>e.icons.find(({name:e})=>"default_static"===e)?.document,[e.icons]),[E,b,x]=(0,o.A)(),[w,C]=(0,n.J0)(void 0),N=(0,r.A)(e=>{e.preventDefault();const t=e.currentTarget.getBoundingClientRect();C({x:t.right,y:t.bottom}),p(),b()}),I=(0,r.A)(()=>{g(m?{bot:e,isFromSideMenu:!0}:{bot:e,chatId:a,threadId:d})}),S=(0,r.A)(()=>{x(),h()}),M=(0,r.A)(()=>{C(void 0)}),k=(0,r.A)(()=>{A({botId:e.id,isEnabled:!1})});return n.Ay.createElement(c.A,{key:e.id,customIcon:v&&n.Ay.createElement(y,{icon:v,theme:t}),icon:v?void 0:"bots",onClick:I,onContextMenu:N},e.shortName,u&&e.isDisclaimerNeeded&&n.Ay.createElement("span",{className:"menu-item-badge"},f("New")),w&&n.Ay.createElement(l.A,{isOpen:E,positionX:"right",style:`left: ${w.x}px;top: ${w.y}px;`,className:"bot-attach-context-menu",autoClose:!0,withPortal:!0,onClose:S,onCloseAnimationEnd:M},n.Ay.createElement(c.A,{icon:"stop",destructive:!0,onClick:k},f("WebApp.RemoveBot"))))})},54699:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(30857),s=a(32625);function o(e){const t=(0,n.A)();(0,s.A)(t,e,!0)}},54769:(e,t,a)=>{"use strict";a.d(t,{B:()=>Jt});var n=a(96540),s=a(32017),o=a.n(s),r=a(92508),i=a(75304);var l=a(22199),c=a(46942),d=a.n(c),m=a(66221),u=a(57674),p=a(13439),h=a(72531),g=a(60919),A=a(87357),y=a(58324),f=a(77787);const v=()=>{const e=(0,p.mS)(),{currentUserId:t}=e,a=t?(0,g.mBe)(e,t):void 0,{scrollToBottom:s}=(0,i.R)();return n.createElement("div",{className:"global-summary-introduce"},n.createElement("h3",null,"Hi ",[a?.firstName,a?.lastName].filter(Boolean).join(" ")," 👋"),n.createElement("h3",null,"How can I help you today！"),n.createElement("div",{className:"rounded-[16px] p-[15px] grid grid-cols-2 gap-[12px] w-[743px] mt-[10px] mb-[20px] bg-[var(--color-background)]"},n.createElement("div",{className:(0,A.A)("rf6B3If7","global-summary-introduce-item"),onClick:()=>{const e=(0,y.n5)();f.zs.summary?.storeMessage(e),h.A.emit(h.E.AddSummaryMessage,e),s()}},n.createElement("div",{className:"text-[18px] font-bold mb-[10px] text-[var(--color-text)]"},"📝 AI Summary"),n.createElement("div",{className:"text-[14px] leading-[18px] text-[var(--color-text-secondary)] pr-[120px]"},"Get instant, clear takeaways during the chat")),n.createElement("div",{className:(0,A.A)("dJsvi1dH","global-summary-introduce-item"),onClick:()=>{const e=(0,y.sh)();f.zs.summary?.storeMessage(e),h.A.emit(h.E.AddSummaryMessage,e),s()}},n.createElement("div",{className:"text-[18px] font-bold mb-[10px] text-[var(--color-text)]"},"✅ Action Items"),n.createElement("div",{className:"text-[14px] leading-[18px] text-[var(--color-text-secondary)] pr-[120px]"},"Automatically capture next steps and assignments.")),n.createElement("div",{className:(0,A.A)("o3wMHYSu","global-summary-introduce-item"),onClick:()=>{const e=(0,y.w7)();f.zs.summary?.storeMessage(e),h.A.emit(h.E.AddSummaryMessage,e),s()}},n.createElement("div",{className:"text-[18px] font-bold mb-[10px] text-[var(--color-text)]"},"📚️ Translation & Grammar Check"),n.createElement("div",{className:"text-[14px] leading-[18px] text-[var(--color-text-secondary)] pr-[120px]"},"Communicate effortlessly, in any language.")),n.createElement("div",{className:(0,A.A)("rhP7CCVz","global-summary-introduce-item"),onClick:()=>{const e=(0,y.i9)();f.zs.summary?.storeMessage(e),h.A.emit(h.E.AddSummaryMessage,e),s()}},n.createElement("div",{className:"text-[18px] font-bold mb-[10px] text-[var(--color-text)]"},"🚀 Meeting Scheduler"),n.createElement("div",{className:"text-[14px] leading-[18px] text-[var(--color-text-secondary)] pr-[120px]"},"Book and organize meetings with ease."))),n.createElement("div",null,n.createElement("h5",{className:"text-[16px] font-normal mb-[16px]"}," You can also ask me like this"),n.createElement("div",{className:"flex flex-row flex-wrap gap-[12px]"},n.createElement("div",{className:"p-[8px] rounded-[16px] text-[14px] text-[var(--color-text)] bg-[var(--color-background)]"},"Summarize unread messages"),n.createElement("div",{className:"p-[8px] rounded-[16px] text-[14px] text-[var(--color-text)] bg-[var(--color-background)]"},"What are the most discussed crypto today?"),n.createElement("div",{className:"p-[8px] rounded-[16px] text-[14px] text-[var(--color-text)] bg-[var(--color-background)]"},"Help me schedule a meeting for 10 AM tomorrow"))))};var E=a(89027),b=a(48862);let x=null;const w={};function C(e){const[t,a]=(0,n.useState)(!1),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>(w[e]=e=>a(e),()=>{delete w[e]}),[e]),{isSpeaking:t,speak:(t,a={})=>{(speechSynthesis.speaking||speechSynthesis.pending)&&speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(t);Object.assign(n,a),x=e,s.current=n,n.onend=()=>{x===e&&(w[e]?.(!1),x=null)},n.onerror=()=>{x===e&&(w[e]?.(!1),x=null)},Object.entries(w).forEach(([t,a])=>a(t===e)),speechSynthesis.speak(n)},stop:()=>{x===e&&(speechSynthesis.speaking||speechSynthesis.pending)&&(speechSynthesis.cancel(),w[e]?.(!1),x=null)}}}var N=a(70809);const I=({message:e,canCopy:t,canVoice:a,canShare:s,canDelete:o,onClickShare:r,onDelete:i})=>{const{showNotification:l}=(0,p.ko)(),{isSpeaking:c,speak:d,stop:m}=C(e.id),u=(0,n.useRef)(void 0),h=(0,n.useCallback)(()=>{if(!u.current)return"";const e=u.current.closest("[data-message-container]");if(!e)return"";const t=e.querySelectorAll("[data-readable], [data-readable-inline]"),a=[];let n="";return t.forEach(e=>{const t=e.textContent?.trim();t&&(e.hasAttribute("data-readable-inline")?n=n?`${n} ${t}`:t:(n&&(a.push(n),n=""),a.push(t)))}),n&&a.push(n),a.join("\n")},[]);return n.createElement("div",{ref:u,className:"flex items-center gap-[8px] py-[6px]"},t&&n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:()=>{const e=h();e?navigator.clipboard.writeText(e).then(()=>{l({message:"Copy successful"})}).catch(()=>{l({message:"Copy failed"})}):l({message:"No text to copy"})}},n.createElement(N.Td,{size:24})),a&&n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:()=>{const e=h();if(c)m();else if(e)try{d(e)}catch(e){l({message:"语音播放失败"})}else l({message:"没有可播放的内容"})}},c?n.createElement(N.ON,{size:24}):n.createElement(N.S,{size:24})),s&&n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:r},n.createElement(N.A,{size:24})),o&&n.createElement("div",{className:"w-[20px] h-[20px] cursor-pointer",onClick:i},n.createElement(N.d7,{size:20})))};var S=a(81008),M=a(29356),k=a(99299),T=a(89116);const P=a.p+"actions.c226eff441fdabe1f4ee.png";var L=a(11553);const B=a.p+"check.0abcdabedcbc8ca0f4e8.png";var R=a(23814),F=a(8235);const D=a.p+"user.530eba74eb794d4f10aa.png",O=a.p+"write.9996af8c0d2aa6dd43cf.png";var z=a(9716);function U(e,t){const a=e=>e.toString().length<=10?1e3*e:e,n=e?new Date(a(e)):void 0,s=t?new Date(a(t)):void 0,o=new Date,r=e=>{return a=o,(t=e).getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate();var t,a},i=e=>{const t=e=>String(e).padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}`},l=e=>{return`${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${t=e.getDate(),String(t).padStart(2,"0")} / ${i(e)}`;var t};return n||s?!n&&s?`${l(s)}`:n&&!s?`${l(n)}`:n&&s?r(n)&&r(s)?`${i(n)} - ${i(s)}`:`${l(n)} - ${l(s)}`:"":""}const j=({chatId:e,classNames:t,size:a,style:s,tooltip:o})=>{const r=(0,p.mS)();let i;return i=(0,z.L8)(e)?(0,g.mBe)(r,e):(0,g.hds)(r,e),n.createElement(S.A,{style:s,key:e,className:(0,l.cn)(t,"overlay-avatar inline-block cursor-pointer"),size:a,peer:i,tooltip:o})},V=({chatId:e,topicItem:t})=>{const{openDrawer:a}=(0,T.S)();return n.createElement(k.A,null,n.createElement("ul",{className:"list-disc pl-[18px] text-[16px] list-inside"},t.map(t=>{const{content:s,relevantMessageIds:o}=t;return s?n.createElement("li",{role:"button",className:"cursor-pointer text-[15px] break-words",onClick:()=>((e,t)=>{a(T.N.OriginalMessages,{relevantMessages:[{chatId:e,messageIds:t}]})})(e,o),"data-readable":!0},s):null})))},J=({pendingItem:e})=>{const{openDrawer:t}=(0,T.S)();return n.createElement(k.A,null,n.createElement("div",{className:"flex gap-[8px] my-[4px] cursor-pointer",key:e.chatId,onClick:()=>{t(T.N.OriginalMessages,{relevantMessages:[{chatId:e.chatId,messageIds:e.relevantMessageIds}]})}},n.createElement("img",{className:"w-[18px] h-[18px] mt-[2px]",src:B,alt:""}),n.createElement("span",{className:"text-[15px]","data-readable":!0},e.summary),n.createElement(j,{size:20,chatId:e.chatId})))},H=({garBageItem:e})=>{const{chatId:t,chatRoomName:a,level:s,summary:o,relevantMessageIds:r}=e,{openDrawer:i}=(0,T.S)();if((0,z.L8)(t))return n.createElement(k.A,null,n.createElement("div",{className:"flex justify-start gap-[8px] my-[16px]",key:e.chatId,onClick:()=>{((e,t)=>{i(T.N.OriginalMessages,{relevantMessages:[{chatId:e,messageIds:t}]})})(t,r)}},n.createElement(j,{chatId:t,size:44}),n.createElement("div",null,n.createElement("p",{className:"text-[16px] font-semibold leading-[20px] mb-[4px]"},a),n.createElement("div",{className:"flex justify-start gap-[4px]"},"high"===s?n.createElement("span",{className:"text-[#FF543D] text-[14px] whitespace-nowrap"},"🔴 High-Risk"):n.createElement("span",{className:"text-[#FF9B05] text-[14px] whitespace-nowrap"},"🟡 Low-Risk"),n.createElement("span",{className:"text-[14px] text-[var(--color-text-secondary)]"},o)))))},K=({summaryInfo:e})=>n.createElement(k.A,null,n.createElement("div",{className:"mb-[6px]"},n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[52px] h-[52px] rounded-full ml-[-60px]",src:F,alt:""}),n.createElement("div",null,n.createElement("p",{className:"text-[16px] font-semibold"},"TelyAI"),e?.summaryEndTime?n.createElement("p",{className:"text-[14px] text-[#A8A6AC]"},(0,l.Ey)(e.summaryEndTime)):null)),n.createElement("p",{className:"text-[22px] font-bold mb-[16px]","data-readable":!0},"Chat Summary"),n.createElement("div",{className:"flex items-center gap-[20px]"},n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:L,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"mr-[4px] font-bold text-[14px]","data-readable":!0,"data-readable-inline":!0},"Time range:"),n.createElement("span",{"data-readable":!0,"data-readable-inline":!0},U(e?.summaryStartTime,e?.summaryEndTime)))),n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:R,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"font-bold text-[14px]","data-readable":!0,"data-readable-inline":!0},"Messages:"),e?.summaryMessageCount?n.createElement("span",{"data-readable":!0,"data-readable-inline":!0},e?.summaryMessageCount):null))),e?.summaryChatIds?n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:D,alt:""}),n.createElement("span",{className:"font-bold text-[14px]"},"Groups/friends: "),n.createElement("div",{className:"flex items-center"},e.summaryChatIds.slice(0,10).map((t,a)=>n.createElement(j,{style:{zIndex:`${String(e.summaryChatIds.length-a)};`},chatId:t,size:24,classNames:"summary-avatar-group !border-solid-[2px] !border-white ml-[-4px]",key:t})),e.summaryChatIds.length>10?n.createElement("div",{className:"w-[24px] h-[24px] rounded-full bg-[#979797] text-[12px] whitespace-nowrap flex items-center justify-center"},e.summaryChatIds.length-10,"+"):null)):null)),$=({chatId:e,handleIgnore:t})=>n.createElement("div",{className:"flex items-center gap-[4px] cursor-pointer transition-colors duration-200 text-[14px] text-[var(--color-text)]",onClick:()=>t(e)},n.createElement(M.A,{name:"eye-crossed"}),n.createElement("span",{className:"font-semibold"},"Ignore this chat")),G=({messageId:e,summaryInfo:t,summaryTopic:a,pendingMatters:s,deleteMessage:o})=>{const{ignored_summary_chat_ids:r}=b.Hk.telegptSettings,i=(0,b.rB)(r),[l,c]=(0,n.useState)(i),d=(0,n.useCallback)(e=>{const t=[...new Set([...l,e])],a=(0,b.EM)(t);c(t),b.Hk.setSettingOption({ignored_summary_chat_ids:a},e=>{0===e.code&&(0,p.ko)().showNotification({message:"This chat will no longer be included in future summaries."})})},[l]);return n.createElement("div",{className:"w-max-[693px] rounded-[10px] pl-[82px] pr-[25px] pt-[20px] pb-[25px] bg-[var(--color-background)]","data-message-container":!0},t&&n.createElement(K,{summaryInfo:t}),a.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px] mb-[16px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Key Topics"),n.createElement("img",{className:"w-[16px] h-[16px]",src:O,alt:""})),a.map((e,t)=>n.createElement("div",null,n.createElement("div",{className:"flex items-center justify-between gap-[8px]"},l.includes(e.chatId)?n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("p",{className:"text-[16px] font-bold","data-readable":!0},t+1,".",e.chatRoomName),n.createElement(j,{size:20,chatId:e.chatId})):n.createElement(E.A,{className:"room-info-popover",placement:"top",content:n.createElement($,{chatId:e.chatId,handleIgnore:d})},n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("p",{className:"text-[16px] font-bold","data-readable":!0},t+1,".",e.chatRoomName),n.createElement(j,{size:20,chatId:e.chatId})))),n.createElement("ul",{className:"list-disc pl-[2px] text-[16px] list-inside"},e.mainTopics.length>0&&n.createElement("li",null,n.createElement("span",{className:"text-[16px] font-bold","data-readable":!0},"Key Points"),n.createElement(V,{chatId:e.chatId,topicItem:e.mainTopics})),e.customTopics.length>0&&e.customTopics.map(t=>n.createElement("li",null,n.createElement("span",{className:"text-[16px] font-bold","data-readable":!0},t.topicName),n.createElement(V,{chatId:e.chatId,topicItem:t.summaryItems}))))))),s.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px] mb-[16px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Actions Items"),n.createElement("img",{className:"w-[16px] h-[16px]",src:P,alt:""})),s.map(e=>n.createElement(J,{pendingItem:e}))),n.createElement(I,{canCopy:!0,canVoice:!0,canDelete:!0,onDelete:o,message:{id:e}}))},_=({messageId:e,summaryInfo:t,summaryTopic:a,pendingMatters:s,garbageMessage:o,deleteMessage:r})=>n.createElement(n.Fragment,null,a.length||s.length?n.createElement(G,{messageId:e,summaryInfo:t,summaryTopic:a,pendingMatters:s,deleteMessage:r}):null,o&&o.length>0&&n.createElement("div",{className:"w-max-[693px] rounded-[10px] bg-[var(--color-background)] pl-[82px] pr-[25px] pt-[20px] pb-[25px] mt-[10px]"},n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[52px] h-[52px] rounded-full ml-[-60px]",src:F,alt:""}),n.createElement("div",null,n.createElement("p",{className:"text-[16px] font-semibold"},"TelyAI"),t?.summaryEndTime?n.createElement("p",{className:"text-[14px] text-[#A8A6AC]"},(0,l.Ey)(t.summaryEndTime)):null)),n.createElement("p",{className:"text-[22px] font-bold mb-[16px]"},"Spam Filtering"),n.createElement("div",{className:"flex items-center gap-[20px]"},n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:L,alt:""}),n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"mr-[4px]"},"Time range:"),U(t?.summaryStartTime,t?.summaryEndTime)))),o.map(e=>n.createElement(H,{garBageItem:e})))),q=e=>{const{message:t,deleteMessage:a}=e,[s,o]=(0,n.useState)(null),[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),u=(0,n.useCallback)(e=>{const t=JSON.parse(e),{mainTopic:a=[],pendingMatters:n,garbageMessage:s,customTopic:r=[],summaryInfo:l}=t;n&&i(n),s&&c(s),l&&o(l);const d=function(e,t){const a=new Map;if(e.length>0)for(const t of e){const e=t.chatId;a.has(e)?a.get(e).mainTopics.push(...t.summaryItems||[]):a.set(e,{chatId:t.chatId,chatRoomName:t.chatRoomName,mainTopics:t.summaryItems||[],customTopics:[]})}if(t.length>0)for(const e of t){const t=e.chatId;a.has(t)?a.get(t).customTopics.push({topicName:e.topicName,summaryItems:e.summaryItems||[]}):a.set(t,{chatId:e.chatId,chatRoomName:e.chatRoomName,mainTopics:[],customTopics:[{topicName:e.topicName,summaryItems:e.summaryItems||[]}]})}return Array.from(a.values())}(a,r);m(d)},[]);return(0,n.useEffect)(()=>{try{u(t.content)}catch(e){console.error(e)}},[t,u]),s?n.createElement(_,{messageId:t.id,summaryInfo:s,summaryTopic:d,pendingMatters:r,garbageMessage:l,deleteMessage:a}):null};var W=a(92629),Q=a(39875),Y=a(5131),Z=a(52014),X=a(38961),ee=a(21468),te=a(74353),ae=a.n(te),ne=a(85325),se=a(80395),oe=a(95533),re=a(71847);const ie={"Pacific/Midway":"Midway Island, Samoa","Pacific/Honolulu":"Hawaii","America/Juneau":"Alaska","America/Boise":"Mountain Time","America/Dawson":"Dawson, Yukon","America/Chihuahua":"Chihuahua, La Paz, Mazatlan","America/Phoenix":"Arizona","America/Chicago":"Central Time","America/Regina":"Saskatchewan","America/Mexico_City":"Guadalajara, Mexico City, Monterrey","America/Belize":"Central America","America/Detroit":"Eastern Time","America/Bogota":"Bogota, Lima, Quito","America/Caracas":"Caracas, La Paz","America/Santiago":"Santiago","America/St_Johns":"Newfoundland and Labrador","America/Sao_Paulo":"Brasilia","America/Tijuana":"Tijuana","America/Montevideo":"Montevideo","America/Argentina/Buenos_Aires":"Buenos Aires, Georgetown","America/Godthab":"Greenland","America/Los_Angeles":"Pacific Time","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Islands",GMT:"UTC","Europe/London":"Edinburgh, London","Europe/Dublin":"Dublin","Europe/Lisbon":"Lisbon","Africa/Casablanca":"Casablanca, Monrovia","Atlantic/Canary":"Canary Islands","Europe/Belgrade":"Belgrade, Bratislava, Budapest, Ljubljana, Prague","Europe/Sarajevo":"Sarajevo, Skopje, Warsaw, Zagreb","Europe/Brussels":"Brussels, Copenhagen, Madrid, Paris","Europe/Amsterdam":"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Africa/Algiers":"West Central Africa","Europe/Bucharest":"Bucharest","Africa/Cairo":"Cairo","Europe/Helsinki":"Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","Europe/Athens":"Athens","Asia/Jerusalem":"Jerusalem","Africa/Harare":"Harare, Pretoria","Europe/Moscow":"Istanbul, Minsk, Moscow, St. Petersburg, Volgograd","Asia/Kuwait":"Kuwait, Riyadh","Africa/Nairobi":"Nairobi","Asia/Baghdad":"Baghdad","Asia/Tehran":"Tehran","Asia/Dubai":"Abu Dhabi, Muscat","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Kabul":"Kabul","Asia/Yekaterinburg":"Ekaterinburg","Asia/Karachi":"Islamabad, Karachi, Tashkent","Asia/Kolkata":"Chennai, Kolkata, Mumbai, New Delhi","Asia/Kathmandu":"Kathmandu","Asia/Dhaka":"Astana, Dhaka","Asia/Colombo":"Sri Jayawardenepura","Asia/Almaty":"Almaty, Novosibirsk","Asia/Rangoon":"Yangon Rangoon","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Shanghai":"Beijing, Chongqing, Hong Kong SAR, Urumqi","Asia/Kuala_Lumpur":"Kuala Lumpur, Singapore","Asia/Taipei":"Taipei","Australia/Perth":"Perth","Asia/Irkutsk":"Irkutsk, Ulaanbaatar","Asia/Seoul":"Seoul","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Australia/Darwin":"Darwin","Australia/Adelaide":"Adelaide","Australia/Sydney":"Canberra, Melbourne, Sydney","Australia/Brisbane":"Brisbane","Australia/Hobart":"Hobart","Asia/Vladivostok":"Vladivostok","Pacific/Guam":"Guam, Port Moresby","Asia/Magadan":"Magadan, Solomon Islands, New Caledonia","Asia/Kamchatka":"Kamchatka, Marshall Islands","Pacific/Fiji":"Fiji Islands","Pacific/Auckland":"Auckland, Wellington","Pacific/Tongatapu":"Nuku'alofa"};const le=a.p+"default-avatar.37bfde946e6829d2e5a8.png",ce=a.p+"google-meet.e4ce31c66f07075d2a36.png",de=e=>{const[t,a]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),{lable:r}=e;return(0,n.useEffect)(()=>{switch(r){case"title":o(O),a("Title");break;case"time":o(L),a("Time");break;case"guests":o(D),a("Guests");break;case"meet":o(ce),a("Meeting link")}},[r]),n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("img",{src:s,alt:"",className:"w-[16px] h-[16px]"}),n.createElement("span",{className:"text-[14px] font-semibold"},t))},me=({message:e})=>n.createElement("div",{className:"text-[12px] leading-[18px] text-red-400"},e),ue=({email:e,onDelete:t})=>n.createElement("div",{className:"flex items-center gap-[8px] py-[10px]"},n.createElement("img",{className:"w-[24px] h-[24px] rounded-full",src:le,alt:""}),n.createElement("span",{className:"text-[14px] text-black overflow-hidden text-ellipsis"},e),n.createElement("div",{className:"ml-auto cursor-pointer w-[20px] h-[20px] rounded-full text-[#979797] bg-[#F3F3F3] flex items-center justify-center",onClick:()=>t(e)},n.createElement(N.US,{size:14}))),pe=({message:e})=>{const t=(0,n.useCallback)(e=>e&&e<ae()().startOf("day"),[]),{options:a,parseTimezone:s}=function(){const e=ie,t=(0,n.useMemo)(()=>Object.entries(e).map(e=>{let t,a,n,s;try{const o=oe.A.now().goto(e[0]),r=o.isDST()?"daylight":"standard",i=o.timezone(),l=(0,re.A)(e[0]),c=null==(a=null==(t=null==l?void 0:l[0])?void 0:t[r])?void 0:a.abbr,d=null==(s=null==(n=null==l?void 0:l[0])?void 0:n[r])?void 0:s.name,m=60*i.current.offset,u=`${Math.floor(m/60)}:${m%60==0?"00":Math.abs(m%60)}`,p=`(GMT${u.includes("-")?u:`+${u}`}) ${e[1]}`;return{value:i.name,label:p,offset:i.current.offset,abbrev:c,altName:d}}catch(e){return null}}).filter(Boolean).sort((e,t)=>e.offset-t.offset),[e]);return{options:t,parseTimezone:e=>{return"string"==typeof e?t.find(t=>t.value===e)||-1!==e.indexOf("/")&&(e=>{let a,n,s;try{s=oe.A.now().goto(e)}catch(e){s=oe.A.now().goto("GMT")}return null==(n=null==(a=t.filter(e=>e.offset===s.timezone().current.offset).map(e=>{let t=0;return s.timezones[e.value.toLowerCase()]&&Boolean(s.timezones[e.value.toLowerCase()].dst)===s.timezone().hasDst?(-1!==e.value.toLowerCase().indexOf(s.tz.substring(s.tz.indexOf("/")+1))&&(t+=8),-1!==e.label.toLowerCase().indexOf(s.tz.substring(s.tz.indexOf("/")+1))&&(t+=4),-1!==e.value.toLowerCase().indexOf(s.tz.substring(0,s.tz.indexOf("/")))&&(t+=2),t+=1):"GMT"===e.value&&(t+=1),{tz:e,score:t}}).sort((e,t)=>t.score-e.score))?void 0:a[0])?void 0:n.tz})(e):"object"!=typeof(a=e)||Array.isArray(a)||null===a||e.label?e:t.find(t=>t.value===e.value);var a}}}(),{RangePicker:o}=W.A,[r,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[d,m]=(0,n.useState)(""),[u,A]=(0,n.useState)(""),[y,f]=(0,n.useState)([]),[v,E]=(0,n.useState)(""),[b,x]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[N,I]=(0,n.useState)(!1),[S,M]=(0,n.useState)(Intl.DateTimeFormat().resolvedOptions().timeZone),k=(0,p.mS)(),T=(0,g.SJA)(k);(0,n.useEffect)(()=>{console.log("selectedTimezone",S)},[S]);const P=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),L=(0,n.useCallback)(e=>{i(e.target.value),e.target.value&&C("")},[]),B=(0,n.useCallback)(e=>{M(e)},[]),R=(0,n.useCallback)((e,t)=>{e&&(console.log("From: ",e[0],", to: ",e[1]),console.log("From: ",t[0],", to: ",t[1]),m(t[0]),A(t[1]),x(""))},[]),F=(0,n.useCallback)(e=>{c(e.target.value)},[]),D=(0,n.useCallback)(e=>{const t=e.target.value;t?P(t)?(f(e=>[...e,t]),c(""),E("")):E("Please enter the correct email address"):c("")},[]),O=(0,n.useCallback)(e=>{const t=e.currentTarget.value;t?P(t)?(f(e=>[...e,t]),c(""),E("")):E("Please enter the correct email address"):c("")},[]),z=(0,n.useCallback)(e=>{f(t=>t.filter(t=>t!==e))},[]),U=(0,n.useCallback)(()=>{if(N)return;if(!r)return void C("Please enter the title");if(!d||!u)return void x("Please select the date");if(!y.length)return void E("Please enter the email");I(!0);const t=(0,se.IM)(),a=[];y.length&&y.forEach(e=>{a.push({email:e})}),(0,ne.FG)({title:r,startDate:new Date(d),endDate:new Date(u),selectedTimezone:S,emails:y,googleToken:t?.accessToken}).then(t=>{h.A.emit(h.E.CreateCalendarSuccess,{message:e,response:t})}).catch(e=>{console.log(e)}).finally(()=>{I(!1)})},[y,u,N,e,S,d,r]);return n.createElement(Q.Ay,{theme:{algorithm:"dark"===T?Y.A.darkAlgorithm:Y.A.defaultAlgorithm}},n.createElement("div",{className:"google-event-create-message px-[12px]"},n.createElement("div",{className:"p-[10px] border border-solid border-[#D9D9D9] rounded-[16px] w-[326px] bg-white dark:bg-[#292929] dark:border-[#292929]"},n.createElement("span",{className:"text-[14px] font-semibold mb-[16px]"},"Please tell me the event details. "),n.createElement("div",{className:"flex flex-col gap-[8px] mb-[12px]"},n.createElement(de,{lable:"title"}),n.createElement(Z.A,{value:r,onChange:L}),w&&n.createElement(me,{message:w})),n.createElement("div",{className:"flex flex-col gap-[8px] mb-[12px]"},n.createElement(de,{lable:"time"}),n.createElement("div",{className:"flex flex-col items-center gap-[8px]"},n.createElement(o,{disabledDate:t,presets:[{label:n.createElement("span",{"aria-label":"Current Time to End of Day"},"Now ~ EOD"),value:()=>[ae()(),ae()().endOf("day")]}],showTime:!0,format:"YYYY/MM/DD HH:mm",onChange:R}),n.createElement(X.A,{className:"w-full",placeholder:"Please select",onChange:B,options:a,value:s(S)})),b&&n.createElement(me,{message:b})),n.createElement("div",{className:"flex flex-col gap-[8px] mb-[12px]"},n.createElement(de,{lable:"guests"}),n.createElement(Z.A,{value:l,onChange:F,onBlur:D,onPressEnter:O}),v&&n.createElement(me,{message:v}),y.length>0&&y.map(e=>n.createElement(ue,{email:e,key:e,onDelete:z}))),n.createElement(ee.Ay,{type:"primary",className:"!bg-[#8C42F0] w-full",htmlType:"submit",onClick:U,loading:N,disabled:N},"Confirm"))))};var he=a(10777),ge=a(60371),Ae=a(11780);function ye({capturing:e=!1,children:t,captureCallback:a=()=>{}}){const s=(0,n.useRef)(void 0),o=(0,p.mS)(),{currentUserId:r}=o,i=(0,g.mBe)(o,r);return(0,n.useEffect)(()=>{s.current&&setTimeout(()=>{(0,he.ZR)(s.current,{width:330,pixelRatio:2,quality:1}).then(e=>{const t=new File([e],"telegpt.org.png",{type:"image/png"});globalThis?.p__handleFileSelect?.([t],!0),a()})},100)},[e,a]),e?n.createElement("div",{className:"fixed top-0 left-0 translate-x-[-1000000px] translate-y-[-100000px]"},n.createElement("div",{ref:s,className:"relative w-[330px] box-content overflow-hidden bg-white text-black"},n.createElement("div",{className:"absolute top-0 left-0 w-full blur-xl pointer-events-none"},n.createElement("img",{src:Ae,alt:"",className:"w-full"})),n.createElement("div",{className:"relative py-3 px-4 flex flex-col gap-2"},n.createElement("div",{className:"flex flex-row justify-end items-center gap-2 text-xs text-[#979797]"},n.createElement(S.A,{className:"w-[20px] h-[20px]",peer:i}),n.createElement("span",null,i?.firstName),n.createElement("span",null,i?.lastName)),n.createElement("div",{className:"text-[20px] font-bold"},"Meeting Invitation"),t),n.createElement("section",{className:"flex flex-row gap-1 items-center justify-center py-2 text-xs bg-[#F7FAFF]"},n.createElement("img",{className:"inline w-[20px] h-[20px] rounded-full",src:F,alt:"Serena"}),"Powered by",n.createElement("span",{className:"text-[#2996FF]"},"telepgt.org")))):null}const fe=({message:e})=>{const[t,a]=(0,n.useState)(!1),s=JSON.parse(e.content),{eventData:o,chatId:r}=s;if(!o)return null;const i=n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(de,{lable:"title","data-readable":!0}),n.createElement("span",{className:"text-[14px]","data-readable":!0},o?.summary)),n.createElement("div",null,n.createElement(de,{lable:"time","data-readable":!0}),n.createElement("div",{className:"flex flex-col"},n.createElement("span",{className:"text-[14px]","data-readable":!0},(0,ge.bK)(o.start.dateTime,o.end.dateTime)),n.createElement("span",{className:"text-[14px] text-[#979797]","data-readable":!0},(0,ge.Pt)(o.start.timeZone)))),o?.attendees?.length>0&&n.createElement("div",null,n.createElement(de,{lable:"guests","data-readable":!0}),o?.attendees?.map(e=>n.createElement("div",{className:"text-[14px]",key:e.email,"data-readable":!0},e.email))),n.createElement("div",null,n.createElement(de,{lable:"meet","data-readable":!0}),n.createElement("span",{className:"text-[14px]","data-readable":!0},o?.hangoutLink)));return n.createElement("div",{className:"px-[12px]"},n.createElement("div",{className:"flex-col gap-[12px] p-[10px] border border-solid  border-[#D9D9D9] rounded-[16px] w-[326px] bg-white dark:bg-[#292929] dark:border-[#292929]","data-message-container":!0},n.createElement("div",{className:"text-[14px] font-semibold","data-readable":!0},"Event details"),i,n.createElement(I,{canCopy:!0,canVoice:!0,canShare:!0,message:e,onClickShare:()=>{(0,ge.Qg)(o,r)}})),n.createElement(ye,{capturing:t,captureCallback:()=>{a(!1)}},i))};var ve=a(69036),Ee=a(96454);const be=a.p+"google.5f147c0a9dbb2590b20d.png",xe=e=>{const{deleteMessage:t}=e,a=(0,n.useCallback)(()=>{Ee.cp?window.electron.googleLogin().then(e=>{const a={isLoggedIn:!0,accessToken:e.access_token,idToken:e.id_token,grantedScopes:e.scope,expiresAt:e.expiry_date};(0,se.UA)(a),h.A.emit(h.E.GoogleAuthSuccess),t()}).catch(e=>{console.error("Google login failed:",e)}):(0,ne.XL)().then(e=>{console.log(e),h.A.emit(h.E.GoogleAuthSuccess),t()}).catch(e=>{console.error("Google login failed:",e),ve.Ay.info("Google login failed")})},[t]);return n.createElement("div",{className:"px-[12px]"},n.createElement("div",{className:"p-[10px] border-solid border-[#D9D9D9] rounded-[16px] w-[316px] bg-white dark:bg-[#292929]"},n.createElement("span",null,"This service requires access to your Google Calendar."),n.createElement(ee.Ay,{className:"w-auto mt-[4px] flex items-center cursor-pointer hover:opacity-80 hover:!bg-[#F3F3F3]  gap-[8px] bg-[#F3F3F3] px-[12px] py-[10px] rounded-[6px] dark:!bg-[#383838] h-[36px] border-none",onClick:a},n.createElement("img",{src:be,alt:"",className:"w-[16px] h-[16px]"}),n.createElement("span",{className:"text-[var(--color-text)]"},"Google authorization"))))};var we=a(90709),Ce=a(95815),Ne=a(5556);const Ie=({message:e})=>{const{chatId:t,messageId:a,emailConfirmed:s,calendlyConfirmed:o,suggestType:r}=JSON.parse(e.content)||{},[i,l]=(0,n.useState)(s),[c,d]=(0,n.useState)(o),{emails:m,calendlyUrls:u}=Ne.s.informations,h=(0,p.mS)();if(("both"!==r||u.length||m.length)&&("email"!==r||m.length)&&("time"!==r||u.length))return n.createElement("div",{className:"px-[12px] text-[15px]"},n.createElement("div",{className:"p-[10px] border border-solid border-[#D9D9D9] rounded-[16px] w-full bg-white dark:bg-[#292929] dark:border-[#292929]"},n.createElement("p",null,"🔔 ",(()=>{const e=(0,g.mBe)(h,t);return e?(0,we.Yg)(e):""})()," would like to schedule a meeting with you. Would you like to send your calendar link or email address?"),n.createElement("ul",{className:"list-disc pl-[18px] mb-[4px]"},("both"===r||"time"===r)&&u.length>0&&n.createElement(n.Fragment,null,n.createElement("b",{className:"ml-[-18px]"},"Calendars:"),u.map(o=>n.createElement("li",{className:"word-break break-all"},n.createElement("span",null,n.createElement("span",{className:"text-[12px] mr-[4px]"},"📅"),o),!c&&n.createElement("span",{className:"mx-[2px] font-semibold cursor-pointer ml-[4px] outline-none border-none focus:outline-none focus:ring-0 underline decoration-2",onClick:()=>(n=>{c||((0,p.ko)().sendMessage({messageList:{chatId:t,threadId:"-1",type:"thread"},text:n}),d(!0),e.content=JSON.stringify({chatId:t,messageId:a,emailConfirmed:s,calendlyConfirmed:!0,suggestType:r}),f.zs?.message?.storeMessage((0,Ce.Jr)(t,[e])[0]))})(o)},"Send👉")))),("both"===r||"email"===r)&&m.length>0&&n.createElement(n.Fragment,null,n.createElement("b",{className:"ml-[-18px]"},"Emails:"),m.map(s=>n.createElement("li",{className:"word-break break-all"},n.createElement("span",null,n.createElement("span",{className:"text-[12px] mr-[4px]"},"✉️"),s),!i&&n.createElement("span",{className:"mx-[2px] font-semibold cursor-pointer ml-[4px] outline-none border-none focus:outline-none focus:ring-0 underline decoration-2",onClick:()=>(n=>{i||((0,p.ko)().sendMessage({messageList:{chatId:t,threadId:"-1",type:"thread"},text:n}),l(!0),e.content=JSON.stringify({chatId:t,messageId:a,emailConfirmed:!0,calendlyConfirmed:o,suggestType:r}),f.zs?.message?.storeMessage((0,Ce.Jr)(t,[e])[0]))})(s)},"Send👉")))))))};var Se=a(8063);const Me=({message:e})=>{const{chatId:t,messageId:a,isConfirmed:s}=JSON.parse(e.content)||{},[o,r]=(0,n.useState)(s),i=()=>{const n=Se.Ay.create({chatId:t}),s=(0,p.mS)(),o=(0,g.O5q)(s,t,Number(a));n.handleTargetMessage(o),r(!0),e.content=JSON.stringify({chatId:t,messageId:a,isConfirmed:!0}),f.zs?.message?.storeMessage((0,Ce.Jr)(t,[e])[0])};return n.createElement("div",{className:"px-[12px] text-[15px]"},n.createElement("div",{className:"p-[10px] border border-solid border-[#D9D9D9] rounded-[16px] w-full bg-white dark:bg-[#292929] dark:border-[#292929]"},n.createElement("div",null,"🔔 I noticed that"," ",(()=>{const e=(0,p.mS)(),a=(0,g.mBe)(e,t);return a?(0,we.Yg)(a):""})()," ","wants to schedule a meeting with you. Would you like me to help set it up?"),n.createElement("div",null,"👉 Click",n.createElement("span",{className:d()("cursor-pointer mx-[2px] outline-none border-none focus:outline-none focus:ring-0",{"underline decoration-2":!o}),onClick:async()=>{if(o)return;if(!t||!a)return;const e=(0,se.IM)();e&&await(0,se.G6)(e)?i():(0,ne.wG)({onOk:()=>{i()}})}},'"Yes"'),"to proceed, or ignore this message.")))},ke=({message:e})=>{const{content:t}=e,{chatId:a,startTime:s,duration:o,email:r,timeZone:i,isConfirmed:l}=JSON.parse(t||"{}")||{},[c,m]=(0,n.useState)(l),u=({token:e,start:t,end:n,email:s})=>{(0,p.ko)().sendMessage({messageList:{chatId:a,threadId:"-1",type:"thread"},text:Se.oS}),(0,ne.FG)({startDate:new Date(t),endDate:new Date(n),selectedTimezone:i,emails:s,googleToken:e}).then(e=>{e&&(0,ge.Qg)(e,a)})};return n.createElement("div",{className:"px-[12px] text-[14px]"},n.createElement("div",{className:"p-[10px] border border-solid border-[#D9D9D9] rounded-[16px] w-[326px] bg-white dark:bg-[#292929] dark:border-[#292929]"},n.createElement("div",null,"📅 I’ve checked your calendar. Here are some available time slots in the coming days:"),n.createElement("ul",{className:"list-decimal pl-[18px] mb-[4px]"},s&&s.map((t,l)=>n.createElement("li",{key:l},n.createElement("div",{className:d()("font-semibold cursor-pointer bg-transparent border-none p-0",{"underline decoration-2":!c}),onClick:()=>(async t=>{if(!c){if(r.length>0&&i&&o){const e=(0,se.IM)(),a={token:e?.accessToken||"",start:t,end:new Date(new Date(t).getTime()+1e3*o).toISOString(),email:r};e&&await(0,se.G6)(e)?u(a):(0,ne.wG)({onOk:e=>{a.token=e,u(a)}})}else{const e=Se.Ay.create({chatId:a}),n={startTime:[t],email:r,timeZone:i,duration:o,timeConfirmed:!0},s=(0,se.IM)();s&&await(0,se.G6)(s)?e.timeConfirmCallback(n):(0,ne.wG)({onOk:()=>{e.timeConfirmCallback(n)}})}e.content=JSON.stringify({chatId:a,startTime:s,email:r,isConfirmed:!0}),f.zs?.message?.storeMessage((0,Ce.Jr)(a,[e])[0]),m(!0)}})(t)},function(e,t=1800){const a=new Date(e),n=new Date(new Date(e).getTime()+1e3*t),s=new Date;s.setHours(0,0,0,0);const o=new Date(s);o.setDate(o.getDate()+1);const r=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),i=r.format(a),l=r.format(n);let c="";const d=new Date(a);if(d.setHours(0,0,0,0),d.getTime()===s.getTime())c="Today";else if(d.getTime()===o.getTime())c="Tomorrow";else{const e=Math.floor((d.getTime()-s.getTime())/864e5);c=e>=0&&e<7?new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(a):`${new Intl.DateTimeFormat("en-US",{month:"long"}).format(a)} ${a.getDate()}`}return`${c} ${i}–${l}`}(t,o))))),n.createElement("div",null,n.createElement("span",null,"Which time would you like to choose? Or 📆 "),n.createElement("a",{href:"https://calendar.google.com/",target:"_blank",className:"underline decoration-2 font-semibold",rel:"noreferrer"},"View Full Calendar"))))};var Te=a(31511);const Pe=({message:e})=>{const[t,a]=(0,n.useState)([]),s=(0,p.mS)(),o=(0,Te.A)();return(0,n.useEffect)(()=>{try{const t=JSON.parse(e.content);a(t||[])}catch(e){console.log(e)}},[e]),0===t.length?n.createElement("span",null,"未找到相关群组"):n.createElement("div",{className:"p-[10px] mx-[22px] rounded-[16px] border-[1px] border-[#D9D9D9] bg-white dark:bg-[#292929]"},n.createElement("div",{className:"flex flex-col gap-[12px]"},t.splice(0,10).map(e=>n.createElement(n.Fragment,null,(e=>{if((0,z.L8)(e))return null;let t,a;const r=(0,g.hds)(s,e);return r?(t=r?.membersCount,a=(0,we.Js)(o,r),n.createElement("div",{className:"flex flex-row items-center gap-[8px] cursor-pointer px-[12px] py-[8px] rounded-[12px] hover:bg-[#D9D9D9]",onClick:()=>{(e=>{(0,g.hds)(s,e)&&(0,p.ko)().openChat({id:e})})(e)}},n.createElement(S.A,{key:e,className:"overlay-avatar inline-block cursor-pointer",size:44,peer:r}),n.createElement("div",{className:"flex flex-col justify-center gap-[4px]"},n.createElement("span",{className:"text-[15px] font-semibold text-black leading-[18px]"},a),n.createElement("span",{className:"text-[14px] text-[#5E6272] leading-[18px]"},t," Members")))):null})(e)))))},Le=a.p+"actions.c00bd19afbf93bdda994.png",Be=()=>n.createElement("div",{className:"rounded-[16px] w-[488px] bg-[var(--color-background)]"},n.createElement("img",{src:Le,alt:"",className:"w-[490px] h-[259px]"}),n.createElement("div",{className:"py-[14px] px-[12px]"},n.createElement("h3",null,"✅  Action Items"),n.createElement("p",{className:"text-[15px] text-[var(--color-text)]"},"During message summarization, the AI assistant automatically identifies actionable tasks and follow-ups from your chats. No need to take notes—your to-do list is generated in real time, helping you stay organized and never miss a beat."))),Re=a.p+"schedule-meeting.84e2b3273614570bd641.png",Fe="text-[15px] text-[var(--color-text)]",De=()=>n.createElement("div",{className:"rounded-[16px] w-[488px] bg-[var(--color-background)]"},n.createElement("img",{src:Re,alt:"",className:"w-[490px] h-[259px]"}),n.createElement("div",{className:"py-[14px] px-[12px]"},n.createElement("h3",null,"🔥 Meeting Scheduler 🔥"),n.createElement("ul",{className:"pl-[24px] list-disc"},n.createElement("li",{className:Fe},"Automatic Detection & Smart Coordination The AI assistant instantly recognizes meeting-related messages, asks for time, participants, and other details—all through natural chat flow."),n.createElement("li",{className:Fe},"Instant Invite Delivery Once confirmed, it auto-generates and sends calendar invites, keeping everyone in sync without ever leaving the conversation.")))),Oe=a.p+"summarize.9cfdcaba3ebe53c6ba08.png",ze="text-[15px] text-[var(--color-text)]",Ue=()=>n.createElement("div",{className:"rounded-[16px] w-[488px] bg-[var(--color-background)]"},n.createElement("img",{src:Oe,alt:"",className:"w-[490px] h-[259px]"}),n.createElement("div",{className:"py-[14px] px-[12px]"},n.createElement("h3",null,"🔥 Message Summarization 🔥"),n.createElement("p",{className:ze},"The Message Summarization feature uses AI to automatically extract key content from IM conversations and periodically generate summary reports. It helps users efficiently grasp important group updates, improve information retrieval, and avoid missing critical messages."),n.createElement("h3",null,"🔑 Key Capabilities:"),n.createElement("ul",{className:"pl-[24px] list-disc"},n.createElement("li",{className:ze},"🔍 Automatically extracts topics, key figures, time references, and user insights from chat messages"),n.createElement("li",{className:ze},"🧠 Intelligently identifies and groups content by chat, ensuring clarity and structure"),n.createElement("li",{className:ze},"🕒 Automatically generates summary reports during active hours, adapting to peak and off-peak periods"),n.createElement("li",{className:ze},"🎯 Supports personalized summary customization, allowing users to focus on specific chats or content types")))),je="text-[15px] text-[var(--color-text)]",Ve=()=>n.createElement("div",{className:"rounded-[16px] w-[488px] bg-[var(--color-background)]"},n.createElement("img",{src:Oe,alt:"",className:"w-[490px] h-[259px]"}),n.createElement("div",{className:"py-[14px] px-[12px]"},n.createElement("h3",null,"🔥 Real-time Translation 🔥"),n.createElement("ul",{className:"pl-[24px] list-disc"},n.createElement("li",{className:je},n.createElement("b",null,"Instant Translation While Typing:")," Automatically detects the source language and translates it into the target language in real time."),n.createElement("li",{className:je},n.createElement("b",null,"Multi-language Support:")," Covers major languages, including English, Chinese, Japanese, French, German, Spanish, and more."),n.createElement("li",{className:je},n.createElement("b",null,"Context-aware Translation:")," Enhances accuracy and fluency by leveraging message context and chat history.")),n.createElement("h3",null,"🔥 Grammar & Style Check 🔥"),n.createElement("ul",{className:"pl-[24px] list-disc"},n.createElement("li",{className:je},n.createElement("b",null,"Automatic Error Detection:")," Identifies spelling, grammar, and sentence structure issues."),n.createElement("li",{className:je},n.createElement("b",null,"Expression Optimization:")," Suggests more natural and professional phrasing suitable for business or formal messages."),n.createElement("li",{className:je},n.createElement("b",null,"Multilingual Correction:")," Supports grammar checks not only in English but also in other languages, such as Chinese.")))),Je=({chatId:e,classNames:t,size:a,style:s})=>{if(!e)return null;const o=(0,p.mS)();let r;return r=(0,z.L8)(e)?(0,g.mBe)(o,e):(0,g.hds)(o,e),n.createElement(S.A,{style:s,key:e,className:(0,l.cn)(t,"overlay-avatar inline-block cursor-pointer"),size:a,peer:r})},He=({pendingItem:e})=>n.createElement(k.A,null,n.createElement("div",{className:"flex gap-[8px] my-[4px] cursor-pointer"},n.createElement("img",{className:"w-[18px] h-[18px] mt-[2px]",src:B,alt:""}),n.createElement("span",{className:"text-[15px]","data-readable":!0},e.summary))),Ke=({messageId:e})=>n.createElement(I,{canCopy:!0,canVoice:!0,message:{id:e}}),$e=({summaryInfo:e})=>n.createElement(k.A,null,n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px] mb-[16px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Actions Items"),n.createElement("img",{className:"w-[16px] h-[16px]",src:P,alt:""})),n.createElement("div",{className:"flex items-center gap-[20px]"},n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:L,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"mr-[4px] font-bold text-[14px]","data-readable-inline":!0},"Time:"),e?.summaryTime?n.createElement("p",{className:"text-[14px] text-[#A8A6AC]","data-readable-inline":!0},(0,l.Ey)(e.summaryTime)):null)),n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:R,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"font-bold text-[14px]","data-readable-inline":!0},"Messages:"),e?.messageCount?n.createElement("span",{"data-readable-inline":!0},e?.messageCount):null))),e?.userIds?n.createElement("div",{className:"flex items-center gap-[8px] mb-[18px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:D,alt:""}),n.createElement("span",{className:"font-bold text-[14px]","data-readable":!0},"Groups/friends: "),n.createElement("div",{className:"flex items-center"},e.userIds.slice(0,5).map((t,a)=>n.createElement(Je,{style:{zIndex:`${String(e.userIds.length-a)};`},chatId:t,size:24,classNames:"summary-avatar-group !border-solid-[2px] !border-white ml-[-4px]",key:t})),e.userIds.length>10?n.createElement("div",{className:"w-[24px] h-[24px] rounded-full bg-[#979797] text-[12px] whitespace-nowrap flex items-center justify-center","data-readable":!0},e.userIds.length-10,"+"):null)):null)),Ge=e=>{const{message:t}=e,[a,s]=(0,n.useState)(null),[o,r]=(0,n.useState)([]),i=(0,n.useCallback)(e=>{const t=JSON.parse(e),{pendingMatters:a,summaryInfo:n}=t;a&&r(a),n&&s(n)},[]);return(0,n.useEffect)(()=>{try{i(t.content)}catch(e){console.error(e)}},[t,i]),a?n.createElement("div",{className:"px-[12px] w-full"},o.length?n.createElement("div",{className:"mx-auto rounded-[10px] px-3 py-2 bg-white dark:bg-[#292929]","data-message-container":!0},a&&n.createElement($e,{summaryInfo:a}),o.length>0&&n.createElement("div",null,o.map(e=>n.createElement(He,{pendingItem:e}))),n.createElement(Ke,{messageId:t.id})):null):null},_e="h-[40px] w-fit px-[12px] py-[8px] rounded-[6px] bg-[#F5F1FF] text-[14px] text-[var(--color-text)] dark:bg-[#383838]",qe=({message:e})=>{const{content:t}=e,a=(0,p.mS)(),s=(0,g.hds)(a,t),o=()=>{h.A.emit(h.E.RoomAIActions,{chatId:t,action:"new-feature"})};return n.createElement("div",{className:"px-[12px]"},n.createElement("div",{className:"px-3 py-2 rounded-xl text-[var(--color-text)] bg-white dark:bg-[#292929]"},n.createElement("p",{className:"text-[14px]"},"👋 Hi, welcome to 【",s?.title,"】! I’m TelyAI 🤖, your smart assistant here."),n.createElement("div",{className:"mt-[0.5rem]"},n.createElement("h3",{className:"text-[14px] font-semibold"},"🚀 Here’s what I can help you with:"),n.createElement("div",{className:"flex flex-col gap-[8px] mt-[0.5rem]"},n.createElement("div",{className:_e,onClick:()=>{h.A.emit(h.E.RoomAIActions,{chatId:t,action:"summary"})}},"🧠 Chat Summary"),n.createElement("div",{className:_e,onClick:()=>{h.A.emit(h.E.RoomAIActions,{chatId:t,action:"schedule-meet"})}},"📅 Schedule Meeting"),n.createElement("div",{className:_e,onClick:()=>{h.A.emit(h.E.RoomAIActions,{chatId:t,action:"todo"})}},"✅ Action Items"),n.createElement("div",{className:_e,onClick:o},"🔍 Group Search"),n.createElement("div",{className:_e,onClick:o},"👮 User Portrait"),n.createElement("div",{className:_e,onClick:o},"🎯 Project Tracking"))),n.createElement("div",{className:"mt-[0.5rem]"},n.createElement("h3",{className:"text-[14px] font-semibold"},"📍 You can ask me things like:"),n.createElement("ul",{className:"list-disc pl-[24px] text-[14px] text-[var(--color-text)]"},n.createElement("li",null,"What was discussed in the group yesterday?"),n.createElement("li",null,"Has there been any mention of client feedback in the group?")))))};var We=a(23174),Qe=a(65240),Ye=a(96456),Ze=a(89925),Xe=a(7971);function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},et.apply(null,arguments)}const tt=e=>{const t=(0,p.mS)(),a=(0,g.SJA)(t);let s,o,r={},i=!1,l="loading";try{r=JSON.parse(e?.message.content),s=r?.message;try{o=JSON.parse(r?.summaryInfo)}catch(e){}i=r?.isAuto,l=r?.status}catch(e){}const c=!!s&&(0,we.Ie)(s),d=s?.content?.voice?(0,Qe.lz)(a,s?.content?.voice,1,c):void 0,m=s?.content?.photo?(0,Ye.A)(s?.content?.photo?(0,we.rI)(s?.content?.photo,"inline"):void 0,!1,We.qZ.BlobUrl):void 0,u=s?.content?.photo?.blobUrl||m,h=s?.content?.photo?.thumbnail?.width,y=Boolean(h);function f(){if(!s)return"";const{webPage:e,photo:t,document:a,audio:n,voice:o,video:r}=s?.content,i=(0,Xe.Ah)(s?.content?.text?.text),l=!!a&&(0,Xe.ER)(a?.mimeType);return e||i?"website page":t||l?"image":a?"file":n?"audio":o?"voice":r?"video":""}function v(){const{openMediaViewer:e}=(0,p.ko)();e({chatId:s?.chatId,threadId:-1,messageId:s?.id,origin:Ze.TQ.Inline,withDynamicLoading:!0})}return n.createElement("div",{className:"flex flex-col gap-2 px-3 text-[14px]","data-message-container":!0},!i&&n.createElement("div",{className:"text-right"},n.createElement(at,null,"Summarize this ",f())),function(){if(!s)return"";const{photo:e,document:t,audio:a,voice:o,video:r}=s?.content,l=(0,p.mS)(),c=(0,g.Pn$)(l,s),m=(0,Xe.Ah)(s?.content?.text?.text);return c||m?n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)] break-all"},c?c?.url:s?.content?.text?.text)):e?u&&n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("img",{src:u,className:(0,A.A)("full-media cursor-pointer",y&&"with-blurred-bg"),alt:"",style:{width:`${h??0}px`},onClick:v})):t?n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)] break-all"},s?.content.document?.fileName)):a?n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)] break-all"},s?.content.audio?.fileName)):o?n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)] break-all"},s?.content?.voice&&n.createElement("div",{className:"waveform-wrapper"},n.createElement("div",{className:"waveform",draggable:!1},n.createElement("canvas",{ref:d}))),s?.content?.audio&&n.createElement("p",{className:"title",dir:"auto",title:s?.content?.audio?.title},s?.content?.audio?.title))):r?n.createElement("div",{className:(0,A.A)("flex",i?"":"justify-end")},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)] break-all"},s?.content.video?.fileName)):void 0}(),"loading"===l?n.createElement(zt,null):"error"===l?n.createElement(st,{content:f()||"",message:e.message}):function(){if(!s)return"";const{webPage:t,photo:a,document:r}=s?.content,l=(0,Xe.Ah)(s?.content?.text?.text),c=!!r&&(0,Xe.ER)(r?.mimeType);return t||l?o?.title?n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)]"},n.createElement("div",{className:"font-[600] text-[16px]","data-readable":!0},'Summary of the Article: "',o?.title,'"'),n.createElement("div",{className:"flex flex-col gap-[6px] mt-3"},n.createElement("div",{className:"font-[600]","data-readable":!0},"Key Highlights:"),n.createElement("div",{className:"flex flex-col"},o?.highlights?.map((e,t)=>n.createElement("div",{className:"flex flex-col",key:t},n.createElement("div",{className:"flex flex-row items-center flex-wrap"},n.createElement("span",{className:"mr-[24px]","data-readable":!0},t+1,". ",e?.title)),n.createElement("ul",{className:"list-disc list-inside ml-3 mb-1"},e?.content?.map((e,t)=>n.createElement("li",{className:"break-word",key:t,"data-readable":!0},e))))))),n.createElement(I,{canCopy:!0,canVoice:!0,message:e.message})):n.createElement(st,{content:"website page",message:e.message}):a||c?n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] text-[var(--color-text)] p-3 text-[14px]"},i?n.createElement("div",{className:"font-[600]","data-readable":!0},"Image summarize"):n.createElement("div",{className:"flex items-center gap-2","data-readable":!0},n.createElement("img",{src:F,className:"w-[18px] h-[18px]"}),"TelyAI"),n.createElement("div",{className:"flex flex-col gap-[6px] mt-2","data-readable":!0},o?.text),n.createElement(I,{canCopy:!0,canVoice:!0,message:e.message})):n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)]"},n.createElement("div",{className:"font-[600] text-[16px]","data-readable":!0},"Key Highlights:"),n.createElement("div",{className:"flex flex-col mt-2"},Array.isArray(o)&&o?.map((e,t)=>n.createElement("div",{className:"flex flex-col",key:t},n.createElement("div",{className:"flex flex-row items-center flex-wrap"},n.createElement("span",{className:"mr-[24px] font-[600]","data-readable":!0},e?.title)),n.createElement("ul",{className:"list-disc list-inside ml-3 mb-1"},e?.content?.map((e,t)=>n.createElement("li",{className:"break-word",key:t,"data-readable":!0},e)))))),n.createElement(I,{canCopy:!0,canVoice:!0,message:e.message}))}())},at=({children:e})=>n.createElement("div",{className:"bg-[var(--color-ai-room-bubble-bg)] py-2 px-3 rounded-t-[16px] rounded-bl-[16px] text-right inline-flex relative"},e,n.createElement("div",{className:"absolute bottom-[-3px] right-[-9px] text-[var(--color-ai-room-bubble-bg)]"},n.createElement(nt,null))),nt=e=>n.createElement("svg",et({width:9,height:20},e),n.createElement("defs",null,n.createElement("filter",{id:"a",width:"200%",height:"141.2%",x:"-50%",y:"-14.7%",filterUnits:"objectBoundingBox"},n.createElement("feOffset",{dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:1}),n.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0"}))),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{fill:"currentColor",d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 0 1 6 17z",filter:"url(#a)"}),n.createElement("path",{fill:"currentColor",d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 0 1 6 17z"}))),st=({content:e,message:t})=>n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] p-3 text-[var(--color-text)]"},n.createElement("span",{"data-readable":!0},"I couldn't find any accessible content from the ",e," you provided. It appears the search query didn't return any results. Could you please paste the text you want summarized? That way, I can give you a clear and accurate summary!"),n.createElement(I,{canCopy:!0,canVoice:!0,message:t})),ot=e=>{const{message:t}=e;let a={},s=0,o="loading",r=[];try{a=JSON.parse(t.content),s=a?.messageId,o=a?.status;try{r=JSON.parse(a?.replys?.replace(/'/g,'"')?.replace(/,\s+/g,","))}catch(e){}}catch(e){}const[i,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{l(a?.disabled)},[t]),n.createElement("div",{className:"rounded-[16px] bg-[var(--color-background)] text-[var(--color-text)] mx-2 p-3 w-full text-[14px]"},n.createElement("div",{className:"font-[600]"},"You were mentioned:"),n.createElement("div",null,'"',a?.content,'"'),"loading"==o?n.createElement(zt,null):"error"===o?n.createElement("div",{className:"rounded-[16px] bg-[#FFF9F9] text-[#000] p-3 text-[14px] border-[1px] border-[#FFC7C7]"},a?.errorMsg):n.createElement(n.Fragment,null,n.createElement("div",null,"Here are a few reply suggestions for you 👇"),n.createElement("div",{className:"flex flex-col gap-[6px] mt-2"},r?.map((e,o)=>n.createElement("div",{className:(0,A.A)("bg-[var(--color-ai-room-mention-reply-bg)] rounded-[6px] p-[6px] ",i?"cursor-not-allowed opacity-50":"cursor-pointer hover:opacity-80"),key:o,onClick:()=>function(e){if(i)return;const n=(0,p.mS)(),{saveReplyDraft:o,sendMessage:r,clearDraft:c}=(0,p.ko)(),d=(0,g.meB)(n);if(d&&s){const n=d.id,i=-1;o({chatId:n,threadId:i,draft:{replyInfo:{type:"message",replyToMsgId:s,replyToPeerId:void 0}},isLocalOnly:!0}),r({messageList:{chatId:n,threadId:i,type:"thread"},text:e}),c({chatId:n,isLocalOnly:!0}),l(!0),f.zs.message?.storeMessage({...t,chatId:n,timestamp:(new Date).getTime(),content:JSON.stringify({disabled:!0,...a})})}}(e)},'"',e,'"')))))};var rt=a(17712);const it=e=>{const t=(0,p.mS)(),{openUserPortrait:a}=(0,p.ko)(),s=e?.userId,o=s?(0,g.mBe)(t,s):void 0,r=(0,rt.A)(()=>{a({userId:s})});return n.createElement("div",{className:"flex flex-col gap-2 px-3 text-[14px]"},n.createElement("div",{className:"rounded-[16px] bg-[var(--color-ai-room-media-bg)] text-[var(--color-text)] p-3 text-[14px]"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("img",{src:F,className:"w-[18px] h-[18px]"}),"TelyAI"),o?n.createElement("div",{onClick:r,className:"flex flex-row items-center gap-2 mt-2 cursor-pointer hover:opacity-80"},n.createElement(S.A,{peer:o,size:"small"}),`${o?.firstName||""} ${o?.lastName||""}`," 's Portrait"):n.createElement("div",null,"Couldn't find the user.")))},lt=({chatId:e,classNames:t,size:a,style:s})=>{if(!e)return null;const o=(0,p.mS)();let r;return r=(0,z.L8)(e)?(0,g.mBe)(o,e):(0,g.hds)(o,e),n.createElement(S.A,{style:s,key:e,className:(0,l.cn)(t,"overlay-avatar inline-block cursor-pointer"),size:a,peer:r})},ct=({topicItem:e,index:t})=>{const{title:a,summaryItems:s}=e;return s.length&&a?n.createElement(k.A,null,n.createElement("div",null,n.createElement("div",{className:"flex flex-row items-center flex-wrap"},n.createElement("span",{className:"text-[16px] font-bold mr-[24px]","data-readable":!0},t+1,". ",a)),n.createElement("ul",{className:"list-disc pl-[2px] text-[16px] list-inside"},s.map(e=>{const{content:t}=e;return t?n.createElement("li",{role:"button",className:"cursor-pointer text-[15px] break-words","data-readable":!0},t):null})))):null},dt=({pendingItem:e})=>n.createElement(k.A,null,n.createElement("div",{className:"flex gap-[8px] my-[4px] cursor-pointer"},n.createElement("img",{className:"w-[18px] h-[18px] mt-[2px]",src:B,alt:""}),n.createElement("span",{className:"text-[15px]","data-readable":!0},e.summary))),mt=({summaryInfo:e,title:t=n.createElement(n.Fragment,null,"Chat Summary")})=>n.createElement(k.A,null,n.createElement("div",null,n.createElement("p",{className:"text-[22px] font-bold mb-[16px]","data-readable":!0},t),n.createElement("div",{className:"flex items-center flex-wrap"},n.createElement("p",{className:"flex items-center gap-[8px] pr-[20px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:L,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"mr-[4px] font-bold text-[14px]","data-readable-inline":!0},"Time:"),e?.summaryTime?n.createElement("p",{className:"text-[14px] text-[#A8A6AC] whitespace-nowrap","data-readable-inline":!0},(0,l.Ey)(e.summaryTime)):null)),n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:R,alt:""}),n.createElement("div",{className:"flex items-center gap-[4px]"},n.createElement("span",{className:"font-bold text-[14px]","data-readable":!0,"data-readable-inline":!0},"Messages:"),e?.messageCount?n.createElement("span",{"data-readable":!0,"data-readable-inline":!0},e?.messageCount):null))),e?.userIds?n.createElement("div",{className:"flex items-center gap-[8px] mb-[18px]"},n.createElement("img",{className:"w-[16px] h-[16px]",src:D,alt:""}),n.createElement("span",{className:"font-bold text-[14px]"},"Main speakers: "),n.createElement("div",{className:"flex items-center"},e.userIds.slice(0,5).map((t,a)=>n.createElement(lt,{style:{zIndex:`${String(e.userIds.length-a)};`},chatId:t,size:24,classNames:"summary-avatar-group !border-solid-[2px] !border-white ml-[-4px]",key:t})),e.userIds.length>10?n.createElement("div",{className:"w-[24px] h-[24px] rounded-full bg-[#979797] text-[12px] whitespace-nowrap flex items-center justify-center"},e.userIds.length-10,"+"):null)):null)),ut=({messageId:e,summaryInfo:t,mainTopic:a,pendingMatters:s})=>{const[o,r]=(0,n.useState)(!1),i=(0,p.mS)(),{chatId:l}=(0,g.Xf0)(i)||{},c=(0,g.hds)(i,l);return n.createElement("div",{className:"mx-auto rounded-[10px] px-3 py-2 dark:bg-[#292929] bg-white","data-message-container":!0},t&&n.createElement(mt,{summaryInfo:t}),a.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px] mb-[16px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Key Topics"),n.createElement("img",{className:"w-[16px] h-[16px]",src:O,alt:""})),a.map((e,t)=>n.createElement(ct,{topicItem:e,index:t}))),s.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px] mb-[16px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Actions Items"),n.createElement("img",{className:"w-[16px] h-[16px]",src:P,alt:""})),s.map(e=>n.createElement(dt,{pendingItem:e}))),n.createElement(I,{canCopy:!0,canVoice:!0,canShare:!0,message:{id:e},onClickShare:()=>{r(!0)}}),n.createElement(pt,{capturing:o,captureCallback:()=>{r(!1)}},t&&n.createElement(mt,{summaryInfo:t,title:n.createElement(n.Fragment,null,"Chat Summary",n.createElement("span",{className:"ml-2 text-xs text-[#979797]"},"[",c?.title,"]"))}),a.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Key Topics"),n.createElement("img",{className:"w-[16px] h-[16px]",src:O,alt:""})),a.map((e,t)=>n.createElement(ct,{topicItem:e,index:t}))),s.length>0&&n.createElement("div",null,n.createElement("p",{className:"flex items-center gap-[8px]"},n.createElement("span",{className:"text-[18px] font-bold","data-readable":!0},"Actions Items"),n.createElement("img",{className:"w-[16px] h-[16px]",src:P,alt:""})),s.map(e=>n.createElement(dt,{pendingItem:e})))))};function pt({capturing:e=!1,children:t,captureCallback:a=()=>{}}){const s=(0,n.useRef)(void 0),o=(0,p.mS)(),{currentUserId:r}=o,i=(0,g.mBe)(o,r);return(0,n.useEffect)(()=>{s.current&&setTimeout(()=>{(0,he.ZR)(s.current,{pixelRatio:2,quality:1}).then(e=>{const t=new File([e],"telegpt.org.png",{type:"image/png"});globalThis?.p__handleFileSelect?.([t],!0),a()})},100)},[e,a]),e?n.createElement("div",{className:"fixed top-0 left-0 translate-x-[-1000000px] translate-y-[-100000px]"},n.createElement("div",{ref:s,className:"relative w-[390px] box-content overflow-hidden bg-white text-black"},n.createElement("div",{className:"absolute top-0 left-0 w-full blur-xl pointer-events-none"},n.createElement("img",{src:Ae,alt:"",className:"w-full"})),n.createElement("div",{className:"relative py-3 px-4 flex flex-col gap-2"},n.createElement("div",{className:"flex flex-row justify-end items-center gap-2 text-xs text-[#979797]"},n.createElement(S.A,{className:"w-[20px] h-[20px]",peer:i}),n.createElement("span",null,i?.firstName),n.createElement("span",null,i?.lastName)),t),n.createElement("section",{className:"flex flex-row gap-1 items-center justify-center py-2 text-xs bg-[#F7FAFF]"},n.createElement("img",{className:"inline w-[20px] h-[20px] rounded-full",src:F,alt:"Serena"}),"Powered by",n.createElement("span",{className:"text-[#2996FF]"},"telepgt.org")))):null}const ht=e=>{const{message:t}=e,[a,s]=(0,n.useState)(null),[o,r]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),c=(0,n.useCallback)(e=>{const t=JSON.parse(e),{mainTopic:a,pendingMatters:n,summaryInfo:o}=t;a&&r(a),n&&l(n),o&&s(o)},[]);return(0,n.useEffect)(()=>{try{c(t.content)}catch(e){console.error(e)}},[t,c]),a?n.createElement("div",{className:"px-[12px] w-full"},o.length||i.length?n.createElement(ut,{messageId:t.id,summaryInfo:a,mainTopic:o,pendingMatters:i}):null):null},gt=()=>{const{openPayPackageModal:e}=(0,p.ko)();return n.createElement("div",{className:"upgrade-tip-message"},n.createElement("div",{className:"bg-[var(--color-background)] flex items-center justify-between gap-[8px] relative rounded-[10px] p-[20px]"},n.createElement("div",{className:"headerBadge"}),n.createElement("div",{className:"flex flex-col flex-1"},n.createElement("span",{className:"text-[16px] font-bold text-[var(--color-text)]"},"Upgrade your plan"),n.createElement("span",{className:"text-[14px]  text-[var(--color-text-secondary)]"},"You have reached the free usage limit. You are welcome to try TelyAI Pro for a higher usage limit.")),n.createElement("div",{className:"flex items-center justify-center gap-[8px] bg-[var(--color-primary)] text-white text-[14px] w-[95px] h-[40px] rounded-[12px] cursor-pointer",onClick:()=>{e()}},n.createElement("span",null,"Upgrade"),n.createElement(M.A,{name:"arrow-right"}))))};var At=a(75606),yt=a(9626);const ft=({chatId:e,handleIgnore:t})=>n.createElement("div",{className:"flex items-center gap-[4px] cursor-pointer transition-colors duration-200 text-[14px] text-[var(--color-text)]",onClick:()=>t(e)},n.createElement(M.A,{name:"eye-crossed"}),n.createElement("span",{className:"font-semibold"},"Ignore this chat")),vt=e=>{const{message:t,deleteMessage:a}=e,[s,o]=(0,n.useState)([]),{openDrawer:r}=(0,T.S)(),{ignored_urgent_chat_ids:i}=b.Hk.telegptSettings,c=(0,b.rB)(i),[d,m]=(0,n.useState)(c);(0,n.useEffect)(()=>{const e=JSON.parse(t.content);e&&"object"==typeof e&&e.length>0&&o(e)},[t]);const u=(0,n.useCallback)(e=>{const t=[...new Set([...d,e])],a=(0,b.EM)(t);m(t),b.Hk.setSettingOption({ignored_urgent_chat_ids:a},e=>{0===e.code&&(0,p.ko)().showNotification({message:"This chat will no longer be included in urgent messages."})})},[d]);return s&&0!==s.length?n.createElement("div",{className:"w-max-[693px] rounded-[10px] bg-[var(--color-urgent-message-bg)] pl-[82px] pr-[25px] pt-[20px] pb-[25px] border-[1px] border-[#FFC7C7] dark:border-none","data-message-container":!0},n.createElement("div",{className:"flex items-center gap-[8px]"},n.createElement("img",{className:"w-[52px] h-[52px] rounded-full ml-[-60px]",src:F,alt:""}),n.createElement("div",null,n.createElement("p",{className:"text-[16px] font-semibold"},"TelyAI"),t.createdAt&&n.createElement("p",{className:"text-[14px] text-[#A8A6AC]"},(0,l.Ey)(new Date(t.createdAt).getTime())))),n.createElement("div",{className:"flex flex-row items-center gap-[8px] mb-[10px]"},n.createElement("img",{src:yt,alt:"",className:"w-[26px] h-[26px]"}),n.createElement("span",{className:"text-[20px] text-[#FF543D] font-bold","data-readable":!0},"Urgent Alert")),n.createElement("ul",{className:"list-disc pl-[24px]"},s.map(e=>n.createElement("li",{className:"flex flex-row items-top gap-[8px]",key:e.messageId},n.createElement("span",{className:"text-[15px] break-words","data-readable":!0,onClick:()=>(e=>{r(T.N.OriginalMessages,{relevantMessages:[{chatId:e.chatId,messageIds:[e.messageId]}]})})(e)},e.content),d.includes(e.chatId)?n.createElement(At.A,{size:20,chatId:e.chatId}):n.createElement(E.A,{className:"room-info-popover",placement:"top",content:n.createElement(ft,{chatId:e.chatId,handleIgnore:u})},n.createElement("span",null,n.createElement(At.A,{size:20,chatId:e.chatId})))))),n.createElement(I,{canCopy:!0,canVoice:!0,canDelete:!0,onDelete:a,message:t})):null},Et=({message:e})=>{const[t,a]=(0,n.useState)([]),s=(0,p.mS)();return(0,n.useEffect)(()=>{try{const t=JSON.parse(e.content);a(t||[])}catch(e){console.log(e)}},[e]),0===t.length?null:n.createElement("div",{className:"p-[10px] mx-[22px] rounded-[16px] border-[1px] border-[#D9D9D9] bg-white dark:bg-[#292929]"},n.createElement("div",{className:"flex flex-col gap-[12px]"},t.splice(0,10).map(e=>n.createElement(n.Fragment,null,(e=>{if(!(0,z.L8)(e))return null;let t;const a=(0,g.mBe)(s,e);return a?(t=(0,we.Yg)(a),n.createElement("div",{className:"flex flex-row items-center gap-[8px] cursor-pointer px-[12px] py-[8px] rounded-[12px] hover:bg-[#D9D9D9]",onClick:()=>{(e=>{(0,g.hds)(s,e)&&(0,p.ko)().openChat({id:e})})(e)}},n.createElement(S.A,{key:e,className:"overlay-avatar inline-block cursor-pointer",size:44,peer:a}),n.createElement("div",{className:"flex flex-col justify-center gap-[4px]"},n.createElement("span",{className:"text-[15px] font-semibold text-black leading-[18px]"},t)))):null})(e)))))};var bt=a(2391),xt=a(93250);function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},wt.apply(null,arguments)}function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ct.apply(null,arguments)}const Nt={code:function({node:e,inline:t,className:a,children:s,...o}){return t?n.createElement("code",wt({className:`${a} text-sm bg-zinc-100 dark:bg-zinc-800 py-0.5 px-1 rounded-md`},o),s):n.createElement("div",{className:"not-prose flex flex-col"},n.createElement("pre",wt({},o,{className:"text-sm w-full overflow-x-auto dark:bg-zinc-900 p-4 border border-zinc-200 dark:border-zinc-700 rounded-xl dark:text-zinc-50 text-zinc-900"}),n.createElement("code",{className:"whitespace-pre-wrap break-words"},s)))},pre:({children:e})=>n.createElement(n.Fragment,null,e),ol:({node:e,children:t,...a})=>n.createElement("ol",Ct({className:"list-decimal list-outside ml-4"},a),t),li:({node:e,children:t,...a})=>n.createElement("li",Ct({className:"py-1"},a),t),ul:({node:e,children:t,...a})=>n.createElement("ul",Ct({className:"list-decimal list-outside ml-4"},a),t),strong:({node:e,children:t,...a})=>n.createElement("span",Ct({className:"font-semibold"},a),t),a:({node:e,children:t,...a})=>n.createElement("a",{className:"text-blue-500 hover:underline",target:"_blank",rel:"noreferrer"},t),h1:({node:e,children:t,...a})=>n.createElement("h1",Ct({className:"text-3xl font-semibold mt-6 mb-2"},a),t),h2:({node:e,children:t,...a})=>n.createElement("h2",Ct({className:"text-2xl font-semibold mt-6 mb-2"},a),t),h3:({node:e,children:t,...a})=>n.createElement("h3",Ct({className:"text-xl font-semibold mt-6 mb-2"},a),t),h4:({node:e,children:t,...a})=>n.createElement("h4",Ct({className:"text-lg font-semibold mt-6 mb-2"},a),t),h5:({node:e,children:t,...a})=>n.createElement("h5",Ct({className:"text-base font-semibold mt-6 mb-2"},a),t),h6:({node:e,children:t,...a})=>n.createElement("h6",Ct({className:"text-sm font-semibold mt-6 mb-2"},a),t)},It=[xt.A],St=({children:e})=>n.createElement(bt.oz,{remarkPlugins:It,components:Nt},e),Mt=(0,n.memo)(St,(e,t)=>e.children===t.children);var kt=a(17965),Tt=a.n(kt);const Pt=({message:e})=>{const{showNotification:t}=(0,p.ko)(),{isSpeaking:a,speak:s,stop:o}=C(e.id);return n.createElement("div",{className:"message-actions flex items-center gap-[8px]"},n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:()=>{Tt()(e.content),t({message:"TextCopied"})}},n.createElement(N.Td,{size:24})),a?n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:o},n.createElement(N.ON,{size:24})):n.createElement("div",{className:"w-[24px] h-[24px] text-[#676B74] cursor-pointer",onClick:()=>{const t=e.content;a?o():s(t)}},n.createElement(N.S,{size:24})))};function Lt({isLoading:e,reasoning:t}){const[a,s]=(0,n.useState)(!0);return n.createElement("div",{className:"flex flex-col"},e?n.createElement("div",{className:"flex flex-row gap-2 items-center"},n.createElement("div",{className:"font-medium"},"Reasoning"),n.createElement("div",{className:"animate-spin"},n.createElement(N.hz,null))):n.createElement("div",{className:"flex flex-row gap-2 items-center"},n.createElement("div",{className:"font-medium"},"Reasoned for a few seconds"),n.createElement("div",{className:"cursor-pointer",onClick:()=>{s(!a)}},n.createElement(N.D3,null))),n.createElement(m.N,{initial:!1},a&&n.createElement(r.P.div,{key:"content",initial:"collapsed",animate:"expanded",exit:"collapsed",variants:{collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:"0.5rem"}},transition:{duration:.2,ease:"easeInOut"},className:"pl-4 text-zinc-600 dark:text-zinc-400 border-l flex flex-col gap-4 overflow-hidden"},n.createElement(Mt,null,t))))}const Bt=({attachment:e,isUploading:t=!1})=>{const{name:a,url:s,contentType:o}=e;return n.createElement("div",{className:"flex flex-col gap-2"},n.createElement("div",{className:"w-20 h-16 aspect-video bg-muted rounded-md relative flex flex-col items-center justify-center"},o&&o.startsWith("image")?n.createElement("img",{key:s,src:s,alt:a??"An image attachment",className:"rounded-md size-full object-cover"}):n.createElement("div",{className:""}),t&&n.createElement("div",{className:"animate-spin absolute text-zinc-500"},n.createElement(N.hz,null))),n.createElement("div",{className:"text-xs text-zinc-500 max-w-16 truncate"},a))};let Rt=function(e){return e.GlobalSummary="global-summary",e.UrgentCheck="urgent-message-check",e.GroupSearch="group-search",e.UserSearch="user-search",e.GoogleAuth="google-auth",e.GoogleEventInsert="google-event-insert",e.GoogleEventDetail="google-event-detail",e.GoogleMeetTimeConfirm="google-meet-time-confirm",e.GoogleMeetMention="google-meet-mention",e.GoogleMeetInformationSuggest="google-meet-information-suggest",e.RoomSummary="room-summary",e.RoomActions="room-actions",e.MeetingIntroduce="global-meeting-introduce",e.SummaryIntroduce="global-summary-introduce",e.TranslationIntroduce="global-translation-introduce",e.ActionsIntroduce="global-actions-introduce",e.GlobalIntroduce="global-introduce",e.RoomAIDescription="room-ai-description",e.AISearchSugesstion="ai-search-sugesstion",e.AIReplyMention="room-ai-reply-mention",e.AIMediaSummary="room-ai-media-summary",e.UserPortrait="user-portrait",e.UpgradeTip="upgrade-tip",e.Default="default",e}({});const Ft=({message:e,isLoading:t})=>n.createElement(r.P.div,{className:"w-full px-[12px] group/message",initial:{y:5,opacity:0},animate:{y:0,opacity:1},"data-role":e.role},n.createElement("div",{className:"flex gap-4 w-full group-data-[role=user]/message:ml-auto group-data-[role=user]/message:max-w-2xl"},n.createElement("div",{className:"flex flex-col gap-4 w-full"},e.experimental_attachments&&n.createElement("div",{className:"flex flex-row justify-end gap-2"},e.experimental_attachments.map(e=>n.createElement(Bt,{key:e.url,attachment:e}))),e.reasoning&&n.createElement(Lt,{isLoading:t,reasoning:e.reasoning}),(e.content||e.reasoning)&&n.createElement("div",{className:"flex flex-row gap-2 items-start w-full"},n.createElement("div",{className:(0,u.cn)("w-auto flex flex-col gap-4 bg-white text-[var(--color-text)] px-3 py-2 rounded-xl dark:bg-[#292929]",{"!bg-[#E8D7FF] text-black ml-auto":"user"===e.role})},n.createElement(Mt,null,e.content),"user"!==e.role&&n.createElement(Pt,{message:e})))))),Dt=({message:e,isLoading:t,deleteMessage:a})=>{const s=(0,n.useMemo)(()=>{const t=e?.annotations?.find(e=>e&&"object"==typeof e&&"type"in e&&Object.values(Rt).includes(e.type));return t?.type||Rt.Default},[e]);return n.createElement(m.N,null,(()=>{switch(s){case Rt.GlobalSummary:return n.createElement(k.A,null,n.createElement(q,{message:e,deleteMessage:()=>a?.(e.id)}));case Rt.UrgentCheck:return n.createElement(vt,{message:e,deleteMessage:()=>a?.(e.id)});case Rt.GroupSearch:return n.createElement(Pe,{message:e});case Rt.UserSearch:return n.createElement(Et,{message:e});case Rt.GoogleAuth:return n.createElement(xe,{deleteMessage:()=>a?.(e.id)});case Rt.GoogleEventInsert:return n.createElement(pe,{message:e});case Rt.GoogleEventDetail:return n.createElement(fe,{message:e});case Rt.GoogleMeetTimeConfirm:return n.createElement(ke,{message:e});case Rt.GoogleMeetMention:return n.createElement(Me,{message:e});case Rt.GoogleMeetInformationSuggest:return n.createElement(Ie,{message:e});case Rt.RoomSummary:return n.createElement(ht,{message:e});case Rt.RoomActions:return n.createElement(Ge,{message:e});case Rt.MeetingIntroduce:return n.createElement(De,null);case Rt.SummaryIntroduce:return n.createElement(Ue,null);case Rt.TranslationIntroduce:return n.createElement(Ve,null);case Rt.ActionsIntroduce:return n.createElement(Be,null);case Rt.GlobalIntroduce:return n.createElement(v,null);case Rt.RoomAIDescription:return n.createElement(qe,{message:e});case Rt.AIReplyMention:return n.createElement(ot,{message:e});case Rt.AIMediaSummary:return n.createElement(tt,{message:e});case Rt.UserPortrait:return n.createElement(it,{userId:e?.content});case Rt.UpgradeTip:return n.createElement(gt,null);case Rt.Default:default:return n.createElement(Ft,{message:e,isLoading:t})}})())},Ot=(0,n.memo)(Dt,(e,t)=>e.isLoading===t.isLoading&&e.message.reasoning===t.message.reasoning&&e.message.content===t.message.content&&!!o()(e.message.toolInvocations,t.message.toolInvocations)),zt=()=>n.createElement(r.P.div,{className:"w-full px-[12px] group/message ",initial:{y:5,opacity:0},animate:{y:0,opacity:1,transition:{delay:1}},"data-role":"assistant"},n.createElement("div",{className:d()("flex gap-4 group-data-[role=user]/message:px-3 w-full group-data-[role=user]/message:w-fit group-data-[role=user]/message:ml-auto group-data-[role=user]/message:max-w-2xl group-data-[role=user]/message:py-2 rounded-xl",{"group-data-[role=user]/message:bg-muted":!0})},n.createElement(N.mP,{size:40})));var Ut=a(95547),jt=a(40708);function Vt({chatId:e,className:t,isLoading:a,status:s,messages:o,hasMore:c,deleteMessage:d,loadMore:m}){const u=(0,n.useRef)(!1),p=(0,n.useRef)(null),{containerRef:h,endRef:g,isAtBottom:A,onViewportEnter:y,onViewportLeave:f}=function({chatId:e,status:t}){const{containerRef:a,endRef:s,isAtBottom:o,scrollToBottom:r,onViewportEnter:l,onViewportLeave:c}=(0,i.R)(),d=(0,n.useRef)(!1),[m,u]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{"submitted"===t&&u(!0)},[t]),(0,n.useEffect)(()=>{!d.current&&a.current&&(function({container:e,scrollToBottom:t,maxAttempts:a=30,interval:n=50}){let s=e.scrollHeight,o=0;const r=()=>{const i=e.scrollHeight;i!==s?(t("instant"),s=i,o=0):o++,o<a&&requestAnimationFrame(()=>setTimeout(r,n))};r()}({container:a.current,scrollToBottom:r}),d.current=!0)},[a,r]),{containerRef:a,endRef:s,isAtBottom:o,scrollToBottom:r,onViewportEnter:l,onViewportLeave:c,hasSentMessage:m}}({chatId:e,status:s});return A&&Ut.A.updateRoomAIData(jt.bL,"unreadCount",0),n.createElement("div",{ref:h,onScroll:()=>{const e=h.current;if(!e||u.current)return;const{scrollTop:t}=e;if(0===t&&c){u.current=!0;const t=e.firstChild?.firstChild||null;p.current=t,m().finally(()=>{u.current=!1,p.current&&p.current.scrollIntoView({behavior:"instant",block:"start"})})}},className:(0,l.cn)("ai-message-container custom-scroll flex flex-col min-w-0 gap-[10px] h-full overflow-y-auto relative pt-4 overflow-x-hidden",t)},o.map((e,t)=>(e=>e?.annotations?.some(e=>e&&"object"==typeof e&&"isAuxiliary"in e&&!0===e.isAuxiliary)??!1)(e)?null:n.createElement(Ot,{message:e,deleteMessage:d,key:e.id,isLoading:"streaming"===s&&o.length-1===t})),("submitted"===s&&o.length>0&&"user"===o[o.length-1].role||a)&&n.createElement(zt,null),n.createElement(r.P.div,{ref:g,className:"shrink-0 min-w-[24px] min-h-[24px]",onViewportLeave:f,onViewportEnter:y}))}const Jt=(0,n.memo)(Vt,(e,t)=>!(e.status!==t.status||e.status&&t.status||e.messages.length!==t.messages.length||!o()(e.messages,t.messages)))},55317:(e,t,a)=>{"use strict";function n(e,t){const{level:a,boosts:n,currentLevelBoosts:s,nextLevelBoosts:o,hasMyBoost:r,prepaidGiveaways:i}=e,l=t&&n===s&&r;return{currentLevel:l?a-1:a,hasNextLevel:Boolean(o),boosts:n,levelProgress:!o||l?1:(n-s)/(o-s),remainingBoosts:o?o-n:0,isMaxLevel:void 0===o,prepaidGiveaways:i}}a.d(t,{z:()=>n})},55429:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});var n=a(90709),s=a(70636),o=a(9716);function r(e,t,a,r){const{senderId:i}=t;if(!i)return;const l=(0,o.L8)(i)?r[i]:a[i];let c=(0,s.F9)(e,l);const d=a[t.chatId];return d&&("isSelf"in l&&l.isSelf?c=`${e("FromYou")} → ${(0,n.Js)(e,d)}`:(0,n.YE)(d)&&(c+=` → ${(0,n.Js)(e,d)}`)),c}},57674:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o,y8:()=>r});var n=a(34164),s=a(50856);function o(...e){return(0,s.QP)((0,n.$)(e))}function r(e){return e.map(e=>{if("assistant"!==e.role)return e;if(!e.toolInvocations)return e;const t=[];for(const a of e.toolInvocations)"result"===a.state&&t.push(a.toolCallId);const a=e.toolInvocations.filter(e=>"result"===e.state||t.includes(e.toolCallId));return{...e,toolInvocations:a}}).filter(e=>e.content.length>0||e.toolInvocations&&e.toolInvocations.length>0)}},58324:(e,t,a)=>{"use strict";a.d(t,{i9:()=>s,ku:()=>l,n5:()=>o,sh:()=>i,w7:()=>r});var n=a(25279);const s=()=>({timestamp:(new Date).getTime(),content:"",id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"global-meeting-introduce"}]}),o=()=>({timestamp:(new Date).getTime(),content:"",id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"global-summary-introduce"}]}),r=()=>({timestamp:(new Date).getTime(),content:"",id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"global-translation-introduce"}]}),i=()=>({timestamp:(new Date).getTime(),content:"",id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"global-actions-introduce"}]}),l=()=>({timestamp:(new Date).getTime(),content:"",id:(0,n.A)(),createdAt:new Date,role:"assistant",annotations:[{type:"global-introduce"}]})},59816:(e,t,a)=>{"use strict";a.d(t,{A:()=>S});var n=a(84051),s=a(13439),o=a(31481),r=a(66644),i=a(87357),l=a(95807),c=a(39751),d=a(90709),m=a(9716),u=a(76023),p=a(82117),h=a(17712),g=a(93545),A=a(11241);const y="pruw1nLm",f=(0,n.ph)(({story:e,mediaArea:t,index:a,className:o,style:r,isPreview:c})=>{const{sendStoryReaction:y}=(0,s.ko)(),f=(0,n.li)(),[v,E]=(0,n.J0)(1.5*u.$),{peerId:b,id:x,views:w}=e,{reactions:C}=w||{},{reaction:N,isDark:I,isFlipped:S}=t,M=!(0,m.L8)(b),k=`${(0,d.$_)(b,x)}-${a}-${c?"preview":"viewer"}`,T=(0,n.Kr)(()=>C?.find(e=>(0,d.a0)(e.reaction,N))?.count,[N,C]),P=!c&&Boolean(T)&&M,L=(0,h.A)(()=>{if(!f.current)return;const e=f.current.clientHeight;E(Math.round(.6*e))});(0,p.A)(([e])=>{Boolean(T)!==Boolean(e)&&L()},[T]),(0,g.A)(f,L);const B=(0,h.A)(()=>{y({peerId:b,storyId:x,containerId:k,reaction:N})});return n.Ay.createElement("div",{ref:f,className:(0,i.A)(I?"eic2vQ8c":"_7esBA3m",o),style:(0,l.A)(r,`--custom-emoji-size: ${v}px`),onClick:B},n.Ay.createElement("div",{className:(0,i.A)("c3ajA3hg",S&&"furSXGdL")}),Boolean(v)&&n.Ay.createElement(A.A,{className:(0,i.A)("Et3MvYmN",P&&"mFTLUHm2"),reaction:N,containerId:k,size:v,effectSize:4*v,shouldPause:c,shouldLoop:!c}),P&&n.Ay.createElement("span",{className:"Tr8mYyDk"},T))});var v=a(61433),E=a(60919),b=a(48894),x=a(87412);const w=(0,n.ph)((0,s.EK)((e,t)=>{const{mediaArea:a}=t;return{restrictedEmoji:(0,E.GHK)(e,a.emoji)}})(({mediaArea:e,className:t,style:a,restrictedEmoji:s,isPreview:o})=>{const c=(0,n.li)(),[d,m]=(0,n.J0)(0),{temperatureC:u,color:p}=e,A=(0,b.Bz)(p),y=(0,b.vG)(p),f=(0,h.A)(e=>{if(!c.current)return;const t=c.current,a=t.clientHeight,n=Math.round(.7*a);m(n);const s=()=>{(0,v.Tv)(t,{"--custom-emoji-size":`${n}px`,"font-size":a/32+"rem"})};if(e)return s;(0,r.RK)(s)});return(0,n.Nf)(()=>{(0,r.gm)(()=>f(!0))},[]),(0,g.A)(c,()=>f()),n.Ay.createElement("div",{ref:c,className:(0,i.A)("KBjMtRUS",t),style:(0,l.A)(a,`--custom-background-color: ${A}`,`color: ${y}`)},n.Ay.createElement("div",{className:"IFChB3tD"},s&&n.Ay.createElement(x.A,{key:s.id,documentId:s.id,size:d,noPlay:o,withTranslucentThumb:!0,forceAlways:!0}),n.Ay.createElement("p",{className:"_ke1UBIl"},(e=>Boolean("en-US"===navigator.language)?`${Math.round(9*e/5+32)}°F`:`${Math.round(e)}°C`)(u))))})),C=9/16,N=new Set(["channelPost","uniqueGift"]);function I(e,t){const{x:a,y:n,width:s,height:o,rotation:r,radius:i}=e.coordinates;let c="";if(t&&i&&t>0){const e=t*(s/100),a=t*(o/100);c=Math.min(e,a)*(i/100)+"px"}return(0,l.A)(`left: ${a}%`,`top: ${n}%`,`width: ${s}%`,`height: ${o}%`,`transform: rotate(${r}deg) translate(-50%, -50%)`,c&&`border-radius: ${c}`)}const S=(0,n.ph)(({story:e,isActive:t,className:a,isStoryPlaying:l})=>{const{openMapModal:d,openUniqueGiftBySlug:m,focusMessage:u,closeStoryViewer:p,openUrl:h}=(0,s.ko)(),g=(0,n.li)(),[A,v]=(0,n.J0)(0),E=(0,c.A)();(0,n.vJ)(()=>{if(!g.current)return;const e=g.current;if(v(e.clientWidth),E.width>o.c2m)return void(0,r.RK)(()=>{e.style.removeProperty("--media-width"),e.style.removeProperty("--media-height")});const t=E.width/E.height,a=t<C?e.clientHeight*C:e.clientWidth,n=t<C?e.clientHeight:e.clientWidth/C;(0,r.RK)(()=>{e.style.setProperty("--media-width",`${a}px`),e.style.setProperty("--media-height",`${n}px`)})},[t,E]);const b=e.mediaAreas;return n.Ay.createElement("div",{className:(0,i.A)("RXAMu4VD",!t&&"_5HkplWee",a),ref:g},b?.map((a,s)=>{switch(a.type){case"geoPoint":case"venue":case"channelPost":case"url":case"uniqueGift":{const e=t&&!N.has(a.type);return n.Ay.createElement("div",{className:(0,i.A)(y,e&&"xFjJpeOA"),style:I(a),onClick:()=>(e=>{switch(e.type){case"geoPoint":case"venue":d({geoPoint:e.geo});break;case"channelPost":u({chatId:e.channelId,messageId:e.messageId}),p();break;case"url":h({url:e.url});break;case"uniqueGift":m({slug:e.slug})}})(a)})}case"suggestedReaction":return n.Ay.createElement(f,{key:`${a.type}-${s}`,story:e,mediaArea:a,index:s,isPreview:!t,className:y,style:I(a)});case"weather":return n.Ay.createElement(w,{key:`${a.type}-${s}`,mediaArea:a,className:y,style:I(a,A),isPreview:!t||l});default:return}}))})},60138:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(37836),o=a(17712);function r(e){const t=(0,o.A)(e);(0,n.vJ)(()=>(0,s.yu)(t),[t])}},60195:()=>{},60406:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(61433),o=a(66644),r=a(37836);const i=({containerRef:e,selector:t},a)=>{(0,n.Nf)(()=>{const a=e.current?.querySelectorAll(t);if(!a?.length)return;const n=(0,r.nF)(e=>{const t=e.target,a=t.scrollTop>0;(0,o.RK)(()=>{(0,s.dH)(t,"scrolled",a)})},100);return a.forEach(e=>{(0,s.YM)(e,"with-notch"),e.addEventListener("scroll",n,{passive:!0})}),()=>{a.forEach(e=>{e.removeEventListener("scroll",n),(0,s.HW)(e,"with-notch")})}},[e,t,...a]),(0,n.vJ)(()=>{const a=e.current?.querySelectorAll(t);a?.length&&a.forEach(e=>{const t=e.scrollTop>0;(0,o.RK)(()=>{(0,s.dH)(e,"scrolled",t)})})},[e,t,...a])}},60474:(e,t,a)=>{"use strict";a.d(t,{A:()=>Ae});var n=a(84051),s=a(13439),o=a(31481),r=a(66644),i=a(60919),l=a(30708),c=a(96454),d=a(87357),m=a(52674),u=a(14680),p=a(17237),h=a(36353),g=a(37836),A=a(4961),y=a(11359),f=a(43874),v=a(19129),E=a(37661),b=a(17712),x=a(59030),w=a(88458),C=a(41733);function N(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I{constructor(e,t,a){this.container=t,this.options=a,N(this,"video",void 0),N(this,"isPlaying",!1),this.video=document.createElement("video"),this.video.src=e,this.video.disablePictureInPicture=!0,this.video.muted=!0,a.style&&this.video.setAttribute("style",a.style),this.video.style.position="absolute",this.video.load(),this.options.noLoop||(this.video.loop=!0),(0,r.RK)(()=>{this.container.appendChild(this.video),this.recalculatePositionAndSize()})}play(){!this.isPlaying&&this.video&&(this.recalculatePositionAndSize(),this.video.paused&&(0,C.A)(this.video),this.isPlaying=!0)}pause(){this.isPlaying&&this.video&&(this.video.paused||this.video.pause(),this.isPlaying=!1)}destroy(){this.pause(),this.video?.remove(),this.video=void 0}updatePosition(e){this.options.position=e,this.recalculatePositionAndSize()}recalculatePositionAndSize(){const{size:e,position:{x:t,y:a}}=this.options;(0,r.YS)(()=>{if(!this.video)return;const n=this.video,{width:s,height:o}=this.container.getBoundingClientRect();(0,r.RK)(()=>{n.style.left=`${Math.round(t*s)}px`,n.style.top=`${Math.round(a*o)}px`,n.style.width=`${e}px`,n.style.height=`${e}px`})})}}var S=a(60261),M=a(43336),k=a(71322),T=a(76023),P=a(37479),L=a(87094),B=a(82117),R=a(93545),F=a(672),D=a(61157),O=a(38691);const z=1.25*T.$;var U=a(54746),j=a(64493),V=a(61361),J=a(80089),H=a(80464);const K=e=>{const{isOpen:t}=e,a=(0,H.A)(J.ar.Extra,"TextFormatter",!t);return a?n.Ay.createElement(a,e):void 0};var $=a(45227),G=a(96540),_=a(66550),q=a(21468),W=a(70809),Q=a(2189),Y=a(20181),Z=a.n(Y),X=a(80539);class ee{constructor(){var e,t,a;e=this,a=void 0,(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t="languageToolURL"))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,this.languageToolURL="https://api.languagetoolplus.com/v2/check"}async saplingEditOverview(e){const t=new URLSearchParams({text:e,language:"en-US",useragent:"standalone",disabledRules:"WHITESPACE_RULE",mode:"allButTextLevelOnly",allowIncompleteResults:"true"});try{const a=await fetch(this.languageToolURL,{headers:{accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:t.toString(),method:"POST"}),n=await a.json();return console.log("LanguageTool response:",JSON.stringify(n)),n.matches.map(t=>{if(t.replacements&&t.replacements.length)return{description:t.rule.description,start:t.offset,end:t.offset+t.length,id:t.rule.id,general_error_type:t.rule.category.id.toLowerCase(),error_type:ee.classifyTypeGramma(t.rule),replacement:t.replacements[0]?.value||"",isPremium:!!t.rule?.isPremium,shortMessage:t.shortMessage||"",original_text:e.substring(t.offset,t.offset+t.length),sentence:t.sentence,sentence_start:e.indexOf(t.sentence)}}).filter(Boolean)}catch(e){return console.log(e),[]}}static classifyTypeGramma(e){return e?.category?.id?.toLowerCase()||""}async check(e){return await this.saplingEditOverview(e)}}const te=new ee,ae=new Q.diff_match_patch;function ne(e,t){let a=t;for(const t of e){if(t.nodeType!==Node.TEXT_NODE)continue;const e=t.length;if(a<=e)return{node:t,offset:a};a-=e}return{node:null,offset:0}}function se(e,t,a){const n=getComputedStyle(a),s=parseFloat(n.lineHeight||"16");return{left:e.left-t.left,top:e.top-t.top,width:e.width,height:s}}var oe=a(89027);const re=({replacement:e,errorIndex:t,handleFixError:a})=>G.createElement("div",{className:"text-[var(--color-text)]"},G.createElement("div",null,"ReplaceMent"),G.createElement("div",{className:"max-w-[min(30vw,400px)] px-[12px] py-[10px] rounded-[8px] cursor-pointer hover:bg-[var(--color-primary)] hover:text-white",onClick:()=>{a(t)}},e)),ie=e=>{const{top:t,left:a,width:n,height:s,replacement:o,generalErrorType:r,errorIndex:i,handleFixError:l}=e,c=(0,G.useRef)(null);return G.createElement("div",{className:"absolute pointer-events-none",style:{left:`${a}px`,top:`${t}px`,width:`${n}px`,height:`${s}px`}},G.createElement(oe.A,{placement:"top",content:G.createElement(re,{replacement:o,errorIndex:i,handleFixError:l})},G.createElement("div",{ref:c,className:"absolute bottom-[-2px] h-[6px] w-full border-b-[2px] pointer-events-auto "+("typos"===r.toLocaleLowerCase()?"border-red-500/60":"border-[#FFD633]")})))},le=(0,G.memo)(ie);var ce=a(75175);const de=({errorRanges:e,onClose:t,handleFixAllErrors:a,handleFixError:n})=>{const[s,o]=(0,G.useState)(0),[r,i]=(0,G.useState)(e[0]),[l,c]=(0,G.useState)([]),[d,m]=(0,G.useState)("");(0,G.useEffect)(()=>{const t=e[s];t&&(i(t),c([{description:t.description,offset:t.start-t.sentence_start,length:t.end-t.start,originalText:t.original_text,remove_segment:!1,suggestions:[t.replacement]}]),m(t.sentence))},[s,e]);const u=(0,G.useCallback)(()=>{n(s),1===e.length&&t(),s===e.length-1&&t()},[s,r]),p=(0,G.useCallback)(()=>{a(),t()},[a,t]);return G.createElement("div",{className:"h-[190px] flex flex-col overflow-hidden"},G.createElement("div",{className:"flex flex-row items-center justify-between"},G.createElement("h3",{className:"text-[var(--color-text)]"},"Review suggestions"),G.createElement("div",{className:"h-[26px] rounded-[6px] overflow-hidden flex flex-row"},G.createElement("div",{className:"w-[21px] bg-[#F1F1F1] cursor-pointer",onClick:()=>{s>0&&o(s-1)}},G.createElement(W.Yy,null)),G.createElement("div",{className:"px-[5px] text-[#979797]"},s+1,"/",e.length),G.createElement("div",{className:"w-[21px] bg-[#F1F1F1] cursor-pointer",onClick:()=>{s<e.length-1&&o(s+1)}},G.createElement(W.Xq,null)))),G.createElement("div",{className:"flex-1 overflow-hidden flex flex-col"},G.createElement("div",{className:"flex flex-row items-center gap-[8px]"},G.createElement("div",{className:"w-[8px] h-[8px] rounded-full bg-[#FF9900]"}),G.createElement("span",{className:"text-[14px] text-[#959595]"},"Improve your text")),G.createElement("div",{className:"flex-1 overflow-auto"},l?G.createElement(ce.A,{text:d,errors:l}):void 0)),G.createElement("div",{className:"flex flex-row items-center justify-between  pt-[10px] border-t-[1px] border-black/10"},G.createElement("div",{className:"text-[#7D40FF] border-[1px] border-[#7D40FF] rounded-[6px] px-[8px] py-[5px]",onClick:p},"Accept all (",e.length,")"),G.createElement("div",{className:"flex flex-row items-center gap-[8px]"},G.createElement(q.Ay,{color:"purple",variant:"solid",onClick:u},"Accept"))))},me=e=>{const{inputRef:t,getHtml:a,setHtml:n}=e,[s,o]=(0,G.useState)(!1),[r,i]=(0,G.useState)({left:0,top:0}),{corrections:l,spalingLoading:c,errorMarkers:d,fixError:m,fixAllErrors:u}=function(e,t,a,{delay:n=1e3}){const[s,o]=(0,G.useState)([]),[r,i]=(0,G.useState)(!1),[l,c]=(0,G.useState)([]),d=(0,G.useRef)(""),m=(0,G.useRef)(Date.now()),u=(0,G.useCallback)(()=>{const t=e.current;if(!t)return;const a=t.textContent||"",n=function(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),a=[];for(;t.nextNode();)a.push(t.currentNode);return a}(t);if(!n)return;c([]);const o=(r=a,s.filter(({start:e,end:t,original_text:a})=>{if(t>r.length)return!1;const n=r.slice(e,t);return n===a&&/\S/.test(n)}));var r;const i=[];for(const e of o){const{start:a,end:s,replacement:o,general_error_type:r}=e,{node:l,offset:c}=ne(n,a),{node:d,offset:m}=ne(n,s);if(!l||!d)continue;const u=document.createRange();u.setStart(l,c),u.setEnd(d,m);const p=u.getClientRects(),h=t.getBoundingClientRect();for(const e of p)i.push({...se(e,h,t),start:a,end:s,replacement:o,general_error_type:r})}c(i)},[s,e]),p=(0,G.useRef)(Z()(async()=>{const t=e.current?.innerText||"";i(!0);const a=await te.check(t);d.current=t,m.current=Date.now();const n=function(e,t,a){const n=ae.diff_main(e,t);ae.diff_cleanupSemantic(n);const s=[];let o=0;for(const e of a){const t=e.start,a=e.end;let r=!0,i=0;o=0;for(const[e,s]of n){const n=s.length;if(0===e)o+=n;else if(-1===e){if(o+n<=t)i-=n,o+=n;else if(o<a){r=!1;break}}else if(1===e)if(o<=t)i+=n;else if(o<a){r=!1;break}}r&&s.push({...e,start:t+i,end:a+i})}return s}(d.current,t,a);o(n),0===n.length&&c([]),i(!1)},n,{leading:!1,trailing:!0})).current,h=(0,G.useMemo)(()=>Z()(u,n,{leading:!1,trailing:!0}),[u,n]),g=t();return(0,G.useEffect)(()=>{if(e.current){const{text:e}=(0,X.Ay)(g);if(0===e.trim().length)return o([]),void c([]);p()}},[g,p,e]),(0,G.useEffect)(()=>{const e=()=>{h()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[h]),(0,G.useEffect)(()=>{u()},[s,u]),{corrections:s,spalingLoading:r,errorMarkers:l,fixError:t=>{const n=s[t],r=e.current;if(!n||!r||!n.replacement)return;const{start:i,end:l,replacement:c}=n,m=r.innerText||"",u=m.slice(0,i)+c+m.slice(l);r.innerText=u;const p=[],h=c.length-(l-i);for(let e=0;e<s.length;e++){if(e===t)continue;const a=s[e];a.start>=l?p.push({...a,start:a.start+h,end:a.end+h}):p.push(a)}o(p),d.current=u,a(u)},fixAllErrors:()=>{const t=e.current;if(!t||0===s.length)return;let n=t.innerText||"";const r=[...s].sort((e,t)=>e.start-t.start);let i=0;for(const{start:e,end:t,replacement:a}of r){if(!a)continue;const s=e+i,o=t+i;n=n.slice(0,s)+a+n.slice(o),i+=a.length-(t-e)}t.innerText=n,d.current=n,a(n),o([]),c([]),p()}}}(t,a,n,{}),p=(0,G.useCallback)(()=>{o(!1)},[]);return G.createElement(G.Fragment,null,G.createElement("div",{className:"absolute left-0 top-0 pointer-events-auto"},d.map((e,t)=>G.createElement(le,{left:e.left,top:e.top,width:e.width,height:e.height,replacement:e.replacement,errorIndex:t,generalErrorType:e.general_error_type,handleFixError:m}))),G.createElement("div",{className:"sapling-badge-container"},G.createElement("div",{className:"sapling-status-container"},G.createElement("div",{className:"sapling-badge-errors"},d.length>0&&G.createElement("div",{className:"sapling-badge-errors-count",onClick:()=>{if(t&&t.current){const e=t.current.getBoundingClientRect(),{left:a,top:n}=e;i({left:a,top:n-240}),o(!0)}}},d.length)),c&&G.createElement("div",{className:"sapling-badge-spinner"}))),G.createElement(_.A,{className:"sapling-errors-modal",closable:!1,footer:null,open:s,onCancel:p,destroyOnHidden:!0,style:{top:r.top,left:r.left}},G.createElement(de,{errorRanges:l,handleFixError:m,handleFixAllErrors:u,onClose:p})))},ue=e=>{const{inputRef:t,getHtml:a,setHtml:s}=e,o=(0,$.P)({component:me,props:{inputRef:t,getHtml:a,setHtml:s}});return n.Ay.createElement("div",{className:"absolute left-0 top-0 w-full h-full pointer-events-none",ref:o})},pe="input-scroller",he=140,ge=["Esc","Escape","Enter","PageUp","PageDown","Meta","Alt","Ctrl","ArrowDown","ArrowUp","Control","Shift"],Ae=(0,n.ph)((0,s.EK)((e,{chatId:t,threadId:a})=>{const{messageSendKeyCombo:n}=(0,l.l)(e);return{messageSendKeyCombo:n,replyInfo:t&&a?(0,i.GA4)(e,t,a)?.replyInfo:void 0,isSelectModeActive:(0,i.rTV)(e),canPlayAnimatedEmojis:(0,i.BWX)(e)}})(({ref:e,id:t,chatId:a,captionLimit:l,isAttachmentModalInput:C,isStoryInput:N,customEmojiPrefix:T,editableInputId:J,isReady:H,isActive:$,getHtml:G,placeholder:_,timedPlaceholderLangKey:q,timedPlaceholderDate:W,forcedPlaceholder:Q,canSendPlainText:Y,canAutoFocus:Z,noFocusInterception:X,shouldSuppressFocus:ee,shouldSuppressTextFormatter:te,replyInfo:ae,isSelectModeActive:ne,canPlayAnimatedEmojis:se,messageSendKeyCombo:oe,onUpdate:re,onSuppressedFocus:ie,onSend:le,onScroll:ce,onFocus:de,onBlur:me,isNeedPremium:Ae,messageListType:ye})=>{const{editLastMessage:fe,replyToNextMessage:ve,showAllowedMessageTypesNotification:Ee,openPremiumModal:be}=(0,s.ko)();let xe=(0,n.li)();e&&(xe=e);const we=(0,n.li)(),Ce=(0,n.li)(),Ne=(0,n.li)(),Ie=(0,n.li)(),Se=(0,n.li)(),Me=(0,n.li)(),ke=(0,x.A)(),Te=(0,n.li)(!1),[Pe,Le,Be]=(0,E.A)(),[Re,Fe]=(0,n.J0)(),[De,Oe]=(0,n.J0)(),[ze,Ue]=(0,n.J0)(!1),{isMobile:je}=(0,f.Ay)(),Ve=je&&(c.pz||c.Ni),[Je,He]=(0,n.J0)(!1);(0,n.vJ)(()=>{He(Boolean(q&&W))},[W,q]);const Ke=(0,b.A)(()=>{He(!1)});!function(e,t,a,o,l,c,d,m,u){const p=(0,L.A)(t,void 0,!m),h=(0,P.A)(p,!0),g=(0,O.A)(),A=(0,n.li)(new Map),y=(0,b.A)(e=>{e.forEach(e=>{const t=A.current.get(e);t&&(t.destroy(),A.current.delete(e))})}),f=(0,b.A)(()=>{if(!(m&&t.current&&a.current&&o.current))return;const e=(0,s.mS)(),n=new Set(A.current.keys());Array.from(t.current.querySelectorAll(".custom-emoji")).forEach(t=>{if(!t.dataset.uniqueId)return;const s=`${c}${t.dataset.uniqueId}${p||""}`,r=t.dataset.documentId;n.delete(s);const m=(0,S.ZR)(r);if(!m)return;const u=a.current.getBoundingClientRect(),y=t.getBoundingClientRect(),f=(0,M.LI)((y.left-u.left)/u.width,4),v=(0,M.LI)((y.top-u.top)/u.height,4);if(A.current.has(s))return void A.current.get(s).updatePosition(f,v);const E=e.customEmojis.byId[r];if(!E)return;const b=E?.stickerSetInfo&&(0,i.CzR)(e,E.stickerSetInfo),x=[c,r,p,g].filter(Boolean).join("_");(async function({customEmoji:e,sharedCanvasRef:t,sharedCanvasHqRef:a,absoluteContainerRef:n,renderId:s,viewId:o,mediaUrl:r,position:i,isHq:l,textColor:c,colorFilter:d}){if(e.isLottie){const n=e.shouldUseTextColor&&c?(0,k.E2)(c):void 0,d=(await(0,w.Y)()).init(r,l?a.current:t.current,s,{size:z,coords:i,isLowPriority:!l},o,n?[n.r,n.g,n.b]:void 0);return{play:()=>d.play(),pause:()=>d.pause(),destroy:()=>d.removeView(o),updatePosition:(e,t)=>d.setSharedCanvasCoords(o,{x:e,y:t})}}if(e.isVideo){const t=e.shouldUseTextColor&&d?`filter: ${d};`:void 0,a=new I(r,n.current,{size:z,position:i,style:t});return{play:()=>a.play(),pause:()=>a.pause(),destroy:()=>a.destroy(),updatePosition:(e,t)=>a.updatePosition({x:e,y:t})}}throw new Error("Unsupported custom emoji type")})({customEmoji:E,sharedCanvasRef:a,sharedCanvasHqRef:o,absoluteContainerRef:l,renderId:x,viewId:s,mediaUrl:m,isHq:b,position:{x:f,y:v},textColor:p,colorFilter:h}).then(e=>{d&&e.play(),A.current.set(s,e)})}),y(Array.from(n))});(0,n.vJ)(()=>(0,S.K3)(f),[f]),(0,n.vJ)(()=>{const e=A.current;return()=>{y(Array.from(e.keys()))}},[]),(0,n.vJ)(()=>{e()&&t.current&&a.current&&u&&m?(0,r.YS)(()=>{f()}):y(Array.from(A.current.keys()))},[e,f,t,y,a,u,m]),(0,n.Nf)(()=>{document.documentElement.style.setProperty("--input-custom-emoji-filter",h||"none")},[h]),(0,B.A)(([e])=>{void 0!==e&&p!==e&&f()},[p,f]);const v=(0,F.A)(f,[f],300,!1);(0,R.A)(a,v),(0,B.A)(([e])=>{g!==e&&(y(Array.from(A.current.keys())),f())},[g,f]);const E=(0,b.A)(()=>{A.current.forEach(e=>{e.pause()})}),x=(0,b.A)(()=>{d&&A.current?.forEach(e=>{e.play()})}),C=(0,b.A)(()=>{(0,r.YS)(x)});(0,D.Ay)(E,C)}(G,xe,Ie,Se,Me,T,se,H,$);const $e=C?160:N?128:je?256:416,Ge=(0,b.A)((e=!1)=>{(0,g.IJ)(()=>{(0,r.gm)(()=>{const t=xe.current.closest(`.${pe}`),a=Number(t.style.height.replace("px","")),n=Ne.current,{scrollHeight:s}=n,o=Math.min(s,$e);if(o===a)return;const i=s>$e;function l(){const e=Math.round(50*Math.log(Math.abs(o-a)));t.style.height=`${o}px`,t.style.transitionDuration=`${e}ms`,t.classList.toggle("overflown",i)}return e?void(0,r.RK)(l):l})})});(0,n.Nf)(()=>{C&&Ge(!1)},[C,Ge]);const _e=(0,n.li)(G());(0,n.Nf)(()=>{const e=$?G():"";e!==xe.current.innerHTML&&(xe.current.innerHTML=e),e!==Ce.current.innerHTML&&(Ce.current.innerHTML=e),e!==_e.current&&(_e.current=e,Ge(!e))},[G,$,Ge]),(0,n.li)(a).current=a;const qe=(0,b.A)(()=>{xe.current&&!Ae&&((0,n.OV)()?setTimeout(qe,350):(0,h.A)(xe.current))}),We=(0,b.A)(()=>{Be(),function(){const e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}()});function Qe(){if(c.pz)return!1;const e=window.getSelection();if(!e||!e.rangeCount||Te.current)return Be(),c.Ni&&Ue(!1),!1;const t=e.getRangeAt(0),a=t.toString().trim();return!(te||!(0,y.L)(t,J||o.CfG)||!a||(0,p.A)(a)||!t.START_TO_END)||(Be(),!1)}function Ye(){if(!Qe())return;if(ze)return;const e=window.getSelection().getRangeAt(0),t=e.getBoundingClientRect(),a=xe.current.closest(`.${pe}`).getBoundingClientRect();let n=t.left+t.width/2-a.left;n<he?n=he:n>a.width-he&&(n=a.width-he),Fe({x:n,y:t.top-a.top}),Oe(e),Le()}function Ze(){we.current&&window.clearTimeout(we.current),we.current=window.setTimeout(Ye,260)}const Xe=(0,b.A)(()=>be());(0,n.vJ)(()=>{c.TF||Z&&qe()},[a,qe,ae,Z]),(0,n.vJ)(()=>{if(!a||J!==o.CfG||X||Ve||ne)return;const e=e=>{if((0,u.ZJ)())return;const{key:t}=e,a=e.target;if(!a||ge.includes(t))return;const n=xe.current,s=document.getSelection()?.isCollapsed;if(!((t.startsWith("Arrow")||e.shiftKey&&"Shift"===t)&&!s||"KeyC"===e.code&&(e.ctrlKey||e.metaKey)&&"INPUT"!==a.tagName)&&n&&a!==n&&"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName&&!a.isContentEditable){(0,h.A)(n,!0,!0);const t=new KeyboardEvent(e.type,e);n.dispatchEvent(t)}};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[a,J,Ve,ne,X]),(0,n.vJ)(()=>{const e=(0,g.sg)(e=>{"Tab"!==e.key||(0,u.ZJ)()||(e.preventDefault(),(0,r.RK)(qe))},2e3,!0,!1);return(0,m.A)({onTab:e})},[qe]),(0,n.vJ)(()=>{const e=xe.current;function t(){e.blur()}return ee&&e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},[ee]);const et=(0,v.A)(()=>Boolean($&&G()),[$,G]),tt=(0,d.A)("form-control allow-selection",et&&"touched",ee&&"focus-disabled"),at=(0,d.A)("input-scroller-content",Ae&&"is-need-premium"),nt="string"==typeof _?_:void 0;return n.Ay.createElement("div",{id:t,onClick:ee?ie:void 0,dir:ke.isRtl?"rtl":void 0},n.Ay.createElement("div",{className:(0,d.A)("custom-scroll",pe,Ae&&"is-need-premium"),onScroll:ce,onClick:C||Y?void 0:function(){C||Y||N&&Ae||Ee({chatId:a,messageListType:ye})}},n.Ay.createElement("div",{className:at},n.Ay.createElement(ue,{inputRef:xe,getHtml:G,setHtml:re}),n.Ay.createElement("div",{ref:xe,id:J||o.CfG,className:tt,contentEditable:C||Y,role:"textbox",dir:"auto",tabIndex:0,onClick:qe,onChange:function(e){const{innerHTML:t,textContent:a}=e.currentTarget;if(re("<br>"===t?"":t),!c.TF&&(!a||!a.length)&&(c.TL||!t.includes("emoji-small"))&&!t.includes("custom-emoji")){const e=window.getSelection();e&&(xe.current.blur(),e.removeAllRanges(),(0,h.A)(xe.current,!0))}},onKeyDown:function(e){const{isComposing:t}=e,a=G();if(!t&&!a&&(e.metaKey||e.ctrlKey)){const t="ArrowDown"===e.key?1:"ArrowUp"===e.key?-1:void 0;if(t)return e.preventDefault(),void ve({targetIndexDelta:t})}t||"Enter"!==e.key||e.shiftKey?t||"ArrowUp"!==e.key||a||e.metaKey||e.ctrlKey||e.altKey?e.target.addEventListener("keyup",Ze,{once:!0}):(e.preventDefault(),fe()):!Ve&&("enter"===oe&&!e.shiftKey||"ctrl-enter"===oe&&(e.ctrlKey||e.metaKey))&&(e.preventDefault(),Be(),le())},onMouseDown:function(e){function t(e){e instanceof KeyboardEvent&&"Esc"!==e.key&&"Escape"!==e.key||(setTimeout(()=>{Te.current=!1},100),window.removeEventListener("keydown",t),window.removeEventListener("mousedown",t))}2===e.button?Te.current||(Te.current=!0,document.addEventListener("mousedown",t),document.addEventListener("keydown",t)):(e.currentTarget.closest(".message-input-wrapper")||e.target).addEventListener("mouseup",Ze,{once:!0})},onContextMenu:c.Ni?function(e){Qe()&&(Ue(!ze),ze?Be():(e.preventDefault(),e.stopPropagation(),Ye()))}:void 0,onTouchCancel:c.Ni?Ze:void 0,"aria-label":nt,onFocus:Ae?void 0:de,onBlur:Ae?void 0:me}),!Q&&n.Ay.createElement("span",{className:(0,d.A)("placeholder-text",!C&&!Y&&"with-icon",Ae&&"is-need-premium"),dir:"auto"},!C&&!Y&&n.Ay.createElement(U.A,{name:"lock-badge",className:"placeholder-icon"}),Je?n.Ay.createElement(V.A,{langKey:q,endsAt:W,onEnd:Ke}):_,N&&Ae&&n.Ay.createElement(j.A,{className:"unlock-button",size:"tiny",color:"adaptive",onClick:Xe},ke("StoryRepliesLockedButton"))),n.Ay.createElement("canvas",{ref:Ie,className:"shared-canvas"}),n.Ay.createElement("canvas",{ref:Se,className:"shared-canvas"}),n.Ay.createElement("div",{ref:Me,className:"absolute-video-container"}))),n.Ay.createElement("div",{ref:Ne,className:(0,d.A)("custom-scroll",pe,"clone",Ae&&"is-need-premium")},n.Ay.createElement("div",{className:at},n.Ay.createElement("div",{ref:Ce,className:(0,d.A)(tt,"clone"),dir:"auto"}))),void 0!==l&&n.Ay.createElement("div",{className:"max-length-indicator",dir:"auto"},l),n.Ay.createElement(K,{isOpen:Pe,anchorPosition:Re,selectedRange:De,setSelectedRange:Oe,onClose:We}),Q&&n.Ay.createElement("span",{className:"forced-placeholder"},(0,A.A)(Q)))}))},61097:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(90709),s=a(84051),o=a(66644),r=a(67054),i=a(87679),l=a(41074),c=a(17712);const d=.1;let m=-1;function u(e,t){return function(e,t=!1){const a=(0,s.li)(),n=(0,s.Kr)(()=>(0,r.A)(l.bP,++m),[]),u=(0,s.li)(),p=(0,c.A)(async(e,t)=>{const a=await(0,i.NN)(t);a&&(0,o.RK)(()=>{e.width=a.width,e.height=a.height,u.current=e.transferControlToOffscreen();const s=Math.ceil(Math.min(a.width,a.height)*d);(0,l.M1)({name:"offscreen-canvas:blurThumb",args:[u.current,t,s],transferables:[u.current]},n)})});return(0,s.Nf)(()=>{if(!e||t||u.current)return;const n=a.current;n&&p(n,e)},[p,t,e]),a}(e?"string"==typeof e?e:(0,n.VD)(e):void 0,t)}},63744:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(84051),s=a(13439),o=a(60919),r=a(71331),i=a(87357),l=a(14),c=a(59030),d=a(48885),m=a(26875),u=a(64493);const p=(0,n.ph)((0,s.EK)((e,{chatId:t})=>{const a=(0,o.hds)(e,t),n=(0,r.mD)(e,t);return{groupCall:n,isActive:((0,o.nTw)(e).isMasterTab?e.groupCalls.activeGroupCallId:void 0)!==n?.id&&Boolean(n?n.participantsCount>0&&n.isLoaded:a&&a.isCallNotEmpty&&a.isCallActive)}})(({chatId:e,isActive:t,className:a,groupCall:o,onPaneStateChange:r})=>{const{requestMasterAndJoinGroupCall:p}=(0,s.ko)(),h=(0,c.A)(),g=(0,n.hb)(()=>{p({chatId:e})},[p,e]),A=o?.participants,y=(0,n.Kr)(()=>{if(!A)return[];const e=(0,s.mS)().users.byId,t=(0,s.mS)().chats.byId;return Object.values(A).slice(0,3).map(({id:a})=>e[a]||t[a]).filter(Boolean)},[A]),f=(0,l.A)(o?.participantsCount,!0),v=(0,l.A)(y,!0),E=Boolean(o&&t),{ref:b,shouldRender:x}=(0,d.A)({isOpen:E,onStateChange:r});if(x)return n.Ay.createElement("div",{ref:b,className:(0,i.A)("GroupCallTopPane",a),onClick:g},n.Ay.createElement("div",{className:"info"},n.Ay.createElement("span",{className:"title"},h("VoipGroupVoiceChat")),n.Ay.createElement("span",{className:"participants"},h("Participants",f??0,"i"))),Boolean(v?.length)&&n.Ay.createElement(m.A,{size:"small",peers:v,className:"avatars"}),n.Ay.createElement(u.A,{round:!0,className:"join"},h("VoipChatJoin")))}))},63947:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(87357),l=a(17663),c=a(83868),d=a(54464),m=a(10722),u=a(17712),p=a(62587),h=a(59030),g=a(54746),A=a(71429),y=a(24433),f=a(59816);const v="NOCaj4mx",E=(0,n.ph)((0,s.EK)((e,{story:t})=>{const a=(0,r.hds)(e,t.peerId),n=a?.isProtected,{maxPinnedStoriesCount:s}=e.appConfig||{},o="isOut"in t&&t.isOut,i=(0,r.gVx)(e,t.peerId),l=i?.some(e=>e.id===t.id);return{isProtected:n,isPinned:l,canPin:o&&(!s||(i?.length||0)<s)}})(function({story:e,isProtected:t,isArchive:a,isPinned:r,canPin:E}){const{openStoryViewer:b,loadPeerSkippedStories:x,toggleStoryInProfile:w,toggleStoryPinnedToTop:C,showNotification:N}=(0,s.ko)(),I=(0,h.A)(),S=(0,n.li)(),M=(0,u.A)(()=>S.current),k=(0,u.A)(()=>document.body),T=(0,u.A)(()=>document.querySelector("#portals .story-context-menu .bubble")),P=(0,u.A)(()=>({withPortal:!0,isDense:!0})),L=e&&e.peerId,B=e&&"content"in e,R=B&&e.isOut,F=e&&"isDeleted"in e,D=B?e.content.video:void 0,O=D&&(0,l.QO)(D.duration),z=B?(0,o.EN)(e):void 0,U=(0,p.A)(z)||D?.thumbnail?.dataUri;(0,n.vJ)(()=>{!e||B||F||x({peerId:e.peerId})},[F,B,e]);const{isContextMenuOpen:j,contextMenuAnchor:V,handleBeforeContextMenu:J,handleContextMenu:H,handleContextMenuClose:K,handleContextMenuHide:$}=(0,m.A)(S,!R),G=(0,n.hb)(()=>{b({peerId:e.peerId,storyId:e.id,isSinglePeer:!0,isPrivate:!0,isArchive:a})},[a,e.id,e.peerId]),_=(0,u.A)(e=>{(0,d.u)(e),J(e)}),q=(0,u.A)(t=>{(0,c.A)(t),w({peerId:L,storyId:e.id,isInProfile:!0}),N({message:I("Story.ToastSavedToProfileText")}),K()}),W=(0,u.A)(t=>{(0,c.A)(t),w({peerId:L,storyId:e.id,isInProfile:!1}),N({message:I("Story.ToastRemovedFromProfileText")}),K()}),Q=(0,u.A)(()=>{C({peerId:L,storyId:e.id}),K()});return n.Ay.createElement("div",{ref:S,className:(0,i.A)("kxMIqtqr","scroll-item"),onMouseDown:_,onClick:G,onContextMenu:H},F&&n.Ay.createElement("span",null,n.Ay.createElement(g.A,{className:"cq7jTRkg",name:"story-expired"}),I("ExpiredStory")),r&&n.Ay.createElement(g.A,{className:(0,i.A)(v,"GTWFQyJx"),name:"pin-badge"}),B&&Boolean(e.views?.viewsCount)&&n.Ay.createElement("span",{className:(0,i.A)(v,"g09Rb4Ps")},n.Ay.createElement(g.A,{name:"eye"}),e.views.viewsCount),O&&n.Ay.createElement("span",{className:(0,i.A)(v,"lM_2MMyQ")},O),n.Ay.createElement("div",{className:"D6Yajvjx"},U&&n.Ay.createElement("img",{src:U,alt:"",className:"cV_QL3N5",draggable:!1}),B&&n.Ay.createElement(f.A,{story:e}),t&&n.Ay.createElement("span",{className:"protector"})),void 0!==V&&n.Ay.createElement(A.A,{isOpen:j,anchor:V,getTriggerElement:M,getRootElement:k,getMenuElement:T,getLayout:P,className:(0,i.A)("UAfI9izT","story-context-menu"),autoClose:!0,onClose:K,onCloseAnimationEnd:$,withPortal:!0},a&&n.Ay.createElement(y.A,{icon:"archive",onClick:q},I("StoryList.SaveToProfile")),!a&&n.Ay.createElement(y.A,{icon:"archive",onClick:W},I("Story.Context.RemoveFromProfile")),!a&&!r&&E&&n.Ay.createElement(y.A,{icon:"pin",onClick:Q},I("StoryList.ItemAction.Pin")),!a&&r&&n.Ay.createElement(y.A,{icon:"unpin",onClick:Q},I("StoryList.ItemAction.Unpin"))))}))},63988:(e,t,a)=>{"use strict";a.d(t,{D7:()=>c,aG:()=>i,gs:()=>r,tF:()=>l});var n=a(16581),s=a(83414),o=a(672);function r(e,t,a,n=!1){return(0,o.A)(t=>{t(e())},t,a,n)}function i(e,t,a=!1){const n=r(()=>e(),[e],t,a);return(0,s.A)(n,[n,e],!0)}function l(e,t,a,s=!1,o=!1){return(0,n.A)(t=>{t(e())},t,a,s,o)}function c(e,t,a=!1,n=!1){const o=l(()=>e(),[e],t,a,n);return(0,s.A)(o,[o,e],!0)}},64154:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(13439),o=a(37836);const r=new Map;function i(e,t,a,o){const i=o&&a?e?.byLangCode[o]?.[a]:void 0,{isPending:c,text:d}=i||{};return(0,n.vJ)(()=>{t&&a&&!d&&void 0===c&&o&&function(e,t,a){const n=r.get(a)||new Map,o=n.get(e)||[];o.includes(t)||(o.push(t),n.set(e,o),r.set(a,n),(0,s.ko)().markMessagesTranslationPending({chatId:e,messageIds:o,toLanguageCode:a})),l()}(t,a,o)},[t,d,c,a,o]),t&&a?{isPending:c,translatedText:d}:{isPending:!1,translatedText:void 0}}const l=(0,o.nF)(function(){const{translateMessagesByTencent:e}=(0,s.ko)();let t=!1;r.forEach((a,n)=>{a.forEach((a,s)=>{const o=a.slice(0,20);o.length<a.length&&(t=!0),e({chatId:s,messageIds:o,toLanguageCode:n}),function(e,t,a){const n=r.get(a);if(!n?.size)return void r.delete(a);const s=n.get(e);if(!s?.length)return void n.delete(e);const o=s.filter(e=>!t.includes(e));if(!o?.length)return n.delete(e),void(n.size||r.delete(a));n.set(e,o)}(s,o,n)})}),t&&l()},500)},65240:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>j,lz:()=>z});var n=a(84051),s=a(13439),o=a(23174),r=a(89925),i=a(90709),l=a(60919),c=a(56494),d=a(53827),m=a(87357),u=a(50442),p=a(17663),h=a(58443),g=a(91525),A=a(4961);const y=30,f=2,v=4,E=1,b=23;var x=a(43874),w=a(88792),C=a(71533),N=a(17712),I=a(62587),S=a(69419),M=a(59030),k=a(50680),T=a(64493),P=a(96530),L=a(35913),B=a(4438),R=a(54746);const F=window.matchMedia("(max-width: 375px)"),D=window.matchMedia("(max-width: 410px)"),O=10;function z(e,t,a=0,s=!1,o=!1,r=!1,i=!1){const l=(0,n.li)(),{data:c,peak:d}=(0,n.Kr)(()=>{if(!t)return;const{waveform:e,duration:a}=t;if(!e)return{data:new Array(Math.min(a,y)).fill(0),peak:0};const{MIN_SPIKES:n,MAX_SPIKES:s}=function(e,t){return{MIN_SPIKES:e?F.matches?16:20:25,MAX_SPIKES:e?F.matches?35:t&&D.matches?40:45:75}}(r,o),i=Math.min(a/O,1),l=Math.round(n+(s-n)*i);return function(e,t){let a=0;const n=new Array(t),s=e.length/t,o=e[0],r=e[e.length-1];for(let i=0;i<t;i++){const t=Math.floor(i*s),l=((e[t-1]??o)+(e[t]??o)+(e[t+1]??r))/3;n[i]=l,a<l&&(a=l)}return{data:n,peak:a}}(function(e){const t=8*e.length,a=Math.floor(t/5);if(!a)return[];const n=Array(a),s=e;for(let e=0,t=a-1;e!==t;++e){const t=Math.floor(5*e/8),a=Math.floor(5*e%8),o=s[t]+(s[t+1]<<8);n[e]=o>>a&31}const o=Math.floor(5*(a-1)/8),r=Math.floor(5*(a-1)%8),i=s[o]+(s[o+1]<<8);return n[a-1]=i>>r&31,n}(new Uint8Array(e)),l)},[r,t,o])||{};return(0,n.Nf)(()=>{const t=l.current;t&&c&&void 0!==d&&function(e,t,a,{peak:n,fillStyle:s,progressFillStyle:o}){const r=t.length*v,i=b;e.width=2*r,e.height=2*i,e.style.width=`${r}px`,e.style.height=`${i}px`;const l=e.getContext("2d");l.scale(2,2),t.forEach((e,r)=>{l.globalAlpha=r/t.length>=a?.5:1,l.fillStyle=a>r/t.length?o:s;const c=Math.max(2,b*(e/Math.max(1,n)));!function(e,t,a,n,s,o){n<2*o&&(o=n/2),s<2*o&&(o=s/2),e.beginPath(),e.moveTo(t+o,a),e.arcTo(t+n,a,t+n,a-s,o),e.arcTo(t+n,a-s,t,a-s,o),e.arcTo(t,a-s,t,a,o),e.arcTo(t,a,t+n,a,o),e.closePath()}(l,r*v,(i+c)/2,f,c,E),l.fill()})}(t,c,i?1-a:a,{peak:d,fillStyle:s?"dark"===e?"#B7ABED":"#AEDFA4":"dark"===e?"#494A78":"#ADD3F7",progressFillStyle:s?"dark"===e?"#FFFFFF":"#4FAE4E":"dark"===e?"#8774E1":"#3390EC"})},[s,d,a,c,e,i]),l}function U(e,t,a){return n.Ay.createElement("div",{className:"seekline",ref:a},t.map(({start:e,end:t})=>n.Ay.createElement("div",{className:"seekline-buffered-progress",style:`left: ${100*e}%; right: ${100-100*t}%`})),n.Ay.createElement("span",{className:"seekline-play-progress"},n.Ay.createElement("i",{className:"seekline-play-progress-inner",style:`transform: translateX(${100*e}%)`})),n.Ay.createElement("span",{className:"seekline-thumb"},n.Ay.createElement("i",{className:"seekline-thumb-inner",style:`transform: translateX(${100*e}%)`})))}const j=(0,n.ph)((0,s.EK)((e,{message:t})=>({webPage:(0,l.Pn$)(e,t),mediaDuration:(0,c.Y9)(e,t)}))(({theme:e,message:t,senderTitle:a,uploadProgress:l,origin:c,date:y,noAvatars:f,className:v,isSelectable:E,isSelected:b,isDownloading:F,isTranscribing:D,isTranscriptionHidden:O,isTranscribed:j,isTranscriptionError:V,canDownload:J,canTranscribe:H,autoPlay:K,webPage:$,mediaDuration:G,onHideTranscription:_,onPlay:q,onPause:W,onReadMedia:Q,onCancelUpload:Y,onDateClick:Z})=>{const{cancelMediaDownload:X,downloadMedia:ee,transcribeAudio:te,openOneTimeMediaModal:ae}=(0,s.ko)(),{content:{audio:ne,voice:se,video:oe},isMediaUnread:re}=t,ie=ne||(0,i.y3)($),le=se||oe||ie,ce=se||oe,de=Boolean(se||oe),me=(0,n.li)(!1),ue=(0,n.li)(),pe=(0,M.A)(),{isRtl:he}=pe,{isMobile:ge}=(0,x.Ay)(),[Ae,ye]=(0,n.J0)(!1),fe=Ae||!0,ve=(0,i.VO)(le,"pictogram"),Ee=(0,I.A)(ve,!1,o.qZ.BlobUrl),be=(0,i.G5)(t),xe=c===r.d9.OneTimeModal,we=de?be?"oneTimeVoice":"voice":"audio",Ce=(0,I.A)((0,i.VO)(le,"inline"),!fe,(0,i.Cz)(le,"inline")),{loadProgress:Ne}=(0,S.A)((0,i.VO)(le,"download"),!F,(0,i.Cz)(le,"download")),Ie=(0,N.A)(()=>{ye(!0),q?.(t.id,t.chatId)}),Se=(0,N.A)(()=>{ye(!1)}),{isBuffered:Me,bufferedRanges:ke,bufferingHandlers:Te,checkBuffering:Pe}=(0,C.A)(),Le=xe,{isPlaying:Be,playProgress:Re,playPause:Fe,setCurrentTime:De,duration:Oe}=(0,w.A)((0,d.dj)(t),G,we,Ce,Te,void 0,Pe,Boolean(Ae||K),Ie,Se,(0,i.Nb)(t)||be,void 0,W,Le,be&&!xe),ze=1-Re,Ue=(0,i.Ie)(t),je=be&&xe,Ve=z(e,ce,!re||Ue||je?Re:1,Ue,!f,ge,je),Je=Be||Re>0&&Re<1;(0,n.vJ)(()=>{ye(Be)},[Be]);const He=Ae&&!Me,{isUploading:Ke,isTransferring:$e,transferProgress:Ge}=(0,i.LK)(l||Ne,He||F,void 0!==l),{shouldRender:_e,transitionClassNames:qe}=(0,k.A)($e),We=_e&&(He||Ke),Qe=(0,N.A)(()=>{if(Ke)Y?.();else{if(be)return ae({message:t}),void Q?.();Be||q?.(t.id,t.chatId),(0,s.ko)().setAudioPlayerOrigin({origin:c}),ye(!Ae),Fe()}});(0,n.vJ)(()=>{Q&&re&&Be&&Q()},[Be,re,Q]);const Ye=(0,N.A)(()=>{F?X({media:le}):ee({media:le,originMessage:t})}),Ze=(0,N.A)(e=>{if(me.current&&ue.current){const{width:t,left:a}=ue.current.getBoundingClientRect(),n=e instanceof MouseEvent?e.clientX:e.targetTouches[0].clientX;e.stopPropagation(),De(Math.max(Math.min(Oe*((n-a)/t),Oe-.1),.001))}}),Xe=(0,N.A)(e=>{e instanceof MouseEvent&&2===e.button||(me.current=!0,Ze(e))}),et=(0,N.A)(()=>{me.current=!1}),tt=(0,N.A)(()=>{Z(t)}),at=(0,N.A)(()=>{te({chatId:t.chatId,messageId:t.id})});function nt(){if(de)return a||"Voice";const{title:e,fileName:t}=ie;return e||t}(0,n.vJ)(()=>{if(ue.current&&Je&&!xe)return(0,u.wJ)(ue.current,{onCapture:Xe,onRelease:et,onClick:et,onDrag:Ze})},[Je,Xe,Ze,et,xe]);const st=(0,m.A)("Audio",v,xe&&"non-interactive",c===r.d9.Inline&&"inline",Ue&&c===r.d9.Inline&&"own",(c===r.d9.Search||c===r.d9.SharedMedia)&&"bigger",b&&"audio-is-selected"),ot=["toogle-play-wrapper"];We?ot.push("loading"):ot.push(Be?"pause":"play");const rt=(0,m.A)("content",Je&&"with-seekline");function it(){return n.Ay.createElement("div",{className:rt},n.Ay.createElement("div",{className:"content-row"},n.Ay.createElement("p",{className:"title",dir:"auto",title:nt()},(0,A.A)(nt())),n.Ay.createElement("div",{className:"message-date"},Boolean(y)&&n.Ay.createElement(P.A,{className:"date",onClick:tt},(0,p.be)(pe,1e3*y)))),Je&&n.Ay.createElement("div",{className:"meta search-result",dir:he?"rtl":void 0},n.Ay.createElement("span",{className:"duration with-seekline",dir:"auto"},Re<1&&(0,p.QO)(Oe*Re,Oe)),U(Re,ke,ue)),!Je&&function(){if(de)return n.Ay.createElement("div",{className:"meta",dir:he?"rtl":void 0},(0,p.QO)((se||oe).duration));const{performer:e}=ie;return n.Ay.createElement("div",{className:"meta",dir:he?"rtl":void 0},(0,p.QO)(Oe),n.Ay.createElement("span",{className:"bullet"},"•"),e&&n.Ay.createElement("span",{className:"performer",title:e},(0,A.A)(e)),e&&a&&n.Ay.createElement("span",{className:"bullet"},"•"),a&&n.Ay.createElement("span",{title:a},(0,A.A)(a)))}())}return n.Ay.createElement("div",{className:st,dir:pe.isRtl?"rtl":"ltr"},E&&n.Ay.createElement("div",{className:"message-select-control no-selection"},b&&n.Ay.createElement(R.A,{name:"select"})),n.Ay.createElement("div",{className:(0,m.A)(...ot)},n.Ay.createElement(T.A,{round:!0,ripple:!ge,size:"smaller",className:"toggle-play",color:Ee?"translucent-white":"primary",ariaLabel:Be?"Pause audio":"Play audio",onClick:Qe,isRtl:pe.isRtl,backgroundImage:Ee,nonInteractive:xe},!xe&&n.Ay.createElement(R.A,{name:"play"}),!xe&&n.Ay.createElement(R.A,{name:"pause"}),xe&&n.Ay.createElement(B.A,{className:"flame",tgsUrl:h.w.Flame,nonInteractive:!0,noLoop:!1,size:40})),be&&!xe&&n.Ay.createElement(R.A,{name:"view-once"})),_e&&n.Ay.createElement("div",{className:(0,m.A)("media-loading",qe,We&&"interactive")},n.Ay.createElement(L.A,{progress:Ge,transparent:!0,withColor:!0,size:"m",onClick:We?Qe:void 0,noCross:!We})),xe&&!_e&&n.Ay.createElement("div",{className:(0,m.A)("media-loading")},n.Ay.createElement(L.A,{progress:Re,transparent:!0,size:"m",noCross:!0,rotationOffset:3/4})),ie&&J&&!Ke&&n.Ay.createElement(T.A,{round:!0,size:"tiny",className:"download-button",ariaLabel:F?"Cancel download":"Download",onClick:Ye},n.Ay.createElement(R.A,{name:F?"close":"arrow-down"})),c===r.d9.Search&&it(),c!==r.d9.Search&&ie&&function(e,t,a,s,o,r,i,l,c,d,m){const{title:u,performer:h,fileName:y}=t,f=s||o>0&&o<1,{isRtl:v}=e;return n.Ay.createElement("div",{className:"content"},n.Ay.createElement("p",{className:"title",dir:"auto",title:u},(0,A.A)(u||y)),f&&n.Ay.createElement("div",{className:"meta",dir:v?"rtl":void 0},n.Ay.createElement("span",{className:"duration with-seekline",dir:"auto"},(0,p.QO)(a*o,a)),U(o,r,i)),!f&&l&&n.Ay.createElement("div",{className:"meta",dir:v?"rtl":void 0},d?`${(0,g.zV)(t.size*d)} / `:void 0,(0,g.zV)(t.size)),!f&&!l&&n.Ay.createElement("div",{className:"meta",dir:v?"rtl":void 0},n.Ay.createElement("span",{className:"duration",dir:"auto"},(0,p.QO)(a)),h&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"bullet"},"•"),n.Ay.createElement("span",{className:"performer",dir:"auto",title:h},(0,A.A)(h))),Boolean(c)&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement("span",{className:"bullet"},"•"),n.Ay.createElement(P.A,{className:"date",onClick:m},(0,p.fS)(e,1e3*c,!0)))))}(pe,ie,Oe,Be,Re,ke,ue,F||Ke,y,Ge,Z?tt:void 0),c===r.d9.SharedMedia&&ce&&it(),(c===r.d9.Inline||xe||j)&&ce&&function(e,t,a,s,o,i,l,c,d,u,h,g){return n.Ay.createElement("div",{className:"content"},n.Ay.createElement("div",{className:"waveform-wrapper"},n.Ay.createElement("div",{className:"waveform",draggable:!1,ref:t},n.Ay.createElement("canvas",{ref:a})),u&&n.Ay.createElement(T.A,{onClick:()=>{(c||d)&&h?h(!l):i||u()}},n.Ay.createElement(R.A,{name:c||d?"down":"transcribe",className:(0,m.A)("transcribe-icon",(c||d)&&!l&&"transcribe-shown")}),i&&n.Ay.createElement("svg",{viewBox:"0 0 32 24",className:"loading-svg"},n.Ay.createElement("rect",{className:"loading-rect",fill:"transparent",width:"32",height:"24","stroke-width":"3","stroke-linejoin":"round",rx:"6",ry:"6",stroke:"white","stroke-dashoffset":"1","stroke-dasharray":"32,68"})))),n.Ay.createElement("p",{className:(0,m.A)("voice-duration",g!==r.d9.OneTimeModal&&o&&"unread"),dir:"auto"},0===s||1===s?(0,p.QO)(e.duration):(0,p.QO)(e.duration*s)))}(ce,ue,Ve,be?ze:Re,re,D,O,j,V,H?at:void 0,_,c))}))},65741:(e,t,a)=>{"use strict";e.exports=a.p+"GiftRedRound.a86b78b0b99e07f69a70.svg"},66991:(e,t,a)=>{"use strict";a.d(t,{Y:()=>m,c:()=>u});var n=a(84051),s=a(31481),o=a(66644),r=a(19822),i=a(39761),l=a(96454),c=a(95704);const d=100;function m(e,t,a){return(0,n.vJ)(()=>{if(!t||!e.current)return;const n=g(),s=e.current;if(!l.Yw||!a||!n?.isTypeSupported(a))return;const m=new n;function u(){if(!t||!a)return;const e=m.addSourceBuffer(a),n=(0,c.h)(t);e.addEventListener("updateend",function(){n.next().then(({value:t,done:a})=>{"open"===m.readyState&&(a?h(m):p(e,t))})}),n.next().then(({value:t,done:a})=>{a||"open"!==m.readyState||((0,o.RK)(()=>{s.style.display="block",setTimeout(()=>{(0,o.RK)(()=>{(0,r.ZM)(s,{opacity:"1"})})},d)}),p(e,t))})}return m.addEventListener("sourceopen",u,{once:!0}),(0,o.RK)(()=>{(0,r.ZM)(s,{display:"none",opacity:"0"}),s.src=URL.createObjectURL(m)}),()=>{(0,o.RK)(()=>{const e=s.src;(0,i.A)(s),m.removeEventListener("sourceopen",u),"open"===m.readyState&&h(m),URL.revokeObjectURL(e)})}},[a,t,e]),u(a)}function u(e){return!(!l.Yw||!e)&&Boolean(g()?.isTypeSupported(e))}function p(e,t){try{e.appendBuffer(t)}catch(e){s.Oig&&console.warn("[Stream] failed to append buffer",e)}}function h(e){try{e.endOfStream()}catch(e){s.Oig&&console.warn("[Stream] failed to end stream",e)}}function g(){return"ManagedMediaSource"in window?ManagedMediaSource:"MediaSource"in window?MediaSource:void 0}},67054:(e,t,a)=>{"use strict";function n(e,t){return t-Math.floor(t/e)*e}a.d(t,{A:()=>n})},68153:(e,t,a)=>{"use strict";e.exports=a.p+"GiftGreenRound.f66f0acd5d3dda1c7baf.svg"},69419:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var n=a(84051),s=a(23174),o=a(60919),r=a(96454),i=a(58554),l=a(37836),c=a(63527),d=a(30857),m=a(14745);const u=.75,p=1500,h=500;function g(e,t=!1,a=s.qZ.BlobUrl,g,A=!1){const y=e?i.Ih(e):void 0,f=r.Uz&&a===s.qZ.Progressive,v=(0,d.A)(),E=(0,c.A)(o.nIz),b=(0,m.A)(),[x,w]=(0,n.J0)(y&&!f?1:0),C=(0,n.li)(),N=(0,n.Kr)(()=>(0,l.nF)(e=>{C.current&&(!g||Date.now()-C.current>g)&&w(e)},h,!0),[g]);return(0,n.vJ)(()=>{!t&&e&&(y?f&&setTimeout(()=>{w(u)},p):(w(0),C.current&&i.ch(N),C.current=Date.now(),i.hd(e,a,A,N,b).then(()=>{const e=Date.now()-C.current;C.current=void 0,!g||e>=g?v():setTimeout(v,g-e)})))},[t,e,y,a,f,g,N,A,b,E]),(0,n.vJ)(()=>{t&&C.current&&(i.ch(N),w(0),C.current=void 0)},[N,t]),(0,n.vJ)(()=>()=>{e&&i.Cn(e,b)},[b,e]),{mediaData:y,loadProgress:x}}},70809:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,D3:()=>i,ON:()=>g,S:()=>h,Td:()=>r,US:()=>c,Xq:()=>u,Yy:()=>m,d7:()=>A,fl:()=>d,hz:()=>s,mP:()=>f,qx:()=>p,sY:()=>y,wF:()=>o});var n=a(96540);const s=({size:e=16})=>n.createElement("svg",{height:e,strokeLinejoin:"round",viewBox:"0 0 16 16",width:e,style:{color:"currentcolor"}},n.createElement("g",{clipPath:"url(#clip0_2393_1490)"},n.createElement("path",{d:"M8 0V4",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.5",d:"M8 16V12",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.9",d:"M3.29773 1.52783L5.64887 4.7639",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.1",d:"M12.7023 1.52783L10.3511 4.7639",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.4",d:"M12.7023 14.472L10.3511 11.236",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.6",d:"M3.29773 14.472L5.64887 11.236",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.2",d:"M15.6085 5.52783L11.8043 6.7639",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.7",d:"M0.391602 10.472L4.19583 9.23598",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.3",d:"M15.6085 10.4722L11.8043 9.2361",stroke:"currentColor",strokeWidth:"1.5"}),n.createElement("path",{opacity:"0.8",d:"M0.391602 5.52783L4.19583 6.7639",stroke:"currentColor",strokeWidth:"1.5"})),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_2393_1490"},n.createElement("rect",{width:"16",height:"16",fill:"white"})))),o=({size:e=16})=>n.createElement("svg",{height:e,viewBox:"0 0 16 16",width:e,style:{color:"currentcolor"}},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 3H13V13H3V3Z",fill:"currentColor"})),r=({size:e=24})=>n.createElement("svg",{height:e,viewBox:"0 0 24 24",width:e,fill:"none"},n.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H20C22.2091 0 24 1.79086 24 4V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V4Z"}),n.createElement("path",{d:"M9.60016 14.3991C9.60016 12.137 9.60016 11.0051 10.3033 10.3027C11.0056 9.59961 12.1375 9.59961 14.3997 9.59961H15.1996C17.4618 9.59961 18.5937 9.59961 19.296 10.3027C19.9992 11.0051 19.9992 12.137 19.9992 14.3991V15.1991C19.9992 17.4612 19.9992 18.5931 19.296 19.2955C18.5937 19.9986 17.4618 19.9986 15.1996 19.9986H14.3997C12.1375 19.9986 11.0056 19.9986 10.3033 19.2955C9.60016 18.5931 9.60016 17.4612 9.60016 15.1991V14.3991Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{d:"M15.9988 9.59946C15.9964 7.23409 15.9612 6.00861 15.2725 5.16949C15.1396 5.00762 14.9912 4.85919 14.8294 4.72633C13.943 4 12.6296 4 9.99942 4C7.37007 4 6.055 4 5.16949 4.72633C5.00762 4.85919 4.85919 5.00762 4.72633 5.16949C4 6.0558 4 7.36927 4 9.99942C4 12.6288 4 13.9438 4.72633 14.8294C4.85919 14.9912 5.00762 15.1396 5.16949 15.2725C6.00941 15.9604 7.23329 15.9972 9.59946 15.9988",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),i=({size:e=16})=>n.createElement("svg",{height:e,strokeLinejoin:"round",viewBox:"0 0 16 16",width:e,style:{color:"currentcolor"}},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0607 6.74999L11.5303 7.28032L8.7071 10.1035C8.31657 10.4941 7.68341 10.4941 7.29288 10.1035L4.46966 7.28032L3.93933 6.74999L4.99999 5.68933L5.53032 6.21966L7.99999 8.68933L10.4697 6.21966L11 5.68933L12.0607 6.74999Z",fill:"currentColor"}));function l({size:e=16}){return n.createElement("svg",{height:e,strokeLinejoin:"round",viewBox:"0 0 24 24",width:e,fill:"none"},n.createElement("path",{d:"M8.6125 10.8083L14.3875 7.69167M8.6125 13.1917L14.3875 16.3083M3.625 12C3.625 12.7293 3.90156 13.4288 4.39384 13.9445C4.88613 14.4603 5.55381 14.75 6.25 14.75C6.94619 14.75 7.61387 14.4603 8.10616 13.9445C8.59844 13.4288 8.875 12.7293 8.875 12C8.875 11.2707 8.59844 10.5712 8.10616 10.0555C7.61387 9.53973 6.94619 9.25 6.25 9.25C5.55381 9.25 4.88613 9.53973 4.39384 10.0555C3.90156 10.5712 3.625 11.2707 3.625 12ZM14.125 6.5C14.125 7.22935 14.4016 7.92882 14.8938 8.44454C15.3861 8.96027 16.0538 9.25 16.75 9.25C17.4462 9.25 18.1139 8.96027 18.6062 8.44454C19.0984 7.92882 19.375 7.22935 19.375 6.5C19.375 5.77065 19.0984 5.07118 18.6062 4.55546C18.1139 4.03973 17.4462 3.75 16.75 3.75C16.0538 3.75 15.3861 4.03973 14.8938 4.55546C14.4016 5.07118 14.125 5.77065 14.125 6.5ZM14.125 17.5C14.125 18.2293 14.4016 18.9288 14.8938 19.4445C15.3861 19.9603 16.0538 20.25 16.75 20.25C17.4462 20.25 18.1139 19.9603 18.6062 19.4445C19.0984 18.9288 19.375 18.2293 19.375 17.5C19.375 16.7707 19.0984 16.0712 18.6062 15.5555C18.1139 15.0397 17.4462 14.75 16.75 14.75C16.0538 14.75 15.3861 15.0397 14.8938 15.5555C14.4016 16.0712 14.125 16.7707 14.125 17.5Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))}const c=({size:e=24})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor"},n.createElement("path",{d:"M7 17L17 7M7 7L17 17",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),d=({size:e=24})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none"},n.createElement("path",{d:"M20.3635 12.7068C20.5509 12.5193 20.6562 12.265 20.6562 11.9998C20.6562 11.7347 20.5509 11.4803 20.3635 11.2928L14.7065 5.63582C14.5179 5.45366 14.2653 5.35287 14.0031 5.35515C13.7409 5.35742 13.4901 5.46259 13.3046 5.648C13.1192 5.83341 13.0141 6.08422 13.0118 6.34642C13.0095 6.60862 13.1103 6.86122 13.2925 7.04982L17.2425 10.9998L3.99946 10.9998C3.73425 10.9998 3.47989 11.1052 3.29236 11.2927C3.10482 11.4803 2.99946 11.7346 2.99946 11.9998C2.99946 12.265 3.10482 12.5194 3.29236 12.7069C3.47989 12.8945 3.73425 12.9998 3.99946 12.9998L17.2425 12.9998L13.2925 16.9498C13.1103 17.1384 13.0095 17.391 13.0118 17.6532C13.0141 17.9154 13.1192 18.1662 13.3046 18.3516C13.4901 18.537 13.7409 18.6422 14.0031 18.6445C14.2653 18.6468 14.5179 18.546 14.7065 18.3638L20.3635 12.7068Z",fill:"currentColor"})),m=({size:e=24})=>n.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M14 7L9 12L14 17",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),u=({size:e=24})=>n.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M10 17L15 12L10 7",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),p=({size:e=24})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 15 15",fill:"none"},n.createElement("path",{d:"M0 15L1.56 8.055L10.185 7.515L1.56 6.93L0 0L15 7.5L0 15Z",fill:"currentColor"})),h=({size:e=24})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none"},n.createElement("path",{d:"M0 4C0 1.79086 1.79086 0 4 0H20C22.2091 0 24 1.79086 24 4V20C24 22.2091 22.2091 24 20 24H4C1.79086 24 0 22.2091 0 20V4Z"}),n.createElement("path",{d:"M13.5996 14.3449V9.65499C13.5996 7.03422 13.5996 5.72426 12.8596 5.3976C12.1187 5.07177 11.2475 5.99758 9.50496 7.8517C8.60251 8.81168 8.08807 9.02418 6.804 9.02418C5.68153 9.02418 5.11989 9.02418 4.71587 9.31084C3.87902 9.90582 4.00702 11.0683 4.00702 11.9999C4.00702 12.9316 3.87982 14.0941 4.71747 14.689C5.12069 14.9757 5.68233 14.9757 6.8048 14.9757C8.08887 14.9757 8.60331 15.1882 9.50576 16.1482C11.2483 18.0015 12.1195 18.9281 12.8604 18.6023C13.6004 18.2756 13.6004 16.9657 13.6004 14.344M15.9998 9.5C16.4998 10.1833 16.7998 11.0525 16.7998 11.9999C16.7998 12.9474 16.4998 13.8166 15.9998 14.4999M18.3999 7.83337C19.4 8.97168 20 10.4216 20 11.9999C20 13.5782 19.4 15.0282 18.3999 16.1665",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),g=({size:e=24})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none"},n.createElement("path",{d:"M12 4V20M8 9V15M20 10V14M4 10V14M16 7V17",stroke:"#4C72FF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),A=({size:e=20})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none"},n.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.29183 3.58321C7.29183 3.55495 7.30346 3.51147 7.35734 3.46432C7.41246 3.41609 7.50317 3.37488 7.61921 3.37488H12.3811C12.4972 3.37488 12.5879 3.41609 12.643 3.46432C12.6969 3.51147 12.7085 3.55495 12.7085 3.58321V4.62488H7.29183V3.58321ZM6.04183 4.62488V3.58321C6.04183 2.70201 6.82905 2.12488 7.61921 2.12488H12.3811C13.1713 2.12488 13.9585 2.70201 13.9585 3.58321V4.62488H15.6274H16.6699C17.0151 4.62488 17.2949 4.9047 17.2949 5.24988C17.2949 5.59506 17.0151 5.87488 16.6699 5.87488H16.2064L15.4459 15.8191C15.3457 17.122 14.2592 18.1283 12.9525 18.1283H7.04765C5.7409 18.1283 4.65446 17.1222 4.55423 15.8194L3.7937 5.87488H3.33105C2.98588 5.87488 2.70605 5.59506 2.70605 5.24988C2.70605 4.9047 2.98588 4.62488 3.33105 4.62488H4.37272H6.04183ZM13.3335 5.87488H6.66683H5.04735L5.80055 15.7235C5.85081 16.375 6.39416 16.8783 7.04765 16.8783H12.9525C13.606 16.8783 14.1493 16.3753 14.1996 15.7238L14.9528 5.87488H13.3335ZM11.6416 8.43754C11.9868 8.43754 12.2666 8.71736 12.2666 9.06254V13.752C12.2666 14.0972 11.9868 14.377 11.6416 14.377C11.2964 14.377 11.0166 14.0972 11.0166 13.752V9.06254C11.0166 8.71736 11.2964 8.43754 11.6416 8.43754ZM8.98372 9.06254C8.98372 8.71736 8.7039 8.43754 8.35872 8.43754C8.01355 8.43754 7.73372 8.71736 7.73372 9.06254V13.752C7.73372 14.0972 8.01355 14.377 8.35872 14.377C8.7039 14.377 8.98372 14.0972 8.98372 13.752V9.06254Z",fill:"#FF543D"})),y=({size:e=20})=>n.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M22 6.5H16",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{d:"M6 6.5H2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 10C8.067 10 6.5 8.433 6.5 6.5C6.5 4.567 8.067 3 10 3C11.933 3 13.5 4.567 13.5 6.5C13.5 8.433 11.933 10 10 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{d:"M22 17.5H18",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{d:"M8 17.5H2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),n.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 21C12.067 21 10.5 19.433 10.5 17.5C10.5 15.567 12.067 14 14 14C15.933 14 17.5 15.567 17.5 17.5C17.5 19.433 15.933 21 14 21Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),f=({size:e=20})=>n.createElement("svg",{width:e,height:e,viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",fill:"#3498db"},n.createElement("circle",{cx:"10",cy:"20",r:"4"},n.createElement("animate",{attributeName:"opacity",from:"0.3",to:"1",dur:"1.2s",begin:"0s",repeatCount:"indefinite"}),n.createElement("animate",{attributeName:"r",from:"3",to:"4",dur:"1.2s",begin:"0s",repeatCount:"indefinite"})),n.createElement("circle",{cx:"20",cy:"20",r:"4"},n.createElement("animate",{attributeName:"opacity",from:"0.3",to:"1",dur:"1.2s",begin:"0.2s",repeatCount:"indefinite"}),n.createElement("animate",{attributeName:"r",from:"3",to:"4",dur:"1.2s",begin:"0.2s",repeatCount:"indefinite"})),n.createElement("circle",{cx:"30",cy:"20",r:"4"},n.createElement("animate",{attributeName:"opacity",from:"0.3",to:"1",dur:"1.2s",begin:"0.4s",repeatCount:"indefinite"}),n.createElement("animate",{attributeName:"r",from:"3",to:"4",dur:"1.2s",begin:"0.4s",repeatCount:"indefinite"})))},71950:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(84051),s=a(87357),o=a(17663),r=a(14242),i=a(39351),l=a(59030),c=a(54746);const d="gvrp3KoR",m="IHb3ZATQ",u="zAPFdKbZ",p=[[{name:"followers",title:"ChannelStats.Overview.Followers"},{name:"enabledNotifications",title:"ChannelStats.Overview.EnabledNotifications",isPercentage:!0}],[{name:"viewsPerPost",title:"ChannelStats.Overview.ViewsPerPost"},{name:"viewsPerStory",title:"ChannelStats.Overview.ViewsPerStory"}],[{name:"sharesPerPost",title:"ChannelStats.Overview.SharesPerPost"},{name:"sharesPerStory",title:"ChannelStats.Overview.SharesPerStory"}],[{name:"reactionsPerPost",title:"ChannelStats.Overview.ReactionsPerPost"},{name:"reactionsPerStory",title:"ChannelStats.Overview.ReactionsPerStory"}]],h=[[{name:"members",title:"Stats.GroupMembers"},{name:"messages",title:"Stats.GroupMessages"}],[{name:"viewers",title:"Stats.GroupViewers"},{name:"posters",title:"Stats.GroupPosters"}]],g=[[{name:"viewsCount",title:"Stats.Message.Views",isPlain:!0},{name:"publicForwards",title:"Stats.Message.PublicShares",isPlain:!0}],[{name:"reactionsCount",title:"Channel.Stats.Overview.Reactions",isPlain:!0},{name:"forwardsCount",title:"Stats.Message.PrivateShares",isPlain:!0,isApproximate:!0}]],A=[[{name:"viewsCount",title:"Channel.Stats.Overview.Views",isPlain:!0},{name:"publicForwards",title:"PublicShares",isPlain:!0}],[{name:"reactionsCount",title:"Channel.Stats.Overview.Reactions",isPlain:!0},{name:"forwardsCount",title:"PrivateShares",isPlain:!0}]],y=[[{name:"level",title:"Stats.Boosts.Level",isPlain:!0},{name:"premiumSubscribers",title:"Stats.Boosts.PremiumSubscribers",isPercentage:!0,isApproximate:!0,withAbsoluteValue:!0}],[{name:"boosts",title:"Stats.Boosts.ExistingBoosts",isPlain:!0},{name:"remainingBoosts",title:"Stats.Boosts.BoostsToLevelUp",isPlain:!0}]],f=(0,n.ph)(({title:e,type:t,statistics:a,isToncoin:f,className:v,subtitle:E})=>{const b=(0,l.A)(),x=(0,i.A)(),w=(e,t,a)=>{const[s,o]=e.toFixed(4).split("."),[r,i]=(e*t).toFixed(2).split(".");return n.Ay.createElement("div",null,n.Ay.createElement(c.A,{className:"it39BC_c",name:"toncoin"}),n.Ay.createElement("b",{className:u},s,n.Ay.createElement("span",{className:"ZAfXkuWL"},".",o))," ",n.Ay.createElement("span",{className:m},"≈ $",r,n.Ay.createElement("span",{className:"HRXb_S2M"},".",i)),n.Ay.createElement("h3",{className:m},b(a)))},{period:C}=a,{balances:N,usdRate:I}=a,S=function(e){switch(e){case"group":return h;case"message":return g;case"boost":return y;case"story":return A;default:return p}}(t);return n.Ay.createElement("div",{className:(0,s.A)("Gi8Nokbl",v)},n.Ay.createElement("div",{className:"H01lE7mv"},e&&n.Ay.createElement("div",{className:"VQbs04hT"},e),C&&n.Ay.createElement("div",{className:"X7bBlGdi"},(0,o.Lu)(b,1e3*C.minDate)," ","—",(0,o.Lu)(b,1e3*C.maxDate))),n.Ay.createElement("table",{className:"s5beXqqL"},f?n.Ay.createElement("tr",null,n.Ay.createElement("td",{className:d},w(N?.availableBalance||0,I||0,"lng_channel_earn_available"),w(N?.currentBalance||0,I||0,"lng_channel_earn_reward"),w(N?.overallRevenue||0,I||0,"lng_channel_earn_total"))):S.map(e=>n.Ay.createElement("tr",null,e.map(e=>{const t=a?.[e.name];if(e.isPlain)return n.Ay.createElement("td",{className:d},n.Ay.createElement("b",{className:u},`${e.isApproximate?"≈ ":""}${(0,r.Sm)(t??0)}`),n.Ay.createElement("h3",{className:m},b(e.title)));if(e.isPercentage){const a=t?.part??0,s=t?.percentage??0;return n.Ay.createElement("td",{className:d},e.withAbsoluteValue&&n.Ay.createElement("span",{className:u},`${e.isApproximate?"≈ ":""}${(0,r.Sm)(a)}`),n.Ay.createElement("span",{className:e.withAbsoluteValue?"_mYEmh_u":u},s,"%"),n.Ay.createElement("h3",{className:m},b(e.title)))}return n.Ay.createElement("td",{className:d},n.Ay.createElement("b",{className:u},(0,r.Vw)(x,t?.current??0))," ",(({change:e,percentage:t})=>{if(!e)return;const a=Number(e)<0;return n.Ay.createElement("span",{className:(0,s.A)("idLrmbhS",a&&"SLfwGHQC")},a?`-${(0,r.Vw)(x,Math.abs(e))}`:`+${(0,r.Vw)(x,e)}`,t&&n.Ay.createElement(n.Ay.Fragment,null," ","(",t,"%)"))})(t),n.Ay.createElement("h3",{className:m},b(e.title)))})))),E)})},72078:(e,t,a)=>{"use strict";e.exports=a.p+"GiftBlueRound.90e369f0f350cdfb20d4.svg"},73172:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(13439),o=a(31481),r=a(37836);const i=(e,t)=>(0,n.Kr)(()=>(0,r.nF)(a=>{e&&t&&(0,s.ko)().sendMessageAction({chatId:e,threadId:t,action:a})},o.cqp),[e,t])},73667:(e,t,a)=>{"use strict";a.d(t,{A:()=>xa});var n=a(84051),s=a(13439),o=a(23174),r=a(31481),i=a(66644),l=a(90709),c=a(27109),d=a(70636),m=a(60919),u=a(64520),p=a(30708),h=a(96454),g=a(87357),A=a(17663),y=a(55148),f=a(46275),v=a(60261),E=a(9716),b=a(36353),x=a(48775),w=a(79824),C=a(80539),N=a(39074),I=a(80140),S=a(43503),M=a(51580),k=a(95547),T=a(4961),P=a(17712),L=a(59030),B=a(54746),R=a(64493),F=a(40664),D=a(22720),O=a(22337),z=a(63152);const U=({onClose:e,inputTranslateOptions:t,handleAutoTranslateChange:a})=>n.Ay.createElement("div",{className:"modal-header"},n.Ay.createElement(R.A,{round:!0,color:"translucent",size:"smaller",ariaLabel:"Close",onClick:e},n.Ay.createElement(B.A,{name:"close"})),n.Ay.createElement("div",{className:"modal-title pr-[4px] h-[44px] flex items-center justify-between"},n.Ay.createElement("span",null,"Language"),n.Ay.createElement(z.A,{label:"Toggle Chat Translate",checked:t.autoTranslate,onChange:a}))),j=({isOpen:e,inputTranslateOptions:t,closeInputLanguageModal:a,updateRoomInputTranslateOptions:s})=>{const[o,i]=(0,n.J0)(""),l=(0,L.A)(),c=(0,P.A)(e=>{t.translateLanguage=e,t.firstTime=!1,s(t),a()}),d=(0,P.A)(e=>{i(e.target.value)}),m=(0,P.A)(e=>{t.autoTranslate=e.target.checked,t.firstTime=!1,s(t)}),u=(0,n.Kr)(()=>r.N89.map(e=>({langCode:e,translatedName:new Intl.DisplayNames([t.translateLanguage||"en"],{type:"language"}).of(e),originalName:new Intl.DisplayNames([e],{type:"language"}).of(e)})),[t]);(0,n.vJ)(()=>{e||i("")},[e]);const p=(0,n.Kr)(()=>o.trim()?u.filter(({langCode:e,translatedName:t,originalName:a})=>t.toLowerCase().includes(o.toLowerCase())||a.toLowerCase().includes(o.toLowerCase())||e.toLowerCase().includes(o.toLowerCase())):u,[u,o]);return n.Ay.createElement(O.A,{className:"LFiEK79A",isSlim:!0,isOpen:e,hasCloseButton:!0,header:n.Ay.createElement(U,{onClose:a,inputTranslateOptions:t,handleAutoTranslateChange:m}),onClose:a},n.Ay.createElement(F.A,{key:"search",value:o,onChange:d,placeholder:l("Search")}),n.Ay.createElement("div",{className:(0,g.A)("WPdg2YHh","custom-scroll")},p.map(({langCode:e,originalName:a,translatedName:s})=>n.Ay.createElement(D.A,{key:e,className:(0,g.A)("_VgXA3ZV","no-icon"),secondaryIcon:t.translateLanguage===e?"check":void 0,disabled:t.translateLanguage===e,multiline:!0,narrow:!0,allowDisabledClick:!0,onClick:()=>c(e)},n.Ay.createElement("span",{className:(0,g.A)("title","RITxpjRP")},(0,T.A)(a,["highlight"],{highlight:o})),n.Ay.createElement("span",{className:(0,g.A)("subtitle","TsAsFkJP")},(0,T.A)(s,["highlight"],{highlight:o}))))))},V=()=>n.Ay.createElement("div",{className:"input-translate-tip"},n.Ay.createElement("span",null,"Enter your native language, and it will auto-translate to the set language upon sending."),n.Ay.createElement("div",{className:"input-translate-tip-arrow"}));var J=a(37661);const H=a.p+"translate-input.7f1d086cf5144ce01b3a.png",K=e=>{const{chatId:t}=e,[a,s,o]=(0,J.A)(),[r,i]=(0,n.J0)({translateLanguage:"en",autoTranslate:!1,firstTime:!0}),[l,c,d]=(0,J.A)();(0,n.vJ)(()=>{i(k.A.getRoomInputTranslateOptions(t))},[t]);const m=(0,n.hb)(e=>{k.A.updateRoomInputTranslateOptions(t,e),r.firstTime&&(c(),setTimeout(()=>{d()},5e3))},[t,r]);return n.Ay.createElement("div",{className:"input-ai-actions"},n.Ay.createElement("button",{className:"Button input-ai-actions-button",onClick:s},r.autoTranslate?n.Ay.createElement("span",{className:"text-[var(--color-text-secondary)] text-[14px] font-bold"},r.translateLanguage.toUpperCase()):n.Ay.createElement("img",{src:H,alt:"Chat AI Logo"})),l&&n.Ay.createElement(V,null),n.Ay.createElement(j,{inputTranslateOptions:r,isOpen:a,closeInputLanguageModal:o,updateRoomInputTranslateOptions:m}))};var $=a(5556);let G;function _(e){G.focus(),e.focus()}h.pz&&(G=document.createElement("input"),G.classList.add("for-ios-autocapitalization-fix"),document.body.appendChild(G));var q=a(55153),W=a(58734),Q=a(11359),Y=a(35049),Z=a(18501),X=a(32625),ee=a(14737),te=a(10722),ae=a(19129),ne=a(82117),se=a(41316),oe=a(39351),re=a(29886),ie=a(73767),le=a(24531),ce=a(73172),de=a(50680),me=a(41257),ue=a(35297),pe=a(17778),he=a(63988),ge=a(83414);const Ae=/^\/([\w@]{1,32})?$/i;var ye=a(78396);const fe=/id="docs-internal-guid/i,ve=["H1","H2","H3","H4","H5","H6"];function Ee(e){return(new DOMParser).parseFromString(e,"text/html").body}function be(e,t){const a=document.createElement("a");return a.href=t,a.appendChild(e.cloneNode(!0)),a}function xe(e,t){const a=document.createElement(t);return a.appendChild(e.cloneNode(!0)),a}function we(e,t){let a=t.cloneNode(!0);return e?(e.style&&"700"===e.style.fontWeight&&(a=xe(a,"strong")),e.style&&"italic"===e.style.fontStyle&&(a=xe(a,"em")),e.style&&"underline"===e.style.textDecoration&&(a=xe(a,"u")),e.style&&"line-through"===e.style.textDecoration&&(a=xe(a,"del")),e.style&&"super"===e.style.verticalAlign&&(a=xe(a,"sup")),e.style&&"sub"===e.style.verticalAlign&&(a=xe(a,"sub")),a):a}function Ce(e){const t=e.cloneNode(!0);let a=document.createTextNode(t.textContent||""),n=t;return"A"===t.nodeName&&(a=be(a,t.href),"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(n=t.childNodes[0])),a=we(n,a),a}function Ne(e){if(e.childNodes&&(e.childNodes.length<=1||"OL"===e.nodeName||"UL"===e.nodeName)){let t,a=document.createTextNode(e.textContent||"");if("UL"===e.nodeName||"OL"===e.nodeName||"LI"===e.nodeName){t=document.createElement(e.nodeName),a=document.createDocumentFragment();const n=[];for(let t=0;t<e.childNodes.length;t++)n.push(...Ne(e.childNodes[t]));n.map(e=>a.appendChild(e))}else-1!==ve.indexOf(e.nodeName)?(t=document.createElement(e.nodeName),a=Ce(e.childNodes[0])):"P"===e.nodeName?(t=document.createElement("p"),a=function(e){const t=e.cloneNode(!0);let a=document.createTextNode(t.textContent||""),n=document.createTextNode("");return"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(n=t.childNodes[0]),t.childNodes[0]&&"A"===t.childNodes[0].nodeName&&(a=be(a.cloneNode(!0),t.childNodes[0].href),n=t.childNodes[0].childNodes[0]),a=we(n,a),a}(e)):"BR"===e.nodeName?a=e:(t=document.createElement("span"),a=Ce(e));return t?(t.appendChild(a),[t]):[e.cloneNode(!0)]}if(e.childNodes){const t=[];for(let a=0;a<e.childNodes.length;a++)t.push(...Ne(e.childNodes[a]));return t}return[e]}function Ie(e){return 8!==e.nodeType}const Se=/<style>(.*?)<\/style>/gs;var Me=a(45761);const ke=new Set([r.CfG,r.e0F,r.YVZ]),Te=(e,t,a,i,c,d,m)=>{const{showNotification:u}=(0,s.ko)(),p=(0,oe.A)();(0,n.vJ)(()=>{if(e)return document.addEventListener("paste",n,!1),()=>{document.removeEventListener("paste",n,!1)};async function n(e){if(!e.clipboardData)return;const n=e.target?.closest("div[contenteditable]");if(!n||!ke.has(n.id))return;if(e.preventDefault(),document.activeElement!==n)return;const s=e.clipboardData.getData("text"),h=e.clipboardData.getData("text/html");let g=h?(0,C.Ay)(function(e){let t=document.createElement("div");try{e=(a=e).match(fe)?function(e){const t=document.createElement("body"),a=e.childNodes,n=Array.from(a).filter(Ie),s=[];for(const e of n)s.push(...Ne(e));for(let e=0;e<s.length;e++)t.appendChild(s[e].cloneNode(!0));return t}(Ee(a.replace(/(\r\n|\n|\r)/,""))).innerHTML:Ee(a.replace(/(\r\n|\n|\r)/,"")).innerHTML}catch(e){r.Oig&&console.error(e)}var a;t.innerHTML=e.replace(/\u00a0/g," ").replace(Se,"");const n=t.querySelectorAll(".text-content");return n.length&&(t=n[n.length-1]),Array.from(t.getElementsByTagName("*")).forEach(e=>{if(e instanceof HTMLElement)switch(e.removeAttribute("style"),"BR"===e.tagName&&e.replaceWith("\n"),"P"===e.tagName&&e.appendChild(document.createTextNode("\n")),"IMG"!==e.tagName||e.dataset.entityType||e.replaceWith(e.getAttribute("alt")||""),e.dataset.ignoreOnPaste&&e.remove(),C.qh[e.tagName]&&e.setAttribute("data-entity-type",C.qh[e.tagName]),e.dataset.entityType||e.textContent!==e.innerText||e.replaceWith(e.textContent),e.dataset.alt&&e.setAttribute("alt",e.dataset.alt),e.dataset.entityType){case o.C7.MentionName:e.replaceWith(e.textContent||"");break;case o.C7.CustomEmoji:e.textContent=e.dataset.alt||""}else e.remove()}),t.innerHTML.trimEnd()}(h),void 0,!0):void 0;g&&(0,ye.T8)(g)&&d&&(g=(0,ye.m4)(g),m?.());const{items:A}=e.clipboardData;let y=[];if(A.length>0&&(y=await(0,Me.A)(A),c&&(y=y?.slice(0,1))),!y?.length&&!s)return;const f=g?.entities?.length?g:{text:s};let v=!1;try{v="urn:schemas-microsoft-com:office:word"===(new DOMParser).parseFromString(h,"text/html").documentElement.getAttribute("xmlns:w")}catch(e){}const E=f&&f.text;let b=y?.length&&!v;const x=y?await Promise.all(y.map(e=>(0,q.A)(e.name,e))):[],w=c&&x?.length&&(0,l.eh)(c,x[0])||Boolean(E),N=(0,l.NK)(x[0]),I=c&&c?.groupedId;c&&x?.length>1?u({message:p("MediaReplaceInvalidError",void 0,{pluralValue:x.length})}):c&&N?u({message:p("MediaReplaceInvalidError",void 0,{pluralValue:1})}):!I||(b=w,b)?(b&&a(c?x:e=>e.concat(x)),E&&(b?i(f):t(f,n?.id))):u({message:p("MediaReplaceInvalidError",void 0,{pluralValue:x.length})})}},[t,c,a,e,d,m,i,p])};var Pe=a(3225),Le=a(37859),Be=a(56133),Re=a(61157),Fe=a(60138);let De=!1;const Oe=new Set([o.C7.TextUrl,o.C7.Url]);var ze=a(25498),Ue=a(37830);const je=/^@([a-z0-9_]{1,32})[\u00A0\u0020]+(.*)/is,Ve=/^@([a-z0-9_]{1,32})[\u00A0\u0020]+\n{2,}/i,Je={username:"",query:"",canShowHelp:!1,usernameLowered:""},He=document.createElement("div");const Ke=(0,Ue.A)((e,t,a)=>({username:e,query:t,canShowHelp:a,usernameLowered:e.toLowerCase()})),$e=new RegExp(r.kNZ,"i");var Ge=a(9442),_e=a(20247),qe=a(98221),We=a(17237);const Qe=new RegExp(`^${r.bpX.source}$`,"g");var Ye=a(11778);const Ze={encoderPath:new URL(a(89755),a.b).href,reuseWorker:!0},Xe={type:"audio/ogg"};let et,tt,at;async function nt(){return et||(et=a.e(4550).then(a.t.bind(a,14550,23)),tt=(await et).default,at=new tt(Ze)),et}async function st(e){await async function(){await nt(),await at.start()}();const t=Date.now();let a;const n=[],s=[];at.ondataavailable=e=>{n.push(e)};const o=function(t){const a=t.sourceNode,n=a.context.createAnalyser();n.fftSize=64,a.connect(n);const o=n.frequencyBinCount,r=new Uint8Array(o);let l=!1;return function t(){if(l)return;n.getByteFrequencyData(r);const a=r.reduce((e,t)=>e+t,0)/o/255;(t=>{s.push(255*t),e(t)})(a<.1?0:a),(0,i.YS)(t)}(),()=>{l=!0}}(at);return{stop:()=>new Promise((e,r)=>{at.onstop=()=>{e({blob:new Blob(n,Xe),duration:Math.round(((a||Date.now())-t)/1e3),waveform:s})},at.onerror=r;const i=Math.max(0,t+1e3-Date.now());setTimeout(()=>{at.stop(),o()},i)}),pause:()=>{const e=Math.max(0,t+1e3-Date.now());setTimeout(()=>{at.pause(),a=Date.now(),o()},e)}}}var ot=a(50444),rt=a(45227),it=a(22802),lt=a(96540),ct=a(38493),dt=a(21468),mt=a(85935);function ut(e,t){if(!t.length)return e;const a=[...t].sort((e,t)=>t.offset-e.offset);for(const{offset:t,length:n,suggestions:s}of a){const a=s[0]||"";e=e.slice(0,t)+a+e.slice(t+n)}return e}const pt=()=>lt.createElement("div",{className:"skeleton-wrapper"},lt.createElement("div",{className:"skeleton-text skeleton-line"}),lt.createElement("div",{className:"skeleton-text skeleton-line"}),lt.createElement("div",{className:"skeleton-text skeleton-line"}));var ht=a(75175);const gt=e=>{const{text:t,setHtml:a,onClose:n}=e,[s,o]=lt.useState(!0),[r,i]=lt.useState([]);(0,lt.useEffect)(()=>{(e=>new Promise((t,a)=>{(0,mt.ub)("/grammarly-formal","POST",JSON.stringify({text:e})).then(e=>{t(e)}).catch(e=>{a(e)})}))(t).then(e=>{if(!e.data.errors)throw new Error("No errors found in the text");i(e.data.errors),o(!1)}).catch(e=>{console.error("Error checking grammar:",e),o(!1),i([])})},[]);const l=(0,lt.useCallback)(()=>{if(r){const e=ut(t,r);a(e),n()}},[r]);return lt.createElement("div",null,lt.createElement("h2",{className:"grammar-tool-tab-content-title"},"Use professional wording"),s?lt.createElement(pt,null):lt.createElement(lt.Fragment,null,lt.createElement(ht.A,{text:t,errors:r}),lt.createElement(dt.Ay,{color:"default",variant:"outlined",onClick:l},"Accept")))},At=e=>{const{text:t,setHtml:a,onClose:n}=e,[s,o]=lt.useState(!0),[r,i]=lt.useState([]);(0,lt.useEffect)(()=>{(e=>new Promise((t,a)=>{(0,mt.ub)("/grammarly-friendly","POST",JSON.stringify({text:e})).then(e=>{t(e)}).catch(e=>{a(e)})}))(t).then(e=>{if(!e.data.errors)throw new Error("No errors found in the text");i(e.data.errors),o(!1)}).catch(e=>{console.error("Error checking grammar:",e),o(!1),i([])})},[]);const l=(0,lt.useCallback)(()=>{if(r){const e=ut(t,r);a(e),n()}},[r]);return lt.createElement("div",null,lt.createElement("h2",{className:"grammar-tool-tab-content-title"},"Use more personal language"),s?lt.createElement(pt,null):lt.createElement(lt.Fragment,null,lt.createElement(ht.A,{text:t,errors:r}),lt.createElement(dt.Ay,{color:"default",variant:"outlined",onClick:l},"Accept")))},yt=e=>{const{text:t,setHtml:a,onClose:n}=e,[s,o]=lt.useState(!0),[r,i]=lt.useState([]);(0,lt.useEffect)(()=>{(e=>new Promise((t,a)=>{(0,mt.ub)("/grammarly-check","POST",JSON.stringify({text:e})).then(e=>{t(e)}).catch(e=>{a(e)})}))(t).then(e=>{if(!e.data.errors)throw new Error("No errors found in the text");i(e.data.errors),o(!1)}).catch(e=>{console.error("Error checking grammar:",e),o(!1),i([])})},[]);const l=(0,lt.useCallback)(()=>{if(r){const e=ut(t,r);a(e),n()}},[r]);return lt.createElement("div",null,lt.createElement("h2",{className:"grammar-tool-tab-content-title"},"Fix grammar errors"),s?lt.createElement(pt,null):lt.createElement(lt.Fragment,null,lt.createElement(ht.A,{text:t,errors:r}),lt.createElement(dt.Ay,{color:"default",variant:"outlined",onClick:l},"Accept")))},ft=e=>{const{text:t,setHtml:a,onClose:n}=e,[s,o]=lt.useState(!0),[r,i]=lt.useState([]);(0,lt.useEffect)(()=>{(e=>new Promise((t,a)=>{(0,mt.ub)("/grammarly-rephrase","POST",JSON.stringify({text:e})).then(e=>{t(e)}).catch(e=>{a(e)})}))(t).then(e=>{if(!e.data.errors)throw new Error("No errors found in the text");i(e.data.errors),o(!1)}).catch(e=>{console.error("Error checking grammar:",e),o(!1),i([])})},[]);const l=(0,lt.useCallback)(()=>{if(r){const e=ut(t,r);a(e),n()}},[r]);return lt.createElement("div",null,lt.createElement("h2",{className:"grammar-tool-tab-content-title"},"Enhance clarity and fluency"),s?lt.createElement(pt,null):lt.createElement(lt.Fragment,null,lt.createElement(ht.A,{text:t,errors:r}),lt.createElement(dt.Ay,{color:"default",variant:"outlined",onClick:l},"Accept")))},vt=e=>{const{text:t,setHtml:a,onClose:n}=e,[s,o]=lt.useState(!0),[r,i]=lt.useState([]);(0,lt.useEffect)(()=>{(e=>new Promise((t,a)=>{(0,mt.ub)("/grammarly-shorten","POST",JSON.stringify({text:e})).then(e=>{t(e)}).catch(e=>{a(e)})}))(t).then(e=>{if(!e.data.errors)throw new Error("No errors found in the text");i(e.data.errors),o(!1)}).catch(e=>{console.error("Error checking grammar:",e),o(!1),i([])})},[]);const l=(0,lt.useCallback)(()=>{if(r){const e=ut(t,r);a(e),n()}},[r]);return lt.createElement("div",null,lt.createElement("h2",{className:"grammar-tool-tab-content-title"},"Condense wordy sections"),s?lt.createElement(pt,null):lt.createElement(lt.Fragment,null,lt.createElement(ht.A,{text:t,errors:r}),lt.createElement(dt.Ay,{color:"default",variant:"outlined",onClick:l},"Accept")))},Et=e=>{const{getHtml:t,setHtml:a,onClose:n}=e,{text:s}=(0,C.Ay)(t()),[o,r]=(0,lt.useState)(0);return lt.createElement(lt.Fragment,null,lt.createElement("div",{className:"px-[20px] py-[13px]"},(()=>{switch(o){case 0:return lt.createElement(yt,{text:s,setHtml:a,onClose:n});case 1:return lt.createElement(ft,{text:s,setHtml:a,onClose:n});case 2:return lt.createElement(vt,{text:s,setHtml:a,onClose:n});case 3:return lt.createElement(At,{text:s,setHtml:a,onClose:n});case 4:return lt.createElement(gt,{text:s,setHtml:a,onClose:n});default:return}})()),lt.createElement(ct.A,{activeTab:o,tabs:[{title:"Improve"},{title:"Rephrase"},{title:"Shorten"},{title:"Friendly"},{title:"Formal"}],onSwitchTab:r,inversion:!0}))},bt=a.p+"grammar-input.b24d0a66de8feb3fd0d9.png",xt=e=>{const[t,a,o]=(0,J.A)(),r=(0,n.li)(),{getHtml:i,setHtml:l}=e,c=(0,rt.P)({component:Et,props:{getHtml:i,setHtml:l,onClose:o}});return(0,n.vJ)(()=>{let e;return r.current&&t&&(e=c(r.current)),()=>{e?.unmount()}},[t,o,i,l,c]),(0,n.vJ)(()=>t?(0,Ye.A)(o):void 0,[t,o]),(0,it.A)(t,r,o,void 0,void 0),n.Ay.createElement("div",{className:"input-ai-actions flex-shrink-0 mr-[8px]"},n.Ay.createElement("button",{className:"Button input-ai-actions-button",onClick:()=>{if((0,ot.N)())if(t)o();else{const{text:e}=(0,C.Ay)(i());if(""===e.trim())return;a()}else(0,s.ko)().openPayPackageModal()}},n.Ay.createElement("img",{src:bt,alt:"Chat AI Logo"})),t&&n.Ay.createElement("div",{className:"grammar-tool-wrapper open",ref:r}))};var wt=a(72531),Ct=a(80089),Nt=a(80464);const It=e=>{const{attachments:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"AttachmentModal",!t.length);return a?n.Ay.createElement(a,e):void 0};var St=a(61182),Mt=a(87679),kt=a(52844),Tt=a(36680),Pt=a(71429),Lt=a(24433),Bt=a(66469),Rt=a(54639);const Ft=(0,n.ph)(({chatId:e,threadId:t,isButtonVisible:a,canAttachMedia:o,canAttachPolls:i,canAttachToDoLists:c,canSendPhotos:d,canSendVideos:m,canSendDocuments:u,canSendAudios:p,attachBots:A,peerType:y,isScheduled:f,theme:v,shouldCollectDebugLogs:E,canEditMedia:b,editingMessage:x,messageListType:w,paidMessagesStars:C,onFileSelect:N,onMenuOpen:I,onMenuClose:S,onPollCreate:M,onTodoListCreate:k})=>{const{updateAttachmentSettings:T}=(0,s.ko)(),[R,F,D]=(0,J.A)(),[O,z,U]=(0,Tt.A)(R,D),j=d&&m,V=d||m,[H,K,$]=(0,J.A)(),G=R||H,_=x&&x?.groupedId&&Boolean((0,l.yl)(x)||Boolean((0,l.zX)(x))),q=x&&x?.groupedId&&Boolean((0,l.wp)(x)||(0,l.gB)(x)||(0,l.zC)(x));(0,n.vJ)(()=>{R&&U()},[R,U]),(0,n.vJ)(()=>{G?I():S()},[G,S,I]);const W=(0,P.A)(()=>{R?D():F()}),Q=(0,P.A)(e=>{const{files:t}=e.target,a=(0,Mt.kc)(t);a?.length&&N(a)}),Y=(0,P.A)(()=>{T({shouldCompress:!0}),(0,kt.p)(Array.from(j?r.mxD:d?r.gex:r.fNs).join(","),e=>Q(e))}),Z=(0,P.A)(()=>{T({shouldCompress:!1}),(0,kt.p)(!u&&p?Array.from(r.IH3).join(","):"*",e=>Q(e))}),X=(0,P.A)(()=>{const e=new File([(0,St.F8)()],r.lFE,{type:"text/plain"});N([e])}),ee=(0,n.Kr)(()=>A?Object.values(A).filter(t=>!(!y||!t.isForAttachMenu)&&(!("bots"!==y||t.id!==e||!t.attachMenuPeerTypes||!t.attachMenuPeerTypes.includes("self"))||t.attachMenuPeerTypes.includes(y))):void 0,[A,e,y]),te=(0,L.A)(),ae=(0,oe.A)();if(a)return n.Ay.createElement("div",{className:"AttachMenu"},x&&b?n.Ay.createElement(Bt.A,{id:"replace-menu-button",className:(0,g.A)("AttachMenu--button composer-action-button",R&&"activated"),round:!0,color:"translucent",onActivate:W,ariaLabel:"Replace an attachment",ariaControls:"replace-menu-controls",hasPopup:!0},n.Ay.createElement(B.A,{name:"replace"})):n.Ay.createElement(Bt.A,{id:"attach-menu-button",disabled:Boolean(x),className:(0,g.A)("AttachMenu--button composer-action-button",R&&"activated"),round:!0,color:"translucent",onActivate:W,ariaLabel:"Add an attachment",ariaControls:"attach-menu-controls",hasPopup:!0},n.Ay.createElement(B.A,{name:"attach"})),n.Ay.createElement(Pt.A,{id:"attach-menu-controls",isOpen:G,autoClose:!0,positionX:"right",positionY:"bottom",onClose:D,className:"AttachMenu--menu fluid",onCloseAnimationEnd:D,onMouseEnter:h.TF?void 0:O,onMouseLeave:h.TF?void 0:z,noCloseOnBackdrop:!h.TF,ariaLabelledBy:"attach-menu-button"},!o&&n.Ay.createElement(Lt.A,{className:"media-disabled",disabled:!0},ae("scheduled"===w&&C?"DescriptionScheduledPaidMediaNotAllowed":"DescriptionRestrictedMedia")),o&&n.Ay.createElement(n.Ay.Fragment,null,V&&!q&&n.Ay.createElement(Lt.A,{icon:"photo",onClick:Y},te(j?"AttachmentMenu.PhotoOrVideo":d?"InputAttach.Popover.Photo":"InputAttach.Popover.Video")),(u||p)&&!_&&n.Ay.createElement(Lt.A,{icon:"document",onClick:Z},te(!u&&p?"InputAttach.Popover.Music":"AttachDocument")),u&&E&&n.Ay.createElement(Lt.A,{icon:"bug",onClick:X},te("DebugSendLogs"))),i&&!x&&n.Ay.createElement(Lt.A,{icon:"poll",onClick:M},te("Poll")),c&&!x&&n.Ay.createElement(Lt.A,{icon:"select",onClick:k},ae("TitleToDoList")),!x&&!b&&!f&&ee?.map(a=>n.Ay.createElement(Rt.A,{bot:a,chatId:e,threadId:t,theme:v,onMenuOpened:K,onMenuClosed:$}))))}),Dt=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"BotCommandMenu",!t);return a?n.Ay.createElement(a,e):void 0};var Ot=a(85449);const zt=(0,n.ph)((0,s.EK)((e,{messageId:t})=>{const{chatId:a}=(0,m.Xf0)(e)||{};return a?{message:(0,m.O5q)(e,a,t)}:{}})(({isOpen:e,message:t,onClose:a})=>{const{clickBotInlineButton:o}=(0,s.ko)(),r=(0,L.A)(),[i,l]=(0,Tt.A)(e,a),{isKeyboardSingleUse:c}=t||{},d=(0,n.Kr)(()=>{const e=[];return t?.keyboardButtons.forEach(t=>{e.push(t.map(e=>(0,Ot.A)(r,e)))}),e},[r,t?.keyboardButtons]);if(t&&t.keyboardButtons)return n.Ay.createElement(Pt.A,{isOpen:e,autoClose:c,positionX:"right",positionY:"bottom",onClose:a,className:"BotKeyboardMenu",onCloseAnimationEnd:a,onMouseEnter:h.TF?void 0:i,onMouseLeave:h.TF?void 0:l,noCompact:!0},n.Ay.createElement("div",{className:"content custom-scroll"},t.keyboardButtons.map((e,a)=>n.Ay.createElement("div",{className:"row"},e.map((e,s)=>n.Ay.createElement(R.A,{ripple:!0,disabled:"unsupported"===e.type,onClick:()=>o({chatId:t.chatId,messageId:t.id,button:e})},d?.[a][s]))))))})),Ut=(0,n.ph)(({isOpen:e,onClick:t,text:a,isDisabled:s})=>{const o=(0,n.li)();return(0,n.vJ)(()=>{const e=o.current;if(!e)return;const t=e.scrollWidth+1;e.closest(".Composer").style.setProperty("--bot-menu-text-width",`${t}px`)},[e,a]),(0,n.vJ)(()=>{const e=o.current;if(!e)return;const t=e.closest(".Composer");return()=>{t.style.removeProperty("--bot-menu-text-width")}},[]),n.Ay.createElement(R.A,{className:(0,g.A)("composer-action-button bot-menu",e&&"open"),round:!0,color:"translucent",disabled:s,onClick:t,ariaLabel:"Open bot command keyboard"},n.Ay.createElement(B.A,{name:"webapp",className:(0,g.A)("bot-menu-icon",e&&"open")}),n.Ay.createElement("span",{ref:o,className:"bot-menu-text"},(0,T.A)(a)))}),jt=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"ChatCommandTooltip",!t);return a?n.Ay.createElement(a,e):void 0};var Vt=a(56494),Jt=a(87894),Ht=a(14),Kt=a(91930),$t=a(60859);const Gt=(0,n.ph)((0,s.EK)((e,{shouldForceShowEditing:t,chatId:a,threadId:n,messageListType:s})=>{const{forwardMessages:{fromChatId:o,toChatId:r,messageIds:i,noAuthors:c,noCaptions:d},isShareMessageModalShown:u,shouldPreventComposerAnimation:p}=(0,m.nTw)(e),h="scheduled"===s?(0,m.VlN)(e,a):(0,m.Ys6)(e,a,n),g=(0,m.PKK)(e)&&!p,A=r===a,y=i?.map(t=>(0,m.O5q)(e,o,t)),f=(0,m.GA4)(e,a,n),v=f?.replyInfo,E=f?.suggestedPostInfo,b=v?.replyToPeerId,x=b?(0,m.hds)(e,b):void 0;let w,C;if(h?w=(0,m.KLw)(e,a,n,s):A&&1===i.length?w=y?.[0]:v&&!t&&(w=(0,m.O5q)(e,v.replyToPeerId||a,v.replyToMsgId)),h&&w)C=(0,m.Y7C)(e,w);else if(A){let t=y?.map(t=>{return a=t,C=(0,m.Szq)(e,a),C||(C=(0,m.Y7C)(e,a)),C;var a}).filter(Boolean);t=t?(0,Jt.Am)(t):void 0,C=1===t?.length?t?.[0]:void 0}else if(v&&w&&!t){const{forwardInfo:t}=w,n=(0,m.nZ4)(e,a);t&&(t.isChannelPost||n)&&(C=(0,m.Szq)(e,w)),C||t?.hiddenUserName&&!Boolean(v.quoteText)||(C=(0,m.Y7C)(e,w))}const N=C&&(0,m.hds)(e,C.id),I=N&&(0,l.WX)(N),S=y?.some(e=>e?.content.text&&Object.keys(e.content).length>1),M=A&&1===i.length&&Boolean(w?.content.storyData),k=v?.replyToMsgId===n&&!v.replyToPeerId,T=w&&(0,Vt.B9)(e,w);return{replyInfo:v,suggestedPostInfo:E,editingId:h,message:w,sender:C,shouldAnimate:g,forwardedMessagesCount:A?i.length:void 0,noAuthors:c,noCaptions:d,forwardsHaveCaptions:S,isCurrentUserPremium:(0,m.g29)(e),isContextMenuDisabled:M,isReplyToDiscussion:k,isInChangingRecipientMode:u,shouldPreventComposerAnimation:p,senderChat:x,currentUserId:e.currentUserId,isSenderChannel:I,forwardMessageIds:i,fromChatId:o,isMediaNsfw:T}})(({replyInfo:e,suggestedPostInfo:t,editingId:a,message:o,sender:r,shouldAnimate:i,forwardedMessagesCount:c,noAuthors:d,noCaptions:u,forwardsHaveCaptions:p,shouldForceShowEditing:h,isCurrentUserPremium:A,isContextMenuDisabled:y,isReplyToDiscussion:f,isInChangingRecipientMode:v,shouldPreventComposerAnimation:E,senderChat:b,chatId:x,currentUserId:w,isSenderChannel:C,forwardMessageIds:N,fromChatId:I,isMediaNsfw:S,onClear:M})=>{const{resetDraftReplyInfo:k,resetDraftSuggestedPostInfo:T,updateDraftReplyInfo:F,setEditingId:D,focusMessage:O,changeRecipient:z,openChatOrTopicWithReplyInDraft:U,setForwardNoAuthors:j,setForwardNoCaptions:V,exitForwardMode:J,setShouldPreventComposerAnimation:H,openSuggestMessageModal:K}=(0,s.ko)(),$=(0,n.li)(),G=(0,L.A)(),_=(0,oe.A)(),q="topicCreate"===o?.content.action?.type,W=e&&!h,Q=Boolean(e?.quoteText),Z=Boolean(t)&&!h,X=Boolean(c),ee=(0,P.A)(e=>{const t=(0,s.mS)();return(r=(0,m.Szq)(t,e))||(r=(0,m.Y7C)(t,e)),r}),ae=(0,n.Kr)(()=>{if(!X)return;const e=N?.map(e=>(0,m.O5q)((0,s.mS)(),I,e)).filter(Boolean),t=e?.map(e=>ee(e)).filter(Boolean);return t?(0,Jt.Am)(t):void 0},[X,N,I]),ne=!(v||(!o||!e&&!a)&&(!ae||!X)&&!Z),{shouldRender:se,transitionClassNames:re}=(0,de.A)(ne&&!q&&!f,void 0,!i,void 0,!i,350,!i);(0,n.vJ)(()=>{E&&H({shouldPreventComposerAnimation:!1})});const ie=(0,P.A)(()=>{a?D({messageId:void 0}):c?J():Z?(T(),k()):e&&!h&&k(),M?.()});(0,n.vJ)(()=>ne?(0,Ye.A)(ie):void 0,[ne,ie]);const{isContextMenuOpen:le,contextMenuAnchor:ce,handleContextMenu:me,handleContextMenuClose:ue,handleContextMenuHide:pe}=(0,te.A)($),he=(0,P.A)(e=>{t?K({chatId:x}):me(e)}),ge=(0,P.A)(e=>{e.stopPropagation(),ie(),pe()}),Ae=e=>()=>{ue(),e()},ye=(0,P.A)(Ae(z)),fe=(0,P.A)(Ae(()=>{O({chatId:o.chatId,messageId:o.id,noForumTopicPanel:!0})})),ve=(0,P.A)(Ae(()=>F({quoteText:void 0}))),Ee=(0,P.A)(Ae(z)),be=(0,P.A)(()=>{ue(),r&&U({chatId:r.id})}),xe=(0,P.A)(Ae(ie)),we=(0,P.A)(()=>$.current),Ce=(0,P.A)(()=>$.current),Ne=(0,P.A)(()=>$.current.querySelector(".forward-context-menu .bubble"));(0,n.vJ)(()=>{se||(ue(),pe())},[ue,pe,se]);const Ie=(0,g.A)("ComposerEmbeddedMessage",re),Se=(0,Ht.A)(r,!0),Me=(0,g.A)("ComposerEmbeddedMessage_inner",(0,Y.y)(Se)),ke=(0,n.Kr)(()=>a?"edit":Z?"cash-circle":X?"forward":W?"reply":void 0,[a,X,W,Z]),Te=c&&c>1?G("ForwardedMessageCount",c):void 0,Pe=(0,n.Kr)(()=>{if(!o||!X||!o.content.text||!d||A)return o;const e=(0,l.m4)(o.content.text);return{...o,content:{...o.content,text:e}}},[A,X,o,d]),Le=(0,Ht.A)(ke,!0);if(!se)return;const Be=r&&!C&&x!==r.id&&r.id!==w;return n.Ay.createElement("div",{className:Ie,ref:$,onContextMenu:me},n.Ay.createElement("div",{className:Me},n.Ay.createElement("div",{className:"embedded-left-icon",onClick:me},Le&&n.Ay.createElement(B.A,{name:Le}),Boolean(e?.quoteText)&&n.Ay.createElement(B.A,{name:"quote",className:"quote-reply"})),n.Ay.createElement(Kt.b,{isOpen:ne,className:"inside-input",replyInfo:e,suggestedPostInfo:t,isMediaNsfw:S,isInComposer:!0,message:Pe,sender:d?void 0:r,composerForwardSenders:ae,customText:Te,title:a&&!W?G("EditMessage"):d?G("HiddenSendersNameDescription"):void 0,onClick:he,senderChat:b}),n.Ay.createElement(R.A,{className:"embedded-cancel",round:!0,faded:!0,color:"translucent",ariaLabel:G("Cancel"),onClick:ge},n.Ay.createElement(B.A,{name:"close"})),(W||X)&&!y&&n.Ay.createElement(Pt.A,{isOpen:le,anchor:ce,getTriggerElement:we,getRootElement:Ce,getMenuElement:Ne,className:"forward-context-menu",onClose:ue,onCloseAnimationEnd:pe},X&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(Lt.A,{icon:d?void 0:"message-succeeded",customIcon:d?n.Ay.createElement(B.A,{name:"placeholder"}):void 0,onClick:()=>j({noAuthors:!1})},G(c>1?"ShowSenderNames":"ShowSendersName")),n.Ay.createElement(Lt.A,{icon:d?"message-succeeded":void 0,customIcon:d?void 0:n.Ay.createElement(B.A,{name:"placeholder"}),onClick:()=>j({noAuthors:!0})},G(c>1?"HideSenderNames":"HideSendersName")),p&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement($t.A,null),n.Ay.createElement(Lt.A,{icon:u?void 0:"message-succeeded",customIcon:u?n.Ay.createElement(B.A,{name:"placeholder"}):void 0,onClick:()=>V({noCaptions:!1})},G(c>1?"Conversation.ForwardOptions.ShowCaption":"ShowCaption")),n.Ay.createElement(Lt.A,{icon:u?"message-succeeded":void 0,customIcon:u?void 0:n.Ay.createElement(B.A,{name:"placeholder"}),onClick:()=>V({noCaptions:!0})},G(c>1?"Conversation.ForwardOptions.HideCaption":"HideCaption"))),n.Ay.createElement($t.A,null),n.Ay.createElement(Lt.A,{icon:"replace",onClick:ye},G("ForwardAnotherChat"))),W&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(Lt.A,{icon:"show-message",onClick:fe},G("Message.Context.Goto")),Q&&n.Ay.createElement(Lt.A,{icon:"remove-quote",onClick:ve},G("RemoveQuote")),Be&&n.Ay.createElement(Lt.A,{icon:"user",onClick:be},_("ReplyInPrivateMessage")),n.Ay.createElement(Lt.A,{icon:"replace",onClick:Ee},G("ReplyToAnotherChat")),n.Ay.createElement(Lt.A,{icon:"delete",onClick:xe},G("DoNotReply"))))))}));var _t=a(25897),qt=a(6070),Wt=a(41510);const Qt=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"DropArea",!t);return a?n.Ay.createElement(a,e):void 0};var Yt=a(49068);const Zt=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"InlineBotTooltip",!t);return a?n.Ay.createElement(a,e):void 0},Xt=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"MentionTooltip",!t);return a?n.Ay.createElement(a,e):void 0};var ea=a(60474);const ta=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"PollModal",!t);return a?n.Ay.createElement(a,e):void 0},aa=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"SendAsMenu",!t);return a?n.Ay.createElement(a,e):void 0},na=e=>{const{isOpen:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"StickerTooltip",!t);return a?n.Ay.createElement(a,e):void 0};var sa=a(26440);const oa=e=>{const{modal:t}=e,a=(0,Nt.A)(Ct.ar.Extra,"ToDoListModal",!t);return a?n.Ay.createElement(a,e):void 0};var ra=a(2338),ia=a(62587),la=a(34201),ca=a(86070);const da="zqTOc7LU",ma="b0A9Zfoa",ua=(0,n.ph)((0,s.EK)((e,{chatId:t,threadId:a})=>{const n=(0,m.nTw)(e),s=(0,m.rQx)(e,t,a),{attachmentSettings:o}=e,r=n.webPagePreviewId?(0,m.kgA)(e,n.webPagePreviewId):void 0;return{webPagePreview:"empty"===r?.webpageType?void 0:r,noWebPage:s,attachmentSettings:o}})(({chatId:e,threadId:t,isDisabled:a,webPagePreview:o,noWebPage:r,attachmentSettings:i,isEditing:c})=>{const{toggleMessageWebPage:d,updateAttachmentSettings:m}=(0,s.ko)(),u=(0,oe.A)(),p=(0,n.li)(),h=i.isInvertedMedia,A="small"===i.webPageMediaSize,y=(0,ae.A)(()=>Boolean(o&&!r&&!a),[a,r,o]),{shouldRender:f}=(0,la.A)({isOpen:y,ref:p,withShouldRender:!0}),v="full"===o?.webpageType&&o.hasLargeMedia,E=(0,n.li)(o);o&&o!==E.current&&(E.current=o);const b=o||E.current,x="full"===b?.webpageType,w=(0,ra.A)(x?{content:b}:void 0),C=(0,l.eY)(b)||(0,l.rU)(b)||(0,l.y3)(b)||(0,l.rj)(b),N=C&&(0,l.VO)(C,"pictogram"),I=(0,ia.A)(N),{shouldRender:S,ref:M}=(0,la.A)({isOpen:Boolean(I),withShouldRender:!0,noCloseTransition:!0}),k=Boolean(I||S),T=(0,P.A)(()=>{d({chatId:e,threadId:t,noWebPage:!0})}),{isContextMenuOpen:L,contextMenuAnchor:F,handleContextMenu:D,handleContextMenuClose:O,handleContextMenuHide:z,handleBeforeContextMenu:U}=(0,te.A)(p,c,!0),j=(0,P.A)(()=>p.current),V=(0,P.A)(()=>p.current),J=(0,P.A)(()=>p.current.querySelector(`.${da} .bubble`)),H=(0,P.A)(e=>{D(e)});function K(e){m({isInvertedMedia:e})}function $(e){m({webPageMediaSize:e})}var G;if((0,n.vJ)(()=>{f&&b||(O(),z())},[O,z,f,b]),f&&b)return n.Ay.createElement("div",{className:(0,g.A)("O3di3ULC",!c&&"G5_7x_Hn"),ref:p},n.Ay.createElement("div",{className:"m3DBx9f5"},n.Ay.createElement("div",{className:"vFWsMwfP",onClick:H},n.Ay.createElement(B.A,{name:"link"})),b&&"empty"!==b.webpageType&&n.Ay.createElement(ca.A,{noUserColors:!0,className:"otSxF62k",onContextMenu:D,onMouseDown:U,onClick:H},k&&n.Ay.createElement("div",{className:"VvwZOug9"},w&&n.Ay.createElement("img",{src:w,alt:"",className:ma}),S&&n.Ay.createElement("img",{ref:M,src:I,alt:"",className:ma})),n.Ay.createElement("div",{className:"itmZe2qi"},n.Ay.createElement("span",{className:"ER149gdz"},x?b.siteName||b.url:u("Loading")),n.Ay.createElement("span",{className:"FSYSqC60"},x?b.description||u((G=b).photo?"AttachPhoto":G.video?"AttachVideo":G.audio?"AttachMusic":G.document?"AttachDocument":G.story?"AttachStory":"LinkPreview"):b.url))),n.Ay.createElement(R.A,{className:"yhxytYkd",round:!0,faded:!0,color:"translucent",ariaLabel:u("AccLinkRemovePreview"),onClick:T},n.Ay.createElement(B.A,{name:"close"})),!c&&n.Ay.createElement(Pt.A,{isOpen:L,anchor:F,getTriggerElement:j,getRootElement:V,getMenuElement:J,className:da,onClose:O,onCloseAnimationEnd:z,autoClose:!0},n.Ay.createElement(n.Ay.Fragment,null,h?n.Ay.createElement(Lt.A,{icon:"move-caption-up",onClick:()=>K(void 0)},u("ContextMoveTextUp")):n.Ay.createElement(Lt.A,{icon:"move-caption-down",onClick:()=>K(!0)},u("ContextMoveTextDown")),v&&(A?n.Ay.createElement(Lt.A,{icon:"expand",onClick:()=>$("large")},u("ContextLinkLargerMedia")):n.Ay.createElement(Lt.A,{icon:"collapse",onClick:()=>$("small")},u("ContextLinkSmallerMedia"))),n.Ay.createElement(Lt.A,{icon:"delete",onClick:T},u("ContextLinkRemovePreview"))))))}));var pa=a(75295),ha=a(76283),ga=a(57474),Aa=a(41036),ya=a(68292),fa=a(21849),va=a(48227),Ea=a(11241),ba=function(e){return e.Send="send",e.Record="record",e.Edit="edit",e.Schedule="schedule",e.Forward="forward",e.SendOneTime="sendOneTime",e}(ba||{});const xa=(0,n.ph)((0,s.EK)((e,{chatId:t,threadId:a,storyId:n,messageListType:s,isMobile:i,type:d})=>{const h=e.appConfig,g=(0,m.hds)(e,t),A=(0,l.DX)(t)?void 0:(0,m.yps)(e,t),y=Boolean(A),f=(0,m.nZ4)(e,t),v=(0,E.L8)(t),b=v?(0,m.vGo)(e,t):void 0,x=(0,m.WA9)(e,t),w=v?void 0:(0,m.AWZ)(e,t),C=(y||!v)&&(0,m.tVS)(e,t,a),{shouldSuggestStickers:N,shouldSuggestCustomEmoji:I,shouldUpdateStickerSetOrder:S,shouldPaidMessageAutoApprove:M}=e.settings.byKey,{language:k,shouldCollectDebugLogs:T}=(0,p.l)(e),{forwardMessages:{messageIds:P}}=(0,m.nTw)(e),L=e.emojiKeywords[r.cUY],B=k!==r.cUY?e.emojiKeywords[k]:void 0,R=C?C.id:void 0,F=R?(0,m.O5q)(e,t,R):void 0,{currentUserId:D}=e,O=(0,m.mBe)(e,D),z=w?w?.sendAsId||D:void 0,U=z?(0,m.PVB)(e,z):void 0,j=(0,m.sam)(e,t),V=(0,m.p6T)(e,t),J=(0,m.nTw)(e),H=Boolean(J.storyViewer.storyId),K=(0,m.Xf0)(e),$=t===K?.chatId&&a===K?.threadId&&s===K?.type&&!H,G=((0,m.mBe)(e,t)&&!b?.noVoiceMessages)??!0,_=w?.slowMode,q=(0,m.g29)(e),W="scheduled"===s?(0,m.dkp)(e,t):(0,m.U0A)(e,t,a),Q=n&&(0,m.Msb)(e,t,n),Y=Q&&"sentReaction"in Q?Q.sentReaction:void 0,Z=(0,m.GA4)(e,t,a),X=Z?.replyInfo?(0,m.O5q)(e,t,Z.replyInfo.replyToMsgId):void 0,ee=g?.isForum&&g.isForumAsMessages&&a===o.l3&&X?(0,m.nkm)(e,X):void 0,te="scheduled"===s,ae=v&&!y&&!te&&!f,ne=(0,m.rQx)(e,t,a),se=g&&(0,c.RY)(g,(0,m.K52)(e),(0,m.P5N)(e,t))?.isSilentPosting,oe=v&&!y&&!te&&!f&&"story"!==d&&t!==r.zv8,re=(0,m.xYJ)(e,"stickerEffects"),ie=J.shouldPlayEffectInComposer,le=oe&&Z?.effectId,ce=le?e.availableEffectById[le]:void 0,de=e.reactions.effectReactions,me=e.config?.maxMessageLength||r.YfK,ue=t===J.forwardMessages.toChatId,pe=Boolean(Z?.replyInfo),he=Boolean(Z?.suggestedPostInfo),ge=e.stars?.balance.amount||0,Ae=Boolean(J.starsBalanceModal),ye=(0,m.trm)(e),fe=e.isAppConfigLoaded,ve=J.insertingPeerIdMention,Ee=J.webPagePreviewId?(0,m.kgA)(e,J.webPagePreviewId):void 0;return{availableReactions:e.reactions.availableReactions,topReactions:"story"===d?e.reactions.topReactions:void 0,isOnActiveTab:!J.isBlurred,editingMessage:(0,m.KLw)(e,t,a,s),draft:Z,chat:g,isChatWithBot:y,isChatWithSelf:f,isForCurrentMessageList:$,canScheduleUntilOnline:(0,m.RBq)(e,t),isChannel:g?(0,l.WX)(g):void 0,isRightColumnShown:(0,m.gjV)(e,i),isSelectModeActive:(0,m.rTV)(e),withScheduledButton:"thread"===s&&(b||w)?.hasScheduledMessages,isInScheduledList:te,botKeyboardMessageId:R,botKeyboardPlaceholder:F?.keyboardPlaceholder,isForwarding:ue,isReplying:pe,hasSuggestedPost:he,forwardedMessagesCount:ue?P.length:void 0,pollModal:J.pollModal,todoListModal:J.todoListModal,stickersForEmoji:e.stickers.forEmoji.stickers,customEmojiForEmoji:e.customEmojis.forEmoji.stickers,chatFullInfo:w,topInlineBotIds:e.topInlineBots?.userIds,currentUserId:D,currentUser:O,contentToBeScheduled:J.contentToBeScheduled,shouldSuggestStickers:N,shouldSuggestCustomEmoji:I,shouldUpdateStickerSetOrder:S,recentEmojis:e.recentEmojis,baseEmojiKeywords:L?.keywords,emojiKeywords:B?.keywords,inlineBots:J.inlineBots.byUsername,isInlineBotLoading:J.inlineBots.isLoading,botCommands:b?b.botInfo?.commands||!1:void 0,botMenuButton:b?.botInfo?.menuButton,sendAsPeer:U,sendAsId:z,editingDraft:W,requestedDraft:j,requestedDraftFiles:V,attachBots:e.attachMenu.bots,attachMenuPeerType:(0,m.dfQ)(e,t),theme:(0,m.SJA)(e),fileSizeLimit:(0,u.d)(e,"uploadMaxFileparts")*r.dK5,captionLimit:(0,u.d)(e,"captionLength"),isCurrentUserPremium:q,canSendVoiceByPrivacy:G,attachmentSettings:e.attachmentSettings,slowMode:_,currentMessageList:K,isReactionPickerOpen:(0,m.Ani)(e),canBuyPremium:!q&&!(0,m.n_C)(e),canPlayAnimatedEmojis:(0,m.BWX)(e),canSendOneTimeMedia:!f&&v&&!y&&!te,shouldCollectDebugLogs:T,sentStoryReaction:Y,stealthMode:e.stories.stealthMode,replyToTopic:ee,quickReplyMessages:e.quickReplies.messagesById,quickReplies:e.quickReplies.byId,canSendQuickReplies:ae,noWebPage:ne,webPagePreview:Ee,isContactRequirePremium:b?.isContactRequirePremium,effect:ce,effectReactions:de,areEffectsSupported:oe,canPlayEffect:re,shouldPlayEffect:ie,maxMessageLength:me,paidMessagesStars:x,shouldPaidMessageAutoApprove:M,isSilentPosting:se,isPaymentMessageConfirmDialogOpen:J.isPaymentMessageConfirmDialogOpen,starsBalance:ge,isStarsBalanceModalOpen:Ae,shouldDisplayGiftsButton:b?.shouldDisplayGiftsButton,disallowedGifts:b?.disallowedGifts,isAccountFrozen:ye,isAppConfigLoaded:fe,insertingPeerIdMention:ve,pollMaxAnswers:h?.pollMaxAnswers}})(({type:e,isOnActiveTab:t,dropAreaState:a,isInScheduledList:c,canScheduleUntilOnline:u,isReady:p,isMobile:E,editingMessage:F,chatId:D,threadId:O,storyId:z,currentMessageList:U,messageListType:j,draft:V,chat:H,chatFullInfo:G,replyToTopic:ye,isForCurrentMessageList:fe,isCurrentUserPremium:ve,canSendVoiceByPrivacy:Ee,isChatWithBot:be,isChatWithSelf:xe,isChannel:we,fileSizeLimit:Ce,isRightColumnShown:Ne,isSelectModeActive:Ie,isReactionPickerOpen:Se,shouldDisplayGiftsButton:Me,isForwarding:ke,isReplying:Ue,hasSuggestedPost:Ze,forwardedMessagesCount:Xe,pollModal:et,todoListModal:tt,botKeyboardMessageId:at,botKeyboardPlaceholder:rt,inputPlaceholder:it,withScheduledButton:lt,stickersForEmoji:ct,customEmojiForEmoji:dt,topInlineBotIds:mt,currentUserId:ut,currentUser:pt,captionLimit:ht,contentToBeScheduled:gt,shouldSuggestStickers:At,shouldSuggestCustomEmoji:yt,baseEmojiKeywords:ft,emojiKeywords:vt,recentEmojis:Et,inlineBots:bt,isInlineBotLoading:Ct,botCommands:Nt,sendAsPeer:St,sendAsId:Mt,editingDraft:kt,requestedDraft:Tt,requestedDraftFiles:Pt,botMenuButton:Lt,attachBots:Rt,attachMenuPeerType:Ot,attachmentSettings:Vt,theme:Jt,slowMode:Ht,shouldUpdateStickerSetOrder:Kt,editableInputCssSelector:$t,editableInputId:ra,inputId:ia,className:la,availableReactions:ca,topReactions:da,canBuyPremium:ma,canPlayAnimatedEmojis:xa,shouldCollectDebugLogs:wa,sentStoryReaction:Ca,stealthMode:Na,canSendOneTimeMedia:Ia,quickReplyMessages:Sa,quickReplies:Ma,canSendQuickReplies:ka,webPagePreview:Ta,noWebPage:Pa,isContactRequirePremium:La,paidMessagesStars:Ba,effect:Ra,effectReactions:Fa,areEffectsSupported:Da,canPlayEffect:Oa,shouldPlayEffect:za,maxMessageLength:Ua,isSilentPosting:ja,isPaymentMessageConfirmDialogOpen:Va,starsBalance:Ja,isStarsBalanceModalOpen:Ha,disallowedGifts:Ka,isAccountFrozen:$a,isAppConfigLoaded:Ga,insertingPeerIdMention:_a,pollMaxAnswers:qa,onDropHide:Wa,onFocus:Qa,onBlur:Ya,onForward:Za})=>{const{sendMessage:Xa,clearDraft:en,showDialog:tn,openPollModal:an,closePollModal:nn,openTodoListModal:sn,closeTodoListModal:on,loadScheduledHistory:rn,openThread:ln,addRecentEmoji:cn,sendInlineBotResult:dn,loadSendAs:mn,resetOpenChatWithDraft:un,callAttachBot:pn,addRecentCustomEmoji:hn,showNotification:gn,showAllowedMessageTypesNotification:An,openStoryReactionPicker:yn,openGiftModal:fn,closeReactionPicker:vn,sendStoryReaction:En,editMessage:bn,updateAttachmentSettings:xn,saveEffectInDraft:wn,setReactionEffect:Cn,hideEffectInComposer:Nn,updateChatSilentPosting:In,updateInsertingPeerIdMention:Sn,updateDraftSuggestedPostInfo:Mn}=(0,s.ko)(),kn=(0,L.A)(),Tn=(0,oe.A)(),Pn=(0,n.li)(),Ln=(0,n.li)(),Bn=(0,n.li)(),[Rn,Fn]=(0,n.Ul)(""),[Dn,On]=(0,n.J0)(!1),zn=(0,se.A)($t),Un=(0,n.li)(),jn=(0,ie.A)(a),{width:Vn}=S.A.get(),Jn="messageList"===e,Hn="story"===e,Kn=Jn?H?.sendAsPeerIds:void 0,$n=Boolean(Kn?.length),[Gn,_n,qn]=(0,J.A)(),Wn=(0,ce.A)(D,O),[Qn,Yn,Zn]=(0,J.A)(),[Xn,es,ts]=(0,J.A)(),[as,ns]=(0,n.J0)(!1),ss=F&&(0,l.ZV)(F),os=H?.isMonoforum,{emojiSet:rs,members:is,botCommands:ls}=G||{},cs=rs?.id,ds=!Ba&&!os,ms=Ca&&(0,l.a0)(Ca,r.tNZ);(0,n.vJ)(v.VU,[Rn]);const us=(0,n.li)(0),[ps,hs]=(0,le.A)(Jn&&u,qn);(0,ee.A)(()=>{On(!0)},430),(0,n.vJ)(()=>{Jn||vn()},[Jn,z]),(0,n.vJ)(()=>{Un.current=void 0},[D]),(0,n.vJ)(()=>{Ga&&D&&p&&!Hn&&!os&&rn({chatId:D})},[p,D,O,Hn,Ga,os]),(0,n.vJ)(()=>{const e=we&&H?.areProfilesShown,t=H&&(0,l.Vs)(H)&&Boolean((0,l.gA)(H)||H.isLinkedInDiscussion||H.hasGeo);!Kn&&p&&(t||e)&&mn({chatId:D})},[H,D,we,p,mn,Kn]);const gs=(0,n.li)(!1);(0,ue.A)(([e,t])=>{gs.current=Boolean(D===e&&Kn&&!t)},[D,Kn]);const[As,ys]=(0,n.J0)([]),fs=Boolean(As.length),[vs,Es]=(0,n.J0)(void 0),{canSendStickers:bs,canSendGifs:xs,canAttachMedia:ws,canAttachPolls:Cs,canAttachEmbedLinks:Ns,canAttachToDoLists:Is,canSendVoices:Ss,canSendPlainText:Ms,canSendAudios:ks,canSendVideos:Ts,canSendPhotos:Ps,canSendDocuments:Ls}=(0,n.Kr)(()=>(0,l.Q_)(H,G,be,xe,Hn,Ba,c),[H,G,be,xe,Hn,Ba,c]),Bs=La&&Hn,Rs=Bs||!Ms,Fs=(0,ae.A)(()=>{if(fs)return As.length;const e=Rn()||fs?1:0;return ke&&Xe?Xe+e:e||1},[Rn,fs,As,ke,Xe]),Ds=Ba?Fs*Ba:0,{closeConfirmDialog:Os,dialogHandler:zs,shouldAutoApprove:Us,setAutoApprove:js,handleWithConfirmation:Vs}=(0,_e.A)(Ds,Ha,Ja),Js=!fs&&Ns&&!Pa&&Boolean(Ta),Hs=Rs&&!F;(0,n.vJ)(()=>{Js||xn({isInvertedMedia:void 0})},[Js]);const Ks=(0,P.A)((e,t=ra)=>{if(t===ra&&Hs)return;const a=window.getSelection();let n;if(n=t===ra?document.querySelector($t):document.getElementById(t),a.rangeCount){const s=a.getRangeAt(0);if((0,Q.L)(s,t))return(0,N.oR)(e),void n.dispatchEvent(new Event("input",{bubbles:!0}))}Fn(`${Rn()}${e}`),(0,i.Uz)(()=>{(0,b.A)(n)})}),$s=(0,P.A)((e,t=ra)=>{const a=(0,T.A)(e,["escape_html","emoji_html","br_html"]).join("").replace(/\u200b+/g,"​");Ks(a,t)}),Gs=(0,P.A)((e,t=ra)=>{const a=(0,Z.QY)(e);Ks(a,t)}),_s=(0,P.A)((e,t=ra)=>{Ks((0,W.hB)(e),t)}),qs=(0,P.A)(()=>{vs&&(Gs(vs,ra),Es(void 0))}),{shouldForceCompression:Ws,shouldForceAsFile:Qs,handleAppendFiles:Ys,handleFileSelect:Zs,onCaptionUpdate:Xs,handleClearAttachments:eo,handleSetAttachments:to}=function({attachments:e,fileSizeLimit:t,setHtml:a,setAttachments:o,chatId:r,canSendAudios:i,canSendVideos:c,canSendPhotos:d,canSendDocuments:m,insertNextText:u,editedMessage:p,shouldSendInHighQuality:h}){const g=(0,oe.A)(),{openLimitReachedModal:A,showAllowedMessageTypesNotification:y,showNotification:f}=(0,s.ko)(),[v,E]=(0,n.J0)(!1),[b,x]=(0,n.J0)(!1),C=(0,P.A)(()=>{o(w.p),u()}),N=(0,P.A)(a=>{const n="function"==typeof a?a(e):a;if(n.length)if(n.some(e=>{const t=(0,l.ES)(e);return"audio"===t&&!i&&!m||"video"===t&&!c&&!m||"photo"===t&&!d&&!m||"file"===t&&!m}))y({chatId:r});else if(n.some(({size:e})=>e>t))A({limit:"uploadMaxFileparts"});else{o(n);const e=n.some(e=>{const t=(0,l.ES)(e);return"audio"===t&&!i||"video"===t&&!c||"photo"===t&&!d});E(Boolean(e&&m)),x(!m)}else C()}),I=(0,P.A)(async(t,a)=>{if(p){const e=await(0,q.A)(t[0].name,t[0]),a=p&&(0,l.eh)(p,e);p?.groupedId?a?N([e]):f({message:g("MediaReplaceInvalidError",void 0,{pluralValue:t.length})}):N([e])}else{const n=await Promise.all(t.map(e=>(0,q.A)(e.name,e,{shouldSendAsSpoiler:a||void 0,shouldSendInHighQuality:h})));N([...e,...n])}}),S=(0,P.A)(async e=>{if(p){const t=await(0,q.A)(e[0].name,e[0]),a=p&&(0,l.eh)(p,t);p?.groupedId?a?N([t]):f({message:g("MediaReplaceInvalidError",void 0,{pluralValue:e.length})}):N([t])}else{const t=await Promise.all(e.map(e=>(0,q.A)(e.name,e,{shouldSendInHighQuality:h})));N(t)}}),M=(0,P.A)(async()=>{const t=await Promise.all(e.map(e=>(0,q.A)(e.filename,e.blob,{shouldSendInHighQuality:h})));N(t)});return(0,n.vJ)(()=>{M()},[h]),{handleAppendFiles:I,handleFileSelect:S,onCaptionUpdate:a,handleClearAttachments:C,handleSetAttachments:N,shouldForceCompression:b,shouldForceAsFile:v}}({attachments:As,setHtml:Fn,setAttachments:ys,fileSizeLimit:Ce,chatId:D,canSendAudios:ks,canSendVideos:Ts,canSendPhotos:Ps,canSendDocuments:Ls,insertNextText:qs,editedMessage:F,shouldSendInHighQuality:Vt.shouldSendInHighQuality});(0,n.vJ)(()=>(globalThis.p__handleFileSelect=Zs,()=>{globalThis.p__handleFileSelect=void 0,delete globalThis.p__handleFileSelect}),[Zs]);const[ao,no,so]=(0,J.A)(),[oo,ro,io]=(0,J.A)(),[lo,co,mo]=(0,J.A)(),[uo,po,ho]=(0,J.A)(),[go,Ao,yo]=(0,J.A)(),{startRecordingVoice:fo,stopRecordingVoice:vo,pauseRecordingVoice:Eo,activeVoiceRecording:bo,currentRecordTime:xo,recordButtonRef:wo,startRecordTimeRef:Co,isViewOnceEnabled:No,setIsViewOnceEnabled:Io,toogleViewOnceEnabled:So}=(()=>{const e=(0,n.li)(),[t,a]=(0,n.J0)(),s=(0,n.li)(),[o,r]=(0,n.J0)(),[l,c]=(0,n.J0)(!1);(0,n.vJ)(()=>{h.Yw&&h.pW&&nt()},[]);const d=(0,P.A)(async()=>{try{const{stop:t,pause:n}=await st(t=>{e.current&&(s.current&&Date.now()%4==0&&(0,i.RK)(()=>{e.current&&(e.current.style.boxShadow=`0 0 0 ${50*(t||0)}px rgba(0,0,0,.15)`)}),r(Date.now()))});s.current=Date.now(),r(Date.now()),a({stop:t,pause:n})}catch(e){console.error(e)}}),m=(0,P.A)(()=>{if(t){(0,i.RK)(()=>{e.current&&(e.current.style.boxShadow="none")});try{return t.pause()}catch(e){return void console.error(e)}}}),u=(0,P.A)(()=>{if(t){a(void 0),s.current=void 0,r(void 0),(0,i.RK)(()=>{e.current&&(e.current.style.boxShadow="none")});try{return t.stop()}catch(e){return void console.error(e)}}});(0,n.vJ)(()=>t?(0,Ye.A)(u):void 0,[t,u]);const p=(0,P.A)(()=>{c(!l)});return{startRecordingVoice:d,pauseRecordingVoice:m,stopRecordingVoice:u,activeVoiceRecording:t,currentRecordTime:o,recordButtonRef:e,startRecordTimeRef:s,isViewOnceEnabled:l,setIsViewOnceEnabled:c,toogleViewOnceEnabled:p}})(),Mo=fe&&!Hn;(0,X.A)(()=>{Wn({type:"recordAudio"})},Mo?bo&&r.cqp:void 0),(0,n.vJ)(()=>{fe&&!Hn&&(bo||Wn({type:"cancel"}))},[bo,fe,Hn,Wn]);const ko=(0,me.i)(Boolean(F)),To=(0,P.A)(e=>{ns(e)}),Po=(0,P.A)(e=>{ns(!1),Fn(e)});(0,n.vJ)(()=>{fe&&!Hn&&Rn()&&!ko.current&&Wn({type:"typing"})},[Rn,ko,fe,Hn,Wn]),(0,n.vJ)(()=>(wt.A.on("update-input-text",Po),wt.A.on("update-input-spiner",To),()=>{wt.A.off("update-input-text",Po),wt.A.off("update-input-spiner",To)}),[]);const Lo=H&&(0,l.SJ)(H),{isEmojiTooltipOpen:Bo,closeEmojiTooltip:Ro,filteredEmojis:Fo,filteredCustomEmojis:Do,insertEmoji:Oo}=(0,ze.A)(Boolean(p&&t&&(Hn||fe)&&At&&!fs),Rn,Fn,void 0,Et,ft,vt),{isCustomEmojiTooltipOpen:zo,closeCustomEmojiTooltip:Uo,insertCustomEmoji:jo}=(0,Pe.A)(Boolean(p&&t&&(Hn||fe)&&yt&&!fs),Rn,Fn,zn,Pn,dt),{isStickerTooltipOpen:Vo,closeStickerTooltip:Jo}=function(e,t,a){const{loadStickersForEmoji:o,clearStickersForEmoji:i}=(0,s.ko)(),[l,c,d]=(0,J.A)(!1),m=(0,ge.A)(()=>{const a=t();if(!e||!a||h.TL&&a.length>8)return;if(!a.match(h.TL?qe.A:r.bpX))return;const n=(0,pe.S)(a);return n&&(h.TL&&1===(0,We.A)(n)||!h.TL&&Boolean(a.match(Qe)))?h.TL?n:n.match(/alt="(.+)"/)?.[1]:void 0},[t,e]),u=(0,ae.A)(()=>Boolean(m()),[m]),p=Boolean(a?.length);return(0,n.vJ)(()=>{if(!e||!u)return;const t=m();t?p||o({emoji:t}):i()},[e,u,m,p,o,i]),(0,n.vJ)(d,[d,t]),{isStickerTooltipOpen:Boolean(u&&p&&!l),closeStickerTooltip:c}}(Boolean(p&&t&&(Hn||fe)&&At&&bs&&!fs),Rn,ct),{isMentionTooltipOpen:Ho,closeMentionTooltip:Ko,insertMention:$o,mentionFilteredUsers:Go}=(0,Ge.A)(Boolean(Jn&&p&&fe&&!fs),Rn,Fn,zn,Pn,is,mt,ut);(0,n.vJ)(()=>{if(!_a)return;const e=(0,m.PVB)((0,s.mS)(),_a);e&&$o(e,!0,!0),Sn({peerId:void 0})},[_a,$o]);const{isOpen:_o,botId:qo,isGallery:Wo,switchPm:Qo,switchWebview:Yo,results:Zo,closeTooltip:Xo,help:er,loadMore:tr}=function(e,t,a,o){const{queryInlineBot:r,resetInlineBot:i,resetAllInlineBots:l}=(0,s.ko)(),[c,d,m]=(0,J.A)(!1),u=(0,he.gs)(()=>{const t=a();return e&&t.startsWith("@")?function(e){if(!e.startsWith("@"))return Je;const t=function(e){return He.innerHTML=e.replace(/<br>/g,"\n"),He.querySelectorAll("[alt]").forEach(e=>{e.innerText||(e.innerText=e.getAttribute("alt"))}),He.innerText}(e),a=t.match(je);return a?Ke(a[1],a[2],""===a[2]&&!t.match(Ve)):Je}(t):Je},[a,e],300),{username:p,query:h,canShowHelp:g,usernameLowered:A}=(0,ae.A)(u,[u,a],!0);(0,ue.A)(([e])=>{e&&i({username:e})},[p,i]),(0,n.vJ)(()=>{A&&r({chatId:t,username:A,query:h})},[t,h,r,A]),(0,n.vJ)(m,[m,a]);const{id:y,switchPm:f,switchWebview:v,offset:E,results:b,isGallery:x,help:w}=A&&o?.[A]||{},C=Boolean((b?.length||f)&&!c);(0,n.vJ)(()=>{C||p||l()},[C,l,p]);const N=(0,P.A)(()=>{A&&r({chatId:t,username:A,query:h,offset:E})});return{isOpen:C,botId:y,isGallery:x,switchPm:f,switchWebview:v,results:b,closeTooltip:d,help:g&&w?`@${p} ${w}`:void 0,loadMore:N}}(Boolean(Jn&&p&&fe&&!fs),D,Rn,bt),ar=Boolean(Ma&&Object.keys(Ma).length),{isOpen:nr,close:sr,filteredBotCommands:or,filteredQuickReplies:rr}=function(e,t,a,s,o){const[r,i]=(0,n.J0)(),[l,c]=(0,n.J0)(),[d,m,u]=(0,J.A)(!1),p=(0,he.gs)(()=>{const a=t();return e&&a.startsWith("/")?(0,pe.S)(a).match(Ae)?.[0].trim():void 0},[t,e],300),h=(0,ge.A)(p,[p,t],!0);return(0,n.vJ)(()=>{const e=h(),t=a||s;if(!e||!t&&!o)return i(void 0),void c(void 0);const n=e.substring(1),r=t?.filter(e=>!n||e.command.startsWith(n));i(r?.length?r:void 0);const l=Object.values(o||{}).filter(e=>!n||e.shortcut.startsWith(n));c(l?.length?l:void 0)},[h,a,s,o]),(0,n.vJ)(u,[u,t]),{isOpen:Boolean((r?.length||l?.length)&&!d),close:m,filteredBotCommands:r,filteredQuickReplies:l}}(Boolean(Jn&&p&&fe&&(Nt&&Nt?.length||ls?.length||ar&&ka)),Rn,Nt,ls,ka?Ma:void 0);(({draft:e,chatId:t,threadId:a,getHtml:l,setHtml:c,editedMessage:d,isDisabled:m})=>{const{saveDraft:u,clearDraft:p,loadCustomEmojis:h}=(0,s.ko)(),g=(0,n.li)(!1);(0,n.vJ)(()=>{const t=l(),a=void 0!==e?.isLocal;(0,Z.QY)(e?.text)!==t||a?g.current=!0:g.current=!1},[e,l]),(0,n.vJ)(()=>{g.current=!1},[t,a]);const A=Boolean(d),y=(0,P.A)((e={})=>{if(m||A||!g.current)return;const n=l();n?(0,i.YS)(()=>{u({chatId:e.chatId??t,threadId:e.threadId??a,text:(0,C.Ay)(n)})}):p({chatId:e.chatId??t,threadId:e.threadId??a,shouldKeepReply:!0,shouldKeepSuggestedPost:!0})}),f=(0,Be.A)(r.mPG,!0,void 0,[t,a]);(0,Le.A)(([n,s,l])=>{if(m)return;const u=g.current,p=e?.suggestedPostInfo&&!l?.suggestedPostInfo;if(t===n&&a===s){if(u&&!e)return;if(!e&&l&&c(""),u&&!p)return}if(d||!e)return;c((0,Z.QY)(e.text)),p&&(0,i.Uz)(()=>{const e=document.querySelector(r.m$5);e&&(0,b.A)(e,!0)});const A=e.text?.entities?.map(e=>e.type===o.C7.CustomEmoji&&e.documentId).filter(Boolean)||[];A.length&&h({ids:A})},[t,a,e,l,c,d,m]),(0,n.Nf)(()=>{if(!m)return()=>{A||y({chatId:t,threadId:a}),De=!0,(0,i.YS)(()=>{De=!1})}},[t,a,A,y,m]);const v=(0,me.i)(t),E=(0,me.i)(a);(0,n.vJ)(()=>{if(m||De)return;if(!l())return void y();const e=v.current,t=E.current;f(()=>{v.current===e&&E.current===t&&y()})},[v,l,m,f,E,y]),(0,Re.Ay)(y),(0,Fe.A)(y)})({draft:V,chatId:D,threadId:O,getHtml:Rn,setHtml:Fn,editedMessage:F,isDisabled:Hn||Boolean(Tt)||!Ze&&os}),function({getHtml:e,chatId:t,threadId:a}){const{loadWebPagePreview:r,clearWebPagePreview:i,toggleMessageWebPage:l}=(0,s.ko)(),c=(0,n.li)(),d=(0,he.tF)(()=>{const t=(0,C.Ay)(e()),a=t.entities?.find(e=>e.type===o.C7.TextUrl);return c.current=t,a?.url||t.text.match($e)?.[0]},[e],300,!0),m=(0,ge.A)(d,[d,e],!0);(0,n.vJ)(()=>{const e=m(),n=c.current;e?r({text:n}):(i(),l({chatId:t,threadId:a}))},[m,t,a]),(0,ue.A)(()=>{i(),l({chatId:t,threadId:a})},[t,i,a,l])}({chatId:D,threadId:O,getHtml:Rn});const ir=(0,P.A)((e=!1)=>{e||Fn(""),ys(w.p),Es(void 0),Ro(),Uo(),Jo(),Ko(),E?setTimeout(()=>mo(),350):mo()}),[lr,cr,dr]=((e,t,a,o,c,d,m,u,p)=>{const{editMessage:h,setEditingDraft:g,toggleMessageWebPage:A,openDeleteMessageModal:y}=(0,s.ko)(),[f,v]=(0,n.J0)(!1),E=u?.replyInfo?.replyToMsgId;(0,ne.A)(([e,n])=>{if(!a)return;if(E&&n!==E)return t(""),void v(!1);if(e?.id===a.id&&E===n)return;const s=!e&&p?.text.length?p:a.content.text,o=(0,Z.QY)(s);t(o),v(!0),(0,i.Uz)(()=>{const e=document.querySelector(r.m$5);e&&(0,b.A)(e,!0)})},[a,E,p,t]),(0,n.vJ)(()=>{if(!a)return;const e=!("webPage"in a.content)&&a.content.text?.entities?.some(e=>Oe.has(e.type));A({chatId:c,threadId:d,noWebPage:e})},[c,d,a]),(0,n.vJ)(()=>{if(a)return()=>{const t=(0,C.Ay)(e()),a=t.text.length?t:void 0;g({chatId:c,threadId:d,type:m,text:a})}},[c,a,e,g,d,m]);const x=(0,he.tF)(()=>{if(!a)return!1;const t=(0,C.Ay)(e());return!("webPage"in a.content)&&a.content.text?.entities?.some(e=>Oe.has(e.type))&&!t.entities?.some(e=>Oe.has(e.type))},[a,e],300,!0),w=(0,ge.A)(x,[x,e],!0);(0,ne.A)(([e])=>{a&&e?.id===a.id&&w()&&A({chatId:c,threadId:d,noWebPage:!1})},[a,c,e,d,w]);const N=(0,P.A)(()=>{u&&(0,i.YS)(()=>{t((0,Z.QY)(u.text)),(0,i.Uz)(()=>{const e=document.querySelector(r.m$5);e&&(0,b.A)(e,!0)})})}),I=(0,P.A)(()=>{o(),N()}),S=(0,P.A)(()=>{const{text:t,entities:n}=(0,C.Ay)(e());a&&(t||(0,l.mR)(a)?(h({messageList:{chatId:c,threadId:d,type:m},text:t,entities:n}),o(),N()):y({chatId:c,messageIds:[a.id],isSchedule:"scheduled"===m}))}),M=(0,P.A)(()=>{if(!a)return;const t=(0,C.Ay)(e()),n=t.text.length?t:void 0;g({chatId:c,threadId:d,type:m,text:n})});return(0,Re.Ay)(M),(0,Fe.A)(M),[S,I,f]})(Rn,Fn,F,ir,D,O,j,V,kt),mr=(0,me.i)(ir),ur=(0,me.i)(vo);(0,n.vJ)(()=>()=>{ur.current(),mr.current()},[D,O,mr,ur]);const pr=(0,n.Kr)(()=>{if(Ka)return Object.values(Ka).every(Boolean)},[Ka]),hr=Boolean(!xe&&Me&&!pr),gr=os&&!F&&!ke&&!Ue&&!V?.suggestedPostInfo,Ar=(0,P.A)(()=>{const e=us.current;gn(e?{message:kn("UnlockPremiumEmojiHint2"),action:{action:"openChat",payload:{id:ut,shouldReplaceHistory:!0}},actionText:kn("Open")}:{message:kn("UnlockPremiumEmojiHint"),action:{action:"openPremiumModal",payload:{initialSection:"animated_emoji"}},actionText:kn("PremiumMore")}),us.current=Number(!e)}),yr=(0,ae.A)(()=>Qn||!Za||Rn()&&!fs?F&&dr?ba.Edit:!h.pW||bo||ke||Rn()&&!fs?c?ba.Schedule:ba.Send:ba.Record:ba.Forward,[bo,F,Rn,fs,ke,Qn,Za,dr,c]),fr=!c,{isContextMenuOpen:vr,handleContextMenu:Er,handleContextMenuClose:br,handleContextMenuHide:xr}=(0,te.A)(wo,!(yr===ba.Send&&fr)),{contextMenuAnchor:wr,handleContextMenu:Cr,handleBeforeContextMenu:Nr,handleContextMenuHide:Ir}=(0,te.A)(Bn,!Hn);(0,n.vJ)(()=>{Se||wr&&(yn({peerId:D,storyId:z,position:wr}),Ir())},[D,Ir,Se,z,wr]),Te(fe||Hn,Gs,to,Es,F,!ve&&!xe,Ar);const Sr=(0,P.A)(()=>{F&&cr()}),Mr=(0,P.A)((e,t)=>{const a=t?ht:Ua;if(e?.length>a){const t=e.length-a;return tn({data:{message:"MESSAGE_TOO_LONG_PLEASE_REMOVE_CHARACTERS",textParams:{"{EXTRA_CHARS_COUNT}":t.toString(),"{PLURAL_S}":t>1?"s":""},hasErrorKey:!0}}),!1}return!0}),kr=(0,P.A)(()=>{if(Ht&&!Lo){const e=document.querySelector($t),t=(0,I.Fm)(),a=Un.current&&Math.floor(t-Un.current),n=Ht.nextSendDate&&Ht.nextSendDate>t;if(a&&a<Ht.seconds||n){const s=n?Ht.nextSendDate-t:Ht.seconds-a;return tn({data:{message:kn("SlowModeHint",(0,A.QO)(s)),isSlowMode:!0,hasErrorKey:!1}}),e?.blur(),!1}}return!0}),Tr=e=>{if(!U&&!z)return!1;const{text:t}=(0,C.Ay)(Rn());return!(!t&&!e.length||!Mr(t,!0)||!kr())},Pr=(0,P.A)(({attachments:e,sendCompressed:t=Vt.shouldCompress,sendGrouped:a=Vt.shouldSendGrouped,isSilent:n,scheduledAt:s,isInvertedMedia:o})=>{if(!U&&!z)return;n=n||ja;const{text:r,entities:l}=(0,C.Ay)(Rn());o=r&&t&&a?o:void 0,F?bn({messageList:U,text:r,entities:l,attachments:(0,q.L)(e,t)}):Xa({messageList:U,text:r,entities:l,scheduledAt:s,isSilent:n,shouldUpdateStickerSetOrder:Kt,attachments:(0,q.L)(e,t),shouldGroupMessages:a,isInvertedMedia:o}),Un.current=(0,I.Fm)(),en({chatId:D,isLocalOnly:!0}),(0,i.YS)(()=>{ir()})}),Lr=(0,P.A)((e,t,a)=>{if(Tr(As)){if(F)return void Pr({attachments:As,sendCompressed:e,sendGrouped:t,isInvertedMedia:a});Vs(Pr,{attachments:As,sendCompressed:e,sendGrouped:t,isInvertedMedia:a})}}),Br=(0,P.A)((e,t,a,n,s)=>{Tr(As)&&Pr({attachments:As,sendCompressed:e,sendGrouped:t,isSilent:a,scheduledAt:n,isInvertedMedia:s})}),Rr=(0,P.A)((e,t=!1,a)=>{const{text:n,entities:s}=(0,C.Ay)(Rn());if(e.length)return void(Tr(e)&&Pr({attachments:e,scheduledAt:a,isSilent:t}));if(!n&&!ke)return;if(!Mr(n))return;const o=document.querySelector($t),r=Ra?.id;if(n||ke){if(!kr())return;const e=Js?Vt.isInvertedMedia:void 0;Da&&wn({chatId:D,threadId:O,effectId:void 0}),Xa({messageList:U,text:n,entities:s,scheduledAt:a,isSilent:t,shouldUpdateStickerSetOrder:Kt,isInvertedMedia:e,effectId:r,webPageMediaSize:Vt.webPageMediaSize,webPageUrl:Js?Ta.url:void 0,isForwarding:ke})}Un.current=(0,I.Fm)(),en({chatId:D,threadId:O,isLocalOnly:!0,shouldKeepReply:ke}),h.pz&&o&&o===document.activeElement&&_(o),(0,i.YS)(()=>{ir()})}),Fr=(0,P.A)(async(e=!1,t)=>{if(!U&&!z)return;e=e||ja;let a=As;if(bo){const e=await vo(),t=No?r.dxe:void 0;if(e){const{blob:n,duration:s,waveform:o}=e;a=[await(0,q.A)("wonderful-voice-message.ogg",n,{voice:{duration:s,waveform:o},ttlSeconds:t})]}}const{text:n}=(0,C.Ay)(Rn());if((0,ot.N)()){const e=k.A.getRoomInputTranslateOptions(D);if(e.autoTranslate&&n){ns(!0);try{const t=await(0,M.px)("translateTextByTencent",{text:[{text:n}],toLanguageCode:e.translateLanguage,userId:ut,userName:(0,l.Yg)(pt)});t&&t[0].text&&Fn(t[0].text)}catch(e){console.log(e)}ns(!1)}}Rr(a,e,t),$.s.collectInformation(n)}),Dr=(0,P.A)((e=!1,t)=>{Vs(Fr,e,t)}),Or=(0,P.A)(()=>{ve?sn({chatId:D}):gn({message:Tn("SubscribeToTelegramPremiumForCreateToDo"),action:{action:"openPremiumModal",payload:{initialSection:"todo"}},actionText:Tn("PremiumMore")})}),zr=(0,P.A)(()=>{if("webApp"!==Lt?.type)return;const e=(0,f.vG)(Lt.url);"publicUsernameOrBotLink"===e?.type&&e.appName?(0,y._)(Lt.url):pn({chatId:D,url:Lt.url,threadId:O})}),Ur=(0,P.A)(()=>{mo(),ro()}),jr=(0,P.A)((e,t,a,n)=>{if(e&&"queryId"in e){const{id:a,queryId:n,isSilent:s}=e;return void dn({id:a,chatId:D,threadId:O,queryId:n,scheduledAt:t,isSilent:s||ja})}const{isSilent:s,...o}=e||{};if(e&&0!==Object.keys(o).length)if(void 0!==e.sendCompressed||void 0!==e.sendGrouped){const{sendCompressed:a=!1,sendGrouped:n=!1,isInvertedMedia:o}=e;Br(a,n,s,t,o)}else Xa({...e,messageList:a,scheduledAt:t,effectId:n});else Fr(Boolean(s),t)});(0,ne.A)(([e])=>{U&&gt&&gt!==e&&ps(e=>{jr(gt,e,U)})},[gt,U,jr,ps]),(0,n.vJ)(()=>{Tt&&(Gs(Tt),un(),(0,i.Uz)(()=>{const e=document.getElementById(ra);(0,b.A)(e,!0)}))},[ra,Tt,un,Fn]),(0,n.vJ)(()=>{Pt?.length&&(Zs(Pt),un())},[Zs,Pt,un]);const Vr=(0,P.A)((e,t)=>{const a="id"in e.stickerSetInfo&&e.stickerSetInfo.id;e.isFree||ve||xe||a===cs?_s(e,t):Ar()}),Jr=(0,P.A)(e=>{Vr(e,r.e0F)}),Hr=(0,P.A)((e,t,a)=>{(U||z)&&(t=t||ja,c||a?(_n(),ps(a=>{qn(),Vs(jr,{gif:e,isSilent:t},a,U),(0,i.YS)(()=>{ir(!0)})})):(Vs(Xa,{messageList:U,gif:e,isSilent:t}),(0,i.YS)(()=>{ir(!0)})))}),Kr=(0,P.A)((e,t,a,n=!1,s)=>{(U||z)&&(t=t||ja,e={...e,isPreloadedGlobally:!0},c||a?(_n(),ps(a=>{qn(),Vs(jr,{sticker:e,isSilent:t},a,U),(0,i.YS)(()=>{ir(n)})})):(Vs(Xa,{messageList:U,sticker:e,isSilent:t,shouldUpdateStickerSetOrder:Kt&&s}),en({chatId:D,threadId:O,isLocalOnly:!0}),(0,i.YS)(()=>{ir(n)})))}),$r=(0,P.A)((e,t,a)=>{if(!U&&!z)return;t=t||ja,c||a?ps(a=>{Vs(jr,{id:e.id,queryId:e.queryId,isSilent:t},a,U)}):Vs(dn,{id:e.id,queryId:e.queryId,threadId:O,chatId:D,isSilent:t});const n=document.querySelector($t);h.pz&&n&&n===document.activeElement&&_(n),en({chatId:D,isLocalOnly:!0}),(0,i.YS)(()=>{ir()})}),Gr=(0,P.A)(()=>{en({chatId:D,isLocalOnly:!0}),(0,i.YS)(()=>{ir()})}),_r=(0,P.A)(e=>{U&&(c?(ps(t=>{Vs(jr,{poll:e},t,U)}),nn()):(Vs(Xa,{messageList:U,poll:e,isSilent:ja}),nn()))}),qr=(0,P.A)(e=>{U&&(c?ps(t=>{Vs(jr,{todo:e},t,U)}):Vs(Xa,{messageList:U,todo:e,isSilent:ja}))}),Wr=(0,P.A)(e=>{if(c)ps(t=>{jr({...e,isSilent:!0},t,U)});else if(e&&("sendCompressed"in e||"sendGrouped"in e)){const{sendCompressed:t=!1,sendGrouped:a=!1,isInvertedMedia:n}=e;Br(t,a,!0,void 0,n)}else Fr(!0)}),Qr=(0,P.A)(()=>{const e=document.querySelector($t);if(!E||e!==document.activeElement)return io(),mo(),void po();e?.blur(),setTimeout(()=>{io(),mo(),po()},100)});(0,n.vJ)(()=>{Hs&&Fn("")},[Hs,Fn,As]);const Yr=(0,P.A)(e=>{$s(e,r.e0F)}),Zr=(0,P.A)((e=ra)=>{const t=window.getSelection();if(t.rangeCount){const a=t.getRangeAt(0);if((0,Q.L)(a,e))return void document.execCommand("delete",!1)}Fn(function(e){const t=document.createElement("div");t.contentEditable="true",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.innerHTML=e,t.className="allow-selection",document.body.appendChild(t);let a=t.lastChild;if(a.lastChild)for(;a.lastChild;)a=a.lastChild;const n=a.textContent.length,s=document.createRange(),o=window.getSelection();s.setStart(a,n),s.setEnd(a,n),o.removeAllRanges(),o.addRange(s),document.execCommand("delete",!1);const r=t.innerHTML;return document.body.removeChild(t),r}(Rn()))}),Xr=(0,P.A)(()=>{Zr(r.e0F)}),ei=(0,P.A)(()=>{ln({chatId:D,threadId:O,type:"scheduled",noForumTopicPanel:!0})}),ti=(0,P.A)(()=>{fn({forUserId:D})}),ai=(0,P.A)(()=>{Mn({price:{currency:r.OUy,amount:0,nanos:0}})}),ni=(0,P.A)(()=>{const e=!ja;In({chatId:D,isEnabled:e}),gn({localId:"silentPosting",icon:e?"mute":"unmute",message:Tn(`ComposerSilentPosting${e?"Enabled":"Disabled"}Tootlip`)})});(0,n.vJ)(()=>{Ne&&E&&mo()},[Ne,mo,E]),(0,n.vJ)(()=>{p&&(Ie?Ao():setTimeout(()=>{yo()},200))},[Ie,yo,Ao,p]);const si=(0,ae.A)(()=>Boolean(Rn()),[Rn]),oi=be&&"webApp"===Lt?.type&&!F&&"thread"===j,ri=oi&&!si&&!bo,[ii,li]=(0,n.Kr)(()=>Ht?.nextSendDate?["SlowModeWait",Ht.nextSendDate]:Na?.activeUntil&&Hn?["StealthModeActiveHint",Na.activeUntil]:[],[Hn,Ht?.nextSendDate,Na?.activeUntil]),ci=ao||lo||Bo||uo||Ho||_o||oo||Xn||Vo||nr||zo||ri||vr||Boolean(bo)||As.length>0||Qn,di=ci&&!Se&&Hn&&!Xn&&!lo,mi=(0,n.Kr)(()=>bo&&Vn<=600?"":Hs?Tn(Hn?"ComposerStoryPlaceholderLocked":"ComposerPlaceholderNoText"):rt||it||(Ba?Tn("ComposerPlaceholderPaidMessage",{amount:(0,x.U2)(Tn,Ba,{asFont:!0,className:"placeholder-star-icon"})},{withNodes:!0}):Ue&&Ze?Tn("ComposerPlaceholderCaption"):H?.adminRights?.anonymous?Tn("ComposerPlaceholderAnonymous"):H?.isForum&&H?.isForumAsMessages&&O===o.l3?ye?Tn("ComposerPlaceholderTopic",{topic:ye.title}):Tn("ComposerPlaceholderTopicGeneral"):Tn(we?ja?"ComposerPlaceholderBroadcastSilent":"ComposerPlaceholderBroadcast":"ComposerPlaceholder")),[bo,rt,H,it,we,Hs,Hn,ja,Tn,ye,Ue,O,Vn,Ba,Ze]);(0,n.vJ)(()=>{ci?Qa?.():Ya?.()},[ci,Ya,Qa]);const{shouldRender:ui,transitionClassNames:pi}=(0,de.A)(di),hi=!(yr!==ba.Record||ws&&Ee&&Ss),gi=(0,P.A)(()=>{switch(yr){case ba.Forward:Za?.();break;case ba.Send:Dr();break;case ba.Record:hi?Ee?Ss||An({chatId:D,messageListType:j}):gn({message:kn("VoiceMessagesRestrictedByPrivacy",H?.title)}):(Io(!1),fo());break;case ba.Edit:lr();break;case ba.Schedule:if(bo&&Eo(),!U)return;ps(e=>{jr({},e,U,Ra?.id)})}}),Ai=new Date;Ai.setSeconds(0),Ai.setMilliseconds(0);const yi=new Date;yi.setFullYear(yi.getFullYear()+1);let fi="SendMessage";switch(yr){case ba.Forward:fi="Forward";break;case ba.Edit:fi="Save edited message";break;case ba.Record:fi=ws?"AccDescrVoiceMessage":"Conversation.DefaultRestrictedMedia"}const vi=(0,g.A)("Composer",!Ie&&"shown",go&&"hover-disabled",Dn&&"mounted",la),Ei=(0,P.A)(e=>{let t,a;if("emoji"===e.type&&(t=e.emoticon),"custom"===e.type){const n=(0,s.mS)().customEmojis.byId[e.documentId];if(!n)return;if(!n.isFree&&!ve&&!xe)return void Ar();const o=(0,C.Ay)((0,W.hB)(n));t=o.text,a=o.entities}Vs(Xa,{text:t,entities:a,isReaction:!0}),vn()}),bi=(0,P.A)(e=>{Cn({chatId:D,threadId:O,reaction:e}),vn()}),xi=(0,P.A)(e=>{yn({peerId:D,storyId:z,position:e,sendAsMessage:!0})}),wi=(0,P.A)(()=>{const e=Ca?void 0:r.tNZ;En({peerId:D,storyId:z,containerId:(0,l.$_)(D,z),reaction:e})}),Ci=(0,P.A)(()=>{ps(e=>{jr({},e,U)})}),Ni=(0,P.A)(()=>{Vs(Wr)}),Ii=(0,P.A)(()=>{Vs(jr,{},r.NkL,U,Ra?.id)}),Si=(0,P.A)((e,t,a)=>{ps(n=>{Vs(jr,{sendCompressed:e,sendGrouped:t,isInvertedMedia:a},n,U)})}),Mi=(0,P.A)((e,t,a)=>{Vs(Wr,{sendCompressed:e,sendGrouped:t,isInvertedMedia:a})}),ki=(0,P.A)(()=>{wn({chatId:D,threadId:O,effectId:void 0})}),Ti=(0,P.A)(()=>{Nn({})}),Pi=(0,n.Kr)(()=>{switch(yr){case ba.Edit:return lr;case ba.Schedule:return Ci;default:return Dr}},[yr,lr,Dr]),Li=be&&"commands"===Lt?.type&&!F&&!1!==Nt&&!bo,Bi=Da&&Ra?.emoticon,Ri=Boolean(Ba&&yr===ba.Send),Fi=(0,re.A)(Ri);return n.Ay.createElement("div",{className:vi},Jn&&ws&&p&&n.Ay.createElement(Qt,{isOpen:a!==Wt.I.None,withQuick:a===Wt.I.QuickFile||jn===Wt.I.QuickFile,onHide:Wa,onFileSelect:Zs,editingMessage:F}),ui&&!Bs&&n.Ay.createElement(ha.A,{topReactions:da,allAvailableReactions:ca,onToggleReaction:Ei,isPrivate:!0,isReady:p,canBuyPremium:ma,isCurrentUserPremium:ve,isInSavedMessages:xe,isInStoryViewer:Hn,canPlayAnimatedEmojis:xa,onShowMore:xi,className:pi}),n.Ay.createElement(It,{chatId:D,threadId:O,canShowCustomSendMenu:fr,attachments:As,getHtml:Rn,isReady:p,shouldForceCompression:Ws,shouldForceAsFile:Qs,isForCurrentMessageList:fe,isForMessage:Jn,shouldSchedule:ds&&c,canSchedule:ds,forceDarkTheme:Hn,onCaptionUpdate:Xs,onSendSilent:Mi,onSend:Lr,onSendScheduled:Si,onFileAppend:Ys,onClear:eo,onAttachmentsUpdate:to,onCustomEmojiSelect:Jr,onRemoveSymbol:Xr,onEmojiSelect:Yr,editingMessage:F,onSendWhenOnline:Ii,canScheduleUntilOnline:u&&!No,paidMessagesStars:Ba}),n.Ay.createElement(ta,{isOpen:et.isOpen,isQuiz:et.isQuiz,shouldBeAnonymous:we,maxOptionsCount:qa,onClear:nn,onSend:_r}),n.Ay.createElement(oa,{modal:tt,onClear:on,onSend:qr}),n.Ay.createElement(aa,{isOpen:uo,onClose:ho,chatId:D,selectedSendAsId:Mt,sendAsPeerIds:Kn,isCurrentUserPremium:ve}),n.Ay.createElement(Xt,{isOpen:Ho,filteredUsers:Go,onInsertUserName:$o,onClose:Ko}),n.Ay.createElement(jt,{isOpen:nr,chatId:D,withUsername:Boolean(ls),botCommands:or,quickReplies:rr,getHtml:Rn,self:pt,quickReplyMessages:Sa,onClick:Gr,onClose:sr}),n.Ay.createElement("div",{className:(0,g.A)("composer-wrapper",Hn&&"with-story-tweaks",Bs&&"is-need-premium")},!Bs&&n.Ay.createElement("svg",{className:"svg-appendix",width:"9",height:"20"},n.Ay.createElement("defs",null,n.Ay.createElement("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"composerAppendix"},n.Ay.createElement("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.Ay.createElement("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.Ay.createElement("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"}))),n.Ay.createElement("g",{fill:"none","fill-rule":"evenodd"},n.Ay.createElement("path",{d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z",fill:"#000",filter:"url(#composerAppendix)"}),n.Ay.createElement("path",{d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z",fill:"#FFF",className:"corner"}))),Jn&&n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(Zt,{isOpen:_o,botId:qo,isGallery:Wo,inlineBotResults:Zo,switchPm:Qo,switchWebview:Yo,loadMore:tr,isSavedMessages:xe,canSendGifs:xs,isCurrentUserPremium:ve,onSelectResult:$r,onClose:Xo}),n.Ay.createElement(Gt,{onClear:Sr,shouldForceShowEditing:Boolean(dr&&F),chatId:D,threadId:O,messageListType:j}),n.Ay.createElement(ua,{chatId:D,threadId:O,isDisabled:!Ns||fs||!si,isEditing:Boolean(F)})),n.Ay.createElement("div",{className:(0,g.A)("message-input-wrapper",(0,Y.y)(pt))},Jn&&n.Ay.createElement(n.Ay.Fragment,null,oi&&n.Ay.createElement(Ut,{isOpen:ri,text:Lt.text,isDisabled:Boolean(bo),onClick:zr}),Li&&n.Ay.createElement(Bt.A,{className:(0,g.A)("bot-commands","composer-action-button"),round:!0,disabled:void 0===Nt,color:"translucent",onActivate:Ur,ariaLabel:"Open bot command keyboard"},n.Ay.createElement(B.A,{name:"bot-commands-filled"})),$n&&St&&n.Ay.createElement(R.A,{round:!0,color:"translucent",onClick:uo?ho:Qr,ariaLabel:kn("SendMessageAsTitle"),className:(0,g.A)("send-as-button","composer-action-button",gs.current&&"appear-animation")},n.Ay.createElement(fa.A,{peer:St,size:"tiny"}))),(!Hs||xs||bs)&&!Bs&&!$a&&n.Ay.createElement(sa.A,{chatId:D,threadId:O,isMobile:E,isReady:p,isSymbolMenuOpen:lo,openSymbolMenu:co,closeSymbolMenu:mo,canSendStickers:bs,canSendGifs:xs,isMessageComposer:Jn,onGifSelect:Hr,onStickerSelect:Kr,onCustomEmojiSelect:Vr,onRemoveSymbol:Zr,onEmojiSelect:$s,closeBotCommandMenu:io,closeSendAsMenu:ho,isSymbolMenuForced:Gn,canSendPlainText:!Hs,inputCssSelector:$t,idPrefix:e,forceDarkTheme:Hn}),n.Ay.createElement(ea.A,{ref:Pn,id:ia,editableInputId:ra,customEmojiPrefix:e,isStoryInput:Hn,chatId:D,canSendPlainText:!Hs,threadId:O,isReady:p,isActive:!fs,getHtml:Rn,placeholder:mi,timedPlaceholderDate:li,timedPlaceholderLangKey:ii,forcedPlaceholder:er,canAutoFocus:p&&fe&&!fs&&Jn,noFocusInterception:fs,shouldSuppressFocus:E&&lo,shouldSuppressTextFormatter:Bo||Ho||_o,onUpdate:Fn,onSend:Pi,onSuppressedFocus:mo,onFocus:Yn,onBlur:Zn,isNeedPremium:Bs,messageListType:j}),Jn&&n.Ay.createElement(n.Ay.Fragment,null,(Ct&&Boolean(qo)||as)&&n.Ay.createElement(ga.A,{color:"gray",className:"flex-shrink-0"}),n.Ay.createElement(Aa.Ay,{className:"composer-action-buttons-container",slideClassName:"composer-action-buttons",activeKey:Number(si),direction:"inverse",name:"slideFadeAndroid"},!si&&n.Ay.createElement(n.Ay.Fragment,null,we&&n.Ay.createElement(Aa.Ay,{className:"composer-action-button",name:"reveal",activeKey:Number(ja)},n.Ay.createElement(R.A,{round:!0,faded:!0,className:"composer-action-button",color:"translucent",onClick:ni,ariaLabel:Tn(ja?"AriaComposerSilentPostingDisable":"AriaComposerSilentPostingEnable")},n.Ay.createElement(B.A,{name:ja?"mute":"unmute"}))),lt&&n.Ay.createElement(R.A,{round:!0,faded:!0,className:"composer-action-button scheduled-button",color:"translucent",onClick:ei,ariaLabel:Tn("AriaComposerOpenScheduled")},n.Ay.createElement(B.A,{name:"schedule"})),hr&&n.Ay.createElement(R.A,{round:!0,faded:!0,className:"composer-action-button",color:"translucent",onClick:ti},n.Ay.createElement(B.A,{name:"gift"})),gr&&n.Ay.createElement(R.A,{round:!0,faded:!0,className:"composer-action-button",color:"translucent",onClick:ai},n.Ay.createElement(B.A,{name:"cash-circle"})),Boolean(at)&&!bo&&!F&&n.Ay.createElement(Bt.A,{className:(0,g.A)("composer-action-button",ao&&"activated"),round:!0,color:"translucent",onActivate:no,ariaLabel:Tn("AriaComposerBotKeyboard")},n.Ay.createElement(B.A,{name:"bot-command"}))))),bo&&Boolean(xo)&&n.Ay.createElement("span",{className:"recording-state"},(0,A.JW)(xo-Co.current)),n.Ay.createElement(xt,{getHtml:Rn,setHtml:Fn}),n.Ay.createElement(K,{chatId:D}),!Bs&&n.Ay.createElement(Ft,{chatId:D,threadId:O,editingMessage:F,canEditMedia:ss,isButtonVisible:!bo,canAttachMedia:ws,canAttachPolls:Cs,canAttachToDoLists:Is,canSendPhotos:Ps,canSendVideos:Ts,canSendDocuments:Ls,canSendAudios:ks,onFileSelect:Zs,onPollCreate:an,onTodoListCreate:Or,isScheduled:c,attachBots:Jn?Rt:void 0,peerType:Ot,shouldCollectDebugLogs:wa,theme:Jt,onMenuOpen:es,onMenuClose:ts,messageListType:j,paidMessagesStars:Ba}),Jn&&Boolean(at)&&n.Ay.createElement(zt,{messageId:at,isOpen:ao,onClose:so}),Jn&&Nt&&n.Ay.createElement(Dt,{isOpen:oo,botCommands:Nt,onClose:io}),n.Ay.createElement(_t.A,{key:`custom-emoji-tooltip-${ra}`,chatId:D,isOpen:zo,onCustomEmojiSelect:jo,addRecentCustomEmoji:hn,onClose:Uo}),n.Ay.createElement(na,{key:`sticker-tooltip-${ra}`,chatId:D,threadId:O,isOpen:Vo,onStickerSelect:Kr,onClose:Jo}),n.Ay.createElement(Yt.A,{key:`emoji-tooltip-${ra}`,isOpen:Bo,emojis:Fo,customEmojis:Do,addRecentEmoji:cn,addRecentCustomEmoji:hn,onEmojiSelect:Oo,onCustomEmojiSelect:Oo,onClose:Ro}))),Ia&&bo&&n.Ay.createElement(R.A,{className:(0,g.A)("view-once",No&&"active"),round:!0,color:"secondary",ariaLabel:kn("Chat.PlayOnceVoiceMessageTooltip"),onClick:So},n.Ay.createElement(B.A,{name:"view-once"}),n.Ay.createElement(B.A,{name:"one-filled"})),bo&&n.Ay.createElement(R.A,{round:!0,color:"danger",className:"cancel",onClick:vo,ariaLabel:"Cancel voice recording"},n.Ay.createElement(B.A,{name:"delete"})),Hn&&!bo&&n.Ay.createElement(R.A,{round:!0,className:"story-reaction-button",color:"secondary",onClick:wi,onContextMenu:Cr,onMouseDown:Nr,ariaLabel:kn("AccDescrLike"),ref:Bn},Ca&&n.Ay.createElement(Ea.A,{key:(0,l.Jj)(Ca),containerId:(0,l.$_)(D,z),reaction:Ca,withEffectOnly:ms}),(!Ca||ms)&&n.Ay.createElement(B.A,{name:"heart",className:(0,g.A)(ms&&"story-reaction-heart")})),n.Ay.createElement(R.A,{ref:wo,round:!0,color:"secondary",className:(0,g.A)(yr,"main-button",!p&&"not-ready",bo&&"recording"),disabled:hi,allowDisabledClick:!0,noFastClick:!0,ariaLabel:kn(fi),onClick:gi,onContextMenu:yr===ba.Send&&fr?Er:void 0},n.Ay.createElement(B.A,{name:"send"}),n.Ay.createElement(B.A,{name:"microphone-alt"}),Za&&n.Ay.createElement(B.A,{name:"forward"}),Jn&&n.Ay.createElement(B.A,{name:"schedule"}),Jn&&n.Ay.createElement(B.A,{name:"check"}),n.Ay.createElement(R.A,{className:(0,g.A)("paidStarsBadge",Ri&&"visible",Fi&&!Ri&&"hiding",!Fi&&!Ri&&"hidden"),nonInteractive:!0,size:"tiny",color:"stars",pill:!0,fluid:!0},n.Ay.createElement("div",{className:"paidStarsBadgeText"},n.Ay.createElement(B.A,{name:"star",className:(0,g.A)("star-amount-icon",la)}),n.Ay.createElement(ya.A,{ref:Ln,text:Tn.number(Ds)})))),Bi&&n.Ay.createElement("span",{className:"effect-icon",onClick:ki},(0,T.A)(Bi)),Ra&&Oa&&n.Ay.createElement(pa.A,{shouldPlay:za,effect:Ra,onStop:Ti}),fr&&n.Ay.createElement(qt.A,{isOpen:vr,canSchedule:ds&&Jn&&!No,canScheduleUntilOnline:u&&!No,onSendSilent:xe?void 0:Ni,onSendSchedule:c?void 0:Ci,onSendWhenOnline:Ii,onRemoveEffect:ki,onClose:br,onCloseAnimationEnd:xr,isSavedMessages:xe,chatId:D,withEffects:Da,hasCurrentEffect:Boolean(Ra),effectReactions:Fa,allAvailableReactions:ca,onToggleReaction:bi,isCurrentUserPremium:ve,isInSavedMessages:xe,isInStoryViewer:Hn,canPlayAnimatedEmojis:xa}),hs,n.Ay.createElement(va.A,{isOpen:Va,onClose:Os,userName:H?(0,d.F9)(Tn,H):void 0,messagePriceInStars:Ba||0,messagesCount:Fs,shouldAutoApprove:Us,setAutoApprove:js,confirmHandler:zs}))}))},75175:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(96540);const s=({text:e,errors:t})=>{if(!t.length)return n.createElement("p",null,n.createElement("span",null,e));const a=[];let s=0;return t.sort((e,t)=>e.offset-t.offset).forEach((t,o)=>{const{offset:r,length:i,suggestions:l}=t;r>s&&a.push(n.createElement("span",{key:`normal-${o}`,className:"text-[var(--color-text)]"},e.slice(s,r)));const c=e.slice(r,r+i),d=l[0]||"";a.push(n.createElement("span",{key:`error-${o}`,className:"bg-black/15 line-through mr-[4px] text-[var(--color-text)]"},c)),a.push(n.createElement("span",{key:`suggestion-${o}`,className:"bg-[#8C42F033] mr-[4px] text-[#8C42F0]"},d)),s=r+i}),s<e.length&&a.push(n.createElement("span",{key:"end",className:"text-[var(--color-text)]"},e.slice(s))),n.createElement("p",null,a)}},75295:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(84051),s=a(87357),o=a(37661),r=a(5912),i=a(17712),l=a(62587),c=a(10221),d=a(18104),m=a(3325);const u=(0,n.ph)(({messageId:e,isMirrored:t,effect:a,shouldPlay:u,observeIntersectionForLoading:p,observeIntersectionForPlaying:h,onStop:g})=>{const A=(0,n.li)(),y=(0,n.li)(),f=(0,r.Vz)(A,p),v=(0,r.Vz)(A,h),[E,b,x]=(0,o.A)(),[w,C,N]=(0,o.A)(),I=function(e){return e.effectAnimationId?`sticker${e.effectAnimationId}`:`sticker${e.effectStickerId}?size=f`}(a),S=(0,l.A)(I,!f),M=(0,i.A)(()=>{x(),g?.()}),k=(0,c.A)({anchorRef:A,overlayRef:y,isMirrored:t,isDisabled:!E,isForMessageEffect:!0,id:a.id});(0,n.vJ)(()=>{w&&k(),N()},[k,N,w]),(0,n.vJ)(()=>{v&&u&&S&&(b(),C())},[v,S,u,k]);const T=(0,s.A)("McmbiWZE",t&&"wNvU2uqi");return n.Ay.createElement("div",{className:(0,s.A)("IYu2f7FM",t&&"GsTZawTE"),ref:A},E&&n.Ay.createElement(m.A,null,n.Ay.createElement(d.A,{ref:y,key:`effect-${e??a.id}`,className:T,tgsUrl:S,size:256,play:!0,isLowPriority:!0,noLoop:!0,forceAlways:!0,onEnded:M})))})},75304:(e,t,a)=>{"use strict";a.d(t,{R:()=>o});var n=a(96540),s=a(20427);function o(){const e=(0,n.useRef)(null),t=(0,n.useRef)(null),{data:a=!1,mutate:o}=(0,s.Ay)("messages:is-scroll-lock",null,{fallbackData:!1}),{data:r=!1,mutate:i}=(0,s.Ay)("messages:is-at-bottom",null,{fallbackData:!1}),{data:l=!1,mutate:c}=(0,s.Ay)("messages:should-scroll",null,{fallbackData:!1});(0,n.useEffect)(()=>{l&&!a&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.current?.scrollIntoView({behavior:l}),c(!1)})})},[c,l,a]);const d=(0,n.useCallback)((e="smooth")=>{o(!1),c(e)},[o,c]);return{containerRef:e,endRef:t,isAtBottom:r,isScrollLock:a,scrollToBottom:d,onViewportEnter:function(){i(!0)},onViewportLeave:function(){i(!1)},scrollLocked:()=>{o(!0)},scrollUnLocked:()=>{o(!1)}}}},75319:(e,t,a)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"graphType"in e}a.d(t,{R:()=>n})},75343:(e,t,a)=>{"use strict";a.d(t,{A:()=>b});var n=a(84051),s=a(13439),o=a(87357),r=a(43874),i=a(36838),l=a(59030),c=a(89925),d=a(70636),m=a(9716),u=a(54464),p=a(10722),h=a(17712),g=a(92111),A=a(21849),y=a(71429),f=a(24433),v=a(2429);const E=(0,n.ph)(function({peer:e,isArchived:t}){const{openChat:a,openChatWithInfo:r,openStoryViewer:i,toggleStoriesHidden:E}=(0,s.ko)(),b=(0,l.A)(),x=(0,n.li)(),w="isSelf"in e&&e.isSelf,C=!(0,m.L8)(e.id);(0,g.A)(e.id);const{isContextMenuOpen:N,contextMenuAnchor:I,handleBeforeContextMenu:S,handleContextMenu:M,handleContextMenuClose:k,handleContextMenuHide:T}=(0,p.A)(x),P=(0,h.A)(()=>x.current),L=(0,h.A)(()=>document.body),B=(0,h.A)(()=>x.current.querySelector(".story-peer-context-menu .bubble")),R=(0,h.A)(()=>({withPortal:!0,isDense:!0})),F=(0,h.A)(()=>{N||i({peerId:e.id,origin:c.G9.StoryRibbon})}),D=(0,h.A)(e=>{(0,u.u)(e),S(e)}),O=(0,h.A)(()=>{r({id:e.id,shouldReplaceHistory:!0,profileTab:"stories"})}),z=(0,h.A)(()=>{r({id:e.id,shouldReplaceHistory:!0,profileTab:"storiesArchive"})}),U=(0,h.A)(()=>{a({id:e.id,shouldReplaceHistory:!0})}),j=(0,h.A)(()=>{r({id:e.id,shouldReplaceHistory:!0})}),V=(0,h.A)(()=>{E({peerId:e.id,isHidden:!t})});return n.Ay.createElement("div",{ref:x,role:"button","data-peer-id":e.id,tabIndex:0,className:v.A.peer,onMouseDown:D,onClick:F,onContextMenu:M},n.Ay.createElement(A.A,{peer:e,withStory:!0,storyViewerOrigin:c.G9.StoryRibbon,storyViewerMode:"full"}),n.Ay.createElement("div",{className:(0,o.A)(v.A.name,e.hasUnreadStories&&v.A.name_hasUnreadStory)},w?b("MyStory"):(0,d.F9)(b,e)),void 0!==I&&n.Ay.createElement(y.A,{isOpen:N,anchor:I,getTriggerElement:P,getRootElement:L,getMenuElement:B,getLayout:R,className:(0,o.A)("story-peer-context-menu",v.A.contextMenu),autoClose:!0,withPortal:!0,onClose:k,onCloseAnimationEnd:T},w?n.Ay.createElement(n.Ay.Fragment,null,n.Ay.createElement(f.A,{onClick:O,icon:"play-story"},b("StoryList.Context.SavedStories")),n.Ay.createElement(f.A,{onClick:z,icon:"archive"},b("StoryList.Context.ArchivedStories"))):n.Ay.createElement(n.Ay.Fragment,null,!C&&n.Ay.createElement(f.A,{onClick:U,icon:"message"},b("SendMessageTitle")),C?n.Ay.createElement(f.A,{onClick:j,icon:"channel"},b("ChatList.ContextOpenChannel")):n.Ay.createElement(f.A,{onClick:j,icon:"user"},b("StoryList.Context.ViewProfile")),n.Ay.createElement(f.A,{onClick:V,icon:t?"unarchive":"archive"},b(t?"StoryList.Context.Unarchive":"StoryList.Context.Archive")))))}),b=(0,n.ph)((0,s.EK)((e,{isArchived:t})=>{const{orderedPeerIds:{active:a,archived:n}}=e.stories;return{orderedPeerIds:t?n:a,usersById:e.users.byId,chatsById:e.chats.byId}})(function({isArchived:e,className:t,orderedPeerIds:a,usersById:s,chatsById:c,isClosing:d}){const m=(0,l.A)(),u=(0,o.A)(v.A.root,!a.length&&v.A.hidden,d&&v.A.closing,t,"no-scrollbar"),p=(0,n.li)();return(0,i.A)(p,(0,r.Ny)()),n.Ay.createElement("div",{ref:p,id:"StoryRibbon",className:u,dir:m.isRtl?"rtl":void 0},a.map(t=>{const a=s[t]||c[t];if(a)return n.Ay.createElement(E,{key:t,peer:a,isArchived:e})}))}))},75606:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(96540),s=a(13439),o=a(60919),r=a(9716),i=a(22199),l=a(81008);const c=({chatId:e,classNames:t,size:a,style:c})=>{const d=(0,s.mS)();let m;return m=(0,r.L8)(e)?(0,o.mBe)(d,e):(0,o.hds)(d,e),n.createElement(l.A,{style:c,key:e,className:(0,i.cn)(t,"overlay-avatar inline-block cursor-pointer"),size:a,peer:m})}},79882:(e,t,a)=>{"use strict";a.d(t,{I:()=>s,W:()=>o});var n=a(84051);let s=function(e){return e[e.Move=0]="Move",e[e.Opacity=1]="Opacity",e[e.None=2]="None",e}({});function o(e){return(0,n.Kr)(()=>{const t=Object.values(e),a=t.filter(e=>e<0).length,n=t.filter(e=>e>0).length;return t=>{const o=e[t];return 0===o?s.None:o===1/0||o===-1/0||a<=n&&o<0||n<a&&o>0?s.Opacity:s.Move}},[e])}},80477:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(84051),s=a(13439),o=a(90709),r=a(60919),i=a(4961),l=a(59030),c=a(80999);const d=(0,n.ph)((0,s.EK)((e,{typingStatus:t})=>t.userId?{typingUser:(0,r.mBe)(e,t.userId)}:{})(({typingStatus:e,typingUser:t})=>{const a=(0,l.A)(),s=t&&!t.isSelf&&(0,o.u0)(t),r=a(e.action).replace("{user}","").replace("{emoji}",e.emoji||"").trim();return n.Ay.createElement("p",{className:"typing-status",dir:a.isRtl?"rtl":"auto"},s&&n.Ay.createElement("span",{className:"sender-name",dir:"auto"},(0,i.A)(s)),n.Ay.createElement(c.A,{content:r}))}))},80999:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(84051),s=a(87357),o=a(4961),r=a(59030);const i=({content:e,className:t})=>{const a=(0,r.A)();return n.Ay.createElement("span",{className:(0,s.A)("DotAnimation",t),dir:a.isRtl?"rtl":"auto"},(0,o.A)(e),n.Ay.createElement("span",{className:"ellipsis"}))}},81524:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var n=a(84051),s=a(90709),o=a(87357),r=a(17663),i=a(83868),l=a(35749),c=a(2338),d=a(37661),m=a(5912),u=a(17712),p=a(62587),h=a(83057),g=a(27860);const A=(0,n.ph)(({message:e,idPrefix:t="shared-media",isProtected:a,observeIntersection:A,onClick:y})=>{const f=(0,n.li)(),v=(0,m.Vz)(f,A),E=(0,c.A)(e),b=(0,l.A)(e,"pictogram"),x=(0,p.A)(b,!v),w=(0,h.A)(x),C=(0,s.zX)(e),N=(0,s.y2)(e),[I,,S]=(0,d.A)(N),M=(0,u.A)(()=>{S(),y(e.id,e.chatId)});return n.Ay.createElement("div",{ref:f,id:`${t}${(0,s.GZ)(e.id)}`,className:"Media scroll-item",onClick:y?M:void 0},n.Ay.createElement("img",{src:E,className:"media-miniature",alt:"",draggable:!a,decoding:"async",onContextMenu:a?i.A:void 0}),n.Ay.createElement("img",{src:x,className:(0,o.A)("full-media","media-miniature",w),alt:"",draggable:!a,decoding:"async",onContextMenu:a?i.A:void 0}),N&&n.Ay.createElement(g.A,{thumbDataUri:x||E,isVisible:I,className:"media-spoiler"}),C&&n.Ay.createElement("span",{className:"video-duration"},C.isGif?"GIF":(0,r.QO)(C.duration)),a&&n.Ay.createElement("span",{className:"protector"}))})},81642:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(84051),s=a(87357),o=a(17663),r=a(59030),i=a(45);const l=(0,n.ph)(({className:e,message:t,outgoingStatus:a,draftDate:l})=>{const c=(0,r.A)(),d=l&&l>t.date;return n.Ay.createElement("div",{className:(0,s.A)("LastMessageMeta",e)},a&&!d&&n.Ay.createElement(i.A,{status:a}),n.Ay.createElement("span",{className:"time"},(0,o.be)(c,1e3*(d?l:t.date))))})},84219:(e,t,a)=>{"use strict";e.exports=a.p+"invite-gift.2242e9ca8f589dfd32ec.png"},84313:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(84051),s=a(13439),o=a(96454),r=a(17712),i=a(59030);const l=8e3;function c(e,t,a){const{showNotification:c}=(0,s.ko)(),d=(0,i.A)(),[m,u]=(0,n.J0)(!1),p=(0,r.A)(()=>{u(!0),t||c({message:o.yS?d("Video.Unsupported.Mobile"):d("Video.Unsupported.Desktop"),duration:l})}),h=(0,r.A)(e=>{const t=e.currentTarget,{error:a}=t;a&&(3!==a.code&&4!==a.code||p())}),g=(0,r.A)(e=>{const t=e.currentTarget;t.videoHeight&&t.videoWidth||p()});return(0,n.vJ)(()=>{if(a)return;const{current:t}=e;return t?(t.addEventListener("error",h),t.addEventListener("canplay",g),()=>{t.removeEventListener("error",h),t.removeEventListener("canplay",g)}):void 0},[a,e]),m}},84555:(e,t,a)=>{"use strict";a.d(t,{A:()=>T});var n=a(84051),s=a(13439),o=a(23174),r=a(90709),i=a(53827),l=a(87357),c=a(17663),d=a(41733),m=a(76023),u=a(2338),p=a(63988),h=a(37661),g=a(5912),A=a(17712),y=a(37960),f=a(69419),v=a(73767),E=a(34201),b=a(61097),x=a(54746),w=a(27860),C=a(64493),N=a(65843),I=a(35913);const S=m.Wd/2,M=2*(S-6)*Math.PI;let k;const T=({message:e,className:t,canAutoLoad:a,isDownloading:T,origin:P,observeIntersection:L,onStop:B,onReadMedia:R,isTranscriptionError:F,isTranscribed:D,canTranscribe:O,onHideTranscription:z,isTranscriptionHidden:U,isTranscribing:j})=>{const V=(0,n.li)(),J=(0,n.li)(),H=(0,n.li)(),{cancelMediaDownload:K,openOneTimeMediaModal:$,transcribeAudio:G}=(0,s.ko)(),_=(0,g.Vz)(V,L),q=e.content.video,W=e.isMediaUnread,[Q,Y]=(0,n.J0)(a),Z=Boolean(Q&&_),{mediaData:X,loadProgress:ee}=(0,f.A)((0,r.sC)(q,"inline"),!Z,(0,r.Cz)(q,"inline")),{loadProgress:te}=(0,f.A)((0,r.sC)(q,"download"),!T,o.qZ.BlobUrl),[ae,ne]=(0,h.A)(),se=(0,r.G5)(e),oe="oneTimeModal"===P,re=se&&!oe,ie=(0,u.A)(e),le=!Boolean(ie)||ae||re,ce=(0,b.A)(q,le);(0,y.A)({hasMediaData:!le,ref:ce});const de=Q&&!ae||T,me=!1===(0,v.A)(Q),{ref:ue,shouldRender:pe}=(0,E.A)({isOpen:de,noMountTransition:me,withShouldRender:!0}),[he,ge]=(0,n.J0)(!1),[Ae,ye]=(0,n.J0)(0),[fe,ve]=(0,n.Ul)(0),Ee=(0,p.aG)(fe,16);(0,n.vJ)(()=>{if(!he)return;const e=J.current;ve(e.currentTime/e.duration)},[ve,he,Ee]),(0,n.Nf)(()=>{if(!he||!H.current)return;const e=M-Ee()*M;H.current.setAttribute("stroke-dashoffset",e.toString())},[he,Ee]);const be=Boolean(X&&_),xe=(0,A.A)(()=>{J.current&&(ge(!1),ve(0),(0,d.A)(J.current))}),we=(0,A.A)(()=>{k?.(),k=xe}),Ce=(0,A.A)(()=>{const e=J.current;he?e.paused?((0,d.A)(e),(0,i._K)()):e.pause():(we(),e.pause(),e.currentTime=0,(0,d.A)(e),(0,i._K)(),ge(!0))});(0,n.vJ)(()=>{oe&&Ce()},[oe]);const Ne=(0,A.A)(t=>{if(!t.target.closest(".transcribe-button"))if(X){if(!T)return se&&!oe?($({message:e}),void R?.()):void Ce();K({media:q})}else Y(e=>!e)});(0,n.vJ)(()=>{R&&W&&he&&R()},[he,W,R]);const Ie=(0,A.A)(e=>{const t=e.currentTarget;ve(t.currentTime/t.duration),ye(Math.floor(t.currentTime))}),Se=(0,A.A)(()=>{G({chatId:e.chatId,messageId:e.id})}),Me=(0,A.A)(()=>{(D||F)&&z?z(!U):j||Se()});return n.Ay.createElement("div",{ref:V,className:(0,l.A)("RoundVideo","media-inner",oe&&"non-interactive",t),onClick:Ne},X&&n.Ay.createElement("div",{className:"video-wrapper"},re&&n.Ay.createElement(w.A,{isVisible:!0,thumbDataUri:ie,width:m.Wd,height:m.Wd,className:"media-spoiler"}),n.Ay.createElement(N.A,{canPlay:be,ref:J,src:X,className:"full-media",width:m.Wd,height:m.Wd,autoPlay:!re,disablePictureInPicture:!0,muted:!he,defaultMuted:!0,loop:!he,playsInline:!0,isPriority:!0,onEnded:he?B??xe:void 0,onTimeUpdate:he?Ie:void 0,onReady:ne})),!re&&n.Ay.createElement("canvas",{ref:ce,className:"thumbnail",style:`width: ${m.Wd}px; height: ${m.Wd}px`}),n.Ay.createElement("div",{className:"progress"},he&&n.Ay.createElement("svg",{width:m.Wd,height:m.Wd},n.Ay.createElement("circle",{ref:H,cx:S,cy:S,r:S-6,className:"progress-circle",transform:`rotate(-90, ${S}, ${S})`,"stroke-dasharray":M,"stroke-dashoffset":M}))),pe&&n.Ay.createElement("div",{ref:ue,className:"media-loading"},n.Ay.createElement(I.A,{progress:T?te:ee})),re&&!pe&&n.Ay.createElement("div",{className:"play-wrapper"},n.Ay.createElement(C.A,{color:"dark",round:!0,size:"smaller",className:"play",nonInteractive:!0},n.Ay.createElement(x.A,{name:"play"})),n.Ay.createElement(x.A,{name:"view-once"})),!X&&!Q&&n.Ay.createElement(x.A,{name:"download"}),!oe&&n.Ay.createElement("div",{className:(0,l.A)("message-media-duration",W&&"unread")},he?(0,c.QO)(Ae):(0,c.QO)(q.duration),(!he||J.current.paused)&&n.Ay.createElement(x.A,{name:"muted"})),O&&n.Ay.createElement(C.A,{onClick:Me,className:"transcribe-button"},D||F?n.Ay.createElement(x.A,{name:"down"}):n.Ay.createElement(x.A,{name:"transcribe"}),j&&n.Ay.createElement("svg",{viewBox:"0 0 32 24",className:"loading-svg"},n.Ay.createElement("rect",{className:"loading-rect",fill:"transparent",width:"32",height:"24","stroke-width":"3","stroke-linejoin":"round",rx:"6",ry:"6",stroke:"white","stroke-dashoffset":"1","stroke-dasharray":"32,68"}))))}},85449:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(84051),s=a(31481),o=a(98607),r=a(4961),i=a(54746);function l(e,t){return"receipt"===t.type?e("PaymentReceipt"):"buy"===t.type?(0,o.i)(t.text,s.Cyx,n.Ay.createElement(i.A,{className:"star-currency-icon",name:"star"})):(0,r.A)(t.text)}},88792:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(84051),s=a(13439),o=a(31481),r=a(60919),i=a(53827),l=a(49642),c=a(80853),d=a(82117),m=a(17712),u=a(35297);const p=(e,t,a,p,h,g,A,y=!1,f,v,E=!1,b=!1,x,w=!1,C=!1)=>{const N=(0,n.li)(),[I,S]=(0,n.J0)(!1);let M=I;const[k,T]=(0,n.J0)(0),P=(0,m.A)(()=>{S(!1),v&&v()});(0,u.A)(()=>{if(!e)return;N.current=(0,i.kz)(e,a,(e,n)=>{if(!C){switch(e){case"onPlay":{const{setVolume:e,setPlaybackRate:n,toggleMuted:i,proxy:c}=N.current;S(!0),"oneTimeVoice"!==a&&(0,l.MV)(g,function(e){let t={};if(e&&e.current){const{play:a,pause:n,setCurrentTime:o,proxy:r,requestNextTrack:i,requestPreviousTrack:l,isFirst:c,isLast:d}=e.current;t={play:()=>{a(r.src)},pause:()=>{n()},stop:()=>{n(),o(0),(0,s.ko)().closeAudioPlayer()},seekbackward:e=>{const t=e.seekOffset||10;o(Math.max(r.currentTime-t,0))},seekforward:e=>{const t=e.seekOffset||10;o(Math.min(r.currentTime+t,r.duration))},seekTo:e=>{e.seekTime&&o(e.seekTime)}},d()||(t.nexttrack=()=>{i()}),c()||(t.previoustrack=()=>{l()})}return t}(N)),(0,l.HW)("playing");const{audioPlayer:d}=(0,r.nTw)((0,s.mS)());e(d.volume),i(Boolean(d.isMuted));const m=c.duration&&Number.isFinite(c.duration)?c.duration:t;("voice"===a||m>o.CVm)&&n(d.playbackRate),(0,l.hm)({duration:c.duration||0,playbackRate:c.playbackRate,position:c.currentTime});break}case"onRateChange":{const{proxy:e}=N.current;(0,l.hm)({duration:e.duration||0,playbackRate:e.playbackRate,position:e.currentTime});break}case"onPause":S(!1),(0,l.HW)("paused"),x?.();break;case"onTimeUpdate":{const{proxy:e}=N.current;if(w&&0===e.currentTime)break;const a=e.duration&&Number.isFinite(e.duration)?e.duration:t;b||T(e.currentTime/a);break}case"onEnded":(0,l.HW)("paused")}h?.[e]?.(n)}},f,P);const{proxy:n}=N.current;I||n.paused||(S(!0),M=!0),A&&!C&&A(n)},[e]),(0,n.vJ)(()=>{I&&g&&(0,l.D5)(g)},[g,I]);const{play:L,pause:B,setCurrentTime:R,proxy:F,destroy:D,setVolume:O,stop:z,isFirst:U,isLast:j,requestNextTrack:V,requestPreviousTrack:J,setPlaybackRate:H,toggleMuted:K}=N.current??{},$=(0,n.Kr)(()=>F?.duration&&Number.isFinite(F.duration)?F.duration:t,[F?.duration,t]);(0,n.vJ)(()=>{F&&(w&&0===F.currentTime||!$||(0,c.f)(F)||b||T(F.currentTime/$))},[$,k,F,b,w]),(0,n.vJ)(()=>()=>{D?.(E)},[D,E]),(0,d.A)(([e,t])=>{e===y&&p===t||F?.src&&F?.paused||y&&p&&!I&&L?.(p)},[y,p,I,L,F?.src,F?.paused,a]);const G=(0,m.A)(()=>{p&&L?.(p)}),_=(0,m.A)(()=>{I?B?.():G()}),q=(0,m.A)(e=>{R?.(e),$&&F&&T(F.currentTime/$)});return{isPlaying:M,playProgress:k,playPause:_,pause:B,play:G,stop:z,setCurrentTime:q,setVolume:O,audioProxy:F,duration:$,requestNextTrack:V,requestPreviousTrack:J,isFirst:U,isLast:j,setPlaybackRate:H,toggleMuted:K}}},89116:(e,t,a)=>{"use strict";a.d(t,{N:()=>s,S:()=>o});var n=a(71511);let s=function(e){return e.PersonalizeSettings="PersonalizeSettings",e.OriginalMessages="OriginalMessages",e.CustomizationPrompt="CustomizationPrompt",e.ChatPicker="ChatPicker",e.AddTopicPanel="AddTopicPanel",e}({});const o=(0,n.v)(e=>({isOpen:!1,drawerKey:void 0,drawerParams:void 0,openDrawer:(t,a)=>e(()=>({isOpen:!0,drawerKey:t,drawerParams:a})),closeDrawer:()=>e(()=>({isOpen:!1,drawerKey:void 0,drawerParams:void 0}))}))},89873:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(84051),s=a(13439),o=a(17712),r=a(34201),i=a(59030),l=a(71429),c=a(24433),d=a(60859);const m=(0,n.ph)(({isOpen:e,sponsorInfo:t,canReport:a,anchor:s,triggerRef:r,shouldSkipAbout:m,onClose:u,onCloseAnimationEnd:p,onAboutAdsClick:h,onSponsoredHide:g,onSponsorInfo:A,onSponsoredReport:y})=>{const f=(0,n.li)(),v=(0,i.A)(),E=(0,o.A)(()=>r.current),b=(0,o.A)(()=>({withPortal:!0})),x=(0,o.A)(()=>f.current),w=(0,o.A)(()=>document.body),C=t||!m||a;return n.Ay.createElement(l.A,{ref:f,isOpen:e,anchor:s,withPortal:!0,className:"with-menu-transitions",getLayout:b,getTriggerElement:E,getMenuElement:x,getRootElement:w,onClose:u,onCloseAnimationEnd:p},t&&A&&n.Ay.createElement(c.A,{icon:"channel",onClick:A},v("SponsoredMessageSponsor")),!m&&n.Ay.createElement(c.A,{icon:"info",onClick:h},v(a?"AboutRevenueSharingAds":"SponsoredMessageInfo")),a&&y&&n.Ay.createElement(c.A,{icon:"hand-stop",onClick:y},v("ReportAd")),C&&n.Ay.createElement(d.A,null),n.Ay.createElement(c.A,{icon:"close-circle",onClick:g},v("HideAd")))}),u=(0,n.ph)(({isOpen:e,randomId:t,sponsorInfo:a,additionalInfo:i,canReport:l,anchor:c,triggerRef:d,shouldSkipAbout:u,onItemClick:p,onClose:h,onCloseAnimationEnd:g})=>{const{openAboutAdsModal:A,showDialog:y,reportSponsored:f,hideSponsored:v}=(0,s.ko)(),{ref:E}=(0,r.A)({isOpen:e,onCloseAnimationEnd:g}),b=(0,o.A)(()=>{p?.(),h()}),x=(0,o.A)(()=>{A({randomId:t,additionalInfo:i,canReport:l,sponsorInfo:a}),b()}),w=(0,o.A)(()=>{v(),b()}),C=(0,o.A)(()=>{y({data:{message:[a,i].filter(Boolean).join("\n")}}),b()}),N=(0,o.A)(()=>{f({randomId:t}),b()});if(c)return n.Ay.createElement("div",{ref:E,className:"ContextMenuContainer"},n.Ay.createElement(m,{isOpen:e,anchor:c,triggerRef:d,canReport:l,sponsorInfo:a,shouldSkipAbout:u,onClose:h,onCloseAnimationEnd:h,onAboutAdsClick:x,onSponsoredHide:w,onSponsorInfo:C,onSponsoredReport:N}))})},90054:(e,t,a)=>{"use strict";a.d(t,{A:()=>q});var n=a(84051),s=a(13439),o=a(23174),r=a(31481),i=a(66644),l=a(90709),c=a(60919),d=a(96454),m=a(87357),u=a(11778),p=a(50442),h=a(25903),g=a(43874),A=a(26072),y=a(96374),f=a(5912),v=a(17712),E=a(59030),b=a(73767),x=a(9717),w=a(63744),C=a(51083),N=a(54746),I=a(37605),S=a(64493),M=a(46222),k=a(52745),T=a(76023),P=a(79577);const L={root:"Ky16H_sV","button-text":"W01t9CIf",buttonText:"W01t9CIf",sticker:"c8lE3XW5",title:"wlwD1B1Q",description:"V8OCFHmp","is-ios":"IxW_z_r0",isIos:"IxW_z_r0","is-macos":"OFxKGCEJ",isMacos:"OFxKGCEJ"},B=7*T.$,R=(0,n.ph)((0,s.EK)((e,{chatId:t})=>{const a=(0,c.hds)(e,t),n=a&&(a.isCreator||(0,l.ub)(a,"manageTopics"));return{animatedEmoji:(0,c.oei)(e,"🐣"),canManageTopics:n}})(({chatId:e,animatedEmoji:t,canManageTopics:a})=>{const{openCreateTopicPanel:o}=(0,s.ko)(),r=(0,E.A)(),{isMobile:i}=(0,g.Ay)(),l=(0,n.hb)(()=>{o({chatId:e})},[e,o]);return n.Ay.createElement("div",{className:L.root},n.Ay.createElement("div",{className:L.sticker},t&&n.Ay.createElement(P.A,{sticker:t,size:B})),n.Ay.createElement("h3",{className:L.title,dir:"auto"},r("ChatList.EmptyTopicsTitle")),n.Ay.createElement("p",{className:(0,m.A)(L.description,L.centered),dir:"auto"},r("ChatList.EmptyTopicsDescription")),a&&n.Ay.createElement(S.A,{ripple:!i,fluid:!0,onClick:l,size:"smaller",isRtl:r.isRtl},n.Ay.createElement("div",{className:L.buttonText},r("ChatList.EmptyTopicsCreate"))))}));var F=a(27109),D=a(66414),O=a(4961),z=a(37661),U=a(53188),j=a(87894),V=a(81642),J=a(38102),H=a(94189),K=a(22720),$=a(97046),G=a(24807);const _=(0,n.ph)((0,s.EK)((e,{chatId:t,topic:a,isSelected:n})=>{const s=(0,c.hds)(e,t),o=(0,c.O5q)(e,t,a.lastMessageId),{isOutgoing:r}=o||{},i=o&&(0,c.Y7C)(e,o),l=(0,c.C5H)(e,t,a.id,"typingStatus"),d=(0,c.GA4)(e,t,a.id),m=(0,c.Vw0)(e,t,a.id),u=Boolean(m?.lastReadInboxMessageId),p=(0,c.pSx)(e,t),{chatId:h,threadId:g}=(0,c.Xf0)(e)||{},A=o?.content.storyData,y=A&&(0,c.Msb)(e,A.peerId,A.id);return{chat:s,lastMessage:o,lastMessageSender:i,typingStatus:l,isChatMuted:s&&(0,F.If)(s,(0,c.K52)(e),(0,c.P5N)(e,s.id)),canDelete:(0,c.DBV)(e,t,a.id),withInterfaceAnimations:(0,c.PKK)(e),draft:d,...r&&o&&{lastMessageOutgoingStatus:(0,c.Tl2)(e,o)},canScrollDown:n&&s?.id===h&&g===a.id,wasTopicOpened:u,topics:p,lastMessageStory:y}})(({topic:e,isSelected:t,chatId:a,chat:o,isChatMuted:r,style:i,lastMessage:c,lastMessageStory:u,canScrollDown:p,lastMessageOutgoingStatus:h,observeIntersection:g,canDelete:A,lastMessageSender:y,animationType:f,withInterfaceAnimations:b,orderDiff:x,typingStatus:w,draft:C,wasTopicOpened:I,topics:S})=>{const{openThread:M,deleteTopic:k,focusLastMessage:T,setViewForumAsMessages:P}=(0,s.ko)(),L=(0,E.A)(),[B,R,F]=(0,z.A)(),[_,q,W]=(0,z.A)(),[Q,Y,Z]=(0,z.A)(),[X,ee,te]=(0,z.A)(),{isPinned:ae,isClosed:ne,notifySettings:se}=e,oe=Boolean(se.mutedUntil||void 0===se.mutedUntil&&r),re=(0,v.A)(()=>{Y(),R()}),ie=(0,v.A)(()=>{k({chatId:o.id,topicId:e.id})}),le=(0,v.A)(()=>{ee(),q()}),{renderSubtitle:ce,ref:de}=(0,U.A)({chat:o,chatId:a,lastMessage:c,draft:C,lastMessageSender:y,lastMessageTopic:e,observeIntersection:g,isTopic:!0,typingStatus:w,topics:S,statefulMediaContent:(0,l.FE)({story:u}),animationType:f,withInterfaceAnimations:b,orderDiff:x}),me=(0,v.A)(()=>{M({chatId:a,threadId:e.id,shouldReplaceHistory:!0}),P({chatId:a,isEnabled:!1}),p&&T()}),ue=function({topic:e,chat:t,isChatMuted:a,wasOpened:o,canDelete:r,handleDelete:i,handleMute:c}){const m=(0,E.A)();return(0,n.Kr)(()=>{const{isPinned:n,notifySettings:u,isClosed:p,id:h}=e,g=t.id,{editTopic:A,toggleTopicPinned:y,markTopicRead:f,updateTopicMutedState:v,openChatInNewTab:E}=(0,s.ko)(),b=(0,l.l1)(t,e),x=t.isCreator||(0,l.ub)(t,"manageTopics"),w=d.OS&&{title:"Open in new tab",icon:"open-in-new-tab",handler:()=>{E({chatId:t.id,threadId:h})}},C=e.unreadCount||!o?{title:m("MarkAsRead"),icon:"readchats",handler:()=>{f({chatId:g,topicId:h})}}:void 0,N=x?n?{title:m("UnpinFromTop"),icon:"unpin",handler:()=>y({chatId:g,topicId:h,isPinned:!1})}:{title:m("PinToTop"),icon:"pin",handler:()=>y({chatId:g,topicId:h,isPinned:!0})}:void 0,I=a&&void 0===u.mutedUntil||u.mutedUntil?{title:m("ChatList.Unmute"),icon:"unmute",handler:()=>v({chatId:g,topicId:h,isMuted:!1})}:{title:`${m("ChatList.Mute")}...`,icon:"mute",handler:c},S=b?p?{title:m("lng_forum_topic_reopen"),icon:"reopen-topic",handler:()=>A({chatId:g,topicId:h,isClosed:!1})}:{title:m("lng_forum_topic_close"),icon:"close-topic",handler:()=>A({chatId:g,topicId:h,isClosed:!0})}:void 0,M=r?{title:m("lng_forum_topic_delete"),icon:"delete",destructive:!0,handler:i}:void 0;return(0,j.oE)([w,N,C,I,S,M])},[e,t,a,o,m,r,i,c])}({topic:e,chat:o,isChatMuted:r,wasOpened:I,canDelete:A,handleDelete:re,handleMute:le});return n.Ay.createElement(K.A,{className:(0,m.A)("Fn34Vu_9","Chat",t&&"selected","chat-item-clickable"),onClick:me,style:i,href:d.OS?`#${(0,D.az)(a,"thread",e.id)}`:void 0,contextActions:ue,withPortalForMenu:!0,ref:de},n.Ay.createElement("div",{className:"info"},n.Ay.createElement("div",{className:"info-row"},n.Ay.createElement("div",{className:(0,m.A)("title")},n.Ay.createElement(J.A,{topic:e,className:"oXJl4tra",observeIntersection:g}),n.Ay.createElement("h3",{dir:"auto",className:"fullName"},(0,O.A)(e.title))),Boolean(se.mutedUntil)&&n.Ay.createElement(N.A,{name:"muted"}),n.Ay.createElement("div",{className:"separator"}),ne&&n.Ay.createElement(N.A,{name:"lock-badge",className:"MB7Gomjn"}),c&&n.Ay.createElement(V.A,{message:c,outgoingStatus:h})),n.Ay.createElement("div",{className:"subtitle"},ce(),n.Ay.createElement(G.A,{chat:o,isPinned:ae,isMuted:oe,topic:e,wasTopicOpened:I,topics:S}))),Q&&n.Ay.createElement(H.A,{isOpen:B,onClose:F,onCloseAnimationEnd:Z,confirmIsDestructive:!0,confirmHandler:ie,text:L("lng_forum_topic_delete_sure"),confirmLabel:L("Delete")}),X&&n.Ay.createElement($.A,{isOpen:_,onClose:W,onCloseAnimationEnd:te,chatId:a,topicId:e.id}))})),q=(0,n.ph)((0,s.EK)(e=>{const t=(0,c.nTw)(e).forumPanelChatId,a=t?(0,c.hds)(e,t):void 0,{chatId:n,threadId:s}=(0,c.Xf0)(e)||{},o=t?(0,c.xyP)(e,t):void 0;return{chat:a,currentTopicId:t===n?Number(s):void 0,withInterfaceAnimations:(0,c.PKK)(e),topicsInfo:o}},e=>(0,c.clw)(e))(({chat:e,currentTopicId:t,isOpen:a,isHidden:c,topicsInfo:T,onTopicSearch:P,onCloseAnimationEnd:L,onOpenAnimationStart:B,withInterfaceAnimations:F})=>{const{closeForumPanel:D,openChatWithInfo:O,loadTopics:z}=(0,s.ko)(),U=(0,n.li)(),j=(0,n.li)(),V=(0,n.li)(),{isMobile:J}=(0,g.Ay)(),H=e?.id;(0,n.vJ)(()=>{H&&!T&&z({chatId:H})},[T,H]);const[K,$]=(0,n.J0)(!1),G=(0,E.A)(),q=(0,v.A)(()=>{D()});(0,n.vJ)(()=>{F||a||L?.()},[F,a,L]);const W=(0,v.A)(()=>{e&&O({id:e.id,shouldReplaceHistory:!0})}),{observe:Q}=(0,f.BL)({rootRef:j,throttleMs:200});(0,f.mv)(V,Q,({isIntersecting:e})=>{$(!e)});const Y=(0,n.Kr)(()=>T?(0,l.CO)(Object.values(T.topicsById),T.orderedPinnedTopicIds).map(({id:e})=>e):[],[T]),{orderDiffById:Z,getAnimationType:X}=(0,x.A)(Y,e?.id),[ee,te]=(0,y.A)(()=>{e&&z({chatId:e.id})},Y,!T?.totalCount||Y.length>=T.totalCount,r.iIc),ae=(0,n.li)(!1),ne=a&&!c,se=(0,b.A)(ne);se!==ne&&(ae.current=!1),(0,A.A)({isActive:ne,onBack:q}),(0,n.vJ)(()=>ne?(0,u.A)(q):void 0,[q,ne]),(0,n.vJ)(()=>{se!==ne&&(0,i.Uz)(()=>{if(!U.current)return;const e=(0,n.VK)();(0,h.j)(U.current,e),B?.(),ne?(ae.current=!0,U.current.style.transform="none"):(ae.current=!1,U.current.style.transform="")})},[ne,B,se]),(0,n.vJ)(()=>{if(d.TF)return(0,p.wJ)(U.current,{selectorToPreventScroll:".chat-list",onSwipe:(e,t)=>t===(G.isRtl?p.ez.Left:p.ez.Right)&&(D(),!0)})},[D,G.isRtl]);const oe=void 0===T;return n.Ay.createElement("div",{ref:U,className:(0,m.A)("MlF2n1nb",K&&"SZ24u3cn",G.isRtl&&"Xs2y1fCE",!F&&"kmDMv6D8"),onTransitionEnd:a?void 0:L},n.Ay.createElement("div",{id:"TopicListHeader",className:"left-header"},n.Ay.createElement(S.A,{round:!0,size:"smaller",color:"translucent",onClick:q,ariaLabel:G("Close")},n.Ay.createElement(N.A,{name:"close"})),e&&n.Ay.createElement(C.A,{noAvatar:!0,className:"Sf633zAP",chatId:e.id,onClick:W}),e&&n.Ay.createElement(I.A,{chatId:e.id,threadId:o.l3,messageListType:"thread",canExpandActions:!1,isForForum:!0,isMobile:J,onTopicSearch:P})),e&&n.Ay.createElement(w.A,{chatId:e.id}),n.Ay.createElement("div",{className:"hGeb3TQJ"}),n.Ay.createElement(M.A,{className:"chat-list custom-scroll",ref:j,items:ee,preloadBackwards:r.iIc,withAbsolutePositioning:!0,maxHeight:(Y?.length||0)*r.HGU,onLoadMore:te,sensitiveArea:r.C$_,beforeChildren:n.Ay.createElement("div",{ref:V,className:"ERz3fcar"})},Boolean(ee?.length)&&function(){const a=Y.indexOf(ee[0]);return ee?.map((s,o)=>n.Ay.createElement(_,{key:s,chatId:e.id,topic:T.topicsById[s],style:`top: ${(a+o)*r.HGU}px;`,isSelected:t===s,observeIntersection:Q,animationType:X(s),orderDiff:Z[s]}))}(),oe&&!ee?.length&&n.Ay.createElement(k.A,{key:"loading"})),!oe&&1===ee?.length&&ee[0]===r.HxB&&n.Ay.createElement(R,{chatId:H}))}))},90254:(e,t,a)=>{"use strict";a.d(t,{A:()=>U});var n=a(84051),s=a(13439),o=a(89925),r=a(90709),i=a(60919),l=a(30708),c=a(96454),d=a(87357),m=a(50442),u=a(79824),p=a(31460),h=a(4961),g=a(54699),A=a(39351),y=a(17712),f=a(59030),v=a(73767),E=a(23174),b=a(58554),x=a(41036),w=a(21849),C=a(34431),N=a(9716),I=a(14242),S=a(35049),M=a(43874),k=a(45470),T=a(37661),P=a(62587),L=a(83057),B=a(65843),R=a(57474),F=a(54746);const D=(0,n.ph)(({chat:e,user:t,photo:a,isSavedMessages:s,isSavedDialog:o,canPlayVideo:i,onClick:l})=>{const m=(0,n.li)(),u=(0,f.A)(),{isMobile:p}=(0,M.Ay)(),g=t&&(0,r.PL)(t),A=e&&(0,r.kE)(e.id),y=e&&(0,r.Qe)(e.id),v=t||e,E=v&&!s&&!g&&!A&&!y,{isVideo:b}=a||{},x=(!a||a.id===v.avatarPhotoId)&&(0,r.cP)(v,"normal"),w=E&&a&&!x&&(0,r.rI)(a,"pictogram"),C=(0,P.A)(w||x),D=E&&a&&!b&&(0,r.mU)(a),O=(0,P.A)(D),z=E&&a&&b&&(0,r.Pg)(a),U=(0,P.A)(z)||O,[j,V]=(0,T.A)(),J=Boolean(U&&(!b||j)),H=(0,L.A)(J),K=E&&!J&&!C&&a?.thumbnail?.dataUri,$=(0,k.A)(a?.thumbnail?.dataUri,!K,p&&!c.QH),G=a||C||K;(0,n.vJ)(()=>{m.current&&!i&&(m.current.currentTime=0)},[i]);const _=(0,n.Kr)(()=>s?o?"my-notes":"avatar-saved-messages":g?"avatar-deleted-account":A?"reply-filled":y?"author-hidden":void 0,[y,g,o,A,s]);let q;if(_)q=n.Ay.createElement(F.A,{name:_,role:"img"});else if(G)q=n.Ay.createElement(n.Ay.Fragment,null,K?n.Ay.createElement("canvas",{ref:$,className:"thumb"}):n.Ay.createElement("img",{src:C,draggable:!1,className:"thumb",alt:""}),a&&(b?n.Ay.createElement(B.A,{canPlay:i,ref:m,src:U,className:(0,d.A)("avatar-media",H),muted:!0,disablePictureInPicture:!0,loop:!0,playsInline:!0,onReady:V}):n.Ay.createElement("img",{src:U,className:(0,d.A)("avatar-media",H),alt:""})));else if(t){const e=(0,r.Yg)(t);q=e?(0,I.Qh)(e,2):void 0}else if(e){const t=(0,r.Js)(u,e);q=t&&(0,I.Qh)(t,(0,N.L8)(e.id)?2:1)}else q=n.Ay.createElement("div",{className:"spinner-wrapper"},n.Ay.createElement(R.A,{color:"white"}));const W=(0,d.A)("ProfilePhoto",(0,S.y)(v),s&&"saved-messages",y&&"anonymous-forwards",g&&"deleted-account",A&&"replies-bot-account",!s&&!G&&"no-photo");return n.Ay.createElement("div",{className:W,onClick:G?l:void 0},"string"==typeof q?(0,h.A)(q,["hq_emoji"]):q)});var O=a(38102),z=a(24845);const U=(0,n.ph)((0,s.EK)((e,{peerId:t})=>{const a=(0,i.mBe)(e,t),n=(0,i.K0y)(e,t),s=(0,i.hds)(e,t),o=(0,i.IVq)(e,t),{mediaIndex:r,chatId:c}=(0,i.nTw)(e).mediaViewer,d=s?.isForum,{threadId:m}=(0,i.Xf0)(e)||{},u=d&&m?(0,i.S0q)(e,t,m):void 0,{animationLevel:p}=(0,l.l)(e),h=(a||s)?.emojiStatus;return{user:a,userStatus:n,chat:s,mediaIndex:r,avatarOwnerId:c,animationLevel:p,emojiStatusSticker:h?e.customEmojis.byId[h.documentId]:void 0,emojiStatusSlug:"collectible"===h?.type?h.slug:void 0,profilePhotos:o,...u&&{topic:u,messagesCount:(0,i.QbG)(e,t,m)}}})(({forceShowSelf:e,canPlayVideo:t,user:a,userStatus:i,chat:l,mediaIndex:N,avatarOwnerId:I,topic:S,messagesCount:M,animationLevel:k,emojiStatusSticker:T,emojiStatusSlug:P,profilePhotos:L,peerId:B,isForMonoforum:R})=>{const{openMediaViewer:F,openPremiumModal:U,openStickerSet:j,openPrivacySettingsNoticeModal:V,loadMoreProfilePhotos:J,openUniqueGiftBySlug:H}=(0,s.ko)(),K=(0,f.A)(),$=(0,A.A)();(0,g.A)(a?6e4:void 0);const G=L?.photos||u.p,_=(0,v.A)(N),q=(0,v.A)(I),[W,Q]=(0,n.J0)(!0),[Y,Z]=(0,n.J0)(0),X=G.length<=1||0===Y,ee=G.length<=1||Y===G.length-1;(0,n.vJ)(()=>{G.length-Y<=3&&J({peerId:B})},[Y,B,G.length]),(0,n.vJ)(()=>{q&&void 0!==_&&void 0===N&&(Q(!1),Z(_))},[N,_,q]),(0,n.vJ)(()=>{Y>G.length&&(Q(!1),Z(Math.max(0,G.length-1)))},[Y,G.length]),function(e,t){(0,n.vJ)(()=>{e.slice(t,t+4).forEach(e=>{const t=(0,r.mU)(e);b.Ih(t)||b.hd(t,E.qZ.BlobUrl)})},[t,e])}(G,Y);const te=(0,y.A)(()=>{F({isAvatarView:!0,chatId:B,mediaIndex:Y,origin:e?o.TQ.SettingsAvatar:o.TQ.ProfileAvatar})}),ae=(0,y.A)(()=>{P?H({slug:P}):B?U({fromUserId:B}):j({stickerSetInfo:T.stickerSetInfo})}),ne=(0,y.A)(()=>{X||(Q(!0),Z(Y-1))}),se=(0,y.A)(()=>{ee||(Q(!0),Z(Y+1))}),oe=(0,y.A)(()=>{V({chatId:l.id,isReadDate:!1})});if((0,n.vJ)(()=>{const e=document.querySelector(`.${z.A.photoWrapper}`);if(e)return(0,m.wJ)(e,{selectorToPreventScroll:".Profile, .settings-content",onSwipe:c.TF?(e,t)=>t===m.ez.Right?(ne(),!0):t===m.ez.Left&&(se(),!0):void 0})},[se,ne]),a||l)return S?n.Ay.createElement("div",{className:z.A.topicContainer},n.Ay.createElement(O.A,{topic:S,size:120,className:z.A.topicIcon,letterClassName:z.A.topicIconTitle,noLoopLimit:!0}),n.Ay.createElement("h3",{className:z.A.topicTitle,dir:K.isRtl?"rtl":void 0},(0,h.A)(S.title)),n.Ay.createElement("p",{className:z.A.topicMessagesCounter},M?K("Chat.Title.Topic",M,"i"):K("lng_forum_no_messages"))):n.Ay.createElement("div",{className:(0,d.A)("ProfileInfo"),dir:K.isRtl?"rtl":void 0},n.Ay.createElement("div",{className:z.A.photoWrapper},function(){const e=Math.max(G.length,L?.count||0);if(!G||e<=1)return;const t=Array.from({length:Math.min(e,30)}),a=Y>=30?29:Y;return n.Ay.createElement("div",{className:z.A.photoDashes},t.map((e,t)=>n.Ay.createElement("span",{className:(0,d.A)(z.A.photoDash,t===a&&z.A.photoDash_current)})))}(),!e&&L?.personalPhoto&&n.Ay.createElement("div",{className:(0,d.A)(z.A.fallbackPhoto,X&&z.A.fallbackPhotoVisible)},n.Ay.createElement("div",{className:z.A.fallbackPhotoContents},K(L.personalPhoto.isVideo?"UserInfo.CustomVideo":"UserInfo.CustomPhoto"))),e&&L?.fallbackPhoto&&n.Ay.createElement("div",{className:(0,d.A)(z.A.fallbackPhoto,(X||ee)&&z.A.fallbackPhotoVisible)},n.Ay.createElement("div",{className:z.A.fallbackPhotoContents,onClick:function(){X&&(Q(!0),Z(G.length-1))}},!ee&&n.Ay.createElement(w.A,{photo:L.fallbackPhoto,className:z.A.fallbackPhotoAvatar,size:"mini"}),K(L.fallbackPhoto.isVideo?"UserInfo.PublicVideo":"UserInfo.PublicPhoto"))),n.Ay.createElement(x.Ay,{activeKey:Y,name:(0,p.P)("slide",k,!W,K.isRtl)},re),!X&&n.Ay.createElement("button",{type:"button",dir:K.isRtl?"rtl":void 0,className:(0,d.A)(z.A.navigation,z.A.navigation_prev),"aria-label":K("AccDescrPrevious"),onClick:ne}),!ee&&n.Ay.createElement("button",{type:"button",dir:K.isRtl?"rtl":void 0,className:(0,d.A)(z.A.navigation,z.A.navigation_next),"aria-label":K("Next"),onClick:se})),n.Ay.createElement("div",{className:z.A.info,dir:K.isRtl?"rtl":"auto"},(a||l)&&n.Ay.createElement(C.A,{peer:a||l,withEmojiStatus:!0,emojiStatusSize:24,onEmojiStatusClick:ae,noLoopLimit:!0,canCopyTitle:!0}),function(){const e=(0,r.Qe)(B),t=(0,r.DX)(B);if(!e&&!t)return R?n.Ay.createElement("span",{className:(0,d.A)(z.A.status,"status"),dir:"auto"},$("MonoforumStatus")):a?n.Ay.createElement("div",{className:(0,d.A)(z.A.status,"status",(0,r.PF)(a,i)&&"online")},n.Ay.createElement("span",{className:z.A.userStatus,dir:"auto"},(0,r.CD)(K,a,i)),i?.isReadDateRestrictedByMe&&n.Ay.createElement("span",{className:z.A.getStatus,onClick:oe},n.Ay.createElement("span",null,K("StatusHiddenShow")))):n.Ay.createElement("span",{className:(0,d.A)(z.A.status,"status"),dir:"auto"},(0,r.WX)(l)?K("Subscribers",l.membersCount??0,"i"):K("Members",l.membersCount??0,"i"))}()));function re(e){const s=G.length>0?G[Y]:void 0;return n.Ay.createElement(D,{key:Y,user:a,chat:l,photo:s,canPlayVideo:Boolean(e&&t),onClick:te})}}))},90423:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>i,j9:()=>d,zk:()=>l});var n=a(84051),s=a(31791),o=a(96454);const r=c();function i(e,t,a){const[s,i]=(0,n.J0)(Boolean(r&&document[r]));return(0,n.Nf)(()=>{const n=e.current,s=()=>{const e=Boolean(r&&document[r]);i(e),e?a?.(!1):t?.(!1),n instanceof HTMLVideoElement&&(n.controls=e)},o=()=>{i(!0),a&&a(!0)},l=()=>{i(!1),t&&t(!1)};return document.addEventListener("fullscreenchange",s,!1),document.addEventListener("webkitfullscreenchange",s,!1),document.addEventListener("mozfullscreenchange",s,!1),n&&(n.addEventListener("webkitbeginfullscreen",o,!1),n.addEventListener("webkitendfullscreen",l,!1)),()=>{document.removeEventListener("fullscreenchange",s,!1),document.removeEventListener("webkitfullscreenchange",s,!1),document.removeEventListener("mozfullscreenchange",s,!1),n&&(n.removeEventListener("webkitbeginfullscreen",o,!1),n.removeEventListener("webkitendfullscreen",l,!1))}},[]),r||o.pz?[s,()=>{var t;e.current&&(r||o.pz)&&!s&&((t=e.current).requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen(),i(!0))},()=>{e.current&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),i(!1))}]:[!1]}const l=()=>{const[e,t]=(0,n.J0)(!1);return(0,n.vJ)(()=>{const e=()=>{t(d())},a=window.electron?.on(s.v.FULLSCREEN_CHANGE,t);return window.electron?.isFullscreen().then(t),document.addEventListener("fullscreenchange",e,!1),document.addEventListener("webkitfullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),()=>{a?.(),document.removeEventListener("fullscreenchange",e,!1),document.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1)}},[]),e};function c(){return void 0!==document.fullscreenElement?"fullscreenElement":void 0!==document.mozFullScreenElement?"mozFullScreenElement":void 0!==document.webkitFullscreenElement?"webkitFullscreenElement":""}function d(){const e=c();return Boolean(e&&document[e])}},91930:(e,t,a)=>{"use strict";a.d(t,{A:()=>L,b:()=>P});var n=a(84051),s=a(31481),o=a(90709),r=a(3544),i=a(70636),l=a(87357),c=a(17663),d=a(9716),m=a(91034),u=a(48775),p=a(76023),h=a(4961),g=a(18501),A=a(35749),y=a(2338),f=a(11217),v=a(5912),E=a(39351),b=a(62587),x=a(59030),w=a(64154),C=a(42452),N=a(54746),I=a(27860),S=a(18653),M=a(86070);const k=" ",T=({className:e,message:t,replyInfo:a,suggestedPostInfo:m,sender:T,senderChat:P,forwardSender:L,composerForwardSenders:B,title:R,customText:F,isProtected:D,isInComposer:O,noUserColors:z,chatTranslations:U,requestedChatTranslationLanguage:j,isMediaNsfw:V,observeIntersectionForLoading:J,observeIntersectionForPlaying:H,onClick:K})=>{const $=(0,n.li)(),G=(0,v.Vz)($,J),_=(0,n.Kr)(()=>{const e="message"===a?.type&&a.replyMedia||t?.content;if(e)return{content:e}},[t,a]),q=_?.content?.video?.isGif?_.content.video:void 0,W=Boolean(q&&!q.previewPhotoSizes?.length),Q=(0,A.A)(_,W?"full":"pictogram"),Y=(0,b.A)(Q,!G),Z=(0,y.A)(_),X=Boolean(_&&(0,o.lk)(_)),ee=Boolean(_&&(0,o.y2)(_))||V,te=Boolean("message"===a?.type&&a.isQuote),ae="message"===a?.type?a.replyFrom:void 0,ne=t&&(0,o.ZR)(t),{translatedText:se}=(0,w.A)(U,t?.chatId,ne?t?.id:void 0,j),oe=(0,x.A)(),re=(0,E.A)(),ie=T?(0,i.F9)(oe,T):ae?.hiddenUserName||t?.forwardInfo?.hiddenUserName,le=(0,n.Kr)(()=>{if(!B)return;const e=B.map(e=>(0,i.F9)(re,e)).filter(Boolean);return re.conjunction(e)},[B,re]),ce=P?(0,i.F9)(oe,P):void 0,de=L?(0,i.F9)(oe,L):t?.forwardInfo?.hiddenUserName,me=T&&T.id===L?.id,{handleClick:ue,handleMouseDown:pe}=(0,f.Q)(K);return n.Ay.createElement(M.A,{peer:T,emojiIconClassName:"EmbeddedMessage--background-icons",ref:$,shouldReset:!0,noUserColors:z,className:(0,l.A)("EmbeddedMessage",e,te&&"is-quote",Z&&"with-thumb","no-selection",B&&"is-input-forward",m&&"is-suggested-post"),dir:re.isRtl?"rtl":void 0,onClick:ue,onMouseDown:pe},n.Ay.createElement("div",{className:"hover-effect"}),n.Ay.createElement(C.A,null),Z&&function(e,t,a,s,o,r){const{width:i,height:c}=(0,p.mr)(),d=t||e,m=a&&t;return n.Ay.createElement("div",{className:(0,l.A)("embedded-thumb",s&&"round")},!r&&!m&&n.Ay.createElement("img",{src:d,width:i,height:c,alt:"",className:"pictogram",draggable:!1}),!r&&m&&n.Ay.createElement("video",{src:t,width:i,height:c,playsInline:!0,disablePictureInPicture:!0,className:"pictogram"}),n.Ay.createElement(I.A,{thumbDataUri:m?e:d,isVisible:Boolean(r),width:i,height:c}),o&&n.Ay.createElement("span",{className:"protector"}))}(Z,Y,W,X,D,ee),n.Ay.createElement("div",{className:"message-text"},n.Ay.createElement("p",{className:(0,l.A)("embedded-text-wrapper",te&&"multiline")},function(){if(m){if(!m?.price?.amount&&!m.scheduleDate)return re("ComposerEmbeddedMessageSuggestedPostDescription");const e=m.price?m.price.currency===s.ykW?(0,u.Ms)(re,m.price.amount,{className:"suggested-price-ton-icon",shouldConvertFromNanos:!0}):(0,u.U2)(re,m.price.amount,{className:"suggested-price-star-icon"}):"",t=m.scheduleDate?(0,c.e0)(m.scheduleDate,re,oe):"";return e&&!t?n.Ay.createElement("span",{className:"suggested-post-price-wrapper"},re("TitleSuggestedPostAmountForAnyTime",{amount:e},{withNodes:!0,withMarkdown:!0})):n.Ay.createElement("span",{className:"suggested-post-price-wrapper"},e,t?` • ${t}`:"")}return"message"===a?.type&&a.quoteText?(0,g.fd)({text:a.quoteText.text,entities:a.quoteText.entities,asPreview:!0,emojiSize:17}):t?n.Ay.createElement(S.A,{message:t,noEmoji:Boolean(Z),translatedText:se,observeIntersectionForLoading:J,observeIntersectionForPlaying:H,emojiSize:17}):F||function(e){if(!e||e.content.text)return k;const t=(0,r.GG)(oe,e.content,{});return t&&t!==s.bVP?n.Ay.createElement("span",null,(0,h.A)(t)):k}(_)||k}()),n.Ay.createElement("div",{className:"message-title"},function(){if(R)return(0,h.A)(R);if(m&&a)return re("TitleSuggestedChanges");if(m)return re("ComposerEmbeddedMessageSuggestedPostTitle");if(!ie&&!le)return k;let e;P&&((0,o.WX)(P)&&(e="channel-filled"),(0,o.YE)(P)&&(e="group-filled"));const t=O&&Boolean(a&&"quoteText"in a&&a?.quoteText);return n.Ay.createElement("span",{className:"embedded-sender-wrapper"},(!P||!!(0,d.L8)(P?.id)||P.id!==T?.id)&&n.Ay.createElement("span",{className:"embedded-sender"},!B&&ie&&(0,h.A)(t?oe("ReplyToQuote",ie):ie),le&&(0,h.A)(re("ComposerTitleForwardFrom",{users:le},{withNodes:!0,withMarkdown:!0}))),e&&n.Ay.createElement(N.A,{name:e,className:"embedded-chat-icon"}),e&&ce&&n.Ay.createElement("span",{className:"embedded-sender-chat"},(0,h.A)(ce)))}(),de&&!me&&n.Ay.createElement("span",{className:"embedded-forward-sender-wrapper"},n.Ay.createElement(N.A,{name:L?"share-filled":"forward",className:"embedded-origin-icon"}),n.Ay.createElement("span",{className:"forward-sender-title"},(0,h.A)(de))))))},P=(0,m.A)(T),L=T},92111:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var n=a(84051),s=a(13439),o=a(23174),r=a(90709),i=a(60919),l=a(39761),c=a(87679),d=a(58554),m=a(95704),u=a(37836),p=a(46051),h=a(66991);const g={},A=(0,u.v7)(1e3),y=function(e,t){(0,n.vJ)(()=>{if(void 0===e)return;(Array.isArray(e)?e:[e]).forEach(e=>{const a=t||(0,s.mS)().stories.byPeerId[e]?.orderedIds?.[0];a&&(async e=>{await A,e.forEach(({hash:e,format:t,isStream:a})=>{a?async function(e){const t=(0,m.h)((0,d.RB)(e));let a=0;for await(const e of t)if(a+=e.byteLength,a>=2097152)break}(e):d.hd(e,t).then(e=>{e&&(t===o.qZ.Progressive&&function(e){const t=document.head,a=document.createElement("video");a.preload="auto",a.src=e,a.muted=!0,a.autoplay=!0,a.disableRemotePlayback=!0,a.style.display="none",t.appendChild(a),a.load(),setTimeout(()=>{(0,l.A)(a),t.removeChild(a)},1e3)}(e),t===o.qZ.BlobUrl&&(0,c.NN)(e))})})})(function(e,t){const a=(0,i._bp)((0,s.mS)(),e);if(!a||!a.orderedIds?.length)return[];const n=function(e,t){const a=e.indexOf(t),n=Math.max(a-5,0),s=Math.min(a+5,e.length);return e.slice(n,s)}(a.orderedIds,t),l=[];return n.forEach(t=>{if(g[e]?.has(t))return;const n=a.byId[t];if(!n||!("content"in n))return;const s=Boolean(n.content.video);l.push({hash:(0,r.EN)(n,"full"),format:s?o.qZ.Progressive:o.qZ.BlobUrl,isStream:s&&(0,h.c)(p.G)}),l.push({hash:(0,r.EN)(n),format:o.qZ.BlobUrl}),n.content.altVideos&&l.push({hash:(0,r.EN)(n,"full",!0),format:o.qZ.Progressive}),g[e]=(g[e]||new Set).add(t)}),l}(e,a))})},[t,e])}},93809:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(30857),o=a(35297);function r(e,t){const a=void 0===t,r=(0,n.li)(a),i=(0,n.li)(),l=(0,s.A)();return(0,o.A)(()=>{a||(r.current=!1,i.current&&(clearTimeout(i.current),i.current=void 0))},e),(0,n.vJ)(()=>{if(a||r.current)return;const e=()=>{r.current=!0,l()};t>0?i.current=window.setTimeout(e,t):e()},e),r.current}},95362:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(37836);const s=10,o=1e3;let r=[],i=!1;function l(e,t){r.push({url:e,filename:t}),i||(i=!0,setTimeout(async()=>{await async function(){let e=0;for(const t of r)c(t),e++,e===s&&(await(0,n.v7)(o),e=0);r=[]}(),i=!1},o))}function c({url:e,filename:t}){const a=document.createElement("a");a.href=e,a.target="_blank",a.rel="noopener noreferrer",a.download=t;try{a.click()}catch(e){console.error(e)}}},95704:(e,t,a)=>{"use strict";a.d(t,{h:()=>d});var n=a(23174),s=a(51580);const o=262144,r=5242879,i=new Map,l=new Map,c=new Map;async function*d(e,t=0,a=o){const d=e.match(/fileSize=(\d+)/);let m;for(m=d?d&&Number(d[1]):l.get(e);;){if(m&&t>=m)return;let o=t+a-1;m&&o>m&&(o=m-1);const d=`${e}:${t}-${o}`;let u=i.get(d);if(!u){let a=c.get(d);a||(a=(0,s.px)("downloadMedia",{mediaFormat:n.qZ.Progressive,url:e,start:t,end:o}),c.set(d,a));const p=await a.finally(()=>{c.delete(d)});if(!p?.arrayBuffer)return;p.fullSize&&!m&&(m=p.fullSize,l.set(e,p.fullSize)),u=p.arrayBuffer,o<=r&&i.set(d,p.arrayBuffer)}yield u,t=o+1}}},97046:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(s.ar.Extra,"MuteChatModal",!t);return a?n.Ay.createElement(a,e):void 0}},97967:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(84051),s=a(80089),o=a(80464);const r=e=>{const{isOpen:t}=e,a=(0,o.A)(s.ar.Extra,"ChatFolderModal",!t);return a?n.Ay.createElement(a,e):void 0}},98196:()=>{},99299:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(96540);class s extends n.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by ErrorBoundary:",e,t)}render(){const{hasError:e}=this.state,{children:t}=this.props;return e?null:t}}const o=s}}]);
//# sourceMappingURL=9533.bccaf98f21ebb60f778d.js.map